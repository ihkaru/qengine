import{S as Ah}from"./index.6100804f.js";var Lh={exports:{}};/*!
 * surveyjs - Survey JavaScript library v1.11.12
 * Copyright (c) 2015-2024 Devsoft Baltic OÃœ  - http://surveyjs.io/
 * License: MIT (http://www.opensource.org/licenses/mit-license.php)
 */(function(Ma,Mh){(function(h,m){Ma.exports=m()})(Ah,function(){return function(S){var h={};function m(R){if(h[R])return h[R].exports;var D=h[R]={i:R,l:!1,exports:{}};return S[R].call(D.exports,D,D.exports,m),D.l=!0,D.exports}return m.m=S,m.c=h,m.d=function(R,D,P){m.o(R,D)||Object.defineProperty(R,D,{enumerable:!0,get:P})},m.r=function(R){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(R,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(R,"__esModule",{value:!0})},m.t=function(R,D){if(D&1&&(R=m(R)),D&8||D&4&&typeof R=="object"&&R&&R.__esModule)return R;var P=Object.create(null);if(m.r(P),Object.defineProperty(P,"default",{enumerable:!0,value:R}),D&2&&typeof R!="string")for(var se in R)m.d(P,se,function(z){return R[z]}.bind(null,se));return P},m.n=function(R){var D=R&&R.__esModule?function(){return R.default}:function(){return R};return m.d(D,"a",D),D},m.o=function(R,D){return Object.prototype.hasOwnProperty.call(R,D)},m.p="",m(m.s="./src/entries/core.ts")}({"./packages/survey-core/src/images sync \\.svg$":function(S,h,m){var R={"./ArrowDown_34x34.svg":"./packages/survey-core/src/images/ArrowDown_34x34.svg","./ArrowLeft.svg":"./packages/survey-core/src/images/ArrowLeft.svg","./ArrowRight.svg":"./packages/survey-core/src/images/ArrowRight.svg","./Arrow_downGREY_10x10.svg":"./packages/survey-core/src/images/Arrow_downGREY_10x10.svg","./ChangeCamera.svg":"./packages/survey-core/src/images/ChangeCamera.svg","./ChooseFile.svg":"./packages/survey-core/src/images/ChooseFile.svg","./Clear.svg":"./packages/survey-core/src/images/Clear.svg","./CloseCamera.svg":"./packages/survey-core/src/images/CloseCamera.svg","./DefaultFile.svg":"./packages/survey-core/src/images/DefaultFile.svg","./Delete.svg":"./packages/survey-core/src/images/Delete.svg","./Down_34x34.svg":"./packages/survey-core/src/images/Down_34x34.svg","./Left.svg":"./packages/survey-core/src/images/Left.svg","./ModernBooleanCheckChecked.svg":"./packages/survey-core/src/images/ModernBooleanCheckChecked.svg","./ModernBooleanCheckInd.svg":"./packages/survey-core/src/images/ModernBooleanCheckInd.svg","./ModernBooleanCheckUnchecked.svg":"./packages/survey-core/src/images/ModernBooleanCheckUnchecked.svg","./ModernCheck.svg":"./packages/survey-core/src/images/ModernCheck.svg","./ModernRadio.svg":"./packages/survey-core/src/images/ModernRadio.svg","./More.svg":"./packages/survey-core/src/images/More.svg","./NavMenu_24x24.svg":"./packages/survey-core/src/images/NavMenu_24x24.svg","./ProgressButton.svg":"./packages/survey-core/src/images/ProgressButton.svg","./ProgressButtonV2.svg":"./packages/survey-core/src/images/ProgressButtonV2.svg","./RemoveFile.svg":"./packages/survey-core/src/images/RemoveFile.svg","./Right.svg":"./packages/survey-core/src/images/Right.svg","./SearchClear.svg":"./packages/survey-core/src/images/SearchClear.svg","./ShowCamera.svg":"./packages/survey-core/src/images/ShowCamera.svg","./TakePicture.svg":"./packages/survey-core/src/images/TakePicture.svg","./TakePicture_24x24.svg":"./packages/survey-core/src/images/TakePicture_24x24.svg","./TimerCircle.svg":"./packages/survey-core/src/images/TimerCircle.svg","./V2Check.svg":"./packages/survey-core/src/images/V2Check.svg","./V2Check_24x24.svg":"./packages/survey-core/src/images/V2Check_24x24.svg","./V2DragElement_16x16.svg":"./packages/survey-core/src/images/V2DragElement_16x16.svg","./back-to-panel_16x16.svg":"./packages/survey-core/src/images/back-to-panel_16x16.svg","./chevron.svg":"./packages/survey-core/src/images/chevron.svg","./clear_16x16.svg":"./packages/survey-core/src/images/clear_16x16.svg","./close_16x16.svg":"./packages/survey-core/src/images/close_16x16.svg","./collapseDetail.svg":"./packages/survey-core/src/images/collapseDetail.svg","./drag-n-drop.svg":"./packages/survey-core/src/images/drag-n-drop.svg","./expandDetail.svg":"./packages/survey-core/src/images/expandDetail.svg","./full-screen_16x16.svg":"./packages/survey-core/src/images/full-screen_16x16.svg","./loading.svg":"./packages/survey-core/src/images/loading.svg","./minimize_16x16.svg":"./packages/survey-core/src/images/minimize_16x16.svg","./next_16x16.svg":"./packages/survey-core/src/images/next_16x16.svg","./no-image.svg":"./packages/survey-core/src/images/no-image.svg","./ranking-arrows.svg":"./packages/survey-core/src/images/ranking-arrows.svg","./ranking-dash.svg":"./packages/survey-core/src/images/ranking-dash.svg","./rating-star-2.svg":"./packages/survey-core/src/images/rating-star-2.svg","./rating-star-small-2.svg":"./packages/survey-core/src/images/rating-star-small-2.svg","./rating-star-small.svg":"./packages/survey-core/src/images/rating-star-small.svg","./rating-star.svg":"./packages/survey-core/src/images/rating-star.svg","./restore_16x16.svg":"./packages/survey-core/src/images/restore_16x16.svg","./search.svg":"./packages/survey-core/src/images/search.svg"};function D(se){var z=P(se);return m(z)}function P(se){if(!m.o(R,se)){var z=new Error("Cannot find module '"+se+"'");throw z.code="MODULE_NOT_FOUND",z}return R[se]}D.keys=function(){return Object.keys(R)},D.resolve=P,S.exports=D,D.id="./packages/survey-core/src/images sync \\.svg$"},"./packages/survey-core/src/images/ArrowDown_34x34.svg":function(S,h){S.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 34 34" xml:space="preserve"><polygon class="st0" points="12,16 14,14 17,17 20,14 22,16 17,21 "></polygon></svg>'},"./packages/survey-core/src/images/ArrowLeft.svg":function(S,h){S.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M15 8.99999H4.39998L8.69998 13.3L7.29998 14.7L0.599976 7.99999L7.29998 1.29999L8.69998 2.69999L4.39998 6.99999H15V8.99999Z"></path></svg>'},"./packages/survey-core/src/images/ArrowRight.svg":function(S,h){S.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M1 6.99999H11.6L7.3 2.69999L8.7 1.29999L15.4 7.99999L8.7 14.7L7.3 13.3L11.6 8.99999H1V6.99999Z"></path></svg>'},"./packages/survey-core/src/images/Arrow_downGREY_10x10.svg":function(S,h){S.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 10 10" xml:space="preserve"><polygon class="st0" points="2,2 0,4 5,9 10,4 8,2 5,5 "></polygon></svg>'},"./packages/survey-core/src/images/ChangeCamera.svg":function(S,h){S.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M23 12.0037C23 14.2445 21.7794 16.3052 19.5684 17.8257C19.3984 17.9458 19.1983 18.0058 19.0082 18.0058C18.688 18.0058 18.3779 17.8557 18.1778 17.5756C17.8677 17.1155 17.9777 16.4953 18.4379 16.1852C20.0887 15.0448 21.0091 13.5643 21.0091 12.0138C21.0091 8.70262 16.9673 6.01171 12.005 6.01171C11.4948 6.01171 10.9945 6.04172 10.5043 6.09173L11.7149 7.30215C12.105 7.69228 12.105 8.32249 11.7149 8.71263C11.5148 8.9127 11.2647 9.00273 11.0045 9.00273C10.7444 9.00273 10.4943 8.90269 10.2942 8.71263L6.58254 5.00136L10.2842 1.2901C10.6744 0.899964 11.3047 0.899964 11.6949 1.2901C12.085 1.68023 12.085 2.31045 11.6949 2.70058L10.3042 4.09105C10.8545 4.03103 11.4147 4.00102 11.985 4.00102C18.0578 4.00102 22.99 7.59225 22.99 12.0037H23ZM12.2851 15.2949C11.895 15.685 11.895 16.3152 12.2851 16.7054L13.4957 17.9158C13.0055 17.9758 12.4952 17.9958 11.995 17.9958C7.03274 17.9958 2.99091 15.3049 2.99091 11.9937C2.99091 10.4332 3.90132 8.95271 5.56207 7.82232C6.02228 7.51222 6.13233 6.89201 5.82219 6.43185C5.51205 5.97169 4.89177 5.86166 4.43156 6.17176C2.22055 7.69228 1 9.76299 1 11.9937C1 16.4052 5.93224 19.9965 12.005 19.9965C12.5753 19.9965 13.1355 19.9665 13.6858 19.9064L12.2951 21.2969C11.905 21.6871 11.905 22.3173 12.2951 22.7074C12.4952 22.9075 12.7453 22.9975 13.0055 22.9975C13.2656 22.9975 13.5157 22.8975 13.7158 22.7074L17.4275 18.9961L13.7158 15.2849C13.3256 14.8947 12.6953 14.8947 12.3051 15.2849L12.2851 15.2949Z"></path></svg>'},"./packages/survey-core/src/images/ChooseFile.svg":function(S,h){S.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M22 9V7C22 5.9 21.1 5 20 5H12L10 3H4C2.9 3 2 3.9 2 5V9V10V21H22L24 9H22ZM4 5H9.2L10.6 6.4L11.2 7H12H20V9H4V5ZM20.3 19H4V11H21.6L20.3 19Z"></path></svg>'},"./packages/survey-core/src/images/Clear.svg":function(S,h){S.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M22.6 8.6L16.4 2.4C16 2 15.5 1.8 15 1.8C14.5 1.8 14 2 13.6 2.4L1.4 14.6C0.600003 15.4 0.600003 16.6 1.4 17.4L6 22H12L22.6 11.4C23.3 10.6 23.3 9.3 22.6 8.6ZM11.1 20H6.8L2.8 16L6.2 12.6L12.4 18.8L11.1 20ZM13.8 17.4L7.6 11.2L15 3.8L21.2 10L13.8 17.4ZM16 20H23V22H14L16 20Z"></path></svg>'},"./packages/survey-core/src/images/CloseCamera.svg":function(S,h){S.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13.41 12L20.7 4.71C21.09 4.32 21.09 3.69 20.7 3.3C20.31 2.91 19.68 2.91 19.29 3.3L12 10.59L4.71 3.29C4.32 2.9 3.68 2.9 3.29 3.29C2.9 3.68 2.9 4.32 3.29 4.71L10.58 12L3.29 19.29C2.9 19.68 2.9 20.31 3.29 20.7C3.49 20.9 3.74 20.99 4 20.99C4.26 20.99 4.51 20.89 4.71 20.7L12 13.41L19.29 20.7C19.49 20.9 19.74 20.99 20 20.99C20.26 20.99 20.51 20.89 20.71 20.7C21.1 20.31 21.1 19.68 20.71 19.29L13.42 12H13.41Z"></path></svg>'},"./packages/survey-core/src/images/DefaultFile.svg":function(S,h){S.exports='<svg viewBox="0 0 56 68" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_9011_41219)"><path d="M54.83 10.83L45.17 1.17C44.7982 0.798664 44.357 0.504208 43.8714 0.303455C43.3858 0.102703 42.8654 -0.000411943 42.34 1.2368e-06H6C4.4087 1.2368e-06 2.88257 0.632142 1.75735 1.75736C0.632136 2.88258 0 4.4087 0 6V62C0 63.5913 0.632136 65.1174 1.75735 66.2426C2.88257 67.3679 4.4087 68 6 68H50C51.5913 68 53.1174 67.3679 54.2426 66.2426C55.3679 65.1174 56 63.5913 56 62V13.66C56.0004 13.1346 55.8973 12.6142 55.6965 12.1286C55.4958 11.643 55.2013 11.2018 54.83 10.83ZM44 2.83L53.17 12H48C46.9391 12 45.9217 11.5786 45.1716 10.8284C44.4214 10.0783 44 9.06087 44 8V2.83ZM54 62C54 63.0609 53.5786 64.0783 52.8284 64.8284C52.0783 65.5786 51.0609 66 50 66H6C4.93913 66 3.92172 65.5786 3.17157 64.8284C2.42142 64.0783 2 63.0609 2 62V6C2 4.93914 2.42142 3.92172 3.17157 3.17157C3.92172 2.42143 4.93913 2 6 2H42V8C42 9.5913 42.6321 11.1174 43.7574 12.2426C44.8826 13.3679 46.4087 14 48 14H54V62ZM14 24H42V26H14V24ZM14 30H42V32H14V30ZM14 36H42V38H14V36ZM14 42H42V44H14V42Z" fill="#909090"></path></g><defs><clipPath id="clip0_9011_41219"><rect width="56" height="68" fill="white"></rect></clipPath></defs></svg>'},"./packages/survey-core/src/images/Delete.svg":function(S,h){S.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M22 4H20H16V2C16 0.9 15.1 0 14 0H10C8.9 0 8 0.9 8 2V4H4H2V6H4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V6H22V4ZM10 2H14V4H10V2ZM18 20H6V6H8H16H18V20ZM14 8H16V18H14V8ZM11 8H13V18H11V8ZM8 8H10V18H8V8Z"></path></svg>'},"./packages/survey-core/src/images/Down_34x34.svg":function(S,h){S.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 34 34" xml:space="preserve"><g><path class="st0" d="M33,34H0V0h33c0.6,0,1,0.4,1,1v32C34,33.6,33.6,34,33,34z"></path><polygon class="st1" points="12,16 14,14 17,17 20,14 22,16 17,21 "></polygon></g></svg>'},"./packages/survey-core/src/images/Left.svg":function(S,h){S.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 16 16" xml:space="preserve"><polygon points="11,12 9,14 3,8 9,2 11,4 7,8 "></polygon></svg>'},"./packages/survey-core/src/images/ModernBooleanCheckChecked.svg":function(S,h){S.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><polygon points="19,10 14,10 14,5 10,5 10,10 5,10 5,14 10,14 10,19 14,19 14,14 19,14 "></polygon></svg>'},"./packages/survey-core/src/images/ModernBooleanCheckInd.svg":function(S,h){S.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><path d="M22,0H2C0.9,0,0,0.9,0,2v20c0,1.1,0.9,2,2,2h20c1.1,0,2-0.9,2-2V2C24,0.9,23.1,0,22,0z M21,18L6,3h15V18z M3,6l15,15H3V6z"></path></svg>'},"./packages/survey-core/src/images/ModernBooleanCheckUnchecked.svg":function(S,h){S.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><rect x="5" y="10" width="14" height="4"></rect></svg>'},"./packages/survey-core/src/images/ModernCheck.svg":function(S,h){S.exports='<svg viewBox="0 0 24 24"><path d="M5,13l2-2l3,3l7-7l2,2l-9,9L5,13z"></path></svg>'},"./packages/survey-core/src/images/ModernRadio.svg":function(S,h){S.exports='<svg viewBox="-12 -12 24 24"><circle r="6" cx="0" cy="0"></circle></svg>'},"./packages/survey-core/src/images/More.svg":function(S,h){S.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M6 12C6 13.1 5.1 14 4 14C2.9 14 2 13.1 2 12C2 10.9 2.9 10 4 10C5.1 10 6 10.9 6 12ZM12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10ZM20 10C18.9 10 18 10.9 18 12C18 13.1 18.9 14 20 14C21.1 14 22 13.1 22 12C22 10.9 21.1 10 20 10Z"></path></svg>'},"./packages/survey-core/src/images/NavMenu_24x24.svg":function(S,h){S.exports='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16 7H2V5H16V7ZM2 11V13H22V11H2ZM2 19H10V17H2V19Z" fill="black" fill-opacity="0.45"></path></svg>'},"./packages/survey-core/src/images/ProgressButton.svg":function(S,h){S.exports='<svg viewBox="0 0 10 10"><polygon points="2,2 0,4 5,9 10,4 8,2 5,5 "></polygon></svg>'},"./packages/survey-core/src/images/ProgressButtonV2.svg":function(S,h){S.exports='<svg viewBox="0 0 16 16"><path d="M15 8.99999H4.39998L8.69998 13.3L7.29998 14.7L0.599976 7.99999L7.29998 1.29999L8.69998 2.69999L4.39998 6.99999H15V8.99999Z"></path></svg>'},"./packages/survey-core/src/images/RemoveFile.svg":function(S,h){S.exports='<svg viewBox="0 0 16 16"><path d="M8,2C4.7,2,2,4.7,2,8s2.7,6,6,6s6-2.7,6-6S11.3,2,8,2z M11,10l-1,1L8,9l-2,2l-1-1l2-2L5,6l1-1l2,2l2-2l1,1L9,8 L11,10z"></path></svg>'},"./packages/survey-core/src/images/Right.svg":function(S,h){S.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 16 16" xml:space="preserve"><polygon points="5,4 7,2 13,8 7,14 5,12 9,8 "></polygon></svg>'},"./packages/survey-core/src/images/SearchClear.svg":function(S,h){S.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M13.35 3.34999L12.65 2.64999L8.05002 7.24999L3.35002 2.64999L2.65002 3.34999L7.25002 8.04999L2.65002 12.65L3.35002 13.35L8.05002 8.74999L12.65 13.35L13.35 12.65L8.75002 8.04999L13.35 3.34999Z"></path></svg>'},"./packages/survey-core/src/images/ShowCamera.svg":function(S,h){S.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.01 4H18.4C18.2 4 18.01 3.9 17.9 3.73L16.97 2.34C16.41 1.5 15.48 1 14.47 1H9.54C8.53 1 7.6 1.5 7.04 2.34L6.11 3.73C6 3.9 5.81 4 5.61 4H4C2.35 4 1 5.35 1 7V19C1 20.65 2.35 22 4 22H20C21.65 22 23 20.65 23 19V7C23 5.35 21.65 4 20 4H20.01ZM21.01 19C21.01 19.55 20.56 20 20.01 20H4.01C3.46 20 3.01 19.55 3.01 19V7C3.01 6.45 3.46 6 4.01 6H5.62C6.49 6 7.3 5.56 7.79 4.84L8.72 3.45C8.91 3.17 9.22 3 9.55 3H14.48C14.81 3 15.13 3.17 15.31 3.45L16.24 4.84C16.72 5.56 17.54 6 18.41 6H20.02C20.57 6 21.02 6.45 21.02 7V19H21.01ZM12.01 6C8.7 6 6.01 8.69 6.01 12C6.01 15.31 8.7 18 12.01 18C15.32 18 18.01 15.31 18.01 12C18.01 8.69 15.32 6 12.01 6ZM12.01 16C9.8 16 8.01 14.21 8.01 12C8.01 9.79 9.8 8 12.01 8C14.22 8 16.01 9.79 16.01 12C16.01 14.21 14.22 16 12.01 16ZM13.01 10C13.01 10.55 12.56 11 12.01 11C11.46 11 11.01 11.45 11.01 12C11.01 12.55 10.56 13 10.01 13C9.46 13 9.01 12.55 9.01 12C9.01 10.35 10.36 9 12.01 9C12.56 9 13.01 9.45 13.01 10Z" fill="black" fill-opacity="0.45"></path></svg>'},"./packages/survey-core/src/images/TakePicture.svg":function(S,h){S.exports='<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M27 6H23.8C23.34 6 22.92 5.77 22.66 5.39L22.25 4.78C21.51 3.66 20.26 3 18.92 3H13.06C11.72 3 10.48 3.67 9.73 4.78L9.32 5.39C9.07 5.77 8.64 6 8.18 6H4.98C2.79 6 1 7.79 1 10V24C1 26.21 2.79 28 5 28H27C29.21 28 31 26.21 31 24V10C31 7.79 29.21 6 27 6ZM29 24C29 25.1 28.1 26 27 26H5C3.9 26 3 25.1 3 24V10C3 8.9 3.9 8 5 8H8.2C9.33 8 10.38 7.44 11 6.5L11.41 5.89C11.78 5.33 12.41 5 13.07 5H18.93C19.6 5 20.22 5.33 20.59 5.89L21 6.5C21.62 7.44 22.68 8 23.8 8H27C28.1 8 29 8.9 29 10V24ZM16 9C12.13 9 9 12.13 9 16C9 19.87 12.13 23 16 23C19.87 23 23 19.87 23 16C23 12.13 19.87 9 16 9ZM16 21C13.24 21 11 18.76 11 16C11 13.24 13.24 11 16 11C18.76 11 21 13.24 21 16C21 18.76 18.76 21 16 21ZM17 13C17 13.55 16.55 14 16 14C14.9 14 14 14.9 14 16C14 16.55 13.55 17 13 17C12.45 17 12 16.55 12 16C12 13.79 13.79 12 16 12C16.55 12 17 12.45 17 13Z"></path></svg>'},"./packages/survey-core/src/images/TakePicture_24x24.svg":function(S,h){S.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.01 4H18.4C18.2 4 18.01 3.9 17.9 3.73L16.97 2.34C16.41 1.5 15.48 1 14.47 1H9.54C8.53 1 7.6 1.5 7.04 2.34L6.11 3.73C6 3.9 5.81 4 5.61 4H4C2.35 4 1 5.35 1 7V19C1 20.65 2.35 22 4 22H20C21.65 22 23 20.65 23 19V7C23 5.35 21.65 4 20 4H20.01ZM21.01 19C21.01 19.55 20.56 20 20.01 20H4.01C3.46 20 3.01 19.55 3.01 19V7C3.01 6.45 3.46 6 4.01 6H5.62C6.49 6 7.3 5.56 7.79 4.84L8.72 3.45C8.91 3.17 9.22 3 9.55 3H14.48C14.81 3 15.13 3.17 15.31 3.45L16.24 4.84C16.72 5.56 17.54 6 18.41 6H20.02C20.57 6 21.02 6.45 21.02 7V19H21.01ZM12.01 6C8.7 6 6.01 8.69 6.01 12C6.01 15.31 8.7 18 12.01 18C15.32 18 18.01 15.31 18.01 12C18.01 8.69 15.32 6 12.01 6ZM12.01 16C9.8 16 8.01 14.21 8.01 12C8.01 9.79 9.8 8 12.01 8C14.22 8 16.01 9.79 16.01 12C16.01 14.21 14.22 16 12.01 16ZM13.01 10C13.01 10.55 12.56 11 12.01 11C11.46 11 11.01 11.45 11.01 12C11.01 12.55 10.56 13 10.01 13C9.46 13 9.01 12.55 9.01 12C9.01 10.35 10.36 9 12.01 9C12.56 9 13.01 9.45 13.01 10Z"></path></svg>'},"./packages/survey-core/src/images/TimerCircle.svg":function(S,h){S.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 160 160"><circle cx="80" cy="80" r="70" style="stroke: var(--sd-timer-stroke-background-color); stroke-width: var(--sd-timer-stroke-background-width)" stroke-dasharray="none" stroke-dashoffset="none"></circle><circle cx="80" cy="80" r="70"></circle></svg>'},"./packages/survey-core/src/images/V2Check.svg":function(S,h){S.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.00001 15.8L2.60001 10.4L4.00001 9L8.00001 13L16 5L17.4 6.4L8.00001 15.8Z"></path></svg>'},"./packages/survey-core/src/images/V2Check_24x24.svg":function(S,h){S.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9 20.1L1 12L3.1 9.9L9 15.9L20.9 4L23 6.1L9 20.1Z"></path></svg>'},"./packages/survey-core/src/images/V2DragElement_16x16.svg":function(S,h){S.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M2 4C2 3.73478 2.10536 3.48043 2.29289 3.29289C2.48043 3.10536 2.73478 3 3 3H13C13.2652 3 13.5196 3.10536 13.7071 3.29289C13.8946 3.48043 14 3.73478 14 4C14 4.26522 13.8946 4.51957 13.7071 4.70711C13.5196 4.89464 13.2652 5 13 5H3C2.73478 5 2.48043 4.89464 2.29289 4.70711C2.10536 4.51957 2 4.26522 2 4ZM13 7H3C2.73478 7 2.48043 7.10536 2.29289 7.29289C2.10536 7.48043 2 7.73478 2 8C2 8.26522 2.10536 8.51957 2.29289 8.70711C2.48043 8.89464 2.73478 9 3 9H13C13.2652 9 13.5196 8.89464 13.7071 8.70711C13.8946 8.51957 14 8.26522 14 8C14 7.73478 13.8946 7.48043 13.7071 7.29289C13.5196 7.10536 13.2652 7 13 7ZM13 11H3C2.73478 11 2.48043 11.1054 2.29289 11.2929C2.10536 11.4804 2 11.7348 2 12C2 12.2652 2.10536 12.5196 2.29289 12.7071C2.48043 12.8946 2.73478 13 3 13H13C13.2652 13 13.5196 12.8946 13.7071 12.7071C13.8946 12.5196 14 12.2652 14 12C14 11.7348 13.8946 11.4804 13.7071 11.2929C13.5196 11.1054 13.2652 11 13 11Z"></path></svg>'},"./packages/survey-core/src/images/back-to-panel_16x16.svg":function(S,h){S.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M15.0001 6C15.0001 6.55 14.5501 7 14.0001 7H10.0001C9.45006 7 9.00006 6.55 9.00006 6V2C9.00006 1.45 9.45006 1 10.0001 1C10.5501 1 11.0001 1.45 11.0001 2V3.59L13.2901 1.29C13.4901 1.09 13.7401 1 14.0001 1C14.2601 1 14.5101 1.1 14.7101 1.29C15.1001 1.68 15.1001 2.31 14.7101 2.7L12.4201 4.99H14.0101C14.5601 4.99 15.0101 5.44 15.0101 5.99L15.0001 6ZM6.00006 9H2.00006C1.45006 9 1.00006 9.45 1.00006 10C1.00006 10.55 1.45006 11 2.00006 11H3.59006L1.29006 13.29C0.900059 13.68 0.900059 14.31 1.29006 14.7C1.68006 15.09 2.31006 15.09 2.70006 14.7L4.99006 12.41V14C4.99006 14.55 5.44006 15 5.99006 15C6.54006 15 6.99006 14.55 6.99006 14V10C6.99006 9.45 6.54006 9 5.99006 9H6.00006Z"></path></svg>'},"./packages/survey-core/src/images/chevron.svg":function(S,h){S.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 15L17 10H7L12 15Z"></path></svg>'},"./packages/survey-core/src/images/clear_16x16.svg":function(S,h){S.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M13.35 3.34999L12.65 2.64999L8.05002 7.24999L3.35002 2.64999L2.65002 3.34999L7.25002 8.04999L2.65002 12.65L3.35002 13.35L8.05002 8.74999L12.65 13.35L13.35 12.65L8.75002 8.04999L13.35 3.34999Z"></path></svg>'},"./packages/survey-core/src/images/close_16x16.svg":function(S,h){S.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M9.43 8.0025L13.7 3.7225C14.09 3.3325 14.09 2.6925 13.7 2.2925C13.31 1.9025 12.67 1.9025 12.27 2.2925L7.99 6.5725L3.72 2.3025C3.33 1.9025 2.69 1.9025 2.3 2.3025C1.9 2.6925 1.9 3.3325 2.3 3.7225L6.58 8.0025L2.3 12.2825C1.91 12.6725 1.91 13.3125 2.3 13.7125C2.69 14.1025 3.33 14.1025 3.73 13.7125L8.01 9.4325L12.29 13.7125C12.68 14.1025 13.32 14.1025 13.72 13.7125C14.11 13.3225 14.11 12.6825 13.72 12.2825L9.44 8.0025H9.43Z"></path></svg>'},"./packages/survey-core/src/images/collapseDetail.svg":function(S,h){S.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M13 7H3V9H13V7Z"></path></svg>'},"./packages/survey-core/src/images/drag-n-drop.svg":function(S,h){S.exports='<svg viewBox="0 0 10 16" xmlns="http://www.w3.org/2000/svg"><path d="M6 2C6 0.9 6.9 0 8 0C9.1 0 10 0.9 10 2C10 3.1 9.1 4 8 4C6.9 4 6 3.1 6 2ZM2 0C0.9 0 0 0.9 0 2C0 3.1 0.9 4 2 4C3.1 4 4 3.1 4 2C4 0.9 3.1 0 2 0ZM8 6C6.9 6 6 6.9 6 8C6 9.1 6.9 10 8 10C9.1 10 10 9.1 10 8C10 6.9 9.1 6 8 6ZM2 6C0.9 6 0 6.9 0 8C0 9.1 0.9 10 2 10C3.1 10 4 9.1 4 8C4 6.9 3.1 6 2 6ZM8 12C6.9 12 6 12.9 6 14C6 15.1 6.9 16 8 16C9.1 16 10 15.1 10 14C10 12.9 9.1 12 8 12ZM2 12C0.9 12 0 12.9 0 14C0 15.1 0.9 16 2 16C3.1 16 4 15.1 4 14C4 12.9 3.1 12 2 12Z"></path></svg>'},"./packages/survey-core/src/images/expandDetail.svg":function(S,h){S.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M13 7H9V3H7V7H3V9H7V13H9V9H13V7Z"></path></svg>'},"./packages/survey-core/src/images/full-screen_16x16.svg":function(S,h){S.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M6.71 10.71L4.42 13H6.01C6.56 13 7.01 13.45 7.01 14C7.01 14.55 6.56 15 6.01 15H2C1.45 15 1 14.55 1 14V10C1 9.45 1.45 9 2 9C2.55 9 3 9.45 3 10V11.59L5.29 9.3C5.68 8.91 6.31 8.91 6.7 9.3C7.09 9.69 7.09 10.32 6.7 10.71H6.71ZM14 1H10C9.45 1 9 1.45 9 2C9 2.55 9.45 3 10 3H11.59L9.3 5.29C8.91 5.68 8.91 6.31 9.3 6.7C9.5 6.9 9.75 6.99 10.01 6.99C10.27 6.99 10.52 6.89 10.72 6.7L13.01 4.41V6C13.01 6.55 13.46 7 14.01 7C14.56 7 15.01 6.55 15.01 6V2C15.01 1.45 14.56 1 14.01 1H14Z"></path></svg>'},"./packages/survey-core/src/images/loading.svg":function(S,h){S.exports='<svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_885_24957)"><path opacity="0.1" d="M24 40C15.18 40 8 32.82 8 24C8 15.18 15.18 8 24 8C32.82 8 40 15.18 40 24C40 32.82 32.82 40 24 40ZM24 12C17.38 12 12 17.38 12 24C12 30.62 17.38 36 24 36C30.62 36 36 30.62 36 24C36 17.38 30.62 12 24 12Z" fill="black" fill-opacity="0.91"></path><path d="M10 26C8.9 26 8 25.1 8 24C8 15.18 15.18 8 24 8C25.1 8 26 8.9 26 10C26 11.1 25.1 12 24 12C17.38 12 12 17.38 12 24C12 25.1 11.1 26 10 26Z" fill="#19B394"></path></g><defs><clipPath id="clip0_885_24957"><rect width="32" height="32" fill="white" transform="translate(8 8)"></rect></clipPath></defs></svg>'},"./packages/survey-core/src/images/minimize_16x16.svg":function(S,h){S.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M13 9H3C2.45 9 2 8.55 2 8C2 7.45 2.45 7 3 7H13C13.55 7 14 7.45 14 8C14 8.55 13.55 9 13 9Z"></path></svg>'},"./packages/survey-core/src/images/next_16x16.svg":function(S,h){S.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M5.64648 12.6465L6.34648 13.3465L11.7465 8.04648L6.34648 2.64648L5.64648 3.34648L10.2465 8.04648L5.64648 12.6465Z"></path></svg>'},"./packages/survey-core/src/images/no-image.svg":function(S,h){S.exports='<svg viewBox="0 0 48 48"><g opacity="0.5"><path d="M14 17.01C14 16.4167 14.1759 15.8366 14.5056 15.3433C14.8352 14.8499 15.3038 14.4654 15.8519 14.2384C16.4001 14.0113 17.0033 13.9519 17.5853 14.0676C18.1672 14.1834 18.7018 14.4691 19.1213 14.8887C19.5409 15.3082 19.8266 15.8428 19.9424 16.4247C20.0581 17.0067 19.9987 17.6099 19.7716 18.1581C19.5446 18.7062 19.1601 19.1748 18.6667 19.5044C18.1734 19.8341 17.5933 20.01 17 20.01C16.2044 20.01 15.4413 19.6939 14.8787 19.1313C14.3161 18.5687 14 17.8056 14 17.01ZM27.09 24.14L20 36.01H36L27.09 24.14ZM36.72 8.14L35.57 10.01H36C36.5304 10.01 37.0391 10.2207 37.4142 10.5958C37.7893 10.9709 38 11.4796 38 12.01V36.01C38 36.5404 37.7893 37.0491 37.4142 37.4242C37.0391 37.7993 36.5304 38.01 36 38.01H18.77L17.57 40.01H36C37.0609 40.01 38.0783 39.5886 38.8284 38.8384C39.5786 38.0883 40 37.0709 40 36.01V12.01C39.9966 11.0765 39.6668 10.1737 39.0678 9.45778C38.4688 8.74188 37.6382 8.25802 36.72 8.09V8.14ZM36.86 4.5L12.86 44.5L11.14 43.5L13.23 40.01H12C10.9391 40.01 9.92172 39.5886 9.17157 38.8384C8.42143 38.0883 8 37.0709 8 36.01V12.01C8 10.9491 8.42143 9.93172 9.17157 9.18157C9.92172 8.43143 10.9391 8.01 12 8.01H32.43L35.14 3.5L36.86 4.5ZM14.43 38.01L15.63 36.01H12L19 27.01L20.56 27.8L31.23 10.01H12C11.4696 10.01 10.9609 10.2207 10.5858 10.5958C10.2107 10.9709 10 11.4796 10 12.01V36.01C10 36.5404 10.2107 37.0491 10.5858 37.4242C10.9609 37.7993 11.4696 38.01 12 38.01H14.43Z"></path></g></svg>'},"./packages/survey-core/src/images/ranking-arrows.svg":function(S,h){S.exports='<svg viewBox="0 0 10 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 5L5 0L0 5H4V9H6V5H10Z"></path><path d="M6 19V15H4V19H0L5 24L10 19H6Z"></path></svg>'},"./packages/survey-core/src/images/ranking-dash.svg":function(S,h){S.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M13 7H3V9H13V7Z"></path></svg>'},"./packages/survey-core/src/images/rating-star-2.svg":function(S,h){S.exports='<svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><path d="M24 39.5057L11.7226 45.9839C10.4095 46.6739 8.87606 45.5622 9.12525 44.096L11.4734 30.373L1.54411 20.6556C0.480254 19.6207 1.06489 17.8095 2.53128 17.5986L16.2559 15.5957L22.3994 3.10891C23.0512 1.77685 24.9488 1.77685 25.6102 3.10891L31.7441 15.5957L45.4687 17.5986C46.9351 17.8095 47.5197 19.6207 46.4559 20.6556L36.5266 30.373L38.8748 44.096C39.1239 45.5622 37.5905 46.6835 36.2774 45.9839L24 39.5057Z" fill="none" stroke-width="2"></path><path d="M24.3981 33.1305L24 32.9206L23.6019 33.1305L15.8715 37.2059L17.3542 28.5663L17.43 28.1246L17.1095 27.8113L10.83 21.6746L19.4965 20.4049L19.9405 20.3399L20.1387 19.9373L24 12.0936L27.8613 19.9373L28.0595 20.3399L28.5035 20.4049L37.17 21.6746L30.8905 27.8113L30.57 28.1246L30.6458 28.5663L32.1285 37.2059L24.3981 33.1305Z" stroke-width="1.70746"></path></svg>'},"./packages/survey-core/src/images/rating-star-small-2.svg":function(S,h){S.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 19.3373L6.13001 22.4373C5.50001 22.7673 4.77001 22.2373 4.89001 21.5373L6.01001 14.9773L1.26001 10.3273C0.750007 9.83728 1.03001 8.96728 1.73001 8.86728L8.29001 7.90728L11.23 1.93728C11.54 1.29728 12.45 1.29728 12.77 1.93728L15.7 7.90728L22.26 8.86728C22.96 8.96728 23.24 9.83728 22.73 10.3273L17.98 14.9773L19.1 21.5373C19.22 22.2373 18.49 22.7773 17.86 22.4373L11.99 19.3373H12Z" fill="none" stroke-width="2"></path><path d="M12 15.9472L8.58001 17.7572L9.23001 13.9272L6.45001 11.2072L10.29 10.6472L12 7.17725L13.71 10.6472L17.55 11.2072L14.77 13.9272L15.42 17.7572L12 15.9472Z"></path></svg>'},"./packages/survey-core/src/images/rating-star-small.svg":function(S,h){S.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g><path d="M12 19.3373L6.13001 22.4373C5.50001 22.7673 4.77001 22.2373 4.89001 21.5373L6.01001 14.9773L1.26001 10.3273C0.750007 9.83728 1.03001 8.96728 1.73001 8.86728L8.29001 7.90728L11.23 1.93728C11.54 1.29728 12.45 1.29728 12.77 1.93728L15.7 7.90728L22.26 8.86728C22.96 8.96728 23.24 9.83728 22.73 10.3273L17.98 14.9773L19.1 21.5373C19.22 22.2373 18.49 22.7773 17.86 22.4373L11.99 19.3373H12Z"></path></g></svg>'},"./packages/survey-core/src/images/rating-star.svg":function(S,h){S.exports='<svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><g><path d="M24 39.5057L11.7226 45.9839C10.4095 46.6739 8.87606 45.5622 9.12525 44.096L11.4734 30.373L1.54411 20.6556C0.480254 19.6207 1.06489 17.8095 2.53128 17.5986L16.2559 15.5957L22.3994 3.10891C23.0512 1.77685 24.9488 1.77685 25.6102 3.10891L31.7441 15.5957L45.4687 17.5986C46.9351 17.8095 47.5197 19.6207 46.4559 20.6556L36.5266 30.373L38.8748 44.096C39.1239 45.5622 37.5905 46.6835 36.2774 45.9839L24 39.5057Z"></path></g></svg>'},"./packages/survey-core/src/images/restore_16x16.svg":function(S,h){S.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M12 13H4C2.9 13 2 12.1 2 11V5C2 3.9 2.9 3 4 3H12C13.1 3 14 3.9 14 5V11C14 12.1 13.1 13 12 13ZM4 5V11H12V5H4Z"></path></svg>'},"./packages/survey-core/src/images/search.svg":function(S,h){S.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M14 2C9.6 2 6 5.6 6 10C6 11.8 6.6 13.5 7.7 14.9L2.3 20.3C1.9 20.7 1.9 21.3 2.3 21.7C2.5 21.9 2.7 22 3 22C3.3 22 3.5 21.9 3.7 21.7L9.1 16.3C10.5 17.4 12.2 18 14 18C18.4 18 22 14.4 22 10C22 5.6 18.4 2 14 2ZM14 16C10.7 16 8 13.3 8 10C8 6.7 10.7 4 14 4C17.3 4 20 6.7 20 10C20 13.3 17.3 16 14 16Z"></path></svg>'},"./packages/survey-core/src/images/smiley sync \\.svg$":function(S,h,m){var R={"./average.svg":"./packages/survey-core/src/images/smiley/average.svg","./excellent.svg":"./packages/survey-core/src/images/smiley/excellent.svg","./good.svg":"./packages/survey-core/src/images/smiley/good.svg","./normal.svg":"./packages/survey-core/src/images/smiley/normal.svg","./not-good.svg":"./packages/survey-core/src/images/smiley/not-good.svg","./perfect.svg":"./packages/survey-core/src/images/smiley/perfect.svg","./poor.svg":"./packages/survey-core/src/images/smiley/poor.svg","./terrible.svg":"./packages/survey-core/src/images/smiley/terrible.svg","./very-good.svg":"./packages/survey-core/src/images/smiley/very-good.svg","./very-poor.svg":"./packages/survey-core/src/images/smiley/very-poor.svg"};function D(se){var z=P(se);return m(z)}function P(se){if(!m.o(R,se)){var z=new Error("Cannot find module '"+se+"'");throw z.code="MODULE_NOT_FOUND",z}return R[se]}D.keys=function(){return Object.keys(R)},D.resolve=P,S.exports=D,D.id="./packages/survey-core/src/images/smiley sync \\.svg$"},"./packages/survey-core/src/images/smiley/average.svg":function(S,h){S.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M7.00572 7C6.45572 7 6.00572 6.55 6.00572 6V2C6.00572 1.45 6.45572 1 7.00572 1C7.55572 1 8.00572 1.45 8.00572 2V6C8.00572 6.55 7.55572 7 7.00572 7ZM18.0057 6V2C18.0057 1.45 17.5557 1 17.0057 1C16.4557 1 16.0057 1.45 16.0057 2V6C16.0057 6.55 16.4557 7 17.0057 7C17.5557 7 18.0057 6.55 18.0057 6ZM19.9457 21.33C20.1257 20.81 19.8557 20.24 19.3357 20.05C14.5457 18.35 9.45572 18.35 4.66572 20.05C4.14572 20.23 3.87572 20.81 4.05572 21.33C4.23572 21.85 4.80572 22.12 5.33572 21.94C9.69572 20.4 14.3057 20.4 18.6657 21.94C18.7757 21.98 18.8857 22 18.9957 22C19.4057 22 19.7957 21.74 19.9357 21.33H19.9457Z"></path></svg>'},"./packages/survey-core/src/images/smiley/excellent.svg":function(S,h){S.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.01 24C6.85767 24 1.15509 20.96 0.0145752 14.16C-0.0354475 13.87 0.0445888 13.57 0.234675 13.35C0.424761 13.13 0.704888 13 0.995019 13H23.005C23.2951 13 23.5752 13.13 23.7653 13.35C23.9554 13.57 24.0354 13.87 23.9854 14.16C22.8549 20.95 17.1423 24 11.99 24H12.01ZM2.25559 15C3.61621 19.82 8.0182 22 12.01 22C16.0018 22 20.4038 19.82 21.7644 15H2.25559ZM8.00819 6V2C8.00819 1.45 7.55799 1 7.00774 1C6.45749 1 6.00729 1.45 6.00729 2V6C6.00729 6.55 6.45749 7 7.00774 7C7.55799 7 8.00819 6.55 8.00819 6ZM18.0127 6V2C18.0127 1.45 17.5625 1 17.0123 1C16.462 1 16.0118 1.45 16.0118 2V6C16.0118 6.55 16.462 7 17.0123 7C17.5625 7 18.0127 6.55 18.0127 6Z"></path></svg>'},"./packages/survey-core/src/images/smiley/good.svg":function(S,h){S.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.0022 23.99C11.452 23.99 11.0018 23.5402 11.0018 22.9904C11.0018 22.4407 11.452 21.9909 12.0022 21.9909C16.3137 21.9909 21.0755 19.472 22.0158 13.8344C22.1058 13.2947 22.616 12.9248 23.1662 13.0148C23.7064 13.1047 24.0765 13.6245 23.9865 14.1643C22.8561 20.9513 17.144 24 11.9922 24L12.0022 23.99ZM8.00072 5.99783V1.99957C8.00072 1.4498 7.55056 1 7.00036 1C6.45016 1 6 1.4498 6 1.99957V5.99783C6 6.54759 6.45016 6.99739 7.00036 6.99739C7.55056 6.99739 8.00072 6.54759 8.00072 5.99783ZM18.0043 5.99783V1.99957C18.0043 1.4498 17.5542 1 17.004 1C16.4538 1 16.0036 1.4498 16.0036 1.99957V5.99783C16.0036 6.54759 16.4538 6.99739 17.004 6.99739C17.5542 6.99739 18.0043 6.54759 18.0043 5.99783Z"></path></svg>'},"./packages/survey-core/src/images/smiley/normal.svg":function(S,h){S.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M7 7C6.45 7 6 6.55 6 6V2C6 1.45 6.45 1 7 1C7.55 1 8 1.45 8 2V6C8 6.55 7.55 7 7 7ZM18 6V2C18 1.45 17.55 1 17 1C16.45 1 16 1.45 16 2V6C16 6.55 16.45 7 17 7C17.55 7 18 6.55 18 6ZM21 21C21 20.45 20.55 20 20 20H4C3.45 20 3 20.45 3 21C3 21.55 3.45 22 4 22H20C20.55 22 21 21.55 21 21Z"></path></svg>'},"./packages/survey-core/src/images/smiley/not-good.svg":function(S,h){S.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M7.06927 7C6.51927 7 6.06927 6.55 6.06927 6V2C6.06927 1.45 6.51927 1 7.06927 1C7.61927 1 8.06927 1.45 8.06927 2V6C8.06927 6.55 7.61927 7 7.06927 7ZM18.0693 6V2C18.0693 1.45 17.6193 1 17.0693 1C16.5193 1 16.0693 1.45 16.0693 2V6C16.0693 6.55 16.5193 7 17.0693 7C17.6193 7 18.0693 6.55 18.0693 6ZM22.5693 21.9C23.0693 21.66 23.2793 21.07 23.0393 20.57C21.1093 16.52 16.9093 14 12.0693 14C7.22927 14 3.02927 16.52 1.09927 20.57C0.859273 21.07 1.06927 21.67 1.56927 21.9C2.06927 22.14 2.65927 21.93 2.89927 21.43C4.49927 18.08 8.00927 16 12.0593 16C16.1093 16 19.6293 18.08 21.2193 21.43C21.3893 21.79 21.7493 22 22.1193 22C22.2593 22 22.4093 21.97 22.5493 21.9H22.5693Z"></path></svg>'},"./packages/survey-core/src/images/smiley/perfect.svg":function(S,h){S.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.01 23C6.85721 23 1.15412 19.9621 0.0134987 13.1669C-0.0765501 12.6272 0.293651 12.1076 0.833944 12.0177C1.38424 11.9277 1.89452 12.2975 1.98457 12.8371C2.92508 18.4732 7.69767 20.9914 12 20.9914C16.3023 20.9914 21.0749 18.4732 22.0154 12.8371C22.1055 12.2975 22.6158 11.9277 23.1661 12.0177C23.7063 12.1076 24.0765 12.6272 23.9865 13.1669C22.8559 19.9521 17.1428 23 11.99 23H12.01ZM21.165 6.15177C22.3056 5.01257 22.3056 3.16386 21.165 2.02465L21.0049 1.85477C19.9143 0.765533 18.1633 0.725561 17.0227 1.71487C15.8821 0.715568 14.1312 0.765533 13.0406 1.85477L12.8705 2.01466C11.7299 3.15386 11.7299 5.00257 12.8705 6.14178L17.0227 10.2889L21.175 6.14178L21.165 6.15177ZM15.742 3.27378L17.0127 4.54289L18.2834 3.27378C18.6436 2.91403 19.2239 2.91403 19.5841 3.27378L19.7442 3.43367C20.1044 3.79342 20.1044 4.37301 19.7442 4.73276L17.0127 7.46086L14.2812 4.73276C13.921 4.37301 13.921 3.79342 14.2812 3.43367L14.4413 3.27378C14.6214 3.09391 14.8515 3.00397 15.0917 3.00397C15.3318 3.00397 15.5619 3.09391 15.742 3.27378ZM11.1595 6.15177C12.3002 5.01257 12.3002 3.16386 11.1595 2.02465L10.9995 1.85477C9.90886 0.765533 8.15792 0.725561 7.0173 1.71487C5.87668 0.715568 4.12573 0.765533 3.03514 1.85477L2.86505 2.01466C1.72443 3.15386 1.72443 5.00257 2.86505 6.14178L7.0173 10.2889L11.1695 6.14178L11.1595 6.15177ZM5.7366 3.27378L7.00729 4.54289L8.27798 3.27378C8.63818 2.91403 9.21849 2.91403 9.57869 3.27378L9.73877 3.43367C10.099 3.79342 10.099 4.37301 9.73877 4.73276L7.00729 7.46086L4.27581 4.73276C3.91562 4.37301 3.91562 3.79342 4.27581 3.43367L4.4359 3.27378C4.61599 3.09391 4.84612 3.00397 5.08625 3.00397C5.32638 3.00397 5.5565 3.09391 5.7366 3.27378Z"></path></svg>'},"./packages/survey-core/src/images/smiley/poor.svg":function(S,h){S.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M7.01915 7C6.46961 7 6.01998 6.55 6.01998 6V2C6.01998 1.45 6.46961 1 7.01915 1C7.56869 1 8.01832 1.45 8.01832 2V6C8.01832 6.55 7.56869 7 7.01915 7ZM18.01 6V2C18.01 1.45 17.5604 1 17.0108 1C16.4613 1 16.0117 1.45 16.0117 2V6C16.0117 6.55 16.4613 7 17.0108 7C17.5604 7 18.01 6.55 18.01 6ZM16.4213 21.58L18.01 19.99L19.2989 21.28C19.6886 21.67 20.3181 21.67 20.7077 21.28C21.0974 20.89 21.0974 20.26 20.7077 19.87L19.4188 18.58C18.6395 17.8 17.3705 17.8 16.5912 18.58L15.0025 20.17L13.4138 18.58C12.6345 17.8 11.3655 17.8 10.5862 18.58L8.9975 20.17L7.40883 18.58C6.62948 17.8 5.36053 17.8 4.58118 18.58L3.29226 19.87C2.90258 20.26 2.90258 20.89 3.29226 21.28C3.68193 21.67 4.31141 21.67 4.70108 21.28L5.99001 19.99L7.57868 21.58C8.35803 22.36 9.62698 22.36 10.4063 21.58L11.995 19.99L13.5837 21.58C13.9734 21.97 14.4829 22.16 14.9925 22.16C15.5021 22.16 16.0117 21.97 16.4013 21.58H16.4213Z"></path></svg>'},"./packages/survey-core/src/images/smiley/terrible.svg":function(S,h){S.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 4.9938C4 4.44362 4.45 3.99348 5 3.99348H6.59L5.3 2.70306C4.91 2.31293 4.91 1.68272 5.3 1.2926C5.69 0.902468 6.32 0.902468 6.71 1.2926L9.71 4.29357C9.8 4.3836 9.88 4.49364 9.93 4.62368C10.03 4.86376 10.03 5.14385 9.93 5.38393C9.88 5.50397 9.81 5.614 9.71 5.71404L6.71 8.71501C6.51 8.91508 6.26 9.00511 6 9.00511C5.74 9.00511 5.49 8.90508 5.29 8.71501C4.9 8.32489 4.9 7.69468 5.29 7.30456L6.58 6.01413H4.99C4.44 6.01413 3.99 5.56399 3.99 5.01381L4 4.9938ZM14.08 5.37393C14.13 5.49397 14.2 5.604 14.3 5.70403L17.3 8.70501C17.5 8.90508 17.75 8.99511 18.01 8.99511C18.27 8.99511 18.52 8.89507 18.72 8.70501C19.11 8.31488 19.11 7.68468 18.72 7.29455L17.43 6.00413H19.02C19.57 6.00413 20.02 5.55399 20.02 5.00381C20.02 4.45363 19.57 4.00348 19.02 4.00348H17.43L18.72 2.71306C19.11 2.32293 19.11 1.69273 18.72 1.3026C18.33 0.912471 17.7 0.912471 17.31 1.3026L14.31 4.30358C14.22 4.39361 14.14 4.50364 14.09 4.63368C13.99 4.87376 13.99 5.15385 14.09 5.39393L14.08 5.37393ZM22 14.9971V20.999C22 22.6496 20.65 24 19 24H5C3.35 24 2 22.6496 2 20.999V14.9971C2 13.3465 3.35 11.9961 5 11.9961H19C20.65 11.9961 22 13.3465 22 14.9971ZM19 13.9967H16V16.9977H20V14.9971C20 14.4469 19.55 13.9967 19 13.9967ZM14 16.9977V13.9967H10V16.9977H14ZM10 18.9984V21.9993H14V18.9984H10ZM4 14.9971V16.9977H8V13.9967H5C4.45 13.9967 4 14.4469 4 14.9971ZM5 21.9993H8V18.9984H4V20.999C4 21.5492 4.45 21.9993 5 21.9993ZM20 20.999V18.9984H16V21.9993H19C19.55 21.9993 20 21.5492 20 20.999Z"></path></svg>'},"./packages/survey-core/src/images/smiley/very-good.svg":function(S,h){S.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.01 24C6.85721 24 1.15412 20.96 0.0134987 14.16C-0.0765501 13.62 0.293651 13.1 0.833944 13.01C1.38424 12.92 1.89452 13.29 1.98457 13.83C2.92508 19.47 7.69767 21.99 12 21.99C16.3023 21.99 21.0749 19.47 22.0154 13.83C22.1055 13.29 22.6158 12.92 23.1661 13.01C23.7063 13.1 24.0765 13.62 23.9865 14.16C22.8559 20.95 17.1428 24 11.99 24H12.01ZM8.00783 6V2C8.00783 1.45 7.55759 1 7.00729 1C6.45699 1 6.00675 1.45 6.00675 2V6C6.00675 6.55 6.45699 7 7.00729 7C7.55759 7 8.00783 6.55 8.00783 6ZM18.0133 6V2C18.0133 1.45 17.563 1 17.0127 1C16.4624 1 16.0122 1.45 16.0122 2V6C16.0122 6.55 16.4624 7 17.0127 7C17.563 7 18.0133 6.55 18.0133 6Z"></path></svg>'},"./packages/survey-core/src/images/smiley/very-poor.svg":function(S,h){S.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_15894_140103)"><path d="M4.88291 4.50999C4.47291 4.50999 4.08291 4.24999 3.94291 3.83999C3.76291 3.31999 4.03291 2.74999 4.55291 2.56999L8.32291 1.24999C8.84291 1.05999 9.41291 1.33999 9.59291 1.85999C9.77291 2.37999 9.50291 2.94999 8.98291 3.12999L5.20291 4.44999C5.09291 4.48999 4.98291 4.50999 4.87291 4.50999H4.88291ZM19.8129 3.88999C20.0229 3.37999 19.7729 2.78999 19.2629 2.58999L15.5529 1.06999C15.0429 0.859992 14.4529 1.10999 14.2529 1.61999C14.0429 2.12999 14.2929 2.71999 14.8029 2.91999L18.5029 4.42999C18.6229 4.47999 18.7529 4.49999 18.8829 4.49999C19.2729 4.49999 19.6529 4.26999 19.8129 3.87999V3.88999ZM3.50291 5.99999C2.64291 6.36999 1.79291 6.87999 1.00291 7.47999C0.79291 7.63999 0.64291 7.86999 0.59291 8.13999C0.48291 8.72999 0.87291 9.28999 1.45291 9.39999C2.04291 9.50999 2.60291 9.11999 2.71291 8.53999C2.87291 7.68999 3.12291 6.82999 3.50291 5.98999V5.99999ZM21.0429 8.54999C21.6029 10.48 24.2429 8.83999 22.7529 7.47999C21.9629 6.87999 21.1129 6.36999 20.2529 5.99999C20.6329 6.83999 20.8829 7.69999 21.0429 8.54999ZM21.5729 13.2C21.2529 14.2 22.5429 15.09 23.3629 14.39C23.8529 14 23.9229 13.29 23.5429 12.81C21.7429 10.67 22.1329 10.55 21.5829 13.2H21.5729ZM1.75291 11C1.22291 11.79 -0.14709 12.64 0.0129102 13.75C0.15291 14.36 0.75291 14.74 1.35291 14.6C2.98291 14.1 1.80291 12.22 1.75291 11ZM19.8829 17C19.8829 13.14 16.2929 9.99999 11.8829 9.99999C7.47291 9.99999 3.88291 13.14 3.88291 17C3.88291 20.86 7.47291 24 11.8829 24C16.2929 24 19.8829 20.86 19.8829 17ZM17.8829 17C17.8829 19.76 15.1929 22 11.8829 22C8.57291 22 5.88291 19.76 5.88291 17C5.88291 14.24 8.57291 12 11.8829 12C15.1929 12 17.8829 14.24 17.8829 17Z"></path></g><defs><clipPath id="clip0_15894_140103"><rect width="24" height="24" fill="white"></rect></clipPath></defs></svg>'},"./src/entries/core.ts":function(S,h,m){m.r(h),m.d(h,"Version",function(){return br}),m.d(h,"ReleaseDate",function(){return Gn}),m.d(h,"checkLibraryVersion",function(){return Jc}),m.d(h,"setLicenseKey",function(){return Gc}),m.d(h,"slk",function(){return Ls}),m.d(h,"hasLicense",function(){return Zc}),m.d(h,"settings",function(){return b}),m.d(h,"Helpers",function(){return P}),m.d(h,"AnswerCountValidator",function(){return Xi}),m.d(h,"EmailValidator",function(){return Hr}),m.d(h,"NumericValidator",function(){return Ki}),m.d(h,"RegexValidator",function(){return eo}),m.d(h,"SurveyValidator",function(){return Xe}),m.d(h,"TextValidator",function(){return Yi}),m.d(h,"ValidatorResult",function(){return Ve}),m.d(h,"ExpressionValidator",function(){return to}),m.d(h,"ValidatorRunner",function(){return Zi}),m.d(h,"ItemValue",function(){return q}),m.d(h,"Base",function(){return W}),m.d(h,"Event",function(){return Ir}),m.d(h,"EventBase",function(){return Oe}),m.d(h,"ArrayChanges",function(){return Je}),m.d(h,"ComputedUpdater",function(){return ne}),m.d(h,"SurveyError",function(){return ge}),m.d(h,"SurveyElementCore",function(){return Ut}),m.d(h,"SurveyElement",function(){return de}),m.d(h,"DragTypeOverMeEnum",function(){return Fr}),m.d(h,"CalculatedValue",function(){return io}),m.d(h,"CustomError",function(){return Ce}),m.d(h,"AnswerRequiredError",function(){return Ui}),m.d(h,"OneAnswerRequiredError",function(){return Wi}),m.d(h,"RequreNumericError",function(){return $i}),m.d(h,"ExceedSizeError",function(){return Ji}),m.d(h,"LocalizableString",function(){return we}),m.d(h,"LocalizableStrings",function(){return _i}),m.d(h,"HtmlConditionItem",function(){return oo}),m.d(h,"UrlConditionItem",function(){return so}),m.d(h,"ChoicesRestful",function(){return et}),m.d(h,"ChoicesRestfull",function(){return lu}),m.d(h,"FunctionFactory",function(){return J}),m.d(h,"registerFunction",function(){return Ba}),m.d(h,"ConditionRunner",function(){return ve}),m.d(h,"ExpressionRunner",function(){return $e}),m.d(h,"ExpressionExecutor",function(){return Ai}),m.d(h,"Operand",function(){return ct}),m.d(h,"Const",function(){return Sr}),m.d(h,"BinaryOperand",function(){return Ti}),m.d(h,"Variable",function(){return Ii}),m.d(h,"FunctionOperand",function(){return Ri}),m.d(h,"ArrayOperand",function(){return qt}),m.d(h,"UnaryOperand",function(){return Or}),m.d(h,"ConditionsParser",function(){return Ei}),m.d(h,"ProcessValue",function(){return ce}),m.d(h,"JsonError",function(){return lt}),m.d(h,"JsonIncorrectTypeError",function(){return di}),m.d(h,"JsonMetadata",function(){return pi}),m.d(h,"JsonMetadataClass",function(){return ci}),m.d(h,"JsonMissingTypeError",function(){return hi}),m.d(h,"JsonMissingTypeErrorBase",function(){return xr}),m.d(h,"JsonObject",function(){return ae}),m.d(h,"JsonObjectProperty",function(){return _t}),m.d(h,"JsonRequiredPropertyError",function(){return gi}),m.d(h,"JsonUnknownPropertyError",function(){return fi}),m.d(h,"Serializer",function(){return x}),m.d(h,"property",function(){return y}),m.d(h,"propertyArray",function(){return ue}),m.d(h,"MatrixDropdownCell",function(){return nn}),m.d(h,"MatrixDropdownRowModelBase",function(){return ht}),m.d(h,"QuestionMatrixDropdownModelBase",function(){return dt}),m.d(h,"MatrixDropdownColumn",function(){return Tt}),m.d(h,"matrixDropdownColumnTypes",function(){return Xr}),m.d(h,"QuestionMatrixDropdownRenderedCell",function(){return Ie}),m.d(h,"QuestionMatrixDropdownRenderedRow",function(){return tn}),m.d(h,"QuestionMatrixDropdownRenderedErrorRow",function(){return go}),m.d(h,"QuestionMatrixDropdownRenderedTable",function(){return rn}),m.d(h,"MatrixDropdownRowModel",function(){return mo}),m.d(h,"QuestionMatrixDropdownModel",function(){return on}),m.d(h,"MatrixDynamicRowModel",function(){return Po}),m.d(h,"QuestionMatrixDynamicModel",function(){return cn}),m.d(h,"MatrixRowModel",function(){return ko}),m.d(h,"MatrixCells",function(){return Bo}),m.d(h,"QuestionMatrixModel",function(){return Pn}),m.d(h,"QuestionMatrixBaseModel",function(){return Gr}),m.d(h,"MultipleTextItemModel",function(){return On}),m.d(h,"MultipleTextCell",function(){return Tn}),m.d(h,"MultipleTextErrorCell",function(){return Zo}),m.d(h,"MutlipleTextErrorRow",function(){return Go}),m.d(h,"MutlipleTextRow",function(){return Sn}),m.d(h,"QuestionMultipleTextModel",function(){return pr}),m.d(h,"MultipleTextEditorModel",function(){return Jo}),m.d(h,"PanelModel",function(){return ar}),m.d(h,"PanelModelBase",function(){return sr}),m.d(h,"QuestionRowModel",function(){return Eo}),m.d(h,"FlowPanelModel",function(){return Ko}),m.d(h,"PageModel",function(){return Dt}),m.d(h,"DefaultTitleModel",function(){return Yu}),m.d(h,"Question",function(){return le}),m.d(h,"QuestionNonValue",function(){return fr}),m.d(h,"QuestionEmptyModel",function(){return Yo}),m.d(h,"QuestionCheckboxBase",function(){return At}),m.d(h,"QuestionSelectBase",function(){return gn}),m.d(h,"QuestionCheckboxModel",function(){return Mt}),m.d(h,"QuestionTagboxModel",function(){return In}),m.d(h,"QuestionRankingModel",function(){return Rn}),m.d(h,"QuestionCommentModel",function(){return En}),m.d(h,"QuestionDropdownModel",function(){return Lt}),m.d(h,"QuestionFactory",function(){return Z}),m.d(h,"ElementFactory",function(){return Ne}),m.d(h,"QuestionFileModel",function(){return Dn}),m.d(h,"QuestionHtmlModel",function(){return An}),m.d(h,"QuestionRadiogroupModel",function(){return Ln}),m.d(h,"QuestionRatingModel",function(){return jn}),m.d(h,"RenderedRatingItem",function(){return dr}),m.d(h,"QuestionExpressionModel",function(){return Yr}),m.d(h,"QuestionTextBase",function(){return ur}),m.d(h,"CharacterCounter",function(){return Ho}),m.d(h,"QuestionTextModel",function(){return cr}),m.d(h,"QuestionBooleanModel",function(){return Fn}),m.d(h,"QuestionImagePickerModel",function(){return jt}),m.d(h,"ImageItemValue",function(){return ls}),m.d(h,"QuestionImageModel",function(){return Nn}),m.d(h,"QuestionSignaturePadModel",function(){return kn}),m.d(h,"QuestionPanelDynamicModel",function(){return qn}),m.d(h,"QuestionPanelDynamicItem",function(){return fe}),m.d(h,"SurveyTimer",function(){return pn}),m.d(h,"SurveyTimerModel",function(){return xo}),m.d(h,"tryFocusPage",function(){return Ao}),m.d(h,"createTOCListModel",function(){return Lo}),m.d(h,"getTocRootCss",function(){return Mo}),m.d(h,"TOCModel",function(){return rt}),m.d(h,"SurveyProgressModel",function(){return Rc}),m.d(h,"ProgressButtons",function(){return Do}),m.d(h,"ProgressButtonsResponsivityManager",function(){return qu}),m.d(h,"SurveyModel",function(){return _e}),m.d(h,"SurveyTrigger",function(){return ot}),m.d(h,"SurveyTriggerComplete",function(){return ms}),m.d(h,"SurveyTriggerSetValue",function(){return vs}),m.d(h,"SurveyTriggerVisible",function(){return ys}),m.d(h,"SurveyTriggerCopyValue",function(){return Ps}),m.d(h,"SurveyTriggerRunExpression",function(){return Cs}),m.d(h,"SurveyTriggerSkip",function(){return bs}),m.d(h,"Trigger",function(){return gs}),m.d(h,"PopupSurveyModel",function(){return Vs}),m.d(h,"SurveyWindowModel",function(){return Dc}),m.d(h,"TextPreProcessor",function(){return Zr}),m.d(h,"Notifier",function(){return Oo}),m.d(h,"Cover",function(){return or}),m.d(h,"CoverCell",function(){return So}),m.d(h,"dxSurveyService",function(){return Vo}),m.d(h,"englishStrings",function(){return se}),m.d(h,"surveyLocalization",function(){return z}),m.d(h,"surveyStrings",function(){return ja}),m.d(h,"QuestionCustomWidget",function(){return ro}),m.d(h,"CustomWidgetCollection",function(){return zr}),m.d(h,"QuestionCustomModel",function(){return fo}),m.d(h,"QuestionCompositeModel",function(){return ho}),m.d(h,"ComponentQuestionJSON",function(){return co}),m.d(h,"ComponentCollection",function(){return Kt}),m.d(h,"ListModel",function(){return Pt}),m.d(h,"MultiSelectListModel",function(){return Xo}),m.d(h,"PopupModel",function(){return wt}),m.d(h,"createDialogOptions",function(){return Sl}),m.d(h,"PopupBaseViewModel",function(){return vn}),m.d(h,"PopupDropdownViewModel",function(){return Cn}),m.d(h,"PopupModalViewModel",function(){return Qn}),m.d(h,"createPopupViewModel",function(){return Mc}),m.d(h,"createPopupModalViewModel",function(){return Lc}),m.d(h,"DropdownListModel",function(){return lr}),m.d(h,"DropdownMultiSelectListModel",function(){return es}),m.d(h,"QuestionButtonGroupModel",function(){return Ss}),m.d(h,"ButtonGroupItemModel",function(){return jc}),m.d(h,"ButtonGroupItemValue",function(){return Os}),m.d(h,"IsMobile",function(){return rr}),m.d(h,"IsTouch",function(){return re}),m.d(h,"_setIsTouch",function(){return Cu}),m.d(h,"confirmAction",function(){return ki}),m.d(h,"confirmActionAsync",function(){return xt}),m.d(h,"detectIEOrEdge",function(){return Ot}),m.d(h,"doKey2ClickUp",function(){return Qi}),m.d(h,"doKey2ClickDown",function(){return ql}),m.d(h,"doKey2ClickBlur",function(){return qi}),m.d(h,"loadFileFromBase64",function(){return Bi}),m.d(h,"increaseHeightByContent",function(){return Br}),m.d(h,"createSvg",function(){return _l}),m.d(h,"chooseFiles",function(){return zi}),m.d(h,"sanitizeEditableContent",function(){return zl}),m.d(h,"InputMaskBase",function(){return mr}),m.d(h,"InputMaskPattern",function(){return $n}),m.d(h,"InputMaskNumeric",function(){return Jn}),m.d(h,"InputMaskDateTime",function(){return Es}),m.d(h,"InputMaskCurrency",function(){return As}),m.d(h,"CssClassBuilder",function(){return O}),m.d(h,"surveyCss",function(){return oe}),m.d(h,"defaultV2Css",function(){return nr}),m.d(h,"defaultV2ThemeName",function(){return wo}),m.d(h,"DragDropCore",function(){return an}),m.d(h,"DragDropChoices",function(){return ts}),m.d(h,"DragDropRankingSelectToRank",function(){return ns}),m.d(h,"StylesManager",function(){return js}),m.d(h,"defaultStandardCss",function(){return ze}),m.d(h,"modernCss",function(){return Fs}),m.d(h,"SvgIconRegistry",function(){return Ns}),m.d(h,"SvgRegistry",function(){return Zn}),m.d(h,"SvgBundleViewModel",function(){return lp}),m.d(h,"RendererFactory",function(){return no}),m.d(h,"ResponsivityManager",function(){return Rr}),m.d(h,"VerticalResponsivityManager",function(){return Pl}),m.d(h,"unwrap",function(){return Bl}),m.d(h,"getOriginalEvent",function(){return Ql}),m.d(h,"getElement",function(){return Nr}),m.d(h,"createDropdownActionModel",function(){return Il}),m.d(h,"createDropdownActionModelAdvanced",function(){return Dr}),m.d(h,"createPopupModelWithListModel",function(){return Ar}),m.d(h,"getActionDropdownButtonTarget",function(){return Rl}),m.d(h,"BaseAction",function(){return Qt}),m.d(h,"Action",function(){return G}),m.d(h,"ActionDropdownViewModel",function(){return El}),m.d(h,"AnimationUtils",function(){return Lr}),m.d(h,"AnimationPropertyUtils",function(){return ji}),m.d(h,"AnimationGroupUtils",function(){return Mr}),m.d(h,"AnimationProperty",function(){return zt}),m.d(h,"AnimationBoolean",function(){return jr}),m.d(h,"AnimationGroup",function(){return Ge}),m.d(h,"AnimationTab",function(){return Fi}),m.d(h,"AdaptiveActionContainer",function(){return Ht}),m.d(h,"defaultActionBarCss",function(){return Er}),m.d(h,"ActionContainer",function(){return Se}),m.d(h,"DragOrClickHelper",function(){return ln}),m.d(h,"Model",function(){return _e});var R=function(){function i(){}return i.isAvailable=function(){return typeof window!="undefined"},i.isFileReaderAvailable=function(){return i.isAvailable()?!!window.FileReader:!1},i.getLocation=function(){if(!!i.isAvailable())return window.location},i.getVisualViewport=function(){return i.isAvailable()?window.visualViewport:null},i.getInnerWidth=function(){if(!!i.isAvailable())return window.innerWidth},i.getInnerHeight=function(){return i.isAvailable()?window.innerHeight:null},i.getWindow=function(){if(!!i.isAvailable())return window},i.hasOwn=function(t){if(!!i.isAvailable())return t in window},i.getSelection=function(){if(i.isAvailable()&&window.getSelection)return window.getSelection()},i.requestAnimationFrame=function(t){if(i.isAvailable())return window.requestAnimationFrame(t)},i.addEventListener=function(t,e){!i.isAvailable()||window.addEventListener(t,e)},i.removeEventListener=function(t,e){!i.isAvailable()||window.removeEventListener(t,e)},i.matchMedia=function(t){return!i.isAvailable()||typeof window.matchMedia=="undefined"?null:window.matchMedia(t)},i}(),D=function(){function i(){}return i.isAvailable=function(){return typeof document!="undefined"},i.getBody=function(){if(!!i.isAvailable())return document.body},i.getDocumentElement=function(){if(!!i.isAvailable())return document.documentElement},i.getDocument=function(){if(!!i.isAvailable())return document},i.getCookie=function(){if(!!i.isAvailable())return document.cookie},i.setCookie=function(t){!i.isAvailable()||(document.cookie=t)},i.activeElementBlur=function(){if(!!i.isAvailable()){var t=document.activeElement;!!t&&!!t.blur&&t.blur()}},i.createElement=function(t){if(!!i.isAvailable())return document.createElement(t)},i.getComputedStyle=function(t){return i.isAvailable()?document.defaultView.getComputedStyle(t):new CSSStyleDeclaration},i.addEventListener=function(t,e){!i.isAvailable()||document.addEventListener(t,e)},i.removeEventListener=function(t,e){!i.isAvailable()||document.removeEventListener(t,e)},i}(),P=function(){function i(){}return i.isValueEmpty=function(t){if(Array.isArray(t)&&t.length===0)return!0;if(!!t&&i.isValueObject(t)&&t.constructor===Object){for(var e in t)if(!i.isValueEmpty(t[e]))return!1;return!0}return!t&&t!==0&&t!==!1},i.isArrayContainsEqual=function(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(var r=0;r<t.length;r++){for(var n=0;n<e.length&&!i.isTwoValueEquals(t[r],e[n]);n++);if(n===e.length)return!1}return!0},i.isArraysEqual=function(t,e,r,n,o){if(r===void 0&&(r=!1),!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;if(r){for(var s=[],a=[],l=0;l<t.length;l++)s.push(t[l]),a.push(e[l]);s.sort(),a.sort(),t=s,e=a}for(var l=0;l<t.length;l++)if(!i.isTwoValueEquals(t[l],e[l],r,n,o))return!1;return!0},i.compareStrings=function(t,e){var r=b.comparator.normalizeTextCallback;if(t&&(t=r(t,"compare").trim()),e&&(e=r(e,"compare").trim()),!t&&!e)return 0;if(!t)return-1;if(!e)return 1;if(t===e)return 0;for(var n=-1,o=0;o<t.length&&o<e.length;o++){if(this.isCharDigit(t[o])&&this.isCharDigit(e[o])){n=o;break}if(t[o]!==e[o])break}if(n>-1){var s=this.getNumberFromStr(t,n),a=this.getNumberFromStr(e,n);if(!Number.isNaN(s)&&!Number.isNaN(a)&&s!==a)return s>a?1:-1}return t>e?1:-1},i.isTwoValueEquals=function(t,e,r,n,o){if(r===void 0&&(r=!1),t===e||Array.isArray(t)&&t.length===0&&typeof e=="undefined"||Array.isArray(e)&&e.length===0&&typeof t=="undefined"||t==null&&e===""||e==null&&t==="")return!0;if(o===void 0&&(o=b.comparator.trimStrings),n===void 0&&(n=b.comparator.caseSensitive),typeof t=="string"&&typeof e=="string"){var s=b.comparator.normalizeTextCallback;return t=s(t,"compare"),e=s(e,"compare"),o&&(t=t.trim(),e=e.trim()),n||(t=t.toLowerCase(),e=e.toLowerCase()),t===e}if(t instanceof Date&&e instanceof Date)return t.getTime()==e.getTime();if(i.isConvertibleToNumber(t)&&i.isConvertibleToNumber(e)&&parseInt(t)===parseInt(e)&&parseFloat(t)===parseFloat(e))return!0;if(!i.isValueEmpty(t)&&i.isValueEmpty(e)||i.isValueEmpty(t)&&!i.isValueEmpty(e))return!1;if((t===!0||t===!1)&&typeof e=="string")return t.toString()===e.toLocaleLowerCase();if((e===!0||e===!1)&&typeof t=="string")return e.toString()===t.toLocaleLowerCase();if(!i.isValueObject(t)&&!i.isValueObject(e))return t==e;if(!i.isValueObject(t)||!i.isValueObject(e))return!1;if(t.equals&&e.equals)return t.equals(e);if(Array.isArray(t)&&Array.isArray(e))return i.isArraysEqual(t,e,r,n,o);for(var a in t)if(!!t.hasOwnProperty(a)&&(!e.hasOwnProperty(a)||!this.isTwoValueEquals(t[a],e[a],r,n,o)))return!1;for(a in e)if(e.hasOwnProperty(a)&&!t.hasOwnProperty(a))return!1;return!0},i.randomizeArray=function(t){for(var e=t.length-1;e>0;e--){var r=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[r],t[r]=n}return t},i.getUnbindValue=function(t){if(Array.isArray(t)){for(var e=[],r=0;r<t.length;r++)e.push(i.getUnbindValue(t[r]));return e}return!!t&&i.isValueObject(t)&&!(t instanceof Date)?JSON.parse(JSON.stringify(t)):t},i.createCopy=function(t){var e={};if(!t)return e;for(var r in t)e[r]=t[r];return e},i.isConvertibleToNumber=function(t){return t!=null&&!Array.isArray(t)&&!isNaN(t)},i.isValueObject=function(t,e){return t instanceof Object&&(!e||!Array.isArray(t))},i.isNumber=function(t){return!isNaN(this.getNumber(t))},i.getNumber=function(t){var e=i.getNumberCore(t);return b.parseNumber(t,e)},i.getNumberCore=function(t){if(typeof t=="string"){if(!t.trim())return NaN;if(t.indexOf("0x")==0)return t.length>32?NaN:parseInt(t);if(i.isStringHasOperator(t))return NaN}t=this.prepareStringToNumber(t);var e=parseFloat(t);return isNaN(e)||!isFinite(t)?NaN:e},i.isStringHasOperator=function(t){if(t.lastIndexOf("-")>0||t.lastIndexOf("+")>0)return!1;for(var e="*^/%",r=0;r<e.length;r++)if(t.indexOf(e[r])>-1)return!0;return!1},i.prepareStringToNumber=function(t){if(typeof t!="string"||!t)return t;var e=t.indexOf(",");return e>-1&&t.indexOf(",",e+1)<0?t.replace(",","."):t},i.getMaxLength=function(t,e){return t<0&&(t=e),t>0?t:null},i.getRemainingCharacterCounterText=function(t,e){if(!e||e<=0||!b.showMaxLengthIndicator)return"";var r=t?t.length:"0";return[r,e].join("/")},i.getNumberByIndex=function(t,e){if(t<0)return"";var r=1,n="",o=".",s=!0,a="A",l="";if(e){l=e;for(var u=l.length-1,d=!1,v=0;v<l.length;v++)if(i.isCharDigit(l[v])){d=!0;break}for(var V=function(){return d&&!i.isCharDigit(l[u])||i.isCharNotLetterAndDigit(l[u])};u>=0&&V();)u--;var E="";for(u<l.length-1&&(E=l.substring(u+1),l=l.substring(0,u+1)),u=l.length-1;u>=0&&!(V()||(u--,!d)););a=l.substring(u+1),n=l.substring(0,u+1),parseInt(a)?r=parseInt(a):a.length==1&&(s=!1),(!!E||!!n)&&(o=E)}if(s){for(var I=(t+r).toString();I.length<a.length;)I="0"+I;return n+I+o}return n+String.fromCharCode(a.charCodeAt(0)+t)+o},i.isCharNotLetterAndDigit=function(t){return t.toUpperCase()==t.toLowerCase()&&!i.isCharDigit(t)},i.isCharDigit=function(t){return t>="0"&&t<="9"},i.getNumberFromStr=function(t,e){if(!this.isCharDigit(t[e]))return NaN;for(var r="";e<t.length&&this.isCharDigit(t[e]);)r+=t[e],e++;return r?this.getNumber(r):NaN},i.countDecimals=function(t){if(i.isNumber(t)&&Math.floor(t)!==t){var e=t.toString().split(".");return e.length>1&&e[1].length||0}return 0},i.correctAfterPlusMinis=function(t,e,r){var n=i.countDecimals(t),o=i.countDecimals(e);if(n>0||o>0){var s=Math.max(n,o);r=parseFloat(r.toFixed(s))}return r},i.sumAnyValues=function(t,e){if(!i.isNumber(t)||!i.isNumber(e)){if(Array.isArray(t)&&Array.isArray(e))return[].concat(t).concat(e);if(Array.isArray(t)||Array.isArray(e)){var r=Array.isArray(t)?t:e,n=r===t?e:t;if(typeof n=="string"){var o=r.join(", ");return r===t?o+n:n+o}if(typeof n=="number"){for(var s=0,a=0;a<r.length;a++)typeof r[a]=="number"&&(s=i.correctAfterPlusMinis(s,r[a],s+r[a]));return i.correctAfterPlusMinis(s,n,s+n)}}return t+e}return typeof t=="string"||typeof e=="string"?t+e:i.correctAfterPlusMinis(t,e,t+e)},i.correctAfterMultiple=function(t,e,r){var n=i.countDecimals(t)+i.countDecimals(e);return n>0&&(r=parseFloat(r.toFixed(n))),r},i.convertArrayValueToObject=function(t,e,r){r===void 0&&(r=void 0);var n=new Array;if(!t||!Array.isArray(t))return n;for(var o=0;o<t.length;o++){var s=void 0;Array.isArray(r)&&(s=i.findObjByPropValue(r,e,t[o])),s||(s={},s[e]=t[o]),n.push(s)}return n},i.findObjByPropValue=function(t,e,r){for(var n=0;n<t.length;n++)if(i.isTwoValueEquals(t[n][e],r))return t[n]},i.convertArrayObjectToValue=function(t,e){var r=new Array;if(!t||!Array.isArray(t))return r;for(var n=0;n<t.length;n++){var o=t[n]?t[n][e]:void 0;i.isValueEmpty(o)||r.push(o)}return r},i.convertDateToString=function(t){var e=function(r){return r<10?"0"+r.toString():r.toString()};return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDate())},i.convertDateTimeToString=function(t){var e=function(r){return r<10?"0"+r.toString():r.toString()};return this.convertDateToString(t)+" "+e(t.getHours())+":"+e(t.getMinutes())},i.convertValToQuestionVal=function(t,e){return t instanceof Date?e==="datetime-local"?i.convertDateTimeToString(t):i.convertDateToString(t):t},i.compareVerions=function(t,e){if(!t&&!e)return 0;for(var r=t.split("."),n=e.split("."),o=r.length,s=n.length,a=0;a<o&&a<s;a++){var l=r[a],u=n[a];if(l.length===u.length){if(l!==u)return l<u?-1:1}else return l.length<u.length?-1:1}return o===s?0:o<s?-1:1},i}();String.prototype.format||(String.prototype.format=function(){var i=arguments;return this.replace(/{(\d+)}/g,function(t,e){return typeof i[e]!="undefined"?i[e]:t})});var se={pagePrevText:"Previous",pageNextText:"Next",completeText:"Complete",previewText:"Preview",editText:"Edit",startSurveyText:"Start",otherItemText:"Other (describe)",noneItemText:"None",refuseItemText:"Refuse to answer",dontKnowItemText:"Don't know",selectAllItemText:"Select All",progressText:"Page {0} of {1}",indexText:"{0} of {1}",panelDynamicProgressText:"{0} of {1}",panelDynamicTabTextFormat:"Panel {panelIndex}",questionsProgressText:"Answered {0}/{1} questions",emptySurvey:"The survey doesn't contain any visible elements.",completingSurvey:"Thank you for completing the survey",completingSurveyBefore:"You have already completed this survey.",loadingSurvey:"Loading Survey...",placeholder:"Select...",ratingOptionsCaption:"Select...",value:"value",requiredError:"Response required.",requiredErrorInPanel:"Response required: answer at least one question.",requiredInAllRowsError:"Response required: answer questions in all rows.",eachRowUniqueError:"Each row must have a unique value.",numericError:"The value should be numeric.",minError:"The value should not be less than {0}",maxError:"The value should not be greater than {0}",textMinLength:"Please enter at least {0} character(s).",textMaxLength:"Please enter no more than {0} character(s).",textMinMaxLength:"Please enter at least {0} and no more than {1} characters.",minRowCountError:"Please fill in at least {0} row(s).",minSelectError:"Please select at least {0} option(s).",maxSelectError:"Please select no more than {0} option(s).",numericMinMax:"The '{0}' should be at least {1} and at most {2}",numericMin:"The '{0}' should be at least {1}",numericMax:"The '{0}' should be at most {1}",invalidEmail:"Please enter a valid e-mail address.",invalidExpression:"The expression: {0} should return 'true'.",urlRequestError:"The request returned error '{0}'. {1}",urlGetChoicesError:"The request returned empty data or the 'path' property is incorrect",exceedMaxSize:"The file size should not exceed {0}.",noUploadFilesHandler:"Files cannot be uploaded. Please add a handler for the 'onUploadFiles' event.",otherRequiredError:"Response required: enter another value.",uploadingFile:"Your file is uploading. Please wait several seconds and try again.",loadingFile:"Loading...",chooseFile:"Choose file(s)...",noFileChosen:"No file selected",filePlaceholder:"Drag and drop a file here or click the button below to select a file to upload.",confirmDelete:"Are you sure you want to delete this record?",keyDuplicationError:"This value should be unique.",addColumn:"Add Column",addRow:"Add Row",removeRow:"Remove",emptyRowsText:"There are no rows.",addPanel:"Add new",removePanel:"Remove",showDetails:"Show Details",hideDetails:"Hide Details",choices_Item:"item",matrix_column:"Column",matrix_row:"Row",multipletext_itemname:"text",savingData:"The results are being saved on the server...",savingDataError:"An error occurred and we could not save the results.",savingDataSuccess:"The results were saved successfully!",savingExceedSize:"Your response exceeds 64KB. Please reduce the size of your file(s) and try again or contact the survey owner.",saveAgainButton:"Try again",timerMin:"min",timerSec:"sec",timerSpentAll:"You have spent {0} on this page and {1} in total.",timerSpentPage:"You have spent {0} on this page.",timerSpentSurvey:"You have spent {0} in total.",timerLimitAll:"You have spent {0} of {1} on this page and {2} of {3} in total.",timerLimitPage:"You have spent {0} of {1} on this page.",timerLimitSurvey:"You have spent {0} of {1} in total.",clearCaption:"Clear",signaturePlaceHolder:"Sign here",signaturePlaceHolderReadOnly:"No signature",chooseFileCaption:"Select File",takePhotoCaption:"Take Photo",photoPlaceholder:"Click the button below to take a photo using the camera.",fileOrPhotoPlaceholder:"Drag and drop or select a file to upload or take a photo using the camera.",replaceFileCaption:"Replace file",removeFileCaption:"Remove this file",booleanCheckedLabel:"Yes",booleanUncheckedLabel:"No",confirmRemoveFile:"Are you sure that you want to remove this file: {0}?",confirmRemoveAllFiles:"Are you sure that you want to remove all files?",questionTitlePatternText:"Question Title",modalCancelButtonText:"Cancel",modalApplyButtonText:"Apply",filterStringPlaceholder:"Type to search...",emptyMessage:"No data to display",noEntriesText:`No entries yet.
Click the button below to add a new entry.`,noEntriesReadonlyText:"No entries",tabTitlePlaceholder:"New Panel",more:"More",tagboxDoneButtonCaption:"OK",selectToRankEmptyRankedAreaText:"All choices are selected for ranking",selectToRankEmptyUnrankedAreaText:"Drag choices here to rank them",ok:"OK",cancel:"Cancel"},z={currentLocaleValue:"",defaultLocaleValue:"en",locales:{},localeNames:{},localeDirections:{},supportedLocales:[],get currentLocale(){return this.currentLocaleValue===this.defaultLocaleValue?"":this.currentLocaleValue},set currentLocale(i){i==="cz"&&(i="cs"),this.currentLocaleValue=i},get defaultLocale(){return this.defaultLocaleValue},set defaultLocale(i){i==="cz"&&(i="cs"),this.defaultLocaleValue=i},getLocaleStrings:function(i){return this.locales[i]},getString:function(i,t){var e=this;t===void 0&&(t=null);var r=new Array,n=function(l){var u=e.locales[l];u&&r.push(u)},o=function(l){if(!!l){n(l);var u=l.indexOf("-");u<1||(l=l.substring(0,u),n(l))}};o(t),o(this.currentLocale),o(this.defaultLocale),this.defaultLocale!=="en"&&n("en");for(var s=0;s<r.length;s++){var a=r[s][i];if(a!==void 0)return a}return this.onGetExternalString(i,t)},getLocales:function(i){i===void 0&&(i=!1);var t=[];t.push("");var e=this.locales;if(this.supportedLocales&&this.supportedLocales.length>0){e={};for(var r=0;r<this.supportedLocales.length;r++)e[this.supportedLocales[r]]=!0}for(var n in e)i&&n==this.defaultLocale||t.push(n);var o=function(s){if(!s)return"";var a=z.localeNames[s];return a||(a=s),a.toLowerCase()};return t.sort(function(s,a){var l=o(s),u=o(a);return l===u?0:l<u?-1:1}),t},onGetExternalString:function(i,t){}},ja=se;z.locales.en=se,z.localeNames.en="english";var We=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Fa=function(i,t){for(var e=0,r=t.length,n=i.length;e<r;e++,n++)i[n]=t[e];return i};function Vr(i,t,e){var r=i.getLocalizableString(e);if(!r){var n=void 0;typeof t.localizable=="object"&&t.localizable.defaultStr&&(n=t.localizable.defaultStr),r=i.createLocalizableString(e,i,!0,n),typeof t.localizable=="object"&&typeof t.localizable.onGetTextCallback=="function"&&(r.onGetTextCallback=t.localizable.onGetTextCallback)}}function Na(i,t,e){Vr(i,t,e);var r=i.getLocalizableStringText(e);if(r)return r;if(typeof t.localizable=="object"&&t.localizable.defaultStr){var n=i.getLocale?i.getLocale():"";return z.getString(t.localizable.defaultStr,n)}return""}function y(i){return i===void 0&&(i={}),function(t,e){var r=function(n,o){if(!!o&&typeof o=="object"&&o.type===ne.ComputedUpdaterType){W.startCollectDependencies(function(){return n[e]=o.updater()},n,e);var s=o.updater(),a=W.finishCollectDependencies();return o.setDependencies(a),n.dependencies[e]&&n.dependencies[e].dispose(),n.dependencies[e]=o,s}return o};!i||!i.localizable?Object.defineProperty(t,e,{get:function(){var n=null;return i&&(typeof i.getDefaultValue=="function"&&(n=i.getDefaultValue(this)),i.defaultValue!==void 0&&(n=i.defaultValue)),this.getPropertyValue(e,n)},set:function(n){var o=r(this,n),s=this.getPropertyValue(e);this.setPropertyValue(e,o),!!i&&i.onSet&&i.onSet(o,this,s)}}):(Object.defineProperty(t,e,{get:function(){return Na(this,i,e)},set:function(n){Vr(this,i,e);var o=r(this,n);this.setLocalizableStringText(e,o),!!i&&i.onSet&&i.onSet(o,this)}}),Object.defineProperty(t,typeof i.localizable=="object"&&!!i.localizable.name?i.localizable.name:"loc"+e.charAt(0).toUpperCase()+e.slice(1),{get:function(){return Vr(this,i,e),this.getLocalizableString(e)}}))}}function ui(i,t,e){i.ensureArray(e,function(r,n){var o=t?t.onPush:null;o&&o(r,n,i)},function(r,n){var o=t?t.onRemove:null;o&&o(r,n,i)})}function ue(i){return function(t,e){Object.defineProperty(t,e,{get:function(){return ui(this,i,e),this.getPropertyValue(e)},set:function(r){ui(this,i,e);var n=this.getPropertyValue(e);r!==n&&(n?n.splice.apply(n,Fa([0,n.length],r||[])):this.setPropertyValue(e,r),!!i&&i.onSet&&i.onSet(r,this))}})}}var _t=function(){function i(t,e,r){r===void 0&&(r=!1),this.name=e,this.isRequiredValue=!1,this.isUniqueValue=!1,this.isSerializable=!0,this.isLightSerializable=!0,this.isCustom=!1,this.isDynamicChoices=!1,this.isBindable=!1,this.category="",this.categoryIndex=-1,this.visibleIndex=-1,this.maxLength=-1,this.isArray=!1,this.classInfoValue=t,this.isRequiredValue=r,this.idValue=i.Index++}return Object.defineProperty(i.prototype,"id",{get:function(){return this.idValue},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"classInfo",{get:function(){return this.classInfoValue},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return this.typeValue?this.typeValue:"string"},set:function(t){t==="itemvalues"&&(t="itemvalue[]"),t==="textitems"&&(t="textitem[]"),this.typeValue=t,this.typeValue.indexOf("[]")===this.typeValue.length-2&&(this.isArray=!0,this.className=this.typeValue.substring(0,this.typeValue.length-2))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isRequired",{get:function(){return this.isRequiredValue},set:function(t){t!==this.isRequired&&(this.isRequiredValue=t,this.classInfo&&this.classInfo.resetAllProperties())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isUnique",{get:function(){return this.isUniqueValue},set:function(t){this.isUniqueValue=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"uniquePropertyName",{get:function(){return this.uniquePropertyValue},set:function(t){this.uniquePropertyValue=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasToUseGetValue",{get:function(){return this.onGetValue||this.serializationProperty},enumerable:!1,configurable:!0}),i.prototype.getDefaultValue=function(t){var e=this.defaultValueFunc?this.defaultValueFunc(t):this.defaultValueValue;return!!i.getItemValuesDefaultValue&&x.isDescendantOf(this.className,"itemvalue")&&(e=i.getItemValuesDefaultValue(this.defaultValueValue||[],this.className)),e},Object.defineProperty(i.prototype,"defaultValue",{get:function(){return this.getDefaultValue(void 0)},set:function(t){this.defaultValueValue=t},enumerable:!1,configurable:!0}),i.prototype.isDefaultValue=function(t){return this.isDefaultValueByObj(void 0,t)},i.prototype.isDefaultValueByObj=function(t,e){var r=this.getDefaultValue(t);return P.isValueEmpty(r)?this.isLocalizable?e==null:e===!1&&(this.type=="boolean"||this.type=="switch")&&!this.defaultValueFunc||e===""||P.isValueEmpty(e):P.isTwoValueEquals(e,r,!1,!0,!1)},i.prototype.getSerializableValue=function(t){return this.onSerializeValue?this.onSerializeValue(t):this.getValue(t)},i.prototype.getValue=function(t){return this.onGetValue?this.onGetValue(t):this.serializationProperty&&!!t[this.serializationProperty]?t[this.serializationProperty].getJson():t[this.name]},i.prototype.getPropertyValue=function(t){return this.isLocalizable?t[this.serializationProperty]?t[this.serializationProperty].text:null:this.getValue(t)},Object.defineProperty(i.prototype,"hasToUseSetValue",{get:function(){return this.onSetValue||this.serializationProperty},enumerable:!1,configurable:!0}),i.prototype.settingValue=function(t,e){return!this.onSettingValue||t.isLoadingFromJson?e:this.onSettingValue(t,e)},i.prototype.setValue=function(t,e,r){this.onSetValue?this.onSetValue(t,e,r):this.serializationProperty&&!!t[this.serializationProperty]?t[this.serializationProperty].setJson(e):(e&&typeof e=="string"&&(this.type=="number"&&(e=parseInt(e)),(this.type=="boolean"||this.type=="switch")&&(e=e.toLowerCase()==="true")),t[this.name]=e)},i.prototype.validateValue=function(t){var e=this.choices;return!Array.isArray(e)||e.length===0?!0:e.indexOf(t)>-1},i.prototype.getObjType=function(t){return this.classNamePart?t.replace(this.classNamePart,""):t},Object.defineProperty(i.prototype,"choices",{get:function(){return this.getChoices(null)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasChoices",{get:function(){return!!this.choicesValue||!!this.choicesfunc},enumerable:!1,configurable:!0}),i.prototype.getChoices=function(t,e){return e===void 0&&(e=null),this.choicesValue!=null?this.choicesValue:this.choicesfunc!=null?this.choicesfunc(t,e):null},i.prototype.setChoices=function(t,e){e===void 0&&(e=null),this.choicesValue=t,this.choicesfunc=e},i.prototype.getBaseValue=function(){return this.baseValue?typeof this.baseValue=="function"?this.baseValue():this.baseValue:""},i.prototype.setBaseValue=function(t){this.baseValue=t},Object.defineProperty(i.prototype,"readOnly",{get:function(){return this.readOnlyValue!=null?this.readOnlyValue:!1},set:function(t){this.readOnlyValue=t},enumerable:!1,configurable:!0}),i.prototype.isEnable=function(t){return this.readOnly?!1:!t||!this.enableIf?!0:this.enableIf(this.getOriginalObj(t))},i.prototype.isVisible=function(t,e){e===void 0&&(e=null);var r=!this.layout||this.layout==t;return!this.visible||!r?!1:!!this.visibleIf&&!!e?this.visibleIf(this.getOriginalObj(e)):!0},i.prototype.getOriginalObj=function(t){if(t&&t.getOriginalObj){var e=t.getOriginalObj();if(e&&x.findProperty(e.getType(),this.name))return e}return t},Object.defineProperty(i.prototype,"visible",{get:function(){return this.visibleValue!=null?this.visibleValue:!0},set:function(t){this.visibleValue=t},enumerable:!1,configurable:!0}),i.prototype.isAvailableInVersion=function(t){return!!this.alternativeName||this.oldName?!0:this.isAvailableInVersionCore(t)},i.prototype.getSerializedName=function(t){return this.alternativeName?this.isAvailableInVersionCore(t)?this.name:this.alternativeName||this.oldName:this.name},i.prototype.getSerializedProperty=function(t,e){return!this.oldName||this.isAvailableInVersionCore(e)?this:!t||!t.getType?null:x.findProperty(t.getType(),this.oldName)},i.prototype.isAvailableInVersionCore=function(t){return!t||!this.version?!0:P.compareVerions(this.version,t)<=0},Object.defineProperty(i.prototype,"isLocalizable",{get:function(){return this.isLocalizableValue!=null?this.isLocalizableValue:!1},set:function(t){this.isLocalizableValue=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataList",{get:function(){return Array.isArray(this.dataListValue)?this.dataListValue:[]},set:function(t){this.dataListValue=t},enumerable:!1,configurable:!0}),i.prototype.mergeWith=function(t){for(var e=i.mergableValues,r=0;r<e.length;r++)this.mergeValue(t,e[r])},i.prototype.addDependedProperty=function(t){this.dependedProperties||(this.dependedProperties=[]),this.dependedProperties.indexOf(t)<0&&this.dependedProperties.push(t)},i.prototype.getDependedProperties=function(){return this.dependedProperties?this.dependedProperties:[]},i.prototype.schemaType=function(){if(this.className!=="choicesByUrl")return this.className==="string"?this.className:this.className||this.baseClassName?"array":this.type=="switch"?"boolean":this.type=="boolean"||this.type=="number"?this.type:"string"},i.prototype.schemaRef=function(){if(this.className)return this.className},i.prototype.mergeValue=function(t,e){this[e]==null&&t[e]!=null&&(this[e]=t[e])},i.Index=1,i.mergableValues=["typeValue","choicesValue","baseValue","readOnlyValue","visibleValue","isSerializable","isLightSerializable","isCustom","isBindable","isUnique","uniquePropertyName","isDynamicChoices","isLocalizableValue","className","alternativeName","oldName","layout","version","classNamePart","baseClassName","defaultValue","defaultValueFunc","serializationProperty","onGetValue","onSetValue","onSettingValue","displayName","category","categoryIndex","visibleIndex","nextToProperty","overridingProperty","showMode","dependedProperties","visibleIf","enableIf","onExecuteExpression","onPropertyEditorUpdate","maxLength","maxValue","minValue","dataListValue"],i}(),Ae=function(){function i(){}return i.addProperty=function(t,e){t=t.toLowerCase();var r=i.properties;r[t]||(r[t]=[]),r[t].push(e)},i.removeProperty=function(t,e){t=t.toLowerCase();var r=i.properties;if(!!r[t]){for(var n=r[t],o=0;o<n.length;o++)if(n[o].name==e){r[t].splice(o,1);break}}},i.removeAllProperties=function(t){t=t.toLowerCase(),delete i.properties[t]},i.addClass=function(t,e){t=t.toLowerCase(),e&&(e=e.toLowerCase()),i.parentClasses[t]=e},i.getProperties=function(t){t=t.toLowerCase();for(var e=[],r=i.properties;t;){var n=r[t];if(n)for(var o=0;o<n.length;o++)e.push(n[o]);t=i.parentClasses[t]}return e},i.createProperties=function(t){!t||!t.getType||i.createPropertiesCore(t,t.getType())},i.createPropertiesCore=function(t,e){var r=i.properties;r[e]&&i.createPropertiesInObj(t,r[e]);var n=i.parentClasses[e];n&&i.createPropertiesCore(t,n)},i.createPropertiesInObj=function(t,e){for(var r=0;r<e.length;r++)i.createPropertyInObj(t,e[r])},i.createPropertyInObj=function(t,e){if(!i.checkIsPropertyExists(t,e.name)&&!(!!e.serializationProperty&&i.checkIsPropertyExists(t,e.serializationProperty))){if(e.isLocalizable&&e.serializationProperty&&t.createCustomLocalizableObj){var r=t.createCustomLocalizableObj(e.name);r.defaultValue=e.defaultValue;var n={get:function(){return t.getLocalizableString(e.name)}};Object.defineProperty(t,e.serializationProperty,n);var o={get:function(){return t.getLocalizableStringText(e.name)},set:function(l){t.setLocalizableStringText(e.name,l)}};Object.defineProperty(t,e.name,o)}else{var s=e.defaultValue,a=e.isArray||e.type==="multiplevalues";if(typeof t.createNewArray=="function"&&(x.isDescendantOf(e.className,"itemvalue")?(t.createNewArray(e.name,function(l){l.locOwner=t,l.ownerPropertyName=e.name}),a=!0):a&&t.createNewArray(e.name),a&&(Array.isArray(s)&&t.setPropertyValue(e.name,s),s=null)),!!t.getPropertyValue&&!!t.setPropertyValue){var o={get:function(){return e.onGetValue?e.onGetValue(t):t.getPropertyValue(e.name,s)},set:function(u){e.onSetValue?e.onSetValue(t,u,null):t.setPropertyValue(e.name,u)}};Object.defineProperty(t,e.name,o)}}(e.type==="condition"||e.type==="expression")&&e.onExecuteExpression&&t.addExpressionProperty(e.name,e.onExecuteExpression)}},i.checkIsPropertyExists=function(t,e){return t.hasOwnProperty(e)||t[e]},i.properties={},i.parentClasses={},i}(),ci=function(){function i(t,e,r,n){r===void 0&&(r=null),n===void 0&&(n=null),this.name=t,this.creator=r,this.parentName=n,t=t.toLowerCase(),this.isCustomValue=!r&&t!=="survey",this.parentName&&(this.parentName=this.parentName.toLowerCase(),Ae.addClass(t,this.parentName),r&&this.makeParentRegularClass()),this.properties=new Array;for(var o=0;o<e.length;o++)this.createProperty(e[o],this.isCustom)}return i.prototype.find=function(t){for(var e=0;e<this.properties.length;e++)if(this.properties[e].name==t)return this.properties[e];return null},i.prototype.findProperty=function(t){return this.fillAllProperties(),this.hashProperties[t]},i.prototype.getAllProperties=function(){return this.fillAllProperties(),this.allProperties},i.prototype.getRequiredProperties=function(){if(this.requiredProperties)return this.requiredProperties;this.requiredProperties=[];for(var t=this.getAllProperties(),e=0;e<t.length;e++)t[e].isRequired&&this.requiredProperties.push(t[e]);return this.requiredProperties},i.prototype.resetAllProperties=function(){this.allProperties=void 0,this.requiredProperties=void 0,this.hashProperties=void 0;for(var t=x.getChildrenClasses(this.name),e=0;e<t.length;e++)t[e].resetAllProperties()},Object.defineProperty(i.prototype,"isCustom",{get:function(){return this.isCustomValue},enumerable:!1,configurable:!0}),i.prototype.fillAllProperties=function(){var t=this;if(!this.allProperties){this.allProperties=[],this.hashProperties={};var e={};this.properties.forEach(function(o){return e[o.name]=o});var r=this.parentName?x.findClass(this.parentName):null;if(r){var n=r.getAllProperties();n.forEach(function(o){var s=e[o.name];s?(s.mergeWith(o),t.addPropCore(s)):t.addPropCore(o)})}this.properties.forEach(function(o){t.hashProperties[o.name]||t.addPropCore(o)})}},i.prototype.addPropCore=function(t){this.allProperties.push(t),this.hashProperties[t.name]=t,t.alternativeName&&(this.hashProperties[t.alternativeName]=t)},i.prototype.isOverridedProp=function(t){return!!this.parentName&&!!x.findProperty(this.parentName,t)},i.prototype.hasRegularChildClass=function(){if(!!this.isCustom){this.isCustomValue=!1;for(var t=0;t<this.properties.length;t++)this.properties[t].isCustom=!1;Ae.removeAllProperties(this.name),this.makeParentRegularClass()}},i.prototype.makeParentRegularClass=function(){if(!!this.parentName){var t=x.findClass(this.parentName);t&&t.hasRegularChildClass()}},i.prototype.createProperty=function(t,e){e===void 0&&(e=!1);var r=typeof t=="string"?t:t.name;if(!!r){var n=null,o=r.indexOf(i.typeSymbol);o>-1&&(n=r.substring(o+1),r=r.substring(0,o));var s=this.getIsPropertyNameRequired(r)||!!t.isRequired;r=this.getPropertyName(r);var a=new _t(this,r,s);if(n&&(a.type=n),typeof t=="object"){if(t.type&&(a.type=t.type),t.default!==void 0&&(a.defaultValue=t.default),t.defaultFunc!==void 0&&(a.defaultValueFunc=t.defaultFunc),P.isValueEmpty(t.isSerializable)||(a.isSerializable=t.isSerializable),P.isValueEmpty(t.isLightSerializable)||(a.isLightSerializable=t.isLightSerializable),P.isValueEmpty(t.maxLength)||(a.maxLength=t.maxLength),t.displayName!==void 0&&(a.displayName=t.displayName),P.isValueEmpty(t.category)||(a.category=t.category),P.isValueEmpty(t.categoryIndex)||(a.categoryIndex=t.categoryIndex),P.isValueEmpty(t.nextToProperty)||(a.nextToProperty=t.nextToProperty),P.isValueEmpty(t.overridingProperty)||(a.overridingProperty=t.overridingProperty),P.isValueEmpty(t.visibleIndex)||(a.visibleIndex=t.visibleIndex),P.isValueEmpty(t.showMode)||(a.showMode=t.showMode),P.isValueEmpty(t.maxValue)||(a.maxValue=t.maxValue),P.isValueEmpty(t.minValue)||(a.minValue=t.minValue),P.isValueEmpty(t.dataList)||(a.dataList=t.dataList),P.isValueEmpty(t.isDynamicChoices)||(a.isDynamicChoices=t.isDynamicChoices),P.isValueEmpty(t.isBindable)||(a.isBindable=t.isBindable),P.isValueEmpty(t.isUnique)||(a.isUnique=t.isUnique),P.isValueEmpty(t.uniqueProperty)||(a.uniquePropertyName=t.uniqueProperty),P.isValueEmpty(t.isArray)||(a.isArray=t.isArray),(t.visible===!0||t.visible===!1)&&(a.visible=t.visible),t.visibleIf&&(a.visibleIf=t.visibleIf),t.enableIf&&(a.enableIf=t.enableIf),t.onExecuteExpression&&(a.onExecuteExpression=t.onExecuteExpression),t.onPropertyEditorUpdate&&(a.onPropertyEditorUpdate=t.onPropertyEditorUpdate),t.readOnly===!0&&(a.readOnly=!0),t.choices){var l=typeof t.choices=="function"?t.choices:null,u=typeof t.choices!="function"?t.choices:null;a.setChoices(u,l)}t.baseValue&&a.setBaseValue(t.baseValue),t.onSerializeValue&&(a.onSerializeValue=t.onSerializeValue),t.onGetValue&&(a.onGetValue=t.onGetValue),t.onSetValue&&(a.onSetValue=t.onSetValue),t.onSettingValue&&(a.onSettingValue=t.onSettingValue),t.isLocalizable&&(t.serializationProperty="loc"+a.name),t.serializationProperty&&(a.serializationProperty=t.serializationProperty,a.serializationProperty&&a.serializationProperty.indexOf("loc")==0&&(a.isLocalizable=!0)),t.isLocalizable&&(a.isLocalizable=t.isLocalizable),t.className&&(a.className=t.className),t.baseClassName&&(a.baseClassName=t.baseClassName,a.isArray=!0),a.isArray===!0&&(a.isArray=!0),t.classNamePart&&(a.classNamePart=t.classNamePart),t.alternativeName&&(a.alternativeName=t.alternativeName),t.oldName&&(a.oldName=t.oldName),t.layout&&(a.layout=t.layout),t.version&&(a.version=t.version),t.dependsOn&&this.addDependsOnProperties(a,t.dependsOn)}return this.properties.push(a),e&&!this.isOverridedProp(a.name)&&(a.isCustom=!0,Ae.addProperty(this.name,a)),a}},i.prototype.addDependsOnProperties=function(t,e){var r=Array.isArray(e)?e:[e];t.dependsOn=r;for(var n=0;n<r.length;n++)this.addDependsOnProperty(t,r[n])},i.prototype.addDependsOnProperty=function(t,e){var r=this.find(e);r||(r=x.findProperty(this.parentName,e)),r&&r.addDependedProperty(t.name)},i.prototype.getIsPropertyNameRequired=function(t){return t.length>0&&t[0]==i.requiredSymbol},i.prototype.getPropertyName=function(t){return this.getIsPropertyNameRequired(t)&&(t=t.slice(1)),t},i.requiredSymbol="!",i.typeSymbol=":",i}(),pi=function(){function i(){this.classes={},this.alternativeNames={},this.childrenClasses={},this.dynamicPropsCache={}}return i.prototype.getObjPropertyValue=function(t,e){if(this.isObjWrapper(t)&&this.isNeedUseObjWrapper(t,e)){var r=t.getOriginalObj(),n=x.findProperty(r.getType(),e);if(n)return this.getObjPropertyValueCore(r,n)}var o=x.findProperty(t.getType(),e);return o?this.getObjPropertyValueCore(t,o):t[e]},i.prototype.setObjPropertyValue=function(t,e,r){if(t[e]!==r)if(!!t[e]&&!!t[e].setJson)t[e].setJson(r);else{if(Array.isArray(r)){for(var n=[],o=0;o<r.length;o++)n.push(r[o]);r=n}t[e]=r}},i.prototype.getObjPropertyValueCore=function(t,e){if(!e.isSerializable)return t[e.name];if(e.isLocalizable){if(e.isArray)return t[e.name];if(e.serializationProperty)return t[e.serializationProperty].text}return t.getPropertyValue(e.name)},i.prototype.isObjWrapper=function(t){return!!t.getOriginalObj&&!!t.getOriginalObj()},i.prototype.isNeedUseObjWrapper=function(t,e){if(!t.getDynamicProperties)return!0;var r=t.getDynamicProperties();if(!Array.isArray(r))return!1;for(var n=0;n<r.length;n++)if(r[n].name===e)return!0;return!1},i.prototype.addClass=function(t,e,r,n){r===void 0&&(r=null),n===void 0&&(n=null),t=t.toLowerCase();var o=new ci(t,e,r,n);if(this.classes[t]=o,n){n=n.toLowerCase();var s=this.childrenClasses[n];s||(this.childrenClasses[n]=[]),this.childrenClasses[n].push(o)}return o},i.prototype.removeClass=function(t){var e=this.findClass(t);if(!!e&&(delete this.classes[e.name],e.parentName)){var r=this.childrenClasses[e.parentName].indexOf(e);r>-1&&this.childrenClasses[e.parentName].splice(r,1)}},i.prototype.overrideClassCreatore=function(t,e){this.overrideClassCreator(t,e)},i.prototype.overrideClassCreator=function(t,e){t=t.toLowerCase();var r=this.findClass(t);r&&(r.creator=e)},i.prototype.getProperties=function(t){var e=this.findClass(t);return e?e.getAllProperties():[]},i.prototype.getPropertiesByObj=function(t){var e=!!t&&!!t.getType?t.getType():void 0;if(!e)return[];for(var r=this.getProperties(e),n=this.getDynamicPropertiesByObj(t),o=n.length-1;o>=0;o--)this.findProperty(e,n[o].name)&&n.splice(o,1);return n.length===0?r:[].concat(r).concat(n)},i.prototype.addDynamicPropertiesIntoObj=function(t,e,r){var n=this;r.forEach(function(o){n.addDynamicPropertyIntoObj(t,e,o.name,!1),o.serializationProperty&&n.addDynamicPropertyIntoObj(t,e,o.serializationProperty,!0),o.alternativeName&&n.addDynamicPropertyIntoObj(t,e,o.alternativeName,!1)})},i.prototype.addDynamicPropertyIntoObj=function(t,e,r,n){var o={configurable:!0,get:function(){return e[r]}};n||(o.set=function(s){e[r]=s}),Object.defineProperty(t,r,o)},i.prototype.getDynamicPropertiesByObj=function(t,e){if(e===void 0&&(e=null),!t||!t.getType)return[];if(t.getDynamicProperties)return t.getDynamicProperties();if(!t.getDynamicType&&!e)return[];var r=e||t.getDynamicType();return this.getDynamicPropertiesByTypes(t.getType(),r)},i.prototype.getDynamicPropertiesByTypes=function(t,e,r){if(!e)return[];var n=e+"-"+t;if(this.dynamicPropsCache[n])return this.dynamicPropsCache[n];var o=this.getProperties(e);if(!o||o.length==0)return[];for(var s={},a=this.getProperties(t),l=0;l<a.length;l++)s[a[l].name]=a[l];var u=[];r||(r=[]);for(var d=0;d<o.length;d++){var v=o[d];!s[v.name]&&r.indexOf(v.name)<0&&u.push(v)}return this.dynamicPropsCache[n]=u,u},i.prototype.hasOriginalProperty=function(t,e){return!!this.getOriginalProperty(t,e)},i.prototype.getOriginalProperty=function(t,e){var r=this.findProperty(t.getType(),e);return r||(this.isObjWrapper(t)?this.findProperty(t.getOriginalObj().getType(),e):null)},i.prototype.getProperty=function(t,e){var r=this.findProperty(t,e);if(!r)return r;var n=this.findClass(t);if(r.classInfo===n)return r;var o=new _t(n,r.name,r.isRequired);return o.mergeWith(r),o.isArray=r.isArray,n.properties.push(o),n.resetAllProperties(),o},i.prototype.findProperty=function(t,e){var r=this.findClass(t);return r?r.findProperty(e):null},i.prototype.findProperties=function(t,e){var r=new Array,n=this.findClass(t);if(!n)return r;for(var o=0;o<e.length;o++){var s=n.findProperty(e[o]);s&&r.push(s)}return r},i.prototype.getAllPropertiesByName=function(t){for(var e=new Array,r=this.getAllClasses(),n=0;n<r.length;n++)for(var o=this.findClass(r[n]),s=0;s<o.properties.length;s++)if(o.properties[s].name==t){e.push(o.properties[s]);break}return e},i.prototype.getAllClasses=function(){var t=new Array;for(var e in this.classes)t.push(e);return t},i.prototype.createClass=function(t,e){e===void 0&&(e=void 0),t=t.toLowerCase();var r=this.findClass(t);if(!r)return null;if(r.creator)return r.creator(e);for(var n=r.parentName;n;){if(r=this.findClass(n),!r)return null;if(n=r.parentName,r.creator)return this.createCustomType(t,r.creator,e)}return null},i.prototype.createCustomType=function(t,e,r){r===void 0&&(r=void 0),t=t.toLowerCase();var n=e(r),o=t,s=n.getTemplate?n.getTemplate():n.getType();return n.getType=function(){return o},n.getTemplate=function(){return s},Ae.createProperties(n),n},i.prototype.getChildrenClasses=function(t,e){e===void 0&&(e=!1),t=t.toLowerCase();var r=[];return this.fillChildrenClasses(t,e,r),r},i.prototype.getRequiredProperties=function(t){var e=this.findClass(t);if(!e)return[];for(var r=e.getRequiredProperties(),n=[],o=0;o<r.length;o++)n.push(r[o].name);return n},i.prototype.addProperties=function(t,e){t=t.toLowerCase();for(var r=this.findClass(t),n=0;n<e.length;n++)this.addCustomPropertyCore(r,e[n])},i.prototype.addProperty=function(t,e){return this.addCustomPropertyCore(this.findClass(t),e)},i.prototype.addCustomPropertyCore=function(t,e){if(!t)return null;var r=t.createProperty(e,!0);return r&&(this.clearDynamicPropsCache(t),t.resetAllProperties()),r},i.prototype.removeProperty=function(t,e){var r=this.findClass(t);if(!r)return!1;var n=r.find(e);n&&(this.clearDynamicPropsCache(r),this.removePropertyFromClass(r,n),r.resetAllProperties(),Ae.removeProperty(r.name,e))},i.prototype.clearDynamicPropsCache=function(t){this.dynamicPropsCache={}},i.prototype.removePropertyFromClass=function(t,e){var r=t.properties.indexOf(e);r<0||t.properties.splice(r,1)},i.prototype.fillChildrenClasses=function(t,e,r){var n=this.childrenClasses[t];if(!!n)for(var o=0;o<n.length;o++)(!e||n[o].creator)&&r.push(n[o]),this.fillChildrenClasses(n[o].name,e,r)},i.prototype.findClass=function(t){t=t.toLowerCase();var e=this.classes[t];if(!e){var r=this.alternativeNames[t];if(!!r&&r!=t)return this.findClass(r)}return e},i.prototype.isDescendantOf=function(t,e){if(!t||!e)return!1;t=t.toLowerCase(),e=e.toLowerCase();var r=this.findClass(t);if(!r)return!1;var n=r;do{if(n.name===e)return!0;n=this.classes[n.parentName]}while(n);return!1},i.prototype.addAlterNativeClassName=function(t,e){this.alternativeNames[e.toLowerCase()]=t.toLowerCase()},i.prototype.generateSchema=function(t){t===void 0&&(t=void 0),t||(t="survey");var e=this.findClass(t);if(!e)return null;var r={$schema:"http://json-schema.org/draft-07/schema#",title:"SurveyJS Library json schema",type:"object",properties:{},definitions:{locstring:this.generateLocStrClass()}};return this.generateSchemaProperties(e,r,r.definitions,!0),r},i.prototype.generateLocStrClass=function(){var t={},e=x.findProperty("survey","locale");if(e){var r=e.getChoices(null);Array.isArray(r)&&(r.indexOf("en")<0&&r.splice(0,0,"en"),r.splice(0,0,"default"),r.forEach(function(n){n&&(t[n]={type:"string"})}))}return{$id:"locstring",type:"object",properties:t}},i.prototype.generateSchemaProperties=function(t,e,r,n){if(!!t){var o=e.properties,s=[];(t.name==="question"||t.name==="panel")&&(o.type={type:"string"},s.push("type"));for(var a=0;a<t.properties.length;a++){var l=t.properties[a];!!t.parentName&&!!x.findProperty(t.parentName,l.name)||(o[l.name]=this.generateSchemaProperty(l,r,n),l.isRequired&&s.push(l.name))}s.length>0&&(e.required=s)}},i.prototype.generateSchemaProperty=function(t,e,r){if(t.isLocalizable)return{oneOf:[{type:"string"},{$ref:this.getChemeRefName("locstring",r)}]};var n=t.schemaType(),o=t.schemaRef(),s={};if(n&&(s.type=n),t.hasChoices){var a=t.getChoices(null);Array.isArray(a)&&a.length>0&&(s.enum=this.getChoicesValues(a))}if(o&&(n==="array"?t.className==="string"?s.items={type:t.className}:s.items={$ref:this.getChemeRefName(t.className,r)}:s.$ref=this.getChemeRefName(o,r),this.generateChemaClass(t.className,e,!1)),t.baseClassName){var l=this.getChildrenClasses(t.baseClassName,!0);t.baseClassName=="question"&&l.push(this.findClass("panel")),s.items={anyOf:[]};for(var u=0;u<l.length;u++){var d=l[u].name;s.items.anyOf.push({$ref:this.getChemeRefName(d,r)}),this.generateChemaClass(d,e,!1)}}return s},i.prototype.getChemeRefName=function(t,e){return e?"#/definitions/"+t:t},i.prototype.generateChemaClass=function(t,e,r){if(!e[t]){var n=this.findClass(t);if(!!n){var o=!!n.parentName&&n.parentName!="base";o&&this.generateChemaClass(n.parentName,e,r);var s={type:"object",$id:t};e[t]=s;var a={properties:{}};this.generateSchemaProperties(n,a,e,r),o?s.allOf=[{$ref:this.getChemeRefName(n.parentName,r)},{properties:a.properties}]:s.properties=a.properties,Array.isArray(a.required)&&(s.required=a.required)}}},i.prototype.getChoicesValues=function(t){var e=new Array;return t.forEach(function(r){typeof r=="object"&&r.value!==void 0?e.push(r.value):e.push(r)}),e},i}(),lt=function(){function i(t,e){this.type=t,this.message=e,this.description="",this.at=-1,this.end=-1}return i.prototype.getFullDescription=function(){return this.message+(this.description?`
`+this.description:"")},i}(),fi=function(i){We(t,i);function t(e,r){var n=i.call(this,"unknownproperty","Unknown property in class '"+r+"': '"+e+"'.")||this;return n.propertyName=e,n.className=r,n}return t}(lt),xr=function(i){We(t,i);function t(e,r,n){var o=i.call(this,r,n)||this;return o.baseClassName=e,o.type=r,o.message=n,o}return t}(lt),hi=function(i){We(t,i);function t(e,r){var n=i.call(this,r,"missingtypeproperty","The property type is missing in the object. Please take a look at property: '"+e+"'.")||this;return n.propertyName=e,n.baseClassName=r,n}return t}(xr),di=function(i){We(t,i);function t(e,r){var n=i.call(this,r,"incorrecttypeproperty","The property type is incorrect in the object. Please take a look at property: '"+e+"'.")||this;return n.propertyName=e,n.baseClassName=r,n}return t}(xr),gi=function(i){We(t,i);function t(e,r){var n=i.call(this,"requiredproperty","The property '"+e+"' is required in class '"+r+"'.")||this;return n.propertyName=e,n.className=r,n}return t}(lt),_a=function(i){We(t,i);function t(e,r){var n=i.call(this,"arrayproperty","The property '"+e+"' should be an array in '"+r+"'.")||this;return n.propertyName=e,n.className=r,n}return t}(lt),ka=function(i){We(t,i);function t(e,r){var n=i.call(this,"incorrectvalue","The property value: '"+r+"' is incorrect for property '"+e.name+"'.")||this;return n.property=e,n.value=r,n}return t}(lt),ae=function(){function i(){this.errors=new Array,this.lightSerializing=!1}return Object.defineProperty(i,"metaData",{get:function(){return i.metaDataValue},enumerable:!1,configurable:!0}),i.prototype.toJsonObject=function(t,e){return this.toJsonObjectCore(t,null,e)},i.prototype.toObject=function(t,e,r){this.toObjectCore(t,e,r);var n=this.getRequiredError(e,t);n&&this.addNewError(n,t,e)},i.prototype.toObjectCore=function(t,e,r){if(!!t){var n=null,o=void 0,s=!0;if(e.getType&&(o=e.getType(),n=x.getProperties(o),s=!!o&&!x.isDescendantOf(o,"itemvalue")),!!n){e.startLoadingFromJson&&e.startLoadingFromJson(t),n=this.addDynamicProperties(e,t,n),this.options=r;var a={};a[i.typePropertyName]=!0;var l={};for(var u in t)this.setPropertyValueToObj(t,e,u,n,a,l,o,s,r);this.options=void 0,e.endLoadingFromJson&&e.endLoadingFromJson()}}},i.prototype.setPropertyValueToObj=function(t,e,r,n,o,s,a,l,u){var d=this;if(!o[r]){if(r===i.positionPropertyName){e[r]=t[r];return}var v=this.findProperty(n,r);if(!v&&l&&this.addNewError(new fi(r.toString(),a),t,e),v){var V=v.dependsOn;Array.isArray(V)&&(s[r]=!0,V.forEach(function(E){s[E]||d.setPropertyValueToObj(t,e,E,n,o,s,a,l,u)})),this.valueToObj(t[r],e,v,t,u),o[r]=!0}}},i.prototype.toJsonObjectCore=function(t,e,r){if(!t||!t.getType)return t;if(!t.isSurvey&&typeof t.getData=="function")return t.getData();var n={};e!=null&&!e.className&&(n[i.typePropertyName]=e.getObjType(t.getType()));var o=r===!0;return(!r||r===!0)&&(r={}),o&&(r.storeDefaults=o),this.propertiesToJson(t,x.getProperties(t.getType()),n,r),this.propertiesToJson(t,this.getDynamicProperties(t),n,r),n},i.prototype.getDynamicProperties=function(t){return x.getDynamicPropertiesByObj(t)},i.prototype.addDynamicProperties=function(t,e,r){if(!t.getDynamicPropertyName&&!t.getDynamicProperties)return r;if(t.getDynamicPropertyName){var n=t.getDynamicPropertyName();if(!n)return r;n&&e[n]&&(t[n]=e[n])}var o=this.getDynamicProperties(t);return o.length===0?r:[].concat(r).concat(o)},i.prototype.propertiesToJson=function(t,e,r,n){for(var o=0;o<e.length;o++)this.valueToJson(t,r,e[o],n)},i.prototype.valueToJson=function(t,e,r,n){n||(n={}),!(r.isSerializable===!1||r.isLightSerializable===!1&&this.lightSerializing)&&(n.version&&!r.isAvailableInVersion(n.version)||this.valueToJsonCore(t,e,r,n))},i.prototype.valueToJsonCore=function(t,e,r,n){var o=r.getSerializedProperty(t,n.version);if(o&&o!==r){this.valueToJsonCore(t,e,o,n);return}var s=r.getSerializableValue(t);if(!(!n.storeDefaults&&r.isDefaultValueByObj(t,s))){if(this.isValueArray(s)){for(var a=[],l=0;l<s.length;l++)a.push(this.toJsonObjectCore(s[l],r,n));s=a.length>0?a:null}else s=this.toJsonObjectCore(s,r,n);if(s!=null){var u=r.getSerializedName(n.version),d=typeof t.getPropertyValue=="function"&&t.getPropertyValue(u,null)!==null;(n.storeDefaults&&d||!r.isDefaultValueByObj(t,s))&&(!x.onSerializingProperty||!x.onSerializingProperty(t,r,s,e))&&(e[u]=this.removePosOnValueToJson(r,s))}}},i.prototype.valueToObj=function(t,e,r,n,o){if(t!=null){if(this.removePos(r,t),r!=null&&r.hasToUseSetValue){r.setValue(e,t,this);return}if(r.isArray&&!Array.isArray(t)&&!!t){t=[t];var s=!!n&&r.alternativeName&&!!n[r.alternativeName]?r.alternativeName:r.name;this.addNewError(new _a(s,e.getType()),n||t,e)}if(this.isValueArray(t)){this.valueToArray(t,e,r.name,r,o);return}var a=this.createNewObj(t,r);a.newObj&&(this.toObjectCore(t,a.newObj,o),t=a.newObj),a.error||(r!=null?(r.setValue(e,t,this),!!o&&o.validatePropertyValues&&(r.validateValue(t)||this.addNewError(new ka(r,t),n,e))):e[r.name]=t)}},i.prototype.removePosOnValueToJson=function(t,e){return!t.isCustom||!e||this.removePosFromObj(e),e},i.prototype.removePos=function(t,e){!t||!t.type||t.type.indexOf("value")<0||this.removePosFromObj(e)},i.prototype.removePosFromObj=function(t){if(!(!t||typeof t.getType=="function")){if(Array.isArray(t))for(var e=0;e<t.length;e++)this.removePosFromObj(t[e]);if(typeof t=="object"){t[i.positionPropertyName]&&delete t[i.positionPropertyName];for(var r in t)this.removePosFromObj(t[r])}}},i.prototype.isValueArray=function(t){return t&&Array.isArray(t)},i.prototype.createNewObj=function(t,e){var r={newObj:null,error:null},n=this.getClassNameForNewObj(t,e);return r.newObj=n?x.createClass(n,t):null,r.error=this.checkNewObjectOnErrors(r.newObj,t,e,n),r},i.prototype.getClassNameForNewObj=function(t,e){var r=e!=null&&e.className?e.className:void 0;if(r||(r=t[i.typePropertyName]),!r)return r;r=r.toLowerCase();var n=e.classNamePart;return n&&r.indexOf(n)<0&&(r+=n),r},i.prototype.checkNewObjectOnErrors=function(t,e,r,n){var o=null;return t?o=this.getRequiredError(t,e):r.baseClassName&&(n?o=new di(r.name,r.baseClassName):o=new hi(r.name,r.baseClassName)),o&&this.addNewError(o,e,t),o},i.prototype.getRequiredError=function(t,e){if(!t.getType||typeof t.getData=="function")return null;var r=x.findClass(t.getType());if(!r)return null;var n=r.getRequiredProperties();if(!Array.isArray(n))return null;for(var o=0;o<n.length;o++){var s=n[o];if(!!P.isValueEmpty(s.defaultValue)&&!e[s.name])return new gi(s.name,t.getType())}return null},i.prototype.addNewError=function(t,e,r){if(t.jsonObj=e,t.element=r,this.errors.push(t),!!e){var n=e[i.positionPropertyName];!n||(t.at=n.start,t.end=n.end)}},i.prototype.valueToArray=function(t,e,r,n,o){if(!(e[r]&&!this.isValueArray(e[r]))){e[r]&&t.length>0&&e[r].splice(0,e[r].length);var s=e[r]?e[r]:[];this.addValuesIntoArray(t,s,n,o),e[r]||(e[r]=s)}},i.prototype.addValuesIntoArray=function(t,e,r,n){for(var o=0;o<t.length;o++){var s=this.createNewObj(t[o],r);s.newObj?(t[o].name&&(s.newObj.name=t[o].name),t[o].valueName&&(s.newObj.valueName=t[o].valueName.toString()),e.push(s.newObj),this.toObjectCore(t[o],s.newObj,n)):s.error||e.push(t[o])}},i.prototype.findProperty=function(t,e){if(!t)return null;for(var r=0;r<t.length;r++){var n=t[r];if(n.name==e||n.alternativeName==e)return n}return null},i.typePropertyName="type",i.positionPropertyName="pos",i.metaDataValue=new pi,i}(),x=ae.metaData,yi="@survey",ce=function(){function i(){this.values=null,this.properties=null}return i.prototype.getFirstName=function(t,e){if(e===void 0&&(e=null),!t)return t;var r="";if(e&&(r=this.getFirstPropertyName(t,e),r))return r;for(var n=0;n<t.length;n++){var o=t[n];if(o=="."||o=="[")break;r+=o}return r},i.prototype.hasValue=function(t,e){e===void 0&&(e=null),e||(e=this.values);var r=this.getValueCore(t,e);return r.hasValue},i.prototype.getValue=function(t,e){e===void 0&&(e=null),e||(e=this.values);var r=this.getValueCore(t,e);return r.value},i.prototype.setValue=function(t,e,r){if(!!e){var n=this.getNonNestedObject(t,e,!0);!n||(t=n.value,e=n.text,!!t&&!!e&&(t[e]=r))}},i.prototype.getValueInfo=function(t){if(t.path){t.value=this.getValueFromPath(t.path,this.values),t.hasValue=t.value!==null&&!P.isValueEmpty(t.value),!t.hasValue&&t.path.length>1&&t.path[t.path.length-1]=="length"&&(t.hasValue=!0,t.value=0);return}var e=this.getValueCore(t.name,this.values);t.value=e.value,t.hasValue=e.hasValue,t.path=e.hasValue?e.path:null,t.sctrictCompare=e.sctrictCompare},i.prototype.isAnyKeyChanged=function(t,e){for(var r=0;r<e.length;r++){var n=e[r];if(!!n){var o=n.toLowerCase();if(t.hasOwnProperty(n)||n!==o&&t.hasOwnProperty(o))return!0;var s=this.getFirstName(n);if(!!t.hasOwnProperty(s)){if(n===s)return!0;var a=t[s];if(a!=null){if(!a.hasOwnProperty("oldValue")||!a.hasOwnProperty("newValue"))return!0;var l={};l[s]=a.oldValue;var u=this.getValue(n,l);l[s]=a.newValue;var d=this.getValue(n,l);if(!P.isTwoValueEquals(u,d,!1,!1,!1))return!0}}}}return!1},i.prototype.getValueFromPath=function(t,e){if(t.length===2&&t[0]===yi)return this.getValueFromSurvey(t[1]);for(var r=0;!!e&&r<t.length;){var n=t[r];if(P.isNumber(n)&&Array.isArray(e)&&n>=e.length)return null;e=e[n],r++}return e},i.prototype.getValueCore=function(t,e){var r=this.getQuestionDirectly(t);if(r)return{hasValue:!0,value:r.value,path:[t],sctrictCompare:r.requireStrictCompare};var n=this.getValueFromValues(t,e);if(!!t&&!n.hasValue){var o=this.getValueFromSurvey(t);o!==void 0&&(n.hasValue=!0,n.value=o,n.path=[yi,t])}return n},i.prototype.getQuestionDirectly=function(t){if(!!this.properties&&!!this.properties.survey)return this.properties.survey.getQuestionByValueName(t)},i.prototype.getValueFromSurvey=function(t){if(!!this.properties&&!!this.properties.survey)return this.properties.survey.getBuiltInVariableValue(t.toLocaleLowerCase())},i.prototype.getValueFromValues=function(t,e){var r={hasValue:!1,value:null,path:null},n=e;if(!n&&n!==0&&n!==!1)return r;t&&t.lastIndexOf(".length")>-1&&t.lastIndexOf(".length")===t.length-7&&(r.value=0,r.hasValue=!0);var o=this.getNonNestedObject(n,t,!1);return o&&(r.path=o.path,r.value=o.text?this.getObjectValue(o.value,o.text):o.value,r.hasValue=!P.isValueEmpty(r.value)),r},i.prototype.getNonNestedObject=function(t,e,r){for(var n=new Array,o=0,s=this.getNonNestedObjectCore(t,e,r,n);!s&&o<n.length;)o=n.length,s=this.getNonNestedObjectCore(t,e,r,n);return s},i.prototype.getNonNestedObjectCore=function(t,e,r,n){var o=this.getFirstPropertyName(e,t,r,n);o&&n.push(o);for(var s=o?[o]:null;e!=o&&!!t;){var a=e[0]=="[";if(a){var l=this.getObjInArray(t,e);if(!l)return null;t=l.value,e=l.text,s.push(l.index)}else{if(!o&&e==this.getFirstName(e))return{value:t,text:e,path:s};if(t=this.getObjectValue(t,o),P.isValueEmpty(t)&&!r)return null;e=e.substring(o.length)}!!e&&e[0]=="."&&(e=e.substring(1)),o=this.getFirstPropertyName(e,t,r,n),o&&s.push(o)}return{value:t,text:e,path:s}},i.prototype.getObjInArray=function(t,e){if(!Array.isArray(t))return null;for(var r=1,n="";r<e.length&&e[r]!="]";)n+=e[r],r++;return e=r<e.length?e.substring(r+1):"",r=this.getIntValue(n),r<0||r>=t.length?null:{value:t[r],text:e,index:r}},i.prototype.getFirstPropertyName=function(t,e,r,n){if(r===void 0&&(r=!1),n===void 0&&(n=void 0),!t||(e||(e={}),e.hasOwnProperty(t)))return t;var o=t.toLowerCase(),s=o[0],a=s.toUpperCase();for(var l in e)if(!(Array.isArray(n)&&n.indexOf(l)>-1)){var u=l[0];if(u===a||u===s){var d=l.toLowerCase();if(d==o)return l;if(o.length<=d.length)continue;var v=o[d.length];if(v!="."&&v!="[")continue;if(d==o.substring(0,d.length))return l}}if(r&&t[0]!=="["){var V=t.indexOf(".");return V>-1&&(t=t.substring(0,V),e[t]={}),t}return""},i.prototype.getObjectValue=function(t,e){return e?t[e]:null},i.prototype.getIntValue=function(t){return t=="0"||(t|0)>0&&t%1==0?Number(t):-1},i}(),je=function(){function i(){}return i.disposedObjectChangedProperty=function(t,e){i.warn('An attempt to set a property "'+t+'" of a disposed object "'+e+'"')},i.inCorrectQuestionValue=function(t,e){var r=JSON.stringify(e,null,3);i.warn("An attempt to assign an incorrect value"+r+' to the following question: "'+t+'"')},i.warn=function(t){console.warn(t)},i.error=function(t){console.error(t)},i}(),J=function(){function i(){this.functionHash={},this.isAsyncHash={}}return i.prototype.register=function(t,e,r){r===void 0&&(r=!1),this.functionHash[t]=e,r&&(this.isAsyncHash[t]=!0)},i.prototype.unregister=function(t){delete this.functionHash[t],delete this.isAsyncHash[t]},i.prototype.hasFunction=function(t){return!!this.functionHash[t]},i.prototype.isAsyncFunction=function(t){return!!this.isAsyncHash[t]},i.prototype.clear=function(){this.functionHash={}},i.prototype.getAll=function(){var t=[];for(var e in this.functionHash)t.push(e);return t.sort()},i.prototype.run=function(t,e,r,n){r===void 0&&(r=null);var o=this.functionHash[t];if(!o)return je.warn("Unknown function name: "+t),null;var s={func:o};if(r)for(var a in r)s[a]=r[a];return s.func(e,n)},i.Instance=new i,i}(),Ba=J.Instance.register;function bt(i,t){if(i!=null)if(Array.isArray(i))for(var e=0;e<i.length;e++)bt(i[e],t);else P.isNumber(i)&&(i=P.getNumber(i)),t.push(i)}function mi(i){var t=[];bt(i,t);for(var e=0,r=0;r<t.length;r++)e=P.correctAfterPlusMinis(e,t[r],e+t[r]);return e}J.Instance.register("sum",mi);function vi(i,t){var e=[];bt(i,e);for(var r=void 0,n=0;n<e.length;n++)r===void 0&&(r=e[n]),t?r>e[n]&&(r=e[n]):r<e[n]&&(r=e[n]);return r}function qa(i){return vi(i,!0)}J.Instance.register("min",qa);function Qa(i){return vi(i,!1)}J.Instance.register("max",Qa);function Ha(i){var t=[];return bt(i,t),t.length}J.Instance.register("count",Ha);function za(i){var t=[];bt(i,t);var e=mi(i);return t.length>0?e/t.length:0}J.Instance.register("avg",za);function Ua(i,t){if(i.length<2||i.length>3)return null;var e=i[0];if(!e||!Array.isArray(e)&&!Array.isArray(Object.keys(e)))return null;var r=i[1];if(typeof r!="string"&&!(r instanceof String))return null;var n=i.length>2?i[2]:void 0;if(typeof n!="string"&&!(n instanceof String)&&(n=void 0),!n){var o=Array.isArray(t)&&t.length>2?t[2]:void 0;o&&!!o.toString()&&(n=o.toString())}return{data:e,name:r,expression:n}}function Wa(i){return typeof i=="string"?P.isNumber(i)?P.getNumber(i):void 0:i}function bi(i,t,e,r,n,o){if(!i||P.isValueEmpty(i[t])||o&&!o.run(i))return e;var s=n?Wa(i[t]):1;return r(e,s)}function kt(i,t,e,r){r===void 0&&(r=!0);var n=Ua(i,t);if(!!n){var o=n.expression?new ve(n.expression):void 0;o&&o.isAsync&&(o=void 0);var s=void 0;if(Array.isArray(n.data))for(var a=0;a<n.data.length;a++)s=bi(n.data[a],n.name,s,e,r,o);else for(var l in n.data)s=bi(n.data[l],n.name,s,e,r,o);return s}}function Ci(i,t){var e=kt(i,t,function(r,n){return r==null&&(r=0),n==null||n==null?r:P.correctAfterPlusMinis(r,n,r+n)});return e!==void 0?e:0}J.Instance.register("sumInArray",Ci);function $a(i,t){return kt(i,t,function(e,r){return e==null?r:r==null||r==null||e<r?e:r})}J.Instance.register("minInArray",$a);function Ja(i,t){return kt(i,t,function(e,r){return e==null?r:r==null||r==null||e>r?e:r})}J.Instance.register("maxInArray",Ja);function Pi(i,t){var e=kt(i,t,function(r,n){return r==null&&(r=0),n==null||n==null?r:r+1},!1);return e!==void 0?e:0}J.Instance.register("countInArray",Pi);function Ga(i,t){var e=Pi(i,t);return e==0?0:Ci(i,t)/e}J.Instance.register("avgInArray",Ga);function Za(i){return!i&&i.length!==3?"":i[0]?i[1]:i[2]}J.Instance.register("iif",Za);function Ka(i){return!i&&i.length<1||!i[0]?null:new Date(i[0])}J.Instance.register("getDate",Ka);function wi(i,t,e){if(e==="days")return Oi([i,t]);var r=i?new Date(i):new Date,n=t?new Date(t):new Date,o=n.getFullYear()-r.getFullYear();e=e||"years";var s=o*12+n.getMonth()-r.getMonth();return n.getDate()<r.getDate()&&(s-=1),e==="months"?s:~~(s/12)}function Ya(i){return!Array.isArray(i)||i.length<1||!i[0]?null:wi(i[0],void 0,(i.length>1?i[1]:"")||"years")}J.Instance.register("age",Ya);function Xa(i){return!Array.isArray(i)||i.length<2||!i[0]||!i[1]?null:wi(i[0],i[1],(i.length>2?i[2]:"")||"days")}J.Instance.register("dateDiff",Xa);function Vi(i){if(!i)return!1;for(var t=i.questions,e=0;e<t.length;e++)if(!t[e].validate(!1))return!1;return!0}function el(i){if(!i&&i.length<1||!i[0]||!this.survey)return!1;var t=i[0],e=this.survey.getPageByName(t);if(e||(e=this.survey.getPanelByName(t)),!e){var r=this.survey.getQuestionByName(t);if(!r||!Array.isArray(r.panels))return!1;if(i.length>1)i[1]<r.panels.length&&(e=r.panels[i[1]]);else{for(var n=0;n<r.panels.length;n++)if(!Vi(r.panels[n]))return!1;return!0}}return Vi(e)}J.Instance.register("isContainerReady",el);function tl(){return this.survey&&this.survey.isDisplayMode}J.Instance.register("isDisplayMode",tl);function rl(){return new Date}J.Instance.register("currentDate",rl);function xi(i){var t=new Date;return b.localization.useLocalTimeZone?t.setHours(0,0,0,0):t.setUTCHours(0,0,0,0),Array.isArray(i)&&i.length==1&&t.setDate(t.getDate()+i[0]),t}J.Instance.register("today",xi);function nl(i){if(!(i.length!==1||!i[0]))return new Date(i[0]).getFullYear()}J.Instance.register("getYear",nl);function il(){return new Date().getFullYear()}J.Instance.register("currentYear",il);function Oi(i){if(!Array.isArray(i)||i.length!==2||!i[0]||!i[1])return 0;var t=new Date(i[0]),e=new Date(i[1]),r=Math.abs(e-t);return Math.ceil(r/(1e3*60*60*24))}J.Instance.register("diffDays",Oi);function Bt(i){var t=xi(void 0);return i&&i[0]&&(t=new Date(i[0])),t}function ol(i){var t=Bt(i);return t.getFullYear()}J.Instance.register("year",ol);function sl(i){var t=Bt(i);return t.getMonth()+1}J.Instance.register("month",sl);function al(i){var t=Bt(i);return t.getDate()}J.Instance.register("day",al);function ll(i){var t=Bt(i);return t.getDay()}J.Instance.register("weekday",ll);function Si(i,t){if(!(!i||!t)){for(var e=["row","panel","survey"],r=0;r<e.length;r++){var n=i[e[r]];if(n&&n.getQuestionByName){var o=n.getQuestionByName(t);if(o)return o}}return null}}function ul(i){var t=Si(this,i[0]);return t?i.length>1&&!P.isValueEmpty(i[1])?t.getDisplayValue(!0,i[1]):t.displayValue:""}J.Instance.register("displayValue",ul);function cl(i){if(!(i.length!==2||!i[0]||!i[1])){var t=Si(this,i[0]);return t?t[i[1]]:void 0}}J.Instance.register("propertyValue",cl);function pl(i){if(i.length<2)return"";var t=i[0];if(!t||typeof t!="string")return"";var e=i[1];if(!P.isNumber(e))return"";var r=i.length>2?i[2]:void 0;return P.isNumber(r)?t.substring(e,r):t.substring(e)}J.Instance.register("substring",pl);var ut=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ct=function(){function i(){}return i.prototype.toString=function(t){return""},i.prototype.hasFunction=function(){return!1},i.prototype.hasAsyncFunction=function(){return!1},i.prototype.addToAsyncList=function(t){},i.prototype.isEqual=function(t){return!!t&&t.getType()===this.getType()&&this.isContentEqual(t)},i.prototype.areOperatorsEquals=function(t,e){return!t&&!e||!!t&&t.isEqual(e)},i}(),Ti=function(i){ut(t,i);function t(e,r,n,o){r===void 0&&(r=null),n===void 0&&(n=null),o===void 0&&(o=!1);var s=i.call(this)||this;return s.operatorName=e,s.left=r,s.right=n,s.isArithmeticValue=o,o?s.consumer=Pe.binaryFunctions.arithmeticOp(e):s.consumer=Pe.binaryFunctions[e],s.consumer==null&&Pe.throwInvalidOperatorError(e),s}return Object.defineProperty(t.prototype,"requireStrictCompare",{get:function(){return this.getIsOperandRequireStrict(this.left)||this.getIsOperandRequireStrict(this.right)},enumerable:!1,configurable:!0}),t.prototype.getIsOperandRequireStrict=function(e){return!!e&&e.requireStrictCompare},t.prototype.getType=function(){return"binary"},Object.defineProperty(t.prototype,"isArithmetic",{get:function(){return this.isArithmeticValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isConjunction",{get:function(){return this.operatorName=="or"||this.operatorName=="and"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"conjunction",{get:function(){return this.isConjunction?this.operatorName:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"operator",{get:function(){return this.operatorName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftOperand",{get:function(){return this.left},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightOperand",{get:function(){return this.right},enumerable:!1,configurable:!0}),t.prototype.isContentEqual=function(e){var r=e;return r.operator===this.operator&&this.areOperatorsEquals(this.left,r.left)&&this.areOperatorsEquals(this.right,r.right)},t.prototype.evaluateParam=function(e,r){return e==null?null:e.evaluate(r)},t.prototype.evaluate=function(e){return this.consumer.call(this,this.evaluateParam(this.left,e),this.evaluateParam(this.right,e),this.requireStrictCompare)},t.prototype.toString=function(e){if(e===void 0&&(e=void 0),e){var r=e(this);if(r)return r}return"("+Pe.safeToString(this.left,e)+" "+Pe.operatorToString(this.operatorName)+" "+Pe.safeToString(this.right,e)+")"},t.prototype.setVariables=function(e){this.left!=null&&this.left.setVariables(e),this.right!=null&&this.right.setVariables(e)},t.prototype.hasFunction=function(){return!!this.left&&this.left.hasFunction()||!!this.right&&this.right.hasFunction()},t.prototype.hasAsyncFunction=function(){return!!this.left&&this.left.hasAsyncFunction()||!!this.right&&this.right.hasAsyncFunction()},t.prototype.addToAsyncList=function(e){this.left&&this.left.addToAsyncList(e),this.right&&this.right.addToAsyncList(e)},t}(ct),Or=function(i){ut(t,i);function t(e,r){var n=i.call(this)||this;return n.expressionValue=e,n.operatorName=r,n.consumer=Pe.unaryFunctions[r],n.consumer==null&&Pe.throwInvalidOperatorError(r),n}return Object.defineProperty(t.prototype,"operator",{get:function(){return this.operatorName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"expression",{get:function(){return this.expressionValue},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"unary"},t.prototype.toString=function(e){if(e===void 0&&(e=void 0),e){var r=e(this);if(r)return r}return Pe.operatorToString(this.operatorName)+" "+this.expression.toString(e)},t.prototype.isContentEqual=function(e){var r=e;return r.operator==this.operator&&this.areOperatorsEquals(this.expression,r.expression)},t.prototype.hasFunction=function(){return this.expression.hasFunction()},t.prototype.hasAsyncFunction=function(){return this.expression.hasAsyncFunction()},t.prototype.addToAsyncList=function(e){this.expression.addToAsyncList(e)},t.prototype.evaluate=function(e){var r=this.expression.evaluate(e);return this.consumer.call(this,r)},t.prototype.setVariables=function(e){this.expression.setVariables(e)},t}(ct),qt=function(i){ut(t,i);function t(e){var r=i.call(this)||this;return r.values=e,r}return t.prototype.getType=function(){return"array"},t.prototype.toString=function(e){if(e===void 0&&(e=void 0),e){var r=e(this);if(r)return r}return"["+this.values.map(function(n){return n.toString(e)}).join(", ")+"]"},t.prototype.evaluate=function(e){return this.values.map(function(r){return r.evaluate(e)})},t.prototype.setVariables=function(e){this.values.forEach(function(r){r.setVariables(e)})},t.prototype.hasFunction=function(){return this.values.some(function(e){return e.hasFunction()})},t.prototype.hasAsyncFunction=function(){return this.values.some(function(e){return e.hasAsyncFunction()})},t.prototype.addToAsyncList=function(e){this.values.forEach(function(r){return r.addToAsyncList(e)})},t.prototype.isContentEqual=function(e){var r=e;if(r.values.length!==this.values.length)return!1;for(var n=0;n<this.values.length;n++)if(!r.values[n].isEqual(this.values[n]))return!1;return!0},t}(ct),Sr=function(i){ut(t,i);function t(e){var r=i.call(this)||this;return r.value=e,r}return t.prototype.getType=function(){return"const"},t.prototype.toString=function(e){if(e===void 0&&(e=void 0),e){var r=e(this);if(r)return r}return this.value.toString()},Object.defineProperty(t.prototype,"correctValue",{get:function(){return this.getCorrectValue(this.value)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requireStrictCompare",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.evaluate=function(){return this.getCorrectValue(this.value)},t.prototype.setVariables=function(e){},t.prototype.getCorrectValue=function(e){if(!e||typeof e!="string")return e;if(Pe.isBooleanValue(e))return e.toLowerCase()==="true";if(e.length>1&&this.isQuote(e[0])&&this.isQuote(e[e.length-1]))return e.substring(1,e.length-1);if(P.isNumber(e)){if(e[0]==="0"&&e.indexOf("0x")!=0){var r=e.length,n=r>1&&(e[1]==="."||e[1]===",");if(!n&&r>1||n&&r<2)return e}return P.getNumber(e)}return e},t.prototype.isContentEqual=function(e){var r=e;return r.value==this.value},t.prototype.isQuote=function(e){return e=="'"||e=='"'},t}(ct),Ii=function(i){ut(t,i);function t(e){var r=i.call(this,e)||this;return r.variableName=e,r.valueInfo={},r.useValueAsItIs=!1,!!r.variableName&&r.variableName.length>1&&r.variableName[0]===t.DisableConversionChar&&(r.variableName=r.variableName.substring(1),r.useValueAsItIs=!0),r}return Object.defineProperty(t,"DisableConversionChar",{get:function(){return b.expressionDisableConversionChar},set:function(e){b.expressionDisableConversionChar=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requireStrictCompare",{get:function(){return this.valueInfo.sctrictCompare===!0},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"variable"},t.prototype.toString=function(e){if(e===void 0&&(e=void 0),e){var r=e(this);if(r)return r}var n=this.useValueAsItIs?t.DisableConversionChar:"";return"{"+n+this.variableName+"}"},Object.defineProperty(t.prototype,"variable",{get:function(){return this.variableName},enumerable:!1,configurable:!0}),t.prototype.evaluate=function(e){return this.valueInfo.name=this.variableName,e.getValueInfo(this.valueInfo),this.valueInfo.hasValue?this.getCorrectValue(this.valueInfo.value):null},t.prototype.setVariables=function(e){e.push(this.variableName)},t.prototype.getCorrectValue=function(e){return this.useValueAsItIs?e:i.prototype.getCorrectValue.call(this,e)},t.prototype.isContentEqual=function(e){var r=e;return r.variable==this.variable},t}(Sr),Ri=function(i){ut(t,i);function t(e,r){var n=i.call(this)||this;return n.originalValue=e,n.parameters=r,n.isReadyValue=!1,Array.isArray(r)&&r.length===0&&(n.parameters=new qt([])),n}return t.prototype.getType=function(){return"function"},t.prototype.evaluateAsync=function(e){var r=this;this.isReadyValue=!1;var n=new ce;n.values=P.createCopy(e.values),n.properties=P.createCopy(e.properties),n.properties.returnResult=function(o){r.asynResult=o,r.isReadyValue=!0,r.onAsyncReady()},this.evaluateCore(n)},t.prototype.evaluate=function(e){return this.isReady?this.asynResult:this.evaluateCore(e)},t.prototype.evaluateCore=function(e){return J.Instance.run(this.originalValue,this.parameters.evaluate(e),e.properties,this.parameters.values)},t.prototype.toString=function(e){if(e===void 0&&(e=void 0),e){var r=e(this);if(r)return r}return this.originalValue+"("+this.parameters.toString(e)+")"},t.prototype.setVariables=function(e){this.parameters.setVariables(e)},Object.defineProperty(t.prototype,"isReady",{get:function(){return this.isReadyValue},enumerable:!1,configurable:!0}),t.prototype.hasFunction=function(){return!0},t.prototype.hasAsyncFunction=function(){return J.Instance.isAsyncFunction(this.originalValue)},t.prototype.addToAsyncList=function(e){this.hasAsyncFunction()&&e.push(this)},t.prototype.isContentEqual=function(e){var r=e;return r.originalValue==this.originalValue&&this.areOperatorsEquals(r.parameters,this.parameters)},t}(ct),Pe=function(){function i(){}return i.throwInvalidOperatorError=function(t){throw new Error("Invalid operator: '"+t+"'")},i.safeToString=function(t,e){return t==null?"":t.toString(e)},i.toOperandString=function(t){return!!t&&!P.isNumber(t)&&!i.isBooleanValue(t)&&(t="'"+t+"'"),t},i.isBooleanValue=function(t){return!!t&&(t.toLowerCase()==="true"||t.toLowerCase()==="false")},i.countDecimals=function(t){if(P.isNumber(t)&&Math.floor(t)!==t){var e=t.toString().split(".");return e.length>1&&e[1].length||0}return 0},i.plusMinus=function(t,e,r){var n=i.countDecimals(t),o=i.countDecimals(e);if(n>0||o>0){var s=Math.max(n,o);r=parseFloat(r.toFixed(s))}return r},i.isTwoValueEquals=function(t,e,r){return r===void 0&&(r=!0),t==="undefined"&&(t=void 0),e==="undefined"&&(e=void 0),P.isTwoValueEquals(t,e,r)},i.operatorToString=function(t){var e=i.signs[t];return e==null?t:e},i.convertValForDateCompare=function(t,e){if(e instanceof Date&&typeof t=="string"){var r=new Date(t);return r.setHours(0,0,0),r}return t},i.unaryFunctions={empty:function(t){return P.isValueEmpty(t)},notempty:function(t){return!i.unaryFunctions.empty(t)},negate:function(t){return!t}},i.binaryFunctions={arithmeticOp:function(t){var e=function(r,n){return P.isValueEmpty(r)?typeof n=="number"?0:typeof r=="string"?r:typeof n=="string"?"":Array.isArray(n)?[]:0:r};return function(r,n){r=e(r,n),n=e(n,r);var o=i.binaryFunctions[t];return o==null?null:o.call(this,r,n)}},and:function(t,e){return t&&e},or:function(t,e){return t||e},plus:function(t,e){return P.sumAnyValues(t,e)},minus:function(t,e){return P.correctAfterPlusMinis(t,e,t-e)},mul:function(t,e){return P.correctAfterMultiple(t,e,t*e)},div:function(t,e){return e?t/e:null},mod:function(t,e){return e?t%e:null},power:function(t,e){return Math.pow(t,e)},greater:function(t,e){return t==null||e==null?!1:(t=i.convertValForDateCompare(t,e),e=i.convertValForDateCompare(e,t),t>e)},less:function(t,e){return t==null||e==null?!1:(t=i.convertValForDateCompare(t,e),e=i.convertValForDateCompare(e,t),t<e)},greaterorequal:function(t,e){return i.binaryFunctions.equal(t,e)?!0:i.binaryFunctions.greater(t,e)},lessorequal:function(t,e){return i.binaryFunctions.equal(t,e)?!0:i.binaryFunctions.less(t,e)},equal:function(t,e,r){return t=i.convertValForDateCompare(t,e),e=i.convertValForDateCompare(e,t),i.isTwoValueEquals(t,e,r!==!0)},notequal:function(t,e,r){return!i.binaryFunctions.equal(t,e,r)},contains:function(t,e){return i.binaryFunctions.containsCore(t,e,!0)},notcontains:function(t,e){return!t&&!P.isValueEmpty(e)?!0:i.binaryFunctions.containsCore(t,e,!1)},anyof:function(t,e){if(P.isValueEmpty(t)&&P.isValueEmpty(e))return!0;if(P.isValueEmpty(t)||!Array.isArray(t)&&t.length===0)return!1;if(P.isValueEmpty(e))return!0;if(!Array.isArray(t))return i.binaryFunctions.contains(e,t);if(!Array.isArray(e))return i.binaryFunctions.contains(t,e);for(var r=0;r<e.length;r++)if(i.binaryFunctions.contains(t,e[r]))return!0;return!1},allof:function(t,e){if(!t&&!P.isValueEmpty(e))return!1;if(!Array.isArray(e))return i.binaryFunctions.contains(t,e);for(var r=0;r<e.length;r++)if(!i.binaryFunctions.contains(t,e[r]))return!1;return!0},containsCore:function(t,e,r){if(!t&&t!==0&&t!==!1)return!1;if(t.length||(t=t.toString(),(typeof e=="string"||e instanceof String)&&(t=t.toUpperCase(),e=e.toUpperCase())),typeof t=="string"||t instanceof String){if(!e)return!1;e=e.toString();var n=t.indexOf(e)>-1;return r?n:!n}for(var o=Array.isArray(e)?e:[e],s=0;s<o.length;s++){var a=0;for(e=o[s];a<t.length&&!i.isTwoValueEquals(t[a],e);a++);if(a==t.length)return!r}return r}},i.signs={less:"<",lessorequal:"<=",greater:">",greaterorequal:">=",equal:"==",notequal:"!=",plus:"+",minus:"-",mul:"*",div:"/",and:"and",or:"or",power:"^",mod:"%",negate:"!"},i}(),fl=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Tr=function(i){fl(t,i);function t(e,r,n,o){var s=i.call(this)||this;return s.message=e,s.expected=r,s.found=n,s.location=o,s.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(s,t),s}return t.buildMessage=function(e,r){function n(d){return d.charCodeAt(0).toString(16).toUpperCase()}function o(d){return d.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+n(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+n(v)})}function s(d){return d.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+n(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+n(v)})}function a(d){switch(d.type){case"literal":return'"'+o(d.text)+'"';case"class":var v=d.parts.map(function(V){return Array.isArray(V)?s(V[0])+"-"+s(V[1]):s(V)});return"["+(d.inverted?"^":"")+v+"]";case"any":return"any character";case"end":return"end of input";case"other":return d.description}}function l(d){var v=d.map(a),V,E;if(v.sort(),v.length>0){for(V=1,E=1;V<v.length;V++)v[V-1]!==v[V]&&(v[E]=v[V],E++);v.length=E}switch(v.length){case 1:return v[0];case 2:return v[0]+" or "+v[1];default:return v.slice(0,-1).join(", ")+", or "+v[v.length-1]}}function u(d){return d?'"'+o(d)+'"':"end of input"}return"Expected "+l(e)+" but "+u(r)+" found."},t}(Error);function hl(i,t){t=t!==void 0?t:{};var e={},r={Expression:at},n=at,o=function(c,f){return La(c,f,!0)},s="||",a=Q("||",!1),l="or",u=Q("or",!0),d=function(){return"or"},v="&&",V=Q("&&",!1),E="and",I=Q("and",!0),k=function(){return"and"},N=function(c,f){return La(c,f)},j="<=",H=Q("<=",!1),te="lessorequal",me=Q("lessorequal",!0),xe=function(){return"lessorequal"},Ue=">=",Kn=Q(">=",!1),Ft="greaterorequal",pp=Q("greaterorequal",!0),fp=function(){return"greaterorequal"},_s="==",hp=Q("==",!1),ks="equal",Bs=Q("equal",!0),qs=function(){return"equal"},dp="=",gp=Q("=",!1),Qs="!=",yp=Q("!=",!1),mp="notequal",vp=Q("notequal",!0),bp=function(){return"notequal"},Cp="<",Pp=Q("<",!1),wp="less",Vp=Q("less",!0),xp=function(){return"less"},Op=">",Sp=Q(">",!1),Tp="greater",Ip=Q("greater",!0),Rp=function(){return"greater"},Ep="+",Dp=Q("+",!1),Ap=function(){return"plus"},Lp="-",Mp=Q("-",!1),jp=function(){return"minus"},Fp="*",Np=Q("*",!1),_p=function(){return"mul"},kp="/",Bp=Q("/",!1),qp=function(){return"div"},Qp="%",Hp=Q("%",!1),zp=function(){return"mod"},Up="^",Wp=Q("^",!1),$p="power",Jp=Q("power",!0),Gp=function(){return"power"},Hs="*=",Zp=Q("*=",!1),Kp="contains",Yp=Q("contains",!0),Xp="contain",ef=Q("contain",!0),tf=function(){return"contains"},rf="notcontains",nf=Q("notcontains",!0),of="notcontain",sf=Q("notcontain",!0),af=function(){return"notcontains"},lf="anyof",uf=Q("anyof",!0),cf=function(){return"anyof"},pf="allof",ff=Q("allof",!0),hf=function(){return"allof"},zs="(",Us=Q("(",!1),Ws=")",$s=Q(")",!1),df=function(c){return c},gf=function(c,f){return new Ri(c,f)},yf="!",mf=Q("!",!1),vf="negate",bf=Q("negate",!0),Cf=function(c){return new Or(c,"negate")},Pf=function(c,f){return new Or(c,f)},wf="empty",Vf=Q("empty",!0),xf=function(){return"empty"},Of="notempty",Sf=Q("notempty",!0),Tf=function(){return"notempty"},Js="undefined",If=Q("undefined",!1),Gs="null",Rf=Q("null",!1),Ef=function(){return null},Df=function(c){return new Sr(c)},Af="{",Lf=Q("{",!1),Mf="}",jf=Q("}",!1),Ff=function(c){return new Ii(c)},Yn=function(c){return c},Zs="''",Nf=Q("''",!1),Ks=function(){return""},Ys='""',_f=Q('""',!1),Xs="'",ea=Q("'",!1),ta=function(c){return"'"+c+"'"},ra='"',na=Q('"',!1),kf="[",Bf=Q("[",!1),qf="]",Qf=Q("]",!1),Hf=function(c){return c},ia=",",oa=Q(",",!1),zf=function(c,f){if(c==null)return new qt([]);var C=[c];if(Array.isArray(f))for(var g=Dh(f),w=3;w<g.length;w+=4)C.push(g[w]);return new qt(C)},Uf="true",Wf=Q("true",!0),$f=function(){return!0},Jf="false",Gf=Q("false",!0),Zf=function(){return!1},sa="0x",Kf=Q("0x",!1),Yf=function(){return parseInt(wr(),16)},Xf=/^[\-]/,eh=st(["-"],!1,!1),th=function(c,f){return c==null?f:-f},rh=".",nh=Q(".",!1),ih=function(){return parseFloat(wr())},oh=function(){return parseInt(wr(),10)},sh="0",ah=Q("0",!1),lh=function(){return 0},aa=function(c){return c.join("")},la="\\'",uh=Q("\\'",!1),ch=function(){return"'"},ua='\\"',ph=Q('\\"',!1),fh=function(){return'"'},hh=/^[^"']/,dh=st(['"',"'"],!0,!1),Xn=function(){return wr()},gh=/^[^{}]/,yh=st(["{","}"],!0,!1),ca=/^[0-9]/,pa=st([["0","9"]],!1,!1),fa=/^[1-9]/,ha=st([["1","9"]],!1,!1),da=/^[a-zA-Z_]/,ga=st([["a","z"],["A","Z"],"_"],!1,!1),mh=bh("whitespace"),ya=/^[ \t\n\r]/,ma=st([" ","	",`
`,"\r"],!1,!1),p=0,B=0,Cr=[{line:1,column:1}],De=0,ei=[],A=0,F={},Pr;if(t.startRule!==void 0){if(!(t.startRule in r))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');n=r[t.startRule]}function wr(){return i.substring(B,p)}function Q(c,f){return{type:"literal",text:c,ignoreCase:f}}function st(c,f,C){return{type:"class",parts:c,inverted:f,ignoreCase:C}}function vh(){return{type:"end"}}function bh(c){return{type:"other",description:c}}function va(c){var f=Cr[c],C;if(f)return f;for(C=c-1;!Cr[C];)C--;for(f=Cr[C],f={line:f.line,column:f.column};C<c;)i.charCodeAt(C)===10?(f.line++,f.column=1):f.column++,C++;return Cr[c]=f,f}function ba(c,f){var C=va(c),g=va(f);return{start:{offset:c,line:C.line,column:C.column},end:{offset:f,line:g.line,column:g.column}}}function M(c){p<De||(p>De&&(De=p,ei=[]),ei.push(c))}function Ch(c,f,C){return new Tr(Tr.buildMessage(c,f),c,f,C)}function at(){var c,f,C,g,w,T,L,_,K,Y=p*34+0,li=F[Y];if(li)return p=li.nextPos,li.result;if(c=p,f=U(),f!==e)if(C=ti(),C!==e){for(g=[],w=p,T=U(),T!==e?(L=Ca(),L!==e?(_=U(),_!==e?(K=ti(),K!==e?(T=[T,L,_,K],w=T):(p=w,w=e)):(p=w,w=e)):(p=w,w=e)):(p=w,w=e);w!==e;)g.push(w),w=p,T=U(),T!==e?(L=Ca(),L!==e?(_=U(),_!==e?(K=ti(),K!==e?(T=[T,L,_,K],w=T):(p=w,w=e)):(p=w,w=e)):(p=w,w=e)):(p=w,w=e);g!==e?(w=U(),w!==e?(B=c,f=o(C,g),c=f):(p=c,c=e)):(p=c,c=e)}else p=c,c=e;else p=c,c=e;return F[Y]={nextPos:p,result:c},c}function Ca(){var c,f,C=p*34+1,g=F[C];return g?(p=g.nextPos,g.result):(c=p,i.substr(p,2)===s?(f=s,p+=2):(f=e,A===0&&M(a)),f===e&&(i.substr(p,2).toLowerCase()===l?(f=i.substr(p,2),p+=2):(f=e,A===0&&M(u))),f!==e&&(B=c,f=d()),c=f,F[C]={nextPos:p,result:c},c)}function ti(){var c,f,C,g,w,T,L,_,K=p*34+2,Y=F[K];if(Y)return p=Y.nextPos,Y.result;if(c=p,f=ri(),f!==e){for(C=[],g=p,w=U(),w!==e?(T=Pa(),T!==e?(L=U(),L!==e?(_=ri(),_!==e?(w=[w,T,L,_],g=w):(p=g,g=e)):(p=g,g=e)):(p=g,g=e)):(p=g,g=e);g!==e;)C.push(g),g=p,w=U(),w!==e?(T=Pa(),T!==e?(L=U(),L!==e?(_=ri(),_!==e?(w=[w,T,L,_],g=w):(p=g,g=e)):(p=g,g=e)):(p=g,g=e)):(p=g,g=e);C!==e?(B=c,f=o(f,C),c=f):(p=c,c=e)}else p=c,c=e;return F[K]={nextPos:p,result:c},c}function Pa(){var c,f,C=p*34+3,g=F[C];return g?(p=g.nextPos,g.result):(c=p,i.substr(p,2)===v?(f=v,p+=2):(f=e,A===0&&M(V)),f===e&&(i.substr(p,3).toLowerCase()===E?(f=i.substr(p,3),p+=3):(f=e,A===0&&M(I))),f!==e&&(B=c,f=k()),c=f,F[C]={nextPos:p,result:c},c)}function ri(){var c,f,C,g,w,T,L,_,K=p*34+4,Y=F[K];if(Y)return p=Y.nextPos,Y.result;if(c=p,f=ni(),f!==e){for(C=[],g=p,w=U(),w!==e?(T=wa(),T!==e?(L=U(),L!==e?(_=ni(),_!==e?(w=[w,T,L,_],g=w):(p=g,g=e)):(p=g,g=e)):(p=g,g=e)):(p=g,g=e);g!==e;)C.push(g),g=p,w=U(),w!==e?(T=wa(),T!==e?(L=U(),L!==e?(_=ni(),_!==e?(w=[w,T,L,_],g=w):(p=g,g=e)):(p=g,g=e)):(p=g,g=e)):(p=g,g=e);C!==e?(B=c,f=N(f,C),c=f):(p=c,c=e)}else p=c,c=e;return F[K]={nextPos:p,result:c},c}function wa(){var c,f,C=p*34+5,g=F[C];return g?(p=g.nextPos,g.result):(c=p,i.substr(p,2)===j?(f=j,p+=2):(f=e,A===0&&M(H)),f===e&&(i.substr(p,11).toLowerCase()===te?(f=i.substr(p,11),p+=11):(f=e,A===0&&M(me))),f!==e&&(B=c,f=xe()),c=f,c===e&&(c=p,i.substr(p,2)===Ue?(f=Ue,p+=2):(f=e,A===0&&M(Kn)),f===e&&(i.substr(p,14).toLowerCase()===Ft?(f=i.substr(p,14),p+=14):(f=e,A===0&&M(pp))),f!==e&&(B=c,f=fp()),c=f,c===e&&(c=p,i.substr(p,2)===_s?(f=_s,p+=2):(f=e,A===0&&M(hp)),f===e&&(i.substr(p,5).toLowerCase()===ks?(f=i.substr(p,5),p+=5):(f=e,A===0&&M(Bs))),f!==e&&(B=c,f=qs()),c=f,c===e&&(c=p,i.charCodeAt(p)===61?(f=dp,p++):(f=e,A===0&&M(gp)),f===e&&(i.substr(p,5).toLowerCase()===ks?(f=i.substr(p,5),p+=5):(f=e,A===0&&M(Bs))),f!==e&&(B=c,f=qs()),c=f,c===e&&(c=p,i.substr(p,2)===Qs?(f=Qs,p+=2):(f=e,A===0&&M(yp)),f===e&&(i.substr(p,8).toLowerCase()===mp?(f=i.substr(p,8),p+=8):(f=e,A===0&&M(vp))),f!==e&&(B=c,f=bp()),c=f,c===e&&(c=p,i.charCodeAt(p)===60?(f=Cp,p++):(f=e,A===0&&M(Pp)),f===e&&(i.substr(p,4).toLowerCase()===wp?(f=i.substr(p,4),p+=4):(f=e,A===0&&M(Vp))),f!==e&&(B=c,f=xp()),c=f,c===e&&(c=p,i.charCodeAt(p)===62?(f=Op,p++):(f=e,A===0&&M(Sp)),f===e&&(i.substr(p,7).toLowerCase()===Tp?(f=i.substr(p,7),p+=7):(f=e,A===0&&M(Ip))),f!==e&&(B=c,f=Rp()),c=f)))))),F[C]={nextPos:p,result:c},c)}function ni(){var c,f,C,g,w,T,L,_,K=p*34+6,Y=F[K];if(Y)return p=Y.nextPos,Y.result;if(c=p,f=ii(),f!==e){for(C=[],g=p,w=U(),w!==e?(T=Va(),T!==e?(L=U(),L!==e?(_=ii(),_!==e?(w=[w,T,L,_],g=w):(p=g,g=e)):(p=g,g=e)):(p=g,g=e)):(p=g,g=e);g!==e;)C.push(g),g=p,w=U(),w!==e?(T=Va(),T!==e?(L=U(),L!==e?(_=ii(),_!==e?(w=[w,T,L,_],g=w):(p=g,g=e)):(p=g,g=e)):(p=g,g=e)):(p=g,g=e);C!==e?(B=c,f=o(f,C),c=f):(p=c,c=e)}else p=c,c=e;return F[K]={nextPos:p,result:c},c}function Va(){var c,f,C=p*34+7,g=F[C];return g?(p=g.nextPos,g.result):(c=p,i.charCodeAt(p)===43?(f=Ep,p++):(f=e,A===0&&M(Dp)),f!==e&&(B=c,f=Ap()),c=f,c===e&&(c=p,i.charCodeAt(p)===45?(f=Lp,p++):(f=e,A===0&&M(Mp)),f!==e&&(B=c,f=jp()),c=f),F[C]={nextPos:p,result:c},c)}function ii(){var c,f,C,g,w,T,L,_,K=p*34+8,Y=F[K];if(Y)return p=Y.nextPos,Y.result;if(c=p,f=oi(),f!==e){for(C=[],g=p,w=U(),w!==e?(T=xa(),T!==e?(L=U(),L!==e?(_=oi(),_!==e?(w=[w,T,L,_],g=w):(p=g,g=e)):(p=g,g=e)):(p=g,g=e)):(p=g,g=e);g!==e;)C.push(g),g=p,w=U(),w!==e?(T=xa(),T!==e?(L=U(),L!==e?(_=oi(),_!==e?(w=[w,T,L,_],g=w):(p=g,g=e)):(p=g,g=e)):(p=g,g=e)):(p=g,g=e);C!==e?(B=c,f=o(f,C),c=f):(p=c,c=e)}else p=c,c=e;return F[K]={nextPos:p,result:c},c}function xa(){var c,f,C=p*34+9,g=F[C];return g?(p=g.nextPos,g.result):(c=p,i.charCodeAt(p)===42?(f=Fp,p++):(f=e,A===0&&M(Np)),f!==e&&(B=c,f=_p()),c=f,c===e&&(c=p,i.charCodeAt(p)===47?(f=kp,p++):(f=e,A===0&&M(Bp)),f!==e&&(B=c,f=qp()),c=f,c===e&&(c=p,i.charCodeAt(p)===37?(f=Qp,p++):(f=e,A===0&&M(Hp)),f!==e&&(B=c,f=zp()),c=f)),F[C]={nextPos:p,result:c},c)}function oi(){var c,f,C,g,w,T,L,_,K=p*34+10,Y=F[K];if(Y)return p=Y.nextPos,Y.result;if(c=p,f=si(),f!==e){for(C=[],g=p,w=U(),w!==e?(T=Oa(),T!==e?(L=U(),L!==e?(_=si(),_!==e?(w=[w,T,L,_],g=w):(p=g,g=e)):(p=g,g=e)):(p=g,g=e)):(p=g,g=e);g!==e;)C.push(g),g=p,w=U(),w!==e?(T=Oa(),T!==e?(L=U(),L!==e?(_=si(),_!==e?(w=[w,T,L,_],g=w):(p=g,g=e)):(p=g,g=e)):(p=g,g=e)):(p=g,g=e);C!==e?(B=c,f=o(f,C),c=f):(p=c,c=e)}else p=c,c=e;return F[K]={nextPos:p,result:c},c}function Oa(){var c,f,C=p*34+11,g=F[C];return g?(p=g.nextPos,g.result):(c=p,i.charCodeAt(p)===94?(f=Up,p++):(f=e,A===0&&M(Wp)),f===e&&(i.substr(p,5).toLowerCase()===$p?(f=i.substr(p,5),p+=5):(f=e,A===0&&M(Jp))),f!==e&&(B=c,f=Gp()),c=f,F[C]={nextPos:p,result:c},c)}function si(){var c,f,C,g,w,T,L,_,K=p*34+12,Y=F[K];if(Y)return p=Y.nextPos,Y.result;if(c=p,f=ai(),f!==e){for(C=[],g=p,w=U(),w!==e?(T=Sa(),T!==e?(L=U(),L!==e?(_=ai(),_===e&&(_=null),_!==e?(w=[w,T,L,_],g=w):(p=g,g=e)):(p=g,g=e)):(p=g,g=e)):(p=g,g=e);g!==e;)C.push(g),g=p,w=U(),w!==e?(T=Sa(),T!==e?(L=U(),L!==e?(_=ai(),_===e&&(_=null),_!==e?(w=[w,T,L,_],g=w):(p=g,g=e)):(p=g,g=e)):(p=g,g=e)):(p=g,g=e);C!==e?(B=c,f=N(f,C),c=f):(p=c,c=e)}else p=c,c=e;return F[K]={nextPos:p,result:c},c}function Sa(){var c,f,C=p*34+13,g=F[C];return g?(p=g.nextPos,g.result):(c=p,i.substr(p,2)===Hs?(f=Hs,p+=2):(f=e,A===0&&M(Zp)),f===e&&(i.substr(p,8).toLowerCase()===Kp?(f=i.substr(p,8),p+=8):(f=e,A===0&&M(Yp)),f===e&&(i.substr(p,7).toLowerCase()===Xp?(f=i.substr(p,7),p+=7):(f=e,A===0&&M(ef)))),f!==e&&(B=c,f=tf()),c=f,c===e&&(c=p,i.substr(p,11).toLowerCase()===rf?(f=i.substr(p,11),p+=11):(f=e,A===0&&M(nf)),f===e&&(i.substr(p,10).toLowerCase()===of?(f=i.substr(p,10),p+=10):(f=e,A===0&&M(sf))),f!==e&&(B=c,f=af()),c=f,c===e&&(c=p,i.substr(p,5).toLowerCase()===lf?(f=i.substr(p,5),p+=5):(f=e,A===0&&M(uf)),f!==e&&(B=c,f=cf()),c=f,c===e&&(c=p,i.substr(p,5).toLowerCase()===pf?(f=i.substr(p,5),p+=5):(f=e,A===0&&M(ff)),f!==e&&(B=c,f=hf()),c=f))),F[C]={nextPos:p,result:c},c)}function ai(){var c,f,C,g,w,T,L=p*34+14,_=F[L];return _?(p=_.nextPos,_.result):(c=p,i.charCodeAt(p)===40?(f=zs,p++):(f=e,A===0&&M(Us)),f!==e?(C=U(),C!==e?(g=at(),g!==e?(w=U(),w!==e?(i.charCodeAt(p)===41?(T=Ws,p++):(T=e,A===0&&M($s)),T===e&&(T=null),T!==e?(B=c,f=df(g),c=f):(p=c,c=e)):(p=c,c=e)):(p=c,c=e)):(p=c,c=e)):(p=c,c=e),c===e&&(c=Ph(),c===e&&(c=wh(),c===e&&(c=Ta(),c===e&&(c=Oh())))),F[L]={nextPos:p,result:c},c)}function Ph(){var c,f,C,g,w,T=p*34+15,L=F[T];return L?(p=L.nextPos,L.result):(c=p,f=Aa(),f!==e?(i.charCodeAt(p)===40?(C=zs,p++):(C=e,A===0&&M(Us)),C!==e?(g=Ia(),g!==e?(i.charCodeAt(p)===41?(w=Ws,p++):(w=e,A===0&&M($s)),w===e&&(w=null),w!==e?(B=c,f=gf(f,g),c=f):(p=c,c=e)):(p=c,c=e)):(p=c,c=e)):(p=c,c=e),F[T]={nextPos:p,result:c},c)}function wh(){var c,f,C,g,w=p*34+16,T=F[w];return T?(p=T.nextPos,T.result):(c=p,i.charCodeAt(p)===33?(f=yf,p++):(f=e,A===0&&M(mf)),f===e&&(i.substr(p,6).toLowerCase()===vf?(f=i.substr(p,6),p+=6):(f=e,A===0&&M(bf))),f!==e?(C=U(),C!==e?(g=at(),g!==e?(B=c,f=Cf(g),c=f):(p=c,c=e)):(p=c,c=e)):(p=c,c=e),c===e&&(c=p,f=Ta(),f!==e?(C=U(),C!==e?(g=Vh(),g!==e?(B=c,f=Pf(f,g),c=f):(p=c,c=e)):(p=c,c=e)):(p=c,c=e)),F[w]={nextPos:p,result:c},c)}function Vh(){var c,f,C=p*34+17,g=F[C];return g?(p=g.nextPos,g.result):(c=p,i.substr(p,5).toLowerCase()===wf?(f=i.substr(p,5),p+=5):(f=e,A===0&&M(Vf)),f!==e&&(B=c,f=xf()),c=f,c===e&&(c=p,i.substr(p,8).toLowerCase()===Of?(f=i.substr(p,8),p+=8):(f=e,A===0&&M(Sf)),f!==e&&(B=c,f=Tf()),c=f),F[C]={nextPos:p,result:c},c)}function Ta(){var c,f,C,g,w,T=p*34+18,L=F[T];return L?(p=L.nextPos,L.result):(c=p,f=U(),f!==e?(i.substr(p,9)===Js?(C=Js,p+=9):(C=e,A===0&&M(If)),C===e&&(i.substr(p,4)===Gs?(C=Gs,p+=4):(C=e,A===0&&M(Rf))),C!==e?(B=c,f=Ef(),c=f):(p=c,c=e)):(p=c,c=e),c===e&&(c=p,f=U(),f!==e?(C=xh(),C!==e?(B=c,f=Df(C),c=f):(p=c,c=e)):(p=c,c=e),c===e&&(c=p,f=U(),f!==e?(i.charCodeAt(p)===123?(C=Af,p++):(C=e,A===0&&M(Lf)),C!==e?(g=Rh(),g!==e?(i.charCodeAt(p)===125?(w=Mf,p++):(w=e,A===0&&M(jf)),w!==e?(B=c,f=Ff(g),c=f):(p=c,c=e)):(p=c,c=e)):(p=c,c=e)):(p=c,c=e))),F[T]={nextPos:p,result:c},c)}function xh(){var c,f,C,g,w=p*34+19,T=F[w];return T?(p=T.nextPos,T.result):(c=p,f=Sh(),f!==e&&(B=c,f=Yn(f)),c=f,c===e&&(c=p,f=Th(),f!==e&&(B=c,f=Yn(f)),c=f,c===e&&(c=p,f=Aa(),f!==e&&(B=c,f=Yn(f)),c=f,c===e&&(c=p,i.substr(p,2)===Zs?(f=Zs,p+=2):(f=e,A===0&&M(Nf)),f!==e&&(B=c,f=Ks()),c=f,c===e&&(c=p,i.substr(p,2)===Ys?(f=Ys,p+=2):(f=e,A===0&&M(_f)),f!==e&&(B=c,f=Ks()),c=f,c===e&&(c=p,i.charCodeAt(p)===39?(f=Xs,p++):(f=e,A===0&&M(ea)),f!==e?(C=Ra(),C!==e?(i.charCodeAt(p)===39?(g=Xs,p++):(g=e,A===0&&M(ea)),g!==e?(B=c,f=ta(C),c=f):(p=c,c=e)):(p=c,c=e)):(p=c,c=e),c===e&&(c=p,i.charCodeAt(p)===34?(f=ra,p++):(f=e,A===0&&M(na)),f!==e?(C=Ra(),C!==e?(i.charCodeAt(p)===34?(g=ra,p++):(g=e,A===0&&M(na)),g!==e?(B=c,f=ta(C),c=f):(p=c,c=e)):(p=c,c=e)):(p=c,c=e))))))),F[w]={nextPos:p,result:c},c)}function Oh(){var c,f,C,g,w=p*34+20,T=F[w];return T?(p=T.nextPos,T.result):(c=p,i.charCodeAt(p)===91?(f=kf,p++):(f=e,A===0&&M(Bf)),f!==e?(C=Ia(),C!==e?(i.charCodeAt(p)===93?(g=qf,p++):(g=e,A===0&&M(Qf)),g!==e?(B=c,f=Hf(C),c=f):(p=c,c=e)):(p=c,c=e)):(p=c,c=e),F[w]={nextPos:p,result:c},c)}function Ia(){var c,f,C,g,w,T,L,_,K=p*34+21,Y=F[K];if(Y)return p=Y.nextPos,Y.result;if(c=p,f=at(),f===e&&(f=null),f!==e){for(C=[],g=p,w=U(),w!==e?(i.charCodeAt(p)===44?(T=ia,p++):(T=e,A===0&&M(oa)),T!==e?(L=U(),L!==e?(_=at(),_!==e?(w=[w,T,L,_],g=w):(p=g,g=e)):(p=g,g=e)):(p=g,g=e)):(p=g,g=e);g!==e;)C.push(g),g=p,w=U(),w!==e?(i.charCodeAt(p)===44?(T=ia,p++):(T=e,A===0&&M(oa)),T!==e?(L=U(),L!==e?(_=at(),_!==e?(w=[w,T,L,_],g=w):(p=g,g=e)):(p=g,g=e)):(p=g,g=e)):(p=g,g=e);C!==e?(B=c,f=zf(f,C),c=f):(p=c,c=e)}else p=c,c=e;return F[K]={nextPos:p,result:c},c}function Sh(){var c,f,C=p*34+22,g=F[C];return g?(p=g.nextPos,g.result):(c=p,i.substr(p,4).toLowerCase()===Uf?(f=i.substr(p,4),p+=4):(f=e,A===0&&M(Wf)),f!==e&&(B=c,f=$f()),c=f,c===e&&(c=p,i.substr(p,5).toLowerCase()===Jf?(f=i.substr(p,5),p+=5):(f=e,A===0&&M(Gf)),f!==e&&(B=c,f=Zf()),c=f),F[C]={nextPos:p,result:c},c)}function Th(){var c,f,C,g=p*34+23,w=F[g];return w?(p=w.nextPos,w.result):(c=p,i.substr(p,2)===sa?(f=sa,p+=2):(f=e,A===0&&M(Kf)),f!==e?(C=vt(),C!==e?(B=c,f=Yf(),c=f):(p=c,c=e)):(p=c,c=e),c===e&&(c=p,Xf.test(i.charAt(p))?(f=i.charAt(p),p++):(f=e,A===0&&M(eh)),f===e&&(f=null),f!==e?(C=Ih(),C!==e?(B=c,f=th(f,C),c=f):(p=c,c=e)):(p=c,c=e)),F[g]={nextPos:p,result:c},c)}function Ih(){var c,f,C,g,w=p*34+24,T=F[w];return T?(p=T.nextPos,T.result):(c=p,f=vt(),f!==e?(i.charCodeAt(p)===46?(C=rh,p++):(C=e,A===0&&M(nh)),C!==e?(g=vt(),g!==e?(B=c,f=ih(),c=f):(p=c,c=e)):(p=c,c=e)):(p=c,c=e),c===e&&(c=p,f=Eh(),f!==e?(C=vt(),C===e&&(C=null),C!==e?(B=c,f=oh(),c=f):(p=c,c=e)):(p=c,c=e),c===e&&(c=p,i.charCodeAt(p)===48?(f=sh,p++):(f=e,A===0&&M(ah)),f!==e&&(B=c,f=lh()),c=f)),F[w]={nextPos:p,result:c},c)}function Rh(){var c,f,C,g=p*34+25,w=F[g];if(w)return p=w.nextPos,w.result;if(c=p,f=[],C=Da(),C!==e)for(;C!==e;)f.push(C),C=Da();else f=e;return f!==e&&(B=c,f=aa(f)),c=f,F[g]={nextPos:p,result:c},c}function Ra(){var c,f,C,g=p*34+26,w=F[g];if(w)return p=w.nextPos,w.result;if(c=p,f=[],C=Ea(),C!==e)for(;C!==e;)f.push(C),C=Ea();else f=e;return f!==e&&(B=c,f=aa(f)),c=f,F[g]={nextPos:p,result:c},c}function Ea(){var c,f,C=p*34+27,g=F[C];return g?(p=g.nextPos,g.result):(c=p,i.substr(p,2)===la?(f=la,p+=2):(f=e,A===0&&M(uh)),f!==e&&(B=c,f=ch()),c=f,c===e&&(c=p,i.substr(p,2)===ua?(f=ua,p+=2):(f=e,A===0&&M(ph)),f!==e&&(B=c,f=fh()),c=f,c===e&&(c=p,hh.test(i.charAt(p))?(f=i.charAt(p),p++):(f=e,A===0&&M(dh)),f!==e&&(B=c,f=Xn()),c=f)),F[C]={nextPos:p,result:c},c)}function Da(){var c,f,C=p*34+28,g=F[C];return g?(p=g.nextPos,g.result):(c=p,gh.test(i.charAt(p))?(f=i.charAt(p),p++):(f=e,A===0&&M(yh)),f!==e&&(B=c,f=Xn()),c=f,F[C]={nextPos:p,result:c},c)}function Aa(){var c,f,C,g,w,T,L,_=p*34+29,K=F[_];if(K)return p=K.nextPos,K.result;if(c=p,f=Nt(),f!==e){if(C=[],g=p,w=vt(),w!==e){for(T=[],L=Nt();L!==e;)T.push(L),L=Nt();T!==e?(w=[w,T],g=w):(p=g,g=e)}else p=g,g=e;for(;g!==e;)if(C.push(g),g=p,w=vt(),w!==e){for(T=[],L=Nt();L!==e;)T.push(L),L=Nt();T!==e?(w=[w,T],g=w):(p=g,g=e)}else p=g,g=e;C!==e?(B=c,f=Xn(),c=f):(p=c,c=e)}else p=c,c=e;return F[_]={nextPos:p,result:c},c}function vt(){var c,f,C=p*34+30,g=F[C];if(g)return p=g.nextPos,g.result;if(c=[],ca.test(i.charAt(p))?(f=i.charAt(p),p++):(f=e,A===0&&M(pa)),f!==e)for(;f!==e;)c.push(f),ca.test(i.charAt(p))?(f=i.charAt(p),p++):(f=e,A===0&&M(pa));else c=e;return F[C]={nextPos:p,result:c},c}function Eh(){var c,f,C=p*34+31,g=F[C];if(g)return p=g.nextPos,g.result;if(c=[],fa.test(i.charAt(p))?(f=i.charAt(p),p++):(f=e,A===0&&M(ha)),f!==e)for(;f!==e;)c.push(f),fa.test(i.charAt(p))?(f=i.charAt(p),p++):(f=e,A===0&&M(ha));else c=e;return F[C]={nextPos:p,result:c},c}function Nt(){var c,f,C=p*34+32,g=F[C];if(g)return p=g.nextPos,g.result;if(c=[],da.test(i.charAt(p))?(f=i.charAt(p),p++):(f=e,A===0&&M(ga)),f!==e)for(;f!==e;)c.push(f),da.test(i.charAt(p))?(f=i.charAt(p),p++):(f=e,A===0&&M(ga));else c=e;return F[C]={nextPos:p,result:c},c}function U(){var c,f,C=p*34+33,g=F[C];if(g)return p=g.nextPos,g.result;for(A++,c=[],ya.test(i.charAt(p))?(f=i.charAt(p),p++):(f=e,A===0&&M(ma));f!==e;)c.push(f),ya.test(i.charAt(p))?(f=i.charAt(p),p++):(f=e,A===0&&M(ma));return A--,c===e&&(f=e,A===0&&M(mh)),F[C]={nextPos:p,result:c},c}function La(c,f,C){return C===void 0&&(C=!1),f.reduce(function(g,w){return new Ti(w[1],g,w[3],C)},c)}function Dh(c){return[].concat.apply([],c)}if(Pr=n(),Pr!==e&&p===i.length)return Pr;throw Pr!==e&&p<i.length&&M(vh()),Ch(ei,De<i.length?i.charAt(De):null,De<i.length?ba(De,De+1):ba(De,De))}var dl=hl,gl=function(){function i(t,e){this.at=t,this.code=e}return i}(),Ei=function(){function i(){}return i.prototype.patchExpression=function(t){return t.replace(/=>/g,">=").replace(/=</g,"<=").replace(/<>/g,"!=").replace(/equals/g,"equal ").replace(/notequals/g,"notequal ")},i.prototype.createCondition=function(t){return this.parseExpression(t)},i.prototype.parseExpression=function(t){try{var e=i.parserCache[t];return e===void 0&&(e=dl(this.patchExpression(t)),e.hasAsyncFunction()||(i.parserCache[t]=e)),e}catch(r){r instanceof Tr&&(this.conditionError=new gl(r.location.start.offset,r.message))}},Object.defineProperty(i.prototype,"error",{get:function(){return this.conditionError},enumerable:!1,configurable:!0}),i.parserCache={},i}(),Di=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ai=function(){function i(t){this.processValue=new ce,this.parser=new Ei,this.isAsyncValue=!1,this.hasFunctionValue=!1,this.setExpression(t)}return Object.defineProperty(i.prototype,"expression",{get:function(){return this.expressionValue},enumerable:!1,configurable:!0}),i.prototype.setExpression=function(t){this.expression!==t&&(this.expressionValue=t,this.operand=this.parser.parseExpression(t),this.hasFunctionValue=this.canRun()?this.operand.hasFunction():!1,this.isAsyncValue=this.hasFunction()?this.operand.hasAsyncFunction():!1)},i.prototype.getVariables=function(){if(!this.operand)return[];var t=[];return this.operand.setVariables(t),t},i.prototype.hasFunction=function(){return this.hasFunctionValue},Object.defineProperty(i.prototype,"isAsync",{get:function(){return this.isAsyncValue},enumerable:!1,configurable:!0}),i.prototype.canRun=function(){return!!this.operand},i.prototype.run=function(t,e){var r=this;if(e===void 0&&(e=null),!this.operand)return this.expression&&je.warn("Invalid expression: "+this.expression),null;if(this.processValue.values=t,this.processValue.properties=e,!this.isAsync)return this.runValues();this.asyncFuncList=[],this.operand.addToAsyncList(this.asyncFuncList);for(var n=0;n<this.asyncFuncList.length;n++)this.asyncFuncList[n].onAsyncReady=function(){r.doAsyncFunctionReady()};for(var n=0;n<this.asyncFuncList.length;n++)this.asyncFuncList[n].evaluateAsync(this.processValue);return!1},i.prototype.doAsyncFunctionReady=function(){for(var t=0;t<this.asyncFuncList.length;t++)if(!this.asyncFuncList[t].isReady)return;this.runValues()},i.prototype.runValues=function(){var t=this.operand.evaluate(this.processValue);return this.onComplete&&this.onComplete(t),t},i.createExpressionExecutor=function(t){return new i(t)},i}(),Li=function(){function i(t){this._id=i.IdCounter++,this.expression=t}return Object.defineProperty(i.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expression",{get:function(){return this.expressionExecutor?this.expressionExecutor.expression:""},set:function(t){var e=this;!!this.expressionExecutor&&t===this.expression||(this.expressionExecutor=Ai.createExpressionExecutor(t),this.expressionExecutor.onComplete=function(r){e.doOnComplete(r)},this.variables=void 0,this.containsFunc=void 0)},enumerable:!1,configurable:!0}),i.prototype.getVariables=function(){return this.variables===void 0&&(this.variables=this.expressionExecutor.getVariables()),this.variables},i.prototype.hasFunction=function(){return this.containsFunc===void 0&&(this.containsFunc=this.expressionExecutor.hasFunction()),this.containsFunc},Object.defineProperty(i.prototype,"isAsync",{get:function(){return this.expressionExecutor.isAsync},enumerable:!1,configurable:!0}),i.prototype.canRun=function(){return this.expressionExecutor.canRun()},i.prototype.runCore=function(t,e){return e===void 0&&(e=null),this.onBeforeAsyncRun&&this.isAsync&&this.onBeforeAsyncRun(this.id),this.expressionExecutor.run(t,e)},i.prototype.doOnComplete=function(t){this.onAfterAsyncRun&&this.isAsync&&this.onAfterAsyncRun(this.id)},i.IdCounter=1,i}(),ve=function(i){Di(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.run=function(e,r){return r===void 0&&(r=null),this.runCore(e,r)==!0},t.prototype.doOnComplete=function(e){this.onRunComplete&&this.onRunComplete(e==!0),i.prototype.doOnComplete.call(this,e)},t}(Li),$e=function(i){Di(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.run=function(e,r){return r===void 0&&(r=null),this.runCore(e,r)},t.prototype.doOnComplete=function(e){this.onRunComplete&&this.onRunComplete(e),i.prototype.doOnComplete.call(this,e)},t}(Li),yl=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ml=function(i,t){for(var e=0,r=t.length,n=i.length;e<r;e++,n++)i[n]=t[e];return i},vl=function(){function i(t){this.obj=t,this.properties=null,this.values=null}return i.prototype.getType=function(){return"bindings"},i.prototype.getNames=function(){var t=[];this.fillProperties();for(var e=0;e<this.properties.length;e++)this.properties[e].isVisible("",this.obj)&&t.push(this.properties[e].name);return t},i.prototype.getProperties=function(){var t=[];this.fillProperties();for(var e=0;e<this.properties.length;e++)t.push(this.properties[e]);return t},i.prototype.setBinding=function(t,e){this.values||(this.values={});var r=this.getJson();r!==e&&(e?this.values[t]=e:(delete this.values[t],Object.keys(this.values).length==0&&(this.values=null)),this.onChangedJSON(r))},i.prototype.clearBinding=function(t){this.setBinding(t,"")},i.prototype.isEmpty=function(){if(!this.values)return!0;for(var t in this.values)return!1;return!0},i.prototype.getValueNameByPropertyName=function(t){if(!!this.values)return this.values[t]},i.prototype.getPropertiesByValueName=function(t){if(!this.values)return[];var e=[];for(var r in this.values)this.values[r]==t&&e.push(r);return e},i.prototype.getJson=function(){if(!this.isEmpty()){var t={};for(var e in this.values)t[e]=this.values[e];return t}},i.prototype.setJson=function(t){var e=this.getJson();if(this.values=null,t){this.values={};for(var r in t)this.values[r]=t[r]}this.onChangedJSON(e)},i.prototype.fillProperties=function(){if(this.properties===null){this.properties=[];for(var t=x.getPropertiesByObj(this.obj),e=0;e<t.length;e++)t[e].isBindable&&this.properties.push(t[e])}},i.prototype.onChangedJSON=function(t){this.obj&&this.obj.onBindingChanged(t,this.getJson())},i}(),bl=function(){function i(t,e,r){this.currentDependency=t,this.target=e,this.property=r,this.dependencies=[],this.id=""+ ++i.DependenciesCount}return i.prototype.addDependency=function(t,e){this.target===t&&this.property===e||this.dependencies.some(function(r){return r.obj===t&&r.prop===e})||(this.dependencies.push({obj:t,prop:e,id:this.id}),t.registerPropertyChangedHandlers([e],this.currentDependency,this.id))},i.prototype.dispose=function(){this.dependencies.forEach(function(t){t.obj.unregisterPropertyChangedHandlers([t.prop],t.id)})},i.DependenciesCount=0,i}(),ne=function(){function i(t){this._updater=t,this.dependencies=void 0,this.type=i.ComputedUpdaterType}return Object.defineProperty(i.prototype,"updater",{get:function(){return this._updater},enumerable:!1,configurable:!0}),i.prototype.setDependencies=function(t){this.clearDependencies(),this.dependencies=t},i.prototype.getDependencies=function(){return this.dependencies},i.prototype.clearDependencies=function(){this.dependencies&&(this.dependencies.dispose(),this.dependencies=void 0)},i.prototype.dispose=function(){this.clearDependencies()},i.ComputedUpdaterType="__dependency_computed",i}(),W=function(){function i(){this.dependencies={},this.propertyHash=i.createPropertiesHash(),this.eventList=[],this.isLoadingFromJsonValue=!1,this.loadingOwner=null,this.onPropertyChanged=this.addEvent(),this.onItemValuePropertyChanged=this.addEvent(),this.isCreating=!0,this.animationAllowedLock=0,this.supportOnElementRenderedEvent=!0,this.onElementRenderedEventEnabled=!1,this._onElementRerendered=new Oe,this.bindingsValue=new vl(this),Ae.createProperties(this),this.onBaseCreating(),this.isCreating=!1}return i.finishCollectDependencies=function(){var t=i.currentDependencis;return i.currentDependencis=void 0,t},i.startCollectDependencies=function(t,e,r){if(i.currentDependencis!==void 0)throw new Error("Attempt to collect nested dependencies. Nested dependencies are not supported.");i.currentDependencis=new bl(t,e,r)},i.collectDependency=function(t,e){i.currentDependencis!==void 0&&i.currentDependencis.addDependency(t,e)},Object.defineProperty(i,"commentSuffix",{get:function(){return b.commentSuffix},set:function(t){b.commentSuffix=t},enumerable:!1,configurable:!0}),Object.defineProperty(i,"commentPrefix",{get:function(){return i.commentSuffix},set:function(t){i.commentSuffix=t},enumerable:!1,configurable:!0}),i.prototype.isValueEmpty=function(t,e){return e===void 0&&(e=!0),e&&(t=this.trimValue(t)),P.isValueEmpty(t)},i.prototype.equals=function(t){return!t||this.isDisposed||t.isDisposed||this.getType()!=t.getType()?!1:this.equalsCore(t)},i.prototype.equalsCore=function(t){return this.name!==t.name?!1:P.isTwoValueEquals(this.toJSON(),t.toJSON(),!1,!0,!1)},i.prototype.trimValue=function(t){return!!t&&(typeof t=="string"||t instanceof String)?t.trim():t},i.prototype.isPropertyEmpty=function(t){return t!==""&&this.isValueEmpty(t)},i.createPropertiesHash=function(){return{}},i.prototype.dispose=function(){for(var t=this,e=0;e<this.eventList.length;e++)this.eventList[e].clear();this.onPropertyValueChangedCallback=void 0,this.isDisposedValue=!0,Object.keys(this.dependencies).forEach(function(r){return t.dependencies[r].dispose()})},Object.defineProperty(i.prototype,"isDisposed",{get:function(){return this.isDisposedValue===!0},enumerable:!1,configurable:!0}),i.prototype.addEvent=function(){var t=new Oe;return this.eventList.push(t),t},i.prototype.onBaseCreating=function(){},i.prototype.getType=function(){return"base"},i.prototype.isDescendantOf=function(t){return x.isDescendantOf(this.getType(),t)},i.prototype.getSurvey=function(t){return null},Object.defineProperty(i.prototype,"isDesignMode",{get:function(){var t=this.getSurvey();return!!t&&t.isDesignMode},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isDesignModeV2",{get:function(){return b.supportCreatorV2&&this.isDesignMode},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"inSurvey",{get:function(){return!!this.getSurvey(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bindings",{get:function(){return this.bindingsValue},enumerable:!1,configurable:!0}),i.prototype.checkBindings=function(t,e){},i.prototype.updateBindings=function(t,e){var r=this.bindings.getValueNameByPropertyName(t);r&&this.updateBindingValue(r,e)},i.prototype.updateBindingValue=function(t,e){},i.prototype.getTemplate=function(){return this.getType()},Object.defineProperty(i.prototype,"isLoadingFromJson",{get:function(){return this.isLoadingFromJsonValue||this.getIsLoadingFromJson()},enumerable:!1,configurable:!0}),i.prototype.getIsLoadingFromJson=function(){return!!this.loadingOwner&&this.loadingOwner.isLoadingFromJson?!0:this.isLoadingFromJsonValue},i.prototype.startLoadingFromJson=function(t){this.isLoadingFromJsonValue=!0,this.jsonObj=t},i.prototype.endLoadingFromJson=function(){this.isLoadingFromJsonValue=!1},i.prototype.toJSON=function(t){return new ae().toJsonObject(this,t)},i.prototype.fromJSON=function(t,e){new ae().toObject(t,this,e),this.onSurveyLoad()},i.prototype.onSurveyLoad=function(){},i.prototype.clone=function(){var t=x.createClass(this.getType());return t.fromJSON(this.toJSON()),t},i.prototype.getPropertyByName=function(t){var e=this.getType();return(!this.classMetaData||this.classMetaData.name!==e)&&(this.classMetaData=x.findClass(e)),this.classMetaData?this.classMetaData.findProperty(t):null},i.prototype.isPropertyVisible=function(t){var e=this.getPropertyByName(t);return e?e.isVisible("",this):!1},i.createProgressInfo=function(){return{questionCount:0,answeredQuestionCount:0,requiredQuestionCount:0,requiredAnsweredQuestionCount:0}},i.prototype.getProgressInfo=function(){return i.createProgressInfo()},i.prototype.localeChanged=function(){},i.prototype.locStrsChanged=function(){if(this.arraysInfo)for(var t in this.arraysInfo){var e=this.arraysInfo[t];if(e&&e.isItemValues){var r=this.getPropertyValue(t);r&&!!i.itemValueLocStrChanged&&i.itemValueLocStrChanged(r)}}if(this.localizableStrings)for(var t in this.localizableStrings){var e=this.getLocalizableString(t);e&&e.strChanged()}},i.prototype.getPropertyValue=function(t,e){e===void 0&&(e=null);var r=this.getPropertyValueWithoutDefault(t);if(this.isPropertyEmpty(r)){var n=this.localizableStrings?this.localizableStrings[t]:void 0;if(n)return n.text;if(e!=null)return e;var o=this.getDefaultPropertyValue(t);if(o!==void 0)return o}return r},i.prototype.getDefaultPropertyValue=function(t){var e=this.getPropertyByName(t);if(!(!e||e.isCustom&&this.isCreating)){var r=e.defaultValue;if(e.defaultValueFunc||!this.isPropertyEmpty(r)&&!Array.isArray(r))return r;var n=this.localizableStrings?this.localizableStrings[t]:void 0;if(n&&n.localizationName)return this.getLocalizationString(n.localizationName);if(e.type=="boolean"||e.type=="switch")return!1;if(e.isCustom&&!!e.onGetValue)return e.onGetValue(this)}},i.prototype.hasDefaultPropertyValue=function(t){return this.getDefaultPropertyValue(t)!==void 0},i.prototype.resetPropertyValue=function(t){var e=this.localizableStrings?this.localizableStrings[t]:void 0;e?(this.setLocalizableStringText(t,void 0),e.clear()):this.setPropertyValue(t,void 0)},i.prototype.getPropertyValueWithoutDefault=function(t){return this.getPropertyValueCore(this.propertyHash,t)},i.prototype.getPropertyValueCore=function(t,e){return this.isLoadingFromJson||i.collectDependency(this,e),this.getPropertyValueCoreHandler?this.getPropertyValueCoreHandler(t,e):t[e]},i.prototype.geValueFromHash=function(){return this.propertyHash.value},i.prototype.setPropertyValueCore=function(t,e,r){this.setPropertyValueCoreHandler?this.isDisposedValue?je.disposedObjectChangedProperty(e,this.getType()):this.setPropertyValueCoreHandler(t,e,r):t[e]=r},Object.defineProperty(i.prototype,"isEditingSurveyElement",{get:function(){var t=this.getSurvey();return!!t&&t.isEditingSurveyElement},enumerable:!1,configurable:!0}),i.prototype.iteratePropertiesHash=function(t){var e=this,r=[];for(var n in this.propertyHash)n==="value"&&this.isEditingSurveyElement&&Array.isArray(this.value)||r.push(n);r.forEach(function(o){return t(e.propertyHash,o)})},i.prototype.setPropertyValue=function(t,e){if(!this.isLoadingFromJson){var r=this.getPropertyByName(t);r&&(e=r.settingValue(this,e))}var n=this.getPropertyValue(t);n&&Array.isArray(n)&&!!this.arraysInfo&&(!e||Array.isArray(e))?this.isTwoValueEquals(n,e)||this.setArrayPropertyDirectly(t,e):(this.setPropertyValueDirectly(t,e),!this.isDisposedValue&&!this.isTwoValueEquals(n,e)&&this.propertyValueChanged(t,n,e))},i.prototype.setArrayPropertyDirectly=function(t,e,r){r===void 0&&(r=!0);var n=this.arraysInfo[t];this.setArray(t,this.getPropertyValue(t),e,n?n.isItemValues:!1,n?r&&n.onPush:null)},i.prototype.setPropertyValueDirectly=function(t,e){this.setPropertyValueCore(this.propertyHash,t,e)},i.prototype.clearPropertyValue=function(t){this.setPropertyValueCore(this.propertyHash,t,null),delete this.propertyHash[t]},i.prototype.onPropertyValueChangedCallback=function(t,e,r,n,o){},i.prototype.itemValuePropertyChanged=function(t,e,r,n){this.onItemValuePropertyChanged.fire(this,{obj:t,name:e,oldValue:r,newValue:n,propertyName:t.ownerPropertyName})},i.prototype.onPropertyValueChanged=function(t,e,r){},i.prototype.propertyValueChanged=function(t,e,r,n,o){if(!this.isLoadingFromJson&&(this.updateBindings(t,r),this.onPropertyValueChanged(t,e,r),this.onPropertyChanged.fire(this,{name:t,oldValue:e,newValue:r}),this.doPropertyValueChangedCallback(t,e,r,n,this),this.checkConditionPropertyChanged(t),!!this.onPropChangeFunctions))for(var s=0;s<this.onPropChangeFunctions.length;s++)this.onPropChangeFunctions[s].name==t&&this.onPropChangeFunctions[s].func(r,n)},i.prototype.onBindingChanged=function(t,e){this.isLoadingFromJson||this.doPropertyValueChangedCallback("bindings",t,e)},Object.defineProperty(i.prototype,"isInternal",{get:function(){return!1},enumerable:!1,configurable:!0}),i.prototype.doPropertyValueChangedCallback=function(t,e,r,n,o){var s=function(l){!!l&&!!l.onPropertyValueChangedCallback&&l.onPropertyValueChangedCallback(t,e,r,o,n)};if(this.isInternal){s(this);return}o||(o=this);var a=this.getSurvey();a||(a=this),s(a),a!==this&&s(this)},i.prototype.addExpressionProperty=function(t,e,r){this.expressionInfo||(this.expressionInfo={}),this.expressionInfo[t]={onExecute:e,canRun:r}},i.prototype.getDataFilteredValues=function(){return{}},i.prototype.getDataFilteredProperties=function(){return{}},i.prototype.runConditionCore=function(t,e){if(!!this.expressionInfo)for(var r in this.expressionInfo)this.runConditionItemCore(r,t,e)},i.prototype.canRunConditions=function(){return!this.isDesignMode},i.prototype.checkConditionPropertyChanged=function(t){!this.expressionInfo||!this.expressionInfo[t]||!this.canRunConditions()||this.runConditionItemCore(t,this.getDataFilteredValues(),this.getDataFilteredProperties())},i.prototype.runConditionItemCore=function(t,e,r){var n=this,o=this.expressionInfo[t],s=this.getPropertyValue(t);!s||!!o.canRun&&!o.canRun(this)||(o.runner||(o.runner=this.createExpressionRunner(s),o.runner.onRunComplete=function(a){o.onExecute(n,a)}),o.runner.expression=s,o.runner.run(e,r))},i.prototype.doBeforeAsynRun=function(t){this.asynExpressionHash||(this.asynExpressionHash=[]);var e=!this.isAsyncExpressionRunning;this.asynExpressionHash[t]=!0,e&&this.onAsyncRunningChanged()},i.prototype.doAfterAsynRun=function(t){this.asynExpressionHash&&(delete this.asynExpressionHash[t],this.isAsyncExpressionRunning||this.onAsyncRunningChanged())},i.prototype.onAsyncRunningChanged=function(){},Object.defineProperty(i.prototype,"isAsyncExpressionRunning",{get:function(){return!!this.asynExpressionHash&&Object.keys(this.asynExpressionHash).length>0},enumerable:!1,configurable:!0}),i.prototype.createExpressionRunner=function(t){var e=this,r=new $e(t);return r.onBeforeAsyncRun=function(n){e.doBeforeAsynRun(n)},r.onAfterAsyncRun=function(n){e.doAfterAsynRun(n)},r},i.prototype.registerPropertyChangedHandlers=function(t,e,r){r===void 0&&(r=null);for(var n=0;n<t.length;n++)this.registerFunctionOnPropertyValueChanged(t[n],e,r)},i.prototype.unregisterPropertyChangedHandlers=function(t,e){e===void 0&&(e=null);for(var r=0;r<t.length;r++)this.unRegisterFunctionOnPropertyValueChanged(t[r],e)},i.prototype.registerFunctionOnPropertyValueChanged=function(t,e,r){if(r===void 0&&(r=null),this.onPropChangeFunctions||(this.onPropChangeFunctions=[]),r)for(var n=0;n<this.onPropChangeFunctions.length;n++){var o=this.onPropChangeFunctions[n];if(o.name==t&&o.key==r){o.func=e;return}}this.onPropChangeFunctions.push({name:t,func:e,key:r})},i.prototype.registerFunctionOnPropertiesValueChanged=function(t,e,r){r===void 0&&(r=null),this.registerPropertyChangedHandlers(t,e,r)},i.prototype.unRegisterFunctionOnPropertyValueChanged=function(t,e){if(e===void 0&&(e=null),!!this.onPropChangeFunctions)for(var r=0;r<this.onPropChangeFunctions.length;r++){var n=this.onPropChangeFunctions[r];if(n.name==t&&n.key==e){this.onPropChangeFunctions.splice(r,1);return}}},i.prototype.unRegisterFunctionOnPropertiesValueChanged=function(t,e){e===void 0&&(e=null),this.unregisterPropertyChangedHandlers(t,e)},i.prototype.createCustomLocalizableObj=function(t){var e=this.getLocalizableString(t);return e||this.createLocalizableString(t,this,!1,!0)},i.prototype.getLocale=function(){var t=this.getSurvey();return t?t.getLocale():""},i.prototype.getLocalizationString=function(t){return z.getString(t,this.getLocale())},i.prototype.getLocalizationFormatString=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=this.getLocalizationString(t);return!n||!n.format?"":n.format.apply(n,e)},i.prototype.createLocalizableString=function(t,e,r,n){var o=this;r===void 0&&(r=!1),n===void 0&&(n=!1);var s=new we(e,r,t);n&&(s.localizationName=n===!0?t:n),s.onStrChanged=function(l,u){o.propertyValueChanged(t,l,u)},this.localizableStrings||(this.localizableStrings={}),this.localizableStrings[t]=s;var a=this.getPropertyByName(t);return s.disableLocalization=a&&a.isLocalizable===!1,s},i.prototype.getLocalizableString=function(t){return this.localizableStrings?this.localizableStrings[t]:null},i.prototype.getLocalizableStringText=function(t,e){e===void 0&&(e=""),i.collectDependency(this,t);var r=this.getLocalizableString(t);if(!r)return"";var n=r.text;return n||e},i.prototype.setLocalizableStringText=function(t,e){var r=this.getLocalizableString(t);if(!!r){var n=r.text;n!=e&&(r.text=e)}},i.prototype.addUsedLocales=function(t){if(this.localizableStrings)for(var e in this.localizableStrings){var r=this.getLocalizableString(e);r&&this.AddLocStringToUsedLocales(r,t)}if(this.arraysInfo)for(var e in this.arraysInfo){var n=this.getPropertyByName(e);if(!(!n||!n.isSerializable)){var o=this.getPropertyValue(e);if(!(!o||!o.length))for(var s=0;s<o.length;s++){var r=o[s];r&&r.addUsedLocales&&r.addUsedLocales(t)}}}},i.prototype.searchText=function(t,e){var r=[];this.getSearchableLocalizedStrings(r);for(var n=0;n<r.length;n++)r[n].setFindText(t)&&e.push({element:this,str:r[n]})},i.prototype.getSearchableLocalizedStrings=function(t){if(this.localizableStrings){var e=[];this.getSearchableLocKeys(e);for(var r=0;r<e.length;r++){var n=this.getLocalizableString(e[r]);n&&t.push(n)}}if(!!this.arraysInfo){var o=[];this.getSearchableItemValueKeys(o);for(var r=0;r<o.length;r++){var s=this.getPropertyValue(o[r]);if(!!s)for(var a=0;a<s.length;a++)t.push(s[a].locText)}}},i.prototype.getSearchableLocKeys=function(t){},i.prototype.getSearchableItemValueKeys=function(t){},i.prototype.AddLocStringToUsedLocales=function(t,e){for(var r=t.getLocales(),n=0;n<r.length;n++)e.indexOf(r[n])<0&&e.push(r[n])},i.prototype.createItemValues=function(t){var e=this,r=this.createNewArray(t,function(n){if(n.locOwner=e,n.ownerPropertyName=t,typeof n.getSurvey=="function"){var o=n.getSurvey();!!o&&typeof o.makeReactive=="function"&&o.makeReactive(n)}});return this.arraysInfo[t].isItemValues=!0,r},i.prototype.notifyArrayChanged=function(t,e){t.onArrayChanged&&t.onArrayChanged(e)},i.prototype.createNewArrayCore=function(t){var e=null;return this.createArrayCoreHandler&&(e=this.createArrayCoreHandler(this.propertyHash,t)),e||(e=new Array,this.setPropertyValueCore(this.propertyHash,t,e)),e},i.prototype.ensureArray=function(t,e,r){if(e===void 0&&(e=null),r===void 0&&(r=null),!(this.arraysInfo&&this.arraysInfo[t]))return this.createNewArray(t,e,r)},i.prototype.createNewArray=function(t,e,r){e===void 0&&(e=null),r===void 0&&(r=null);var n=this.createNewArrayCore(t);this.arraysInfo||(this.arraysInfo={}),this.arraysInfo[t]={onPush:e,isItemValues:!1};var o=this;return n.push=function(s){var a=Object.getPrototypeOf(n).push.call(n,s);if(!o.isDisposedValue){e&&e(s,n.length-1);var l=new Je(n.length-1,0,[s],[]);o.propertyValueChanged(t,n,n,l),o.notifyArrayChanged(n,l)}return a},n.shift=function(){var s=Object.getPrototypeOf(n).shift.call(n);if(!o.isDisposedValue&&s){r&&r(s);var a=new Je(n.length-1,1,[],[]);o.propertyValueChanged(t,n,n,a),o.notifyArrayChanged(n,a)}return s},n.unshift=function(s){var a=Object.getPrototypeOf(n).unshift.call(n,s);if(!o.isDisposedValue){e&&e(s,n.length-1);var l=new Je(0,0,[s],[]);o.propertyValueChanged(t,n,n,l),o.notifyArrayChanged(n,l)}return a},n.pop=function(){var s=Object.getPrototypeOf(n).pop.call(n);if(!o.isDisposedValue){r&&r(s);var a=new Je(n.length-1,1,[],[]);o.propertyValueChanged(t,n,n,a),o.notifyArrayChanged(n,a)}return s},n.splice=function(s,a){for(var l,u=[],d=2;d<arguments.length;d++)u[d-2]=arguments[d];s||(s=0),a||(a=0);var v=(l=Object.getPrototypeOf(n).splice).call.apply(l,ml([n,s,a],u));if(u||(u=[]),!o.isDisposedValue){if(r&&v)for(var V=0;V<v.length;V++)r(v[V]);if(e)for(var V=0;V<u.length;V++)e(u[V],s+V);var E=new Je(s,a,u,v);o.propertyValueChanged(t,n,n,E),o.notifyArrayChanged(n,E)}return v},n},i.prototype.getItemValueType=function(){},i.prototype.setArray=function(t,e,r,n,o){var s=[].concat(e);if(Object.getPrototypeOf(e).splice.call(e,0,e.length),r)for(var a=0;a<r.length;a++){var l=r[a];n&&i.createItemValue&&(l=i.createItemValue(l,this.getItemValueType())),Object.getPrototypeOf(e).push.call(e,l),o&&o(e[a])}var u=new Je(0,s.length,e,s);this.propertyValueChanged(t,s,e,u),this.notifyArrayChanged(e,u)},i.prototype.isTwoValueEquals=function(t,e,r,n){return r===void 0&&(r=!1),n===void 0&&(n=!1),P.isTwoValueEquals(t,e,!1,!r,n)},i.copyObject=function(t,e){for(var r in e){var n=e[r];typeof n=="object"&&(n={},this.copyObject(n,e[r])),t[r]=n}},i.prototype.copyCssClasses=function(t,e){!e||(typeof e=="string"||e instanceof String?t.root=e:i.copyObject(t,e))},i.prototype.getValueInLowCase=function(t){return!!t&&typeof t=="string"?t.toLowerCase():t},i.prototype.getElementsInDesign=function(t){return[]},Object.defineProperty(i.prototype,"animationAllowed",{get:function(){return this.getIsAnimationAllowed()},enumerable:!1,configurable:!0}),i.prototype.getIsAnimationAllowed=function(){return b.animationEnabled&&this.animationAllowedLock>=0&&!this.isLoadingFromJson&&!this.isDisposed&&(!!this.onElementRerendered||!this.supportOnElementRenderedEvent)},i.prototype.blockAnimations=function(){this.animationAllowedLock--},i.prototype.releaseAnimations=function(){this.animationAllowedLock++},i.prototype.enableOnElementRenderedEvent=function(){this.onElementRenderedEventEnabled=!0},i.prototype.disableOnElementRenderedEvent=function(){this.onElementRenderedEventEnabled=!1},Object.defineProperty(i.prototype,"onElementRerendered",{get:function(){return this.supportOnElementRenderedEvent&&this.onElementRenderedEventEnabled?this._onElementRerendered:void 0},enumerable:!1,configurable:!0}),i.prototype.afterRerender=function(){var t;(t=this.onElementRerendered)===null||t===void 0||t.fire(this,void 0)},i.currentDependencis=void 0,i}(),Je=function(){function i(t,e,r,n){this.index=t,this.deleteCount=e,this.itemsToAdd=r,this.deletedItems=n}return i}(),Ir=function(){function i(){}return Object.defineProperty(i.prototype,"isEmpty",{get:function(){return this.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"length",{get:function(){return this.callbacks?this.callbacks.length:0},enumerable:!1,configurable:!0}),i.prototype.fireByCreatingOptions=function(t,e){if(!!this.callbacks){for(var r=0;r<this.callbacks.length;r++)if(this.callbacks[r](t,e()),!this.callbacks)return}},i.prototype.fire=function(t,e){if(!!this.callbacks){for(var r=[].concat(this.callbacks),n=0;n<r.length;n++)if(r[n](t,e),!this.callbacks)return}},i.prototype.clear=function(){this.callbacks=void 0},i.prototype.add=function(t){this.hasFunc(t)||(this.callbacks||(this.callbacks=new Array),this.callbacks.push(t),this.fireCallbackChanged())},i.prototype.remove=function(t){if(this.hasFunc(t)){var e=this.callbacks.indexOf(t,0);this.callbacks.splice(e,1),this.fireCallbackChanged()}},i.prototype.hasFunc=function(t){return this.callbacks==null?!1:this.callbacks.indexOf(t,0)>-1},i.prototype.fireCallbackChanged=function(){this.onCallbacksChanged&&this.onCallbacksChanged()},i}(),Oe=function(i){yl(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t}(Ir),Cl=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Rr=function(){function i(t,e,r,n,o){var s=this;n===void 0&&(n=null),this.container=t,this.model=e,this.itemsSelector=r,this.dotsItemSize=n,this.delayedUpdateFunction=o,this.resizeObserver=void 0,this.isInitialized=!1,this.minDimensionConst=56,this.separatorSize=17,this.separatorAddConst=1,this.paddingSizeConst=8,this.dotsSizeConst=48,this.recalcMinDimensionConst=!0,this.getComputedStyle=function(a){return D.getComputedStyle(a)},this.model.updateCallback=function(a){a&&(s.isInitialized=!1),setTimeout(function(){s.process()},1)},typeof ResizeObserver!="undefined"&&(this.resizeObserver=new ResizeObserver(function(a){R.requestAnimationFrame(function(){s.process()})}),this.resizeObserver.observe(this.container.parentElement))}return i.prototype.getDimensions=function(t){return{scroll:t.scrollWidth,offset:t.offsetWidth}},i.prototype.getAvailableSpace=function(){var t=this.getComputedStyle(this.container),e=this.container.offsetWidth;return t.boxSizing==="border-box"&&(e-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight)),e},i.prototype.calcItemSize=function(t){return t.offsetWidth},i.prototype.calcMinDimension=function(t){var e=this.minDimensionConst;return t.iconSize&&this.recalcMinDimensionConst&&(e=2*t.iconSize+this.paddingSizeConst),t.canShrink?e+(t.needSeparator?this.separatorSize:0):t.maxDimension},i.prototype.getRenderedVisibleActionsCount=function(){var t=this,e=0;return this.container.querySelectorAll(this.itemsSelector).forEach(function(r){t.calcItemSize(r)>0&&e++}),e},i.prototype.calcItemsSizes=function(){var t=this;if(!this.isInitialized){var e=this.model.actions,r=this.container.querySelectorAll(this.itemsSelector);(r||[]).forEach(function(n,o){var s=e[o];t.calcActionDimensions(s,n)})}},i.prototype.calcActionDimensions=function(t,e){t.maxDimension=this.calcItemSize(e),t.minDimension=this.calcMinDimension(t)},Object.defineProperty(i.prototype,"isContainerVisible",{get:function(){return Qr(this.container)},enumerable:!1,configurable:!0}),i.prototype.process=function(){var t=this;if(this.isContainerVisible&&!this.model.isResponsivenessDisabled){this.isInitialized||this.model.setActionsMode("large");var e=function(){var n,o=t.dotsItemSize;if(!t.dotsItemSize){var s=(n=t.container)===null||n===void 0?void 0:n.querySelector(".sv-dots");o=s&&t.calcItemSize(s)||t.dotsSizeConst}t.model.fit(t.getAvailableSpace(),o)};if(this.isInitialized)e();else{var r=function(){t.calcItemsSizes(),t.isInitialized=!0,e()};this.getRenderedVisibleActionsCount()<this.model.visibleActions.length?this.delayedUpdateFunction?this.delayedUpdateFunction(r):queueMicrotask?queueMicrotask(r):r():r()}}},i.prototype.dispose=function(){this.model.updateCallback=void 0,this.resizeObserver&&this.resizeObserver.disconnect()},i}(),Pl=function(i){Cl(t,i);function t(e,r,n,o,s,a){s===void 0&&(s=40);var l=i.call(this,e,r,n,o,a)||this;return l.minDimensionConst=s,l.recalcMinDimensionConst=!1,l}return t.prototype.getDimensions=function(){return{scroll:this.container.scrollHeight,offset:this.container.offsetHeight}},t.prototype.getAvailableSpace=function(){var e=this.getComputedStyle(this.container),r=this.container.offsetHeight;return e.boxSizing==="border-box"&&(r-=parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)),r},t.prototype.calcItemSize=function(e){return e.offsetHeight},t.prototype.calcActionDimensions=function(e,r){e.maxDimension=this.calcItemSize(r),e.minDimension=this.calcItemSize(r)},t}(Rr),O=function(){function i(){this.classes=[]}return i.prototype.isEmpty=function(){return this.toString()===""},i.prototype.append=function(t,e){return e===void 0&&(e=!0),!!t&&e&&(typeof t=="string"&&(t=t.trim()),this.classes.push(t)),this},i.prototype.toString=function(){return this.classes.join(" ")},i}(),wl=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ct=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Er={root:"sv-action-bar",defaultSizeMode:"sv-action-bar--default-size-mode",smallSizeMode:"sv-action-bar--small-size-mode",item:"sv-action-bar-item",itemWithTitle:"",itemAsIcon:"sv-action-bar-item--icon",itemActive:"sv-action-bar-item--active",itemPressed:"sv-action-bar-item--pressed",itemIcon:"sv-action-bar-item__icon",itemTitle:"sv-action-bar-item__title",itemTitleWithIcon:"sv-action-bar-item__title--with-icon"},Se=function(i){wl(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.sizeMode="default",e}return t.prototype.getMarkdownHtml=function(e,r){return this.locOwner?this.locOwner.getMarkdownHtml(e,r):void 0},t.prototype.getRenderer=function(e){return this.locOwner?this.locOwner.getRenderer(e):null},t.prototype.getRendererContext=function(e){return this.locOwner?this.locOwner.getRendererContext(e):e},t.prototype.getProcessedText=function(e){return this.locOwner?this.locOwner.getProcessedText(e):e},t.prototype.getLocale=function(){return this.locOwner?this.locOwner.getLocale():""},t.prototype.getRenderedActions=function(){return this.actions},t.prototype.locStrsChanged=function(){i.prototype.locStrsChanged.call(this),this.actions.forEach(function(e){e.locTitle&&e.locTitle.strChanged(),e.locStrsChanged()})},t.prototype.raiseUpdate=function(e){this.isEmpty=!this.actions.some(function(r){return r.visible}),this.updateCallback&&this.updateCallback(e)},t.prototype.onSet=function(){var e=this;this.actions.forEach(function(r){e.setActionCssClasses(r)}),this.raiseUpdate(!0)},t.prototype.onPush=function(e){this.setActionCssClasses(e),e.owner=this,this.raiseUpdate(!0)},t.prototype.onRemove=function(e){e.owner=null,this.raiseUpdate(!0)},t.prototype.setActionCssClasses=function(e){e.cssClasses=this.cssClasses},Object.defineProperty(t.prototype,"hasActions",{get:function(){return(this.actions||[]).length>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedActions",{get:function(){return this.getRenderedActions()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visibleActions",{get:function(){return this.actions.filter(function(e){return e.visible!==!1})},enumerable:!1,configurable:!0}),t.prototype.getRootCss=function(){var e=this.sizeMode==="small"?this.cssClasses.smallSizeMode:this.cssClasses.defaultSizeMode;return new O().append(this.cssClasses.root+(e?" "+e:"")+(this.containerCss?" "+this.containerCss:"")).append(this.cssClasses.root+"--empty",this.isEmpty).toString()},t.prototype.getDefaultCssClasses=function(){return Er},Object.defineProperty(t.prototype,"cssClasses",{get:function(){return this.cssClassesValue||(this.cssClassesValue=this.getDefaultCssClasses()),this.cssClassesValue},set:function(e){var r=this;this.cssClassesValue={},this.copyCssClasses(this.cssClassesValue,this.getDefaultCssClasses()),Fe(e,this.cssClasses),this.actions.forEach(function(n){r.setActionCssClasses(n)})},enumerable:!1,configurable:!0}),t.prototype.createAction=function(e){return e instanceof Qt?e:new G(e)},t.prototype.addAction=function(e,r){var n=this.createAction(e);return this.actions.push(n),this.sortItems(),n},t.prototype.sortItems=function(){this.actions=[].concat(this.actions.filter(function(e){return e.visibleIndex===void 0||e.visibleIndex>=0})).sort(function(e,r){return e.visibleIndex-r.visibleIndex})},t.prototype.setItems=function(e,r){var n=this;r===void 0&&(r=!0),this.actions=e.map(function(o){return n.createAction(o)}),r&&this.sortItems()},t.prototype.popupAfterShowCallback=function(e){},t.prototype.mouseOverHandler=function(e){var r=this;e.isHovered=!0,this.actions.forEach(function(n){n===e&&!!e.popupModel&&(e.showPopupDelayed(r.subItemsShowDelay),r.popupAfterShowCallback(e))})},t.prototype.initResponsivityManager=function(e,r){},t.prototype.resetResponsivityManager=function(){},t.prototype.getActionById=function(e){for(var r=0;r<this.actions.length;r++)if(this.actions[r].id===e)return this.actions[r];return null},t.prototype.dispose=function(){i.prototype.dispose.call(this),this.actions.forEach(function(e){return e.dispose()}),this.actions.length=0},Ct([ue({onSet:function(e,r){r.onSet()},onPush:function(e,r,n){n.onPush(e)},onRemove:function(e,r,n){n.onRemove(e)}})],t.prototype,"actions",void 0),Ct([y({})],t.prototype,"containerCss",void 0),Ct([y({defaultValue:!1})],t.prototype,"isEmpty",void 0),Ct([y({defaultValue:300})],t.prototype,"subItemsShowDelay",void 0),Ct([y({defaultValue:300})],t.prototype,"subItemsHideDelay",void 0),t}(W),pt=function(){function i(){}return i.focusElement=function(t){t&&t.focus()},i.visibility=function(t){var e=D.getComputedStyle(t);return e.display==="none"||e.visibility==="hidden"?!1:t.parentElement?this.visibility(t.parentElement):!0},i.getNextElementPreorder=function(t){var e=t.nextElementSibling?t.nextElementSibling:t.parentElement.firstElementChild;return this.visibility(e)?e:this.getNextElementPreorder(e)},i.getNextElementPostorder=function(t){var e=t.previousElementSibling?t.previousElementSibling:t.parentElement.lastElementChild;return this.visibility(e)?e:this.getNextElementPostorder(e)},i.hasHorizontalScroller=function(t){return t?t.scrollWidth>t.offsetWidth:!1},i.hasVerticalScroller=function(t){return t?t.scrollHeight>t.offsetHeight:!1},i}(),Vl=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),be=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},xl={root:"sv-list__container",item:"sv-list__item",searchClearButtonIcon:"sv-list__filter-clear-button",loadingIndicator:"sv-list__loading-indicator",itemSelected:"sv-list__item--selected",itemGroup:"sv-list__item--group",itemWithIcon:"sv-list__item--with-icon",itemDisabled:"sv-list__item--disabled",itemFocused:"sv-list__item--focused",itemHovered:"sv-list__item--hovered",itemTextWrap:"sv-list__item-text--wrap",itemIcon:"sv-list__item-icon",itemMarkerIcon:"sv-list-item__marker-icon",itemSeparator:"sv-list__item-separator",itemBody:"sv-list__item-body",itemsContainer:"sv-list",itemsContainerFiltering:"sv-list--filtering",filter:"sv-list__filter",filterIcon:"sv-list__filter-icon",filterInput:"sv-list__input",emptyContainer:"sv-list__empty-container",emptyText:"sv-list__empty-text"},Pt=function(i){Vl(t,i);function t(e,r,n,o,s){var a=i.call(this)||this;if(a.onSelectionChanged=r,a.allowSelection=n,a.elementId=s,a.onItemClick=function(u){if(!a.isItemDisabled(u)){a.isExpanded=!1,a.allowSelection&&(a.selectedItem=u),a.onSelectionChanged&&a.onSelectionChanged(u);var d=u.action;d&&d(u)}},a.onItemHover=function(u){a.mouseOverHandler(u)},a.isItemDisabled=function(u){return u.enabled!==void 0&&!u.enabled},a.isItemSelected=function(u){return a.areSameItems(a.selectedItem,u)},a.isItemFocused=function(u){return a.areSameItems(a.focusedItem,u)},a.getListClass=function(){return new O().append(a.cssClasses.itemsContainer).append(a.cssClasses.itemsContainerFiltering,!!a.filterString&&a.visibleActions.length!==a.visibleItems.length).toString()},a.getItemClass=function(u){return new O().append(a.cssClasses.item).append(a.cssClasses.itemWithIcon,!!u.iconName).append(a.cssClasses.itemDisabled,a.isItemDisabled(u)).append(a.cssClasses.itemFocused,a.isItemFocused(u)).append(a.cssClasses.itemSelected,a.isItemSelected(u)).append(a.cssClasses.itemGroup,u.hasSubItems).append(a.cssClasses.itemHovered,u.isHovered).append(a.cssClasses.itemTextWrap,a.textWrapEnabled).append(u.css).toString()},a.getItemIndent=function(u){var d=u.level||0;return(d+1)*t.INDENT+"px"},Object.keys(e).indexOf("items")!==-1){var l=e;Object.keys(l).forEach(function(u){switch(u){case"items":a.setItems(l.items);break;case"onFilterStringChangedCallback":a.setOnFilterStringChangedCallback(l.onFilterStringChangedCallback);break;case"onTextSearchCallback":a.setOnTextSearchCallback(l.onTextSearchCallback);break;default:a[u]=l[u]}})}else a.setItems(e),a.selectedItem=o;return a}return t.prototype.hasText=function(e,r){if(!r)return!0;var n=e.title||"";if(this.onTextSearchCallback)return this.onTextSearchCallback(e,r);var o=n.toLocaleLowerCase();return o=b.comparator.normalizeTextCallback(o,"filter"),o.indexOf(r.toLocaleLowerCase())>-1},t.prototype.isItemVisible=function(e){return e.visible&&(!this.shouldProcessFilter||this.hasText(e,this.filterString))},t.prototype.getRenderedActions=function(){var e=i.prototype.getRenderedActions.call(this);if(this.filterString){var r=[];return e.forEach(function(n){r.push(n),n.items&&n.items.forEach(function(o){var s=new G(o);s.iconName||(s.iconName=n.iconName),r.push(s)})}),r}return e},Object.defineProperty(t.prototype,"visibleItems",{get:function(){var e=this;return this.visibleActions.filter(function(r){return e.isItemVisible(r)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shouldProcessFilter",{get:function(){return!this.onFilterStringChangedCallback},enumerable:!1,configurable:!0}),t.prototype.onFilterStringChanged=function(e){var r=this;this.onFilterStringChangedCallback&&this.onFilterStringChangedCallback(e),this.isEmpty=this.renderedActions.filter(function(n){return r.isItemVisible(n)}).length===0},t.prototype.scrollToItem=function(e,r){var n=this;r===void 0&&(r=0),setTimeout(function(){if(!!n.listContainerHtmlElement){var o=n.listContainerHtmlElement.querySelector("."+e);o&&setTimeout(function(){o.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})},r)}},r)},t.prototype.setOnFilterStringChangedCallback=function(e){this.onFilterStringChangedCallback=e},t.prototype.setOnTextSearchCallback=function(e){this.onTextSearchCallback=e},t.prototype.setItems=function(e,r){var n=this;r===void 0&&(r=!0),i.prototype.setItems.call(this,e,r),this.elementId&&this.renderedActions.forEach(function(o){o.elementId=n.elementId+o.id}),!this.isAllDataLoaded&&!!this.actions.length&&this.actions.push(this.loadingIndicator)},t.prototype.onSet=function(){this.showFilter=this.searchEnabled&&(this.forceShowFilter||(this.actions||[]).length>t.MINELEMENTCOUNT),i.prototype.onSet.call(this)},t.prototype.getDefaultCssClasses=function(){return xl},t.prototype.popupAfterShowCallback=function(e){this.addScrollEventListener(function(){e.hidePopup()})},t.prototype.onItemLeave=function(e){e.hidePopupDelayed(this.subItemsHideDelay)},t.prototype.areSameItems=function(e,r){return this.areSameItemsCallback?this.areSameItemsCallback(e,r):!!e&&!!r&&e.id==r.id},Object.defineProperty(t.prototype,"filterStringPlaceholder",{get:function(){return this.getLocalizationString("filterStringPlaceholder")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"emptyMessage",{get:function(){return this.isAllDataLoaded?this.getLocalizationString("emptyMessage"):this.loadingText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scrollableContainer",{get:function(){return this.listContainerHtmlElement.querySelector("."+this.getDefaultCssClasses().itemsContainer)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loadingText",{get:function(){return this.getLocalizationString("loadingFile")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loadingIndicator",{get:function(){return this.loadingIndicatorValue||(this.loadingIndicatorValue=new G({id:"loadingIndicator",title:this.loadingText,action:function(){},css:this.cssClasses.loadingIndicator})),this.loadingIndicatorValue},enumerable:!1,configurable:!0}),t.prototype.goToItems=function(e){if(e.key==="ArrowDown"||e.keyCode===40){var r=e.target.parentElement,n=r.parentElement.querySelector("ul"),o=Hl(n);!!n&&!!o&&(pt.focusElement(o),e.preventDefault())}},t.prototype.onMouseMove=function(e){this.resetFocusedItem()},t.prototype.onKeyDown=function(e){var r=e.target;e.key==="ArrowDown"||e.keyCode===40?(pt.focusElement(pt.getNextElementPreorder(r)),e.preventDefault()):(e.key==="ArrowUp"||e.keyCode===38)&&(pt.focusElement(pt.getNextElementPostorder(r)),e.preventDefault())},t.prototype.onPointerDown=function(e,r){},t.prototype.refresh=function(){this.filterString="",this.resetFocusedItem()},t.prototype.onClickSearchClearButton=function(e){e.currentTarget.parentElement.querySelector("input").focus(),this.refresh()},t.prototype.resetFocusedItem=function(){this.focusedItem=void 0},t.prototype.focusFirstVisibleItem=function(){this.focusedItem=this.visibleItems[0]},t.prototype.focusLastVisibleItem=function(){this.focusedItem=this.visibleItems[this.visibleItems.length-1]},t.prototype.initFocusedItem=function(){var e=this;this.focusedItem=this.visibleItems.filter(function(r){return r.visible&&e.isItemSelected(r)})[0],this.focusedItem||this.focusFirstVisibleItem()},t.prototype.focusNextVisibleItem=function(){if(!this.focusedItem)this.initFocusedItem();else{var e=this.visibleItems,r=e.indexOf(this.focusedItem),n=e[r+1];n?this.focusedItem=n:this.focusFirstVisibleItem()}},t.prototype.focusPrevVisibleItem=function(){if(!this.focusedItem)this.initFocusedItem();else{var e=this.visibleItems,r=e.indexOf(this.focusedItem),n=e[r-1];n?this.focusedItem=n:this.focusLastVisibleItem()}},t.prototype.selectFocusedItem=function(){this.focusedItem&&this.onItemClick(this.focusedItem)},t.prototype.initListContainerHtmlElement=function(e){this.listContainerHtmlElement=e},t.prototype.onLastItemRended=function(e){this.isAllDataLoaded||e===this.actions[this.actions.length-1]&&!!this.listContainerHtmlElement&&(this.hasVerticalScroller=pt.hasVerticalScroller(this.scrollableContainer))},t.prototype.scrollToFocusedItem=function(){this.scrollToItem(this.getDefaultCssClasses().itemFocused)},t.prototype.scrollToSelectedItem=function(){this.scrollToItem(this.getDefaultCssClasses().itemSelected,110)},t.prototype.addScrollEventListener=function(e){e&&(this.removeScrollEventListener(),this.scrollHandler=e),this.scrollHandler&&this.scrollableContainer.addEventListener("scroll",this.scrollHandler)},t.prototype.removeScrollEventListener=function(){this.scrollHandler&&this.scrollableContainer.removeEventListener("scroll",this.scrollHandler)},t.prototype.dispose=function(){i.prototype.dispose.call(this),this.loadingIndicatorValue&&this.loadingIndicatorValue.dispose(),this.listContainerHtmlElement=void 0},t.INDENT=16,t.MINELEMENTCOUNT=10,be([y({defaultValue:!0,onSet:function(e,r){r.onSet()}})],t.prototype,"searchEnabled",void 0),be([y({defaultValue:!1})],t.prototype,"showFilter",void 0),be([y({defaultValue:!1})],t.prototype,"forceShowFilter",void 0),be([y({defaultValue:!1})],t.prototype,"isExpanded",void 0),be([y({})],t.prototype,"selectedItem",void 0),be([y()],t.prototype,"focusedItem",void 0),be([y({onSet:function(e,r){r.onFilterStringChanged(r.filterString)}})],t.prototype,"filterString",void 0),be([y({defaultValue:!1})],t.prototype,"hasVerticalScroller",void 0),be([y({defaultValue:!0})],t.prototype,"isAllDataLoaded",void 0),be([y({defaultValue:!1})],t.prototype,"showSearchClearButton",void 0),be([y({defaultValue:!0})],t.prototype,"renderElements",void 0),be([y({defaultValue:!1})],t.prototype,"textWrapEnabled",void 0),t}(Se),Ol=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),he=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},wt=function(i){Ol(t,i);function t(e,r,n,o){var s=i.call(this)||this;if(s.focusFirstInputSelector="",s.onCancel=function(){},s.onApply=function(){return!0},s.onHide=function(){},s.onShow=function(){},s.onDispose=function(){},s.onVisibilityChanged=s.addEvent(),s.onFooterActionsCreated=s.addEvent(),s.onRecalculatePosition=s.addEvent(),s.contentComponentName=e,s.contentComponentData=r,!!n&&typeof n=="string")s.verticalPosition=n,s.horizontalPosition=o;else if(n){var a=n;for(var l in a)s[l]=a[l]}return s}return t.prototype.refreshInnerModel=function(){var e=this.contentComponentData.model;e&&e.refresh&&e.refresh()},Object.defineProperty(t.prototype,"isVisible",{get:function(){return this.getPropertyValue("isVisible",!1)},set:function(e){this.isVisible!==e&&(this.setPropertyValue("isVisible",e),this.onVisibilityChanged.fire(this,{model:this,isVisible:e}))},enumerable:!1,configurable:!0}),t.prototype.toggleVisibility=function(){this.isVisible=!this.isVisible},t.prototype.show=function(){this.isVisible||(this.isVisible=!0)},t.prototype.hide=function(){this.isVisible&&(this.isVisible=!1)},t.prototype.recalculatePosition=function(e){this.onRecalculatePosition.fire(this,{isResetHeight:e})},t.prototype.updateFooterActions=function(e){var r={actions:e};return this.onFooterActionsCreated.fire(this,r),r.actions},t.prototype.updateDisplayMode=function(e){switch(e){case"dropdown":{this.displayMode="popup";break}case"popup":{this.displayMode="overlay",this.overlayDisplayMode="tablet-dropdown-overlay";break}case"overlay":{this.displayMode="overlay",this.overlayDisplayMode="dropdown-overlay";break}}},t.prototype.onHiding=function(){this.refreshInnerModel(),this.onHide()},t.prototype.dispose=function(){i.prototype.dispose.call(this),this.onDispose()},he([y()],t.prototype,"contentComponentName",void 0),he([y()],t.prototype,"contentComponentData",void 0),he([y({defaultValue:"bottom"})],t.prototype,"verticalPosition",void 0),he([y({defaultValue:"left"})],t.prototype,"horizontalPosition",void 0),he([y({defaultValue:!0})],t.prototype,"showPointer",void 0),he([y({defaultValue:!1})],t.prototype,"isModal",void 0),he([y({defaultValue:!0})],t.prototype,"canShrink",void 0),he([y({defaultValue:!0})],t.prototype,"isFocusedContent",void 0),he([y({defaultValue:!0})],t.prototype,"isFocusedContainer",void 0),he([y({defaultValue:""})],t.prototype,"cssClass",void 0),he([y({defaultValue:""})],t.prototype,"title",void 0),he([y({defaultValue:"auto"})],t.prototype,"overlayDisplayMode",void 0),he([y({defaultValue:"popup"})],t.prototype,"displayMode",void 0),he([y({defaultValue:"flex"})],t.prototype,"positionMode",void 0),t}(W);function Sl(i,t,e,r,n,o,s,a,l){return n===void 0&&(n=function(){}),o===void 0&&(o=function(){}),l===void 0&&(l="popup"),je.warn("The `showModal()` and `createDialogOptions()` methods are obsolete. Use the `showDialog()` method instead."),{componentName:i,data:t,onApply:e,onCancel:r,onHide:n,onShow:o,cssClass:s,title:a,displayMode:l}}var Mi=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),$=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Tl=function(i,t){for(var e=0,r=t.length,n=i.length;e<r;e++,n++)i[n]=t[e];return i};function Il(i,t,e){return t.locOwner=e,Dr(i,t,t)}function Dr(i,t,e){var r,n=t.onSelectionChanged;t.onSelectionChanged=function(l){for(var u=[],d=1;d<arguments.length;d++)u[d-1]=arguments[d];a.hasTitle&&(a.title=l.title),n&&n(l,u)};var o=Ar(t,e),s=Object.assign({},i,{component:"sv-action-bar-item-dropdown",popupModel:o,action:function(l,u){i.action&&i.action(),o.isFocusedContent=o.isFocusedContent||!u,o.show()}}),a=new G(s);return a.data=(r=o.contentComponentData)===null||r===void 0?void 0:r.model,a}function Ar(i,t){var e=new Pt(i);e.onSelectionChanged=function(o){i.onSelectionChanged&&i.onSelectionChanged(o),n.hide()};var r=t||{};r.onDispose=function(){e.dispose()};var n=new wt("sv-list",{model:e},r);return n.isFocusedContent=e.showFilter,n.onShow=function(){r.onShow&&r.onShow(),e.scrollToSelectedItem()},n}function Rl(i){return i==null?void 0:i.previousElementSibling}var Qt=function(i){Mi(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.rendredIdValue=t.getNextRendredId(),e.markerIconSize=16,e}return t.getNextRendredId=function(){return t.renderedId++},Object.defineProperty(t.prototype,"renderedId",{get:function(){return this.rendredIdValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"owner",{get:function(){return this.ownerValue},set:function(e){e!==this.owner&&(this.ownerValue=e,this.locStrsChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this.getVisible()},set:function(e){this.setVisible(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return this.getEnabled()},set:function(e){this.setEnabled(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){return this.getComponent()},set:function(e){this.setComponent(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTitle",{get:function(){return this.getLocTitle()},set:function(e){this.setLocTitle(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this.getTitle()},set:function(e){this.setTitle(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssClasses",{get:function(){return this.cssClassesValue||Er},set:function(e){this.cssClassesValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return this.visible&&this.mode!=="popup"&&this.mode!=="removed"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.enabled!==void 0&&!this.enabled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canShrink",{get:function(){return!this.disableShrink&&!!this.iconName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitle",{get:function(){return(this.mode!="small"&&(this.showTitle||this.showTitle===void 0)||!this.iconName)&&!!this.title},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasSubItems",{get:function(){return!!this.items&&this.items.length>0},enumerable:!1,configurable:!0}),t.prototype.getActionBarItemTitleCss=function(){return new O().append(this.cssClasses.itemTitle).append(this.cssClasses.itemTitleWithIcon,!!this.iconName).toString()},t.prototype.getActionBarItemCss=function(){return new O().append(this.cssClasses.item).append(this.cssClasses.itemWithTitle,this.hasTitle).append(this.cssClasses.itemAsIcon,!this.hasTitle).append(this.cssClasses.itemActive,!!this.active).append(this.cssClasses.itemPressed,!!this.pressed).append(this.innerCss).toString()},t.prototype.getActionRootCss=function(){return new O().append("sv-action").append(this.css).append("sv-action--space",this.needSpace).append("sv-action--hidden",!this.isVisible).toString()},t.prototype.getTooltip=function(){return this.tooltip||this.title},t.prototype.getIsTrusted=function(e){return e.originalEvent?e.originalEvent.isTrusted:e.isTrusted},t.prototype.showPopup=function(){this.popupModel&&this.popupModel.show()},t.prototype.hidePopup=function(){this.popupModel&&this.popupModel.hide()},t.prototype.clearPopupTimeouts=function(){this.showPopupTimeout&&clearTimeout(this.showPopupTimeout),this.hidePopupTimeout&&clearTimeout(this.hidePopupTimeout)},t.prototype.showPopupDelayed=function(e){var r=this;this.clearPopupTimeouts(),this.showPopupTimeout=setTimeout(function(){r.clearPopupTimeouts(),r.showPopup()},e)},t.prototype.hidePopupDelayed=function(e){var r=this,n;!((n=this.popupModel)===null||n===void 0)&&n.isVisible?(this.clearPopupTimeouts(),this.hidePopupTimeout=setTimeout(function(){r.clearPopupTimeouts(),r.hidePopup(),r.isHovered=!1},e)):(this.clearPopupTimeouts(),this.isHovered=!1)},t.renderedId=1,$([y()],t.prototype,"tooltip",void 0),$([y()],t.prototype,"showTitle",void 0),$([y()],t.prototype,"innerCss",void 0),$([y()],t.prototype,"active",void 0),$([y()],t.prototype,"pressed",void 0),$([y()],t.prototype,"data",void 0),$([y()],t.prototype,"popupModel",void 0),$([y()],t.prototype,"needSeparator",void 0),$([y()],t.prototype,"template",void 0),$([y({defaultValue:"large"})],t.prototype,"mode",void 0),$([y()],t.prototype,"visibleIndex",void 0),$([y()],t.prototype,"disableTabStop",void 0),$([y()],t.prototype,"disableShrink",void 0),$([y()],t.prototype,"disableHide",void 0),$([y({defaultValue:!1})],t.prototype,"needSpace",void 0),$([y()],t.prototype,"ariaChecked",void 0),$([y()],t.prototype,"ariaExpanded",void 0),$([y({defaultValue:"button"})],t.prototype,"ariaRole",void 0),$([y()],t.prototype,"iconName",void 0),$([y({defaultValue:24})],t.prototype,"iconSize",void 0),$([y()],t.prototype,"markerIconName",void 0),$([y()],t.prototype,"markerIconSize",void 0),$([y()],t.prototype,"css",void 0),$([y({defaultValue:!1})],t.prototype,"isPressed",void 0),$([y({defaultValue:!1})],t.prototype,"isHovered",void 0),t}(W),G=function(i){Mi(t,i);function t(e){var r=i.call(this)||this;if(r.innerItem=e,r.locTitleChanged=function(){var o=r.locTitle.renderedHtml;r.setPropertyValue("_title",o||void 0)},r.locTitle=e?e.locTitle:null,e)for(var n in e)n==="locTitle"||n==="title"&&!!r.locTitle&&!!r.title||(r[n]=e[n]);return r.locTitleName&&r.locTitleChanged(),r.registerFunctionOnPropertyValueChanged("_title",function(){r.raiseUpdate(!0)}),r.locStrChangedInPopupModel(),r}return t.prototype.raiseUpdate=function(e){e===void 0&&(e=!1),this.updateCallback&&this.updateCallback(e)},t.prototype.createLocTitle=function(){return this.createLocalizableString("title",this,!0)},t.prototype.setSubItems=function(e){this.markerIconName="icon-next_16x16",this.component="sv-list-item-group",this.items=Tl([],e.items);var r=Object.assign({},e);r.searchEnabled=!1;var n=Ar(r,{horizontalPosition:"right",showPointer:!1,canShrink:!1});n.cssClass="sv-popup-inner",this.popupModel=n},t.prototype.getLocTitle=function(){return this.locTitleValue},t.prototype.setLocTitle=function(e){!e&&!this.locTitleValue&&(e=this.createLocTitle()),this.locTitleValue&&this.locTitleValue.onStringChanged.remove(this.locTitleChanged),this.locTitleValue=e,this.locTitleValue.onStringChanged.add(this.locTitleChanged),this.locTitleChanged()},t.prototype.getTitle=function(){return this._title},t.prototype.setTitle=function(e){this._title=e},Object.defineProperty(t.prototype,"locTitleName",{get:function(){return this.locTitle.localizationName},set:function(e){this.locTitle.localizationName=e},enumerable:!1,configurable:!0}),t.prototype.locStrsChanged=function(){i.prototype.locStrsChanged.call(this),this.locTooltipChanged(),this.locStrChangedInPopupModel()},t.prototype.doAction=function(e){var r=e.originalEvent?e.originalEvent:e;return this.action(this,r.isTrusted),r.preventDefault(),r.stopPropagation(),!0},t.prototype.doMouseDown=function(){this.isMouseDown=!0},t.prototype.doFocus=function(e){if(this.onFocus){var r=e.originalEvent?e.originalEvent:e;this.onFocus(this.isMouseDown,r)}this.isMouseDown=!1},t.prototype.locStrChangedInPopupModel=function(){if(!(!this.popupModel||!this.popupModel.contentComponentData||!this.popupModel.contentComponentData.model)){var e=this.popupModel.contentComponentData.model;if(Array.isArray(e.actions)){var r=e.actions;r.forEach(function(n){n.locStrsChanged&&n.locStrsChanged()})}}},t.prototype.locTooltipChanged=function(){!this.locTooltipName||(this.tooltip=z.getString(this.locTooltipName,this.locTitle.locale))},t.prototype.getLocale=function(){return this.owner?this.owner.getLocale():""},t.prototype.getMarkdownHtml=function(e,r){return this.owner?this.owner.getMarkdownHtml(e,r):void 0},t.prototype.getProcessedText=function(e){return this.owner?this.owner.getProcessedText(e):e},t.prototype.getRenderer=function(e){return this.owner?this.owner.getRenderer(e):null},t.prototype.getRendererContext=function(e){return this.owner?this.owner.getRendererContext(e):e},t.prototype.setVisible=function(e){this._visible=e},t.prototype.getVisible=function(){return this._visible},t.prototype.setEnabled=function(e){this._enabled=e},t.prototype.getEnabled=function(){return this.enabledIf?this.enabledIf():this._enabled},t.prototype.setComponent=function(e){this._component=e},t.prototype.getComponent=function(){return this._component},t.prototype.dispose=function(){this.updateCallback=void 0,this.action=void 0,i.prototype.dispose.call(this),this.popupModel&&this.popupModel.dispose(),this.locTitleValue&&(this.locTitleValue.onStringChanged.remove(this.locTitleChanged),this.locTitleChanged=void 0)},$([y()],t.prototype,"id",void 0),$([y({defaultValue:!0,onSet:function(e,r){r.raiseUpdate()}})],t.prototype,"_visible",void 0),$([y({onSet:function(e,r){r.locTooltipChanged()}})],t.prototype,"locTooltipName",void 0),$([y()],t.prototype,"_enabled",void 0),$([y()],t.prototype,"action",void 0),$([y()],t.prototype,"onFocus",void 0),$([y()],t.prototype,"_component",void 0),$([y()],t.prototype,"items",void 0),$([y({onSet:function(e,r){r.locTitleValue.text!==e&&(r.locTitleValue.text=e)}})],t.prototype,"_title",void 0),t}(Qt),El=function(){function i(t){this.item=t,this.funcKey="sv-dropdown-action",this.setupPopupCallbacks()}return i.prototype.setupPopupCallbacks=function(){var t=this,e=this.popupModel=this.item.popupModel;!e||e.registerPropertyChangedHandlers(["isVisible"],function(){e.isVisible?t.item.pressed=!0:t.item.pressed=!1},this.funcKey)},i.prototype.removePopupCallbacks=function(){this.popupModel&&this.popupModel.unregisterPropertyChangedHandlers(["isVisible"],this.funcKey)},i.prototype.dispose=function(){this.removePopupCallbacks()},i}(),Dl=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ht=function(i){Dl(t,i);function t(){var e=i.call(this)||this;return e.minVisibleItemsCount=0,e.isResponsivenessDisabled=!1,e.dotsItem=Dr({id:"dotsItem-id"+t.ContainerID++,css:"sv-dots",innerCss:"sv-dots__item",iconName:"icon-more",visible:!1,tooltip:z.getString("more")},{items:[],allowSelection:!1}),e}return t.prototype.hideItemsGreaterN=function(e){var r=this.getActionsToHide();e=Math.max(e,this.minVisibleItemsCount-(this.visibleActions.length-r.length));var n=[];r.forEach(function(o){e<=0&&(o.removePriority?o.mode="removed":(o.mode="popup",n.push(o.innerItem))),e--}),this.hiddenItemsListModel.setItems(n)},t.prototype.getActionsToHide=function(){return this.visibleActions.filter(function(e){return!e.disableHide}).sort(function(e,r){return e.removePriority||0-r.removePriority||0})},t.prototype.getVisibleItemsCount=function(e){this.visibleActions.filter(function(s){return s.disableHide}).forEach(function(s){return e-=s.minDimension});for(var r=this.getActionsToHide().map(function(s){return s.minDimension}),n=0,o=0;o<r.length;o++)if(n+=r[o],n>e)return o;return o},t.prototype.updateItemMode=function(e,r){for(var n=this.visibleActions,o=n.length-1;o>=0;o--)r>e&&!n[o].disableShrink?(r-=n[o].maxDimension-n[o].minDimension,n[o].mode="small"):n[o].mode="large";if(r>e){var s=this.visibleActions.filter(function(a){return a.removePriority});s.sort(function(a,l){return a.removePriority-l.removePriority});for(var o=0;o<s.length;o++)r>e&&(r-=n[o].disableShrink?s[o].maxDimension:s[o].minDimension,s[o].mode="removed")}},Object.defineProperty(t.prototype,"hiddenItemsListModel",{get:function(){return this.dotsItem.data},enumerable:!1,configurable:!0}),t.prototype.onSet=function(){var e=this;this.actions.forEach(function(r){return r.updateCallback=function(n){return e.raiseUpdate(n)}}),i.prototype.onSet.call(this)},t.prototype.onPush=function(e){var r=this;e.updateCallback=function(n){return r.raiseUpdate(n)},i.prototype.onPush.call(this,e)},t.prototype.getRenderedActions=function(){return this.actions.length===1&&!!this.actions[0].iconName?this.actions:this.actions.concat([this.dotsItem])},t.prototype.raiseUpdate=function(e){this.isResponsivenessDisabled||i.prototype.raiseUpdate.call(this,e)},t.prototype.fit=function(e,r){if(!(e<=0)){this.dotsItem.visible=!1;var n=0,o=0,s=this.visibleActions;s.forEach(function(a){n+=a.minDimension,o+=a.maxDimension}),e>=o?this.setActionsMode("large"):e<n?(this.setActionsMode("small"),this.hideItemsGreaterN(this.getVisibleItemsCount(e-r)),this.dotsItem.visible=!!this.hiddenItemsListModel.actions.length):this.updateItemMode(e,o)}},t.prototype.initResponsivityManager=function(e,r){this.responsivityManager=new Rr(e,this,":scope > .sv-action:not(.sv-dots) > .sv-action__content",null,r)},t.prototype.resetResponsivityManager=function(){this.responsivityManager&&(this.responsivityManager.dispose(),this.responsivityManager=void 0)},t.prototype.setActionsMode=function(e){this.actions.forEach(function(r){e=="small"&&r.disableShrink||(r.mode=e)})},t.prototype.dispose=function(){i.prototype.dispose.call(this),this.dotsItem.data.dispose(),this.dotsItem.dispose(),this.resetResponsivityManager()},t.ContainerID=1,t}(Se);(function(){function i(t,e){var r=this;e===void 0&&(e=!1),this.func=t,this.isMultiple=e,this._isCompleted=!1,this.execute=function(){r._isCompleted||(r.func(),r._isCompleted=!r.isMultiple)}}return i.prototype.discard=function(){this._isCompleted=!0},Object.defineProperty(i.prototype,"isCompleted",{get:function(){return this._isCompleted},enumerable:!1,configurable:!0}),i})();function Al(i){var t=this,e=!1,r=!1,n;return{run:function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];r=!1,n=o,e||(e=!0,queueMicrotask(function(){r||i.apply(t,n),r=!1,e=!1}))},cancel:function(){r=!0}}}var Vt=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Lr=function(){function i(){this.cancelQueue=[]}return i.prototype.getMsFromRule=function(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3},i.prototype.reflow=function(t){return t.offsetHeight},i.prototype.getAnimationsCount=function(t){var e="";return getComputedStyle&&(e=getComputedStyle(t).animationName),e&&e!="none"?e.split(", ").length:0},i.prototype.getAnimationDuration=function(t){for(var e=getComputedStyle(t),r=e.animationDelay.split(", "),n=e.animationDuration.split(", "),o=0,s=0;s<Math.max(n.length,r.length);s++)o=Math.max(o,this.getMsFromRule(n[s%n.length])+this.getMsFromRule(r[s%r.length]));return o},i.prototype.addCancelCallback=function(t){this.cancelQueue.push(t)},i.prototype.removeCancelCallback=function(t){this.cancelQueue.indexOf(t)>=0&&this.cancelQueue.splice(this.cancelQueue.indexOf(t),1)},i.prototype.onAnimationEnd=function(t,e,r){var n=this,o,s=this.getAnimationsCount(t),a=function(u){u===void 0&&(u=!0),n.afterAnimationRun(t,r),e(u),clearTimeout(o),n.removeCancelCallback(a),t.removeEventListener("animationend",l)},l=function(u){u.target==u.currentTarget&&--s<=0&&a(!1)};s>0?(t.addEventListener("animationend",l),this.addCancelCallback(a),o=setTimeout(function(){a(!1)},this.getAnimationDuration(t)+10)):(this.afterAnimationRun(t,r),e(!0))},i.prototype.afterAnimationRun=function(t,e){t&&e&&e.onAfterRunAnimation&&e.onAfterRunAnimation(t)},i.prototype.beforeAnimationRun=function(t,e){t&&e&&e.onBeforeRunAnimation&&e.onBeforeRunAnimation(t)},i.prototype.getCssClasses=function(t){return t.cssClass.replace(/\s+$/,"").split(/\s+/)},i.prototype.runAnimation=function(t,e,r){t&&(e==null?void 0:e.cssClass)?(this.reflow(t),this.getCssClasses(e).forEach(function(n){t.classList.add(n)}),this.onAnimationEnd(t,r,e)):r(!0)},i.prototype.clearHtmlElement=function(t,e){t&&e.cssClass&&this.getCssClasses(e).forEach(function(r){t.classList.remove(r)})},i.prototype.onNextRender=function(t,e){var r=this;if(e===void 0&&(e=!1),!e&&R.isAvailable()){var n=function(){t(!0),cancelAnimationFrame(o)},o=R.requestAnimationFrame(function(){o=R.requestAnimationFrame(function(){t(!1),r.removeCancelCallback(n)})});this.addCancelCallback(n)}else t(!0)},i.prototype.cancel=function(){var t=[].concat(this.cancelQueue);t.forEach(function(e){return e()}),this.cancelQueue=[]},i}(),ji=function(i){Vt(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.onEnter=function(e){var r=this,n=e.getAnimatedElement(),o=e.getEnterOptions?e.getEnterOptions():{};this.beforeAnimationRun(n,o),this.runAnimation(n,o,function(){r.clearHtmlElement(n,o)})},t.prototype.onLeave=function(e,r){var n=this,o=e.getAnimatedElement(),s=e.getLeaveOptions?e.getLeaveOptions():{};this.beforeAnimationRun(o,s),this.runAnimation(o,s,function(a){r(),n.onNextRender(function(){n.clearHtmlElement(o,s)},a)})},t}(Lr),Mr=function(i){Vt(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.runGroupAnimation=function(e,r,n,o,s){var a=this,l={isAddingRunning:r.length>0,isDeletingRunning:n.length>0,isReorderingRunning:o.length>0},u=r.map(function(j){return e.getAnimatedElement(j)}),d=r.map(function(j){return e.getEnterOptions?e.getEnterOptions(j,l):{}}),v=n.map(function(j){return e.getAnimatedElement(j)}),V=n.map(function(j){return e.getLeaveOptions?e.getLeaveOptions(j,l):{}}),E=o.map(function(j){return e.getAnimatedElement(j.item)}),I=o.map(function(j){return e.getReorderOptions?e.getReorderOptions(j.item,j.movedForward,l):{}});r.forEach(function(j,H){a.beforeAnimationRun(u[H],d[H])}),n.forEach(function(j,H){a.beforeAnimationRun(v[H],V[H])}),o.forEach(function(j,H){a.beforeAnimationRun(E[H],I[H])});var k=r.length+n.length+E.length,N=function(j){--k<=0&&(s&&s(),a.onNextRender(function(){r.forEach(function(H,te){a.clearHtmlElement(u[te],d[te])}),n.forEach(function(H,te){a.clearHtmlElement(v[te],V[te])}),o.forEach(function(H,te){a.clearHtmlElement(E[te],I[te])})},j))};r.forEach(function(j,H){a.runAnimation(u[H],d[H],N)}),n.forEach(function(j,H){a.runAnimation(v[H],V[H],N)}),o.forEach(function(j,H){a.runAnimation(E[H],I[H],N)})},t}(Lr),zt=function(){function i(t,e,r){var n=this;this.animationOptions=t,this.update=e,this.getCurrentValue=r,this._debouncedSync=Al(function(o){n.animation.cancel();try{n._sync(o)}catch{n.update(o)}})}return i.prototype.onNextRender=function(t,e){var r=this,n=this.animationOptions.getRerenderEvent();if(n){var s=function(){n.remove(a),r.cancelCallback=void 0},a=function(){t(),s()};this.cancelCallback=function(){e&&e(),s()},n.add(a)}else if(R.isAvailable()){var o=R.requestAnimationFrame(function(){t(),r.cancelCallback=void 0});this.cancelCallback=function(){e&&e(),cancelAnimationFrame(o),r.cancelCallback=void 0}}else throw new Error("Can't get next render")},i.prototype.sync=function(t){this.animationOptions.isAnimationEnabled()?this._debouncedSync.run(t):(this.cancel(),this.update(t))},i.prototype.cancel=function(){this._debouncedSync.cancel(),this.cancelCallback&&this.cancelCallback(),this.animation.cancel()},i}(),jr=function(i){Vt(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.animation=new ji,e}return t.prototype._sync=function(e){var r=this;e!==this.getCurrentValue()?e?(this.onNextRender(function(){r.animation.onEnter(r.animationOptions)}),this.update(e)):this.animation.onLeave(this.animationOptions,function(){r.update(e)}):this.update(e)},t}(zt),Ge=function(i){Vt(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.animation=new Mr,e}return t.prototype._sync=function(e){var r=this,n,o,s=this.getCurrentValue(),a=(n=this.animationOptions.allowSyncRemovalAddition)!==null&&n!==void 0?n:!0,l=$l(s,e,(o=this.animationOptions.getKey)!==null&&o!==void 0?o:function(I){return I}),u=l.addedItems,d=l.deletedItems,v=l.reorderedItems,V=l.mergedItems;!a&&(v.length>0||u.length>0)&&(d=[],V=e);var E=function(){r.animation.runGroupAnimation(r.animationOptions,u,d,v,function(){d.length>0&&r.update(e)})};[u,d,v].some(function(I){return I.length>0})?d.length<=0||v.length>0||u.length>0?(this.onNextRender(E,function(){r.update(e)}),this.update(V)):E():this.update(e)},t}(zt),Fi=function(i){Vt(t,i);function t(e,r,n,o){var s=i.call(this,e,r,n)||this;return s.mergeValues=o,s.animation=new Mr,s}return t.prototype._sync=function(e){var r=this,n=[].concat(this.getCurrentValue());if(n[0]!==e[0]){var o=this.mergeValues?this.mergeValues(e,n):[].concat(n,e);this.onNextRender(function(){r.animation.runGroupAnimation(r.animationOptions,e,n,[],function(){r.update(e)})},function(){return r.update(e)}),this.update(o,!0)}else this.update(e)},t}(zt),Ni=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Te=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Ut=function(i){Ni(t,i);function t(){var e=i.call(this)||this;return e.createLocTitleProperty(),e}return t.prototype.createLocTitleProperty=function(){return this.createLocalizableString("title",this,!0)},Object.defineProperty(t.prototype,"isPage",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPanel",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isQuestion",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSurvey",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this.getLocalizableStringText("title",this.getDefaultTitleValue())},set:function(e){this.setLocalizableStringText("title",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTitle",{get:function(){return this.getLocalizableString("title")},enumerable:!1,configurable:!0}),t.prototype.getDefaultTitleValue=function(){},t.prototype.updateDescriptionVisibility=function(e){var r=!1;if(this.isDesignMode){var n=x.findProperty(this.getType(),"description");r=!!(n!=null&&n.placeholder)}this.hasDescription=!!e||r&&this.isDesignMode},Object.defineProperty(t.prototype,"locDescription",{get:function(){return this.getLocalizableString("description")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleTagName",{get:function(){var e=this.getDefaultTitleTagName(),r=this.getSurvey();return r?r.getElementTitleTagName(this,e):e},enumerable:!1,configurable:!0}),t.prototype.getDefaultTitleTagName=function(){return b.titleTags[this.getType()]},Object.defineProperty(t.prototype,"hasTitle",{get:function(){return this.title.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitleActions",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitleEvents",{get:function(){return this.hasTitleActions},enumerable:!1,configurable:!0}),t.prototype.getTitleToolbar=function(){return null},t.prototype.getTitleOwner=function(){},Object.defineProperty(t.prototype,"isTitleOwner",{get:function(){return!!this.getTitleOwner()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isTitleRenderedAsString",{get:function(){return this.getIsTitleRenderedAsString()},enumerable:!1,configurable:!0}),t.prototype.toggleState=function(){},Object.defineProperty(t.prototype,"cssClasses",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssTitle",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaTitleId",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaDescriptionId",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleTabIndex",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleAriaExpanded",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleAriaRole",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaLabel",{get:function(){return this.locTitle.renderedHtml},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleAriaLabel",{get:function(){return this.ariaLabel},enumerable:!1,configurable:!0}),t.prototype.getIsTitleRenderedAsString=function(){return!this.isTitleOwner},Te([y()],t.prototype,"hasDescription",void 0),Te([y({localizable:!0,onSet:function(e,r){r.updateDescriptionVisibility(e)}})],t.prototype,"description",void 0),t}(W),Fr;(function(i){i[i.InsideEmptyPanel=1]="InsideEmptyPanel",i[i.MultilineRight=2]="MultilineRight",i[i.MultilineLeft=3]="MultilineLeft",i[i.Top=4]="Top",i[i.Right=5]="Right",i[i.Bottom=6]="Bottom",i[i.Left=7]="Left"})(Fr||(Fr={}));var de=function(i){Ni(t,i);function t(e){var r=i.call(this)||this;return r.selectedElementInDesignValue=r,r.disableDesignActions=t.CreateDisabledDesignElements,r.parentQuestionValue=null,r.isContentElement=!1,r.isEditableTemplateElement=!1,r.isInteractiveDesignElement=!0,r.isSingleInRow=!0,r._renderedIsExpanded=!0,r._isAnimatingCollapseExpand=!1,r.animationCollapsed=new jr(r.getExpandCollapseAnimationOptions(),function(n){r._renderedIsExpanded=n,r.animationAllowed&&(n?r.isAnimatingCollapseExpand=!0:r.updateElementCss(!1))},function(){return r.renderedIsExpanded}),r.name=e,r.createNewArray("errors"),r.createNewArray("titleActions"),r.registerPropertyChangedHandlers(["isReadOnly"],function(){r.onReadOnlyChanged()}),r.registerPropertyChangedHandlers(["errors"],function(){r.updateVisibleErrors()}),r.registerPropertyChangedHandlers(["isSingleInRow"],function(){r.updateElementCss(!1)}),r.registerPropertyChangedHandlers(["minWidth","maxWidth","renderWidth","allowRootStyle","parent"],function(){r.updateRootStyle()}),r}return t.getProgressInfoByElements=function(e,r){for(var n=W.createProgressInfo(),o=0;o<e.length;o++)if(!!e[o].isVisible){var s=e[o].getProgressInfo();n.questionCount+=s.questionCount,n.answeredQuestionCount+=s.answeredQuestionCount,n.requiredQuestionCount+=s.requiredQuestionCount,n.requiredAnsweredQuestionCount+=s.requiredAnsweredQuestionCount}return r&&n.questionCount>0&&(n.requiredQuestionCount==0&&(n.requiredQuestionCount=1),n.answeredQuestionCount>0&&(n.requiredAnsweredQuestionCount=1)),n},t.ScrollElementToTop=function(e,r,n){var o=b.environment.root;if(!e||typeof o=="undefined")return!1;var s=o.getElementById(e);return t.ScrollElementToViewCore(s,!1,r,n)},t.ScrollElementToViewCore=function(e,r,n,o){if(!e||!e.scrollIntoView)return!1;var s=n?-1:e.getBoundingClientRect().top,a=s<0,l=-1;if(!a&&r&&(l=e.getBoundingClientRect().left,a=l<0),!a&&R.isAvailable()){var u=R.getInnerHeight();if(a=u>0&&u<s,!a&&r){var d=R.getInnerWidth();a=d>0&&d<l}}return a&&e.scrollIntoView(o),a},t.GetFirstNonTextElement=function(e,r){if(r===void 0&&(r=!1),!e||!e.length||e.length==0)return null;if(r){var n=e[0];n.nodeName==="#text"&&(n.data=""),n=e[e.length-1],n.nodeName==="#text"&&(n.data="")}for(var o=0;o<e.length;o++)if(e[o].nodeName!="#text"&&e[o].nodeName!="#comment")return e[o];return null},t.FocusElement=function(e){if(!e||!D.isAvailable())return!1;var r=t.focusElementCore(e);return r||setTimeout(function(){t.focusElementCore(e)},10),r},t.focusElementCore=function(e){var r=b.environment.root;if(!r)return!1;var n=r.getElementById(e);return n&&!n.disabled&&n.style.display!=="none"&&n.offsetParent!==null?(t.ScrollElementToViewCore(n,!0,!1),n.focus(),!0):!1},Object.defineProperty(t.prototype,"colSpan",{get:function(){return this.getPropertyValue("colSpan",1)},set:function(e){this.setPropertyValue("colSpan",e)},enumerable:!1,configurable:!0}),t.prototype.onPropertyValueChanged=function(e,r,n){i.prototype.onPropertyValueChanged.call(this,e,r,n),e==="state"&&(this.updateElementCss(!1),this.notifyStateChanged(r),this.stateChangedCallback&&this.stateChangedCallback())},t.prototype.getSkeletonComponentNameCore=function(){return this.survey?this.survey.getSkeletonComponentName(this):""},Object.defineProperty(t.prototype,"parentQuestion",{get:function(){return this.parentQuestionValue},enumerable:!1,configurable:!0}),t.prototype.setParentQuestion=function(e){this.parentQuestionValue=e,this.onParentQuestionChanged()},t.prototype.onParentQuestionChanged=function(){},Object.defineProperty(t.prototype,"skeletonComponentName",{get:function(){return this.getSkeletonComponentNameCore()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this.getPropertyValue("state")},set:function(e){this.setPropertyValue("state",e),this.renderedIsExpanded=!(this.state==="collapsed"&&!this.isDesignMode)},enumerable:!1,configurable:!0}),t.prototype.notifyStateChanged=function(e){this.survey&&this.survey.elementContentVisibilityChanged(this)},Object.defineProperty(t.prototype,"isCollapsed",{get:function(){return this.state==="collapsed"&&!this.isDesignMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isExpanded",{get:function(){return this.state==="expanded"},enumerable:!1,configurable:!0}),t.prototype.collapse=function(){this.isDesignMode||(this.state="collapsed")},t.prototype.expand=function(){this.state="expanded"},t.prototype.toggleState=function(){return this.isCollapsed?(this.expand(),!0):this.isExpanded?(this.collapse(),!1):!0},Object.defineProperty(t.prototype,"hasStateButton",{get:function(){return this.isExpanded||this.isCollapsed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shortcutText",{get:function(){return this.title||this.name},enumerable:!1,configurable:!0}),t.prototype.getTitleToolbar=function(){return this.titleToolbarValue||(this.titleToolbarValue=this.createActionContainer(!0),this.titleToolbarValue.containerCss=(this.isPanel?this.cssClasses.panel.titleBar:this.cssClasses.titleBar)||"sv-action-title-bar",this.titleToolbarValue.setItems(this.getTitleActions())),this.titleToolbarValue},t.prototype.createActionContainer=function(e){var r=e?new Ht:new Se;return this.survey&&!!this.survey.getCss().actionBar&&(r.cssClasses=this.survey.getCss().actionBar),r},Object.defineProperty(t.prototype,"titleActions",{get:function(){return this.getPropertyValue("titleActions")},enumerable:!1,configurable:!0}),t.prototype.getTitleActions=function(){return this.isTitleActionRequested||(this.updateTitleActions(),this.isTitleActionRequested=!0),this.titleActions},t.prototype.getDefaultTitleActions=function(){return[]},t.prototype.updateTitleActions=function(){var e=this.getDefaultTitleActions();this.survey&&(e=this.survey.getUpdatedElementTitleActions(this,e)),this.setPropertyValue("titleActions",e)},Object.defineProperty(t.prototype,"hasTitleActions",{get:function(){return this.getTitleActions().length>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitleEvents",{get:function(){return this.state!==void 0&&this.state!=="default"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleTabIndex",{get:function(){return!this.isPage&&this.state!=="default"?0:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleAriaExpanded",{get:function(){if(!(this.isPage||this.state==="default"))return this.state==="expanded"?"true":"false"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleAriaRole",{get:function(){if(!(this.isPage||this.state==="default"))return"button"},enumerable:!1,configurable:!0}),t.prototype.setSurveyImpl=function(e,r){this.surveyImplValue=e,this.surveyImplValue?(this.surveyDataValue=this.surveyImplValue.getSurveyData(),this.setSurveyCore(this.surveyImplValue.getSurvey()),this.textProcessorValue=this.surveyImplValue.getTextProcessor(),this.onSetData()):(this.setSurveyCore(null),this.surveyDataValue=null),this.survey&&(this.updateDescriptionVisibility(this.description),this.clearCssClasses())},t.prototype.canRunConditions=function(){return i.prototype.canRunConditions.call(this)&&!!this.data},t.prototype.getDataFilteredValues=function(){return this.data?this.data.getFilteredValues():{}},t.prototype.getDataFilteredProperties=function(){var e=this.data?this.data.getFilteredProperties():{};return e.question=this,e},Object.defineProperty(t.prototype,"surveyImpl",{get:function(){return this.surveyImplValue},enumerable:!1,configurable:!0}),t.prototype.__setData=function(e){b.supportCreatorV2&&(this.surveyDataValue=e)},Object.defineProperty(t.prototype,"data",{get:function(){return this.surveyDataValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"survey",{get:function(){return this.getSurvey()},enumerable:!1,configurable:!0}),t.prototype.getSurvey=function(e){return this.surveyValue?this.surveyValue:(this.surveyImplValue&&this.setSurveyCore(this.surveyImplValue.getSurvey()),this.surveyValue)},t.prototype.setSurveyCore=function(e){this.surveyValue=e,this.surveyChangedCallback&&this.surveyChangedCallback()},Object.defineProperty(t.prototype,"isInternal",{get:function(){return this.isContentElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"areInvisibleElementsShowing",{get:function(){return!!this.survey&&this.survey.areInvisibleElementsShowing&&!this.isContentElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnly",{get:function(){return this.readOnly},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"readOnly",{get:function(){return this.getPropertyValue("readOnly")},set:function(e){this.readOnly!=e&&(this.setPropertyValue("readOnly",e),this.isLoadingFromJson||this.setPropertyValue("isReadOnly",this.isReadOnly))},enumerable:!1,configurable:!0}),t.prototype.onReadOnlyChanged=function(){this.readOnlyChangedCallback&&this.readOnlyChangedCallback()},Object.defineProperty(t.prototype,"css",{get:function(){return this.survey?this.survey.getCss():{}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssClassesValue",{get:function(){return this.getPropertyValueWithoutDefault("cssClassesValue")},set:function(e){this.setPropertyValue("cssClassesValue",e)},enumerable:!1,configurable:!0}),t.prototype.ensureCssClassesValue=function(){this.cssClassesValue||(this.cssClassesValue=this.calcCssClasses(this.css),this.updateElementCssCore(this.cssClassesValue))},Object.defineProperty(t.prototype,"cssClasses",{get:function(){return this.cssClassesValue,this.survey?(this.ensureCssClassesValue(),this.cssClassesValue):this.calcCssClasses(this.css)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssTitleNumber",{get:function(){var e=this.cssClasses;return e.number?e.number:e.panel?e.panel.number:void 0},enumerable:!1,configurable:!0}),t.prototype.calcCssClasses=function(e){},t.prototype.updateElementCssCore=function(e){},Object.defineProperty(t.prototype,"cssError",{get:function(){return""},enumerable:!1,configurable:!0}),t.prototype.updateElementCss=function(e){this.clearCssClasses()},t.prototype.clearCssClasses=function(){this.cssClassesValue=void 0},t.prototype.getIsLoadingFromJson=function(){return i.prototype.getIsLoadingFromJson.call(this)?!0:this.surveyValue?this.surveyValue.isLoadingFromJson:!1},Object.defineProperty(t.prototype,"name",{get:function(){return this.getPropertyValue("name","")},set:function(e){var r=this.name;this.setPropertyValue("name",this.getValidName(e)),!this.isLoadingFromJson&&!!r&&this.onNameChanged(r)},enumerable:!1,configurable:!0}),t.prototype.getValidName=function(e){return e},t.prototype.onNameChanged=function(e){},t.prototype.updateBindingValue=function(e,r){!!this.data&&!this.isTwoValueEquals(r,this.data.getValue(e))&&this.data.setValue(e,r,!1)},Object.defineProperty(t.prototype,"errors",{get:function(){return this.getPropertyValue("errors")},set:function(e){this.setPropertyValue("errors",e)},enumerable:!1,configurable:!0}),t.prototype.updateVisibleErrors=function(){for(var e=0,r=0;r<this.errors.length;r++)this.errors[r].visible&&e++;this.hasVisibleErrors=e>0},Object.defineProperty(t.prototype,"containsErrors",{get:function(){return this.getPropertyValue("containsErrors",!1)},enumerable:!1,configurable:!0}),t.prototype.updateContainsErrors=function(){this.setPropertyValue("containsErrors",this.getContainsErrors())},t.prototype.getContainsErrors=function(){return this.errors.length>0},Object.defineProperty(t.prototype,"selectedElementInDesign",{get:function(){return this.selectedElementInDesignValue},set:function(e){this.selectedElementInDesignValue=e},enumerable:!1,configurable:!0}),t.prototype.updateCustomWidgets=function(){},t.prototype.onSurveyLoad=function(){},Object.defineProperty(t.prototype,"wasRendered",{get:function(){return!!this.wasRenderedValue},enumerable:!1,configurable:!0}),t.prototype.onFirstRendering=function(){this.wasRenderedValue=!0,this.ensureCssClassesValue()},t.prototype.endLoadingFromJson=function(){i.prototype.endLoadingFromJson.call(this),this.survey||this.onSurveyLoad(),this.updateDescriptionVisibility(this.description)},t.prototype.setVisibleIndex=function(e){return 0},t.prototype.delete=function(e){},t.prototype.getLocale=function(){return this.survey?this.survey.getLocale():this.locOwner?this.locOwner.getLocale():""},t.prototype.getMarkdownHtml=function(e,r){return this.survey?this.survey.getSurveyMarkdownHtml(this,e,r):this.locOwner?this.locOwner.getMarkdownHtml(e,r):void 0},t.prototype.getRenderer=function(e){return this.survey&&typeof this.survey.getRendererForString=="function"?this.survey.getRendererForString(this,e):this.locOwner&&typeof this.locOwner.getRenderer=="function"?this.locOwner.getRenderer(e):null},t.prototype.getRendererContext=function(e){return this.survey&&typeof this.survey.getRendererContextForString=="function"?this.survey.getRendererContextForString(this,e):this.locOwner&&typeof this.locOwner.getRendererContext=="function"?this.locOwner.getRendererContext(e):e},t.prototype.getProcessedText=function(e){return this.isLoadingFromJson?e:this.textProcessor?this.textProcessor.processText(e,this.getUseDisplayValuesInDynamicTexts()):this.locOwner?this.locOwner.getProcessedText(e):e},t.prototype.getUseDisplayValuesInDynamicTexts=function(){return!0},t.prototype.removeSelfFromList=function(e){if(!(!e||!Array.isArray(e))){var r=e.indexOf(this);r>-1&&e.splice(r,1)}},Object.defineProperty(t.prototype,"textProcessor",{get:function(){return this.textProcessorValue},enumerable:!1,configurable:!0}),t.prototype.getProcessedHtml=function(e){return!e||!this.textProcessor?e:this.textProcessor.processText(e,!0)},t.prototype.onSetData=function(){},Object.defineProperty(t.prototype,"parent",{get:function(){return this.getPropertyValue("parent",null)},set:function(e){this.setPropertyValue("parent",e)},enumerable:!1,configurable:!0}),t.prototype.getPage=function(e){for(;e&&e.parent;)e=e.parent;return e&&e.getType()=="page"?e:null},t.prototype.moveToBase=function(e,r,n){if(n===void 0&&(n=null),!r)return!1;e.removeElement(this);var o=-1;return P.isNumber(n)&&(o=parseInt(n)),o==-1&&!!n&&!!n.getType&&(o=r.indexOf(n)),r.addElement(this,o),!0},t.prototype.setPage=function(e,r){var n=this.getPage(e);if(typeof r=="string"){var o=this.getSurvey();o.pages.forEach(function(s){r===s.name&&(r=s)})}n!==r&&(e&&e.removeElement(this),r&&r.addElement(this,-1))},t.prototype.getSearchableLocKeys=function(e){e.push("title"),e.push("description")},Object.defineProperty(t.prototype,"isDefaultV2Theme",{get:function(){return this.survey&&this.survey.getCss().root=="sd-root-modern"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasParent",{get:function(){return this.parent&&!this.parent.isPage&&!this.parent.originalPage||this.parent===void 0},enumerable:!1,configurable:!0}),t.prototype.shouldAddRunnerStyles=function(){return!this.isDesignMode&&this.isDefaultV2Theme},Object.defineProperty(t.prototype,"isCompact",{get:function(){return this.survey&&this.survey.isCompact},enumerable:!1,configurable:!0}),t.prototype.canHaveFrameStyles=function(){return this.parent!==void 0&&(!this.hasParent||this.parent&&this.parent.showPanelAsPage)},t.prototype.getHasFrameV2=function(){return this.shouldAddRunnerStyles()&&this.canHaveFrameStyles()},t.prototype.getIsNested=function(){return this.shouldAddRunnerStyles()&&!this.canHaveFrameStyles()},t.prototype.getCssRoot=function(e){var r=!!this.isCollapsed||!!this.isExpanded;return new O().append(e.withFrame,this.getHasFrameV2()&&!this.isCompact).append(e.compact,this.isCompact&&this.getHasFrameV2()).append(e.collapsed,!!this.isCollapsed).append(e.expandableAnimating,r&&this.isAnimatingCollapseExpand).append(e.expanded,!!this.isExpanded&&this.renderedIsExpanded).append(e.expandable,r).append(e.nested,this.getIsNested()).toString()},Object.defineProperty(t.prototype,"width",{get:function(){return this.getPropertyValue("width","")},set:function(e){this.setPropertyValue("width",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minWidth",{get:function(){return this.getPropertyValue("minWidth")},set:function(e){this.setPropertyValue("minWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxWidth",{get:function(){return this.getPropertyValue("maxWidth")},set:function(e){this.setPropertyValue("maxWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderWidth",{get:function(){return this.getPropertyValue("renderWidth","")},set:function(e){this.setPropertyValue("renderWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"indent",{get:function(){return this.getPropertyValue("indent")},set:function(e){this.setPropertyValue("indent",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightIndent",{get:function(){return this.getPropertyValue("rightIndent",0)},set:function(e){this.setPropertyValue("rightIndent",e)},enumerable:!1,configurable:!0}),t.prototype.getRootStyle=function(){var e={};return this.paddingLeft&&(e["--sv-element-add-padding-left"]=this.paddingLeft),this.paddingRight&&(e["--sv-element-add-padding-right"]=this.paddingRight),e},Object.defineProperty(t.prototype,"paddingLeft",{get:function(){return this.getPropertyValue("paddingLeft","")},set:function(e){this.setPropertyValue("paddingLeft",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"paddingRight",{get:function(){return this.getPropertyValue("paddingRight","")},set:function(e){this.setPropertyValue("paddingRight",e)},enumerable:!1,configurable:!0}),t.prototype.updateRootStyle=function(){var e={},r;if(this.parent){var n=this.parent.getColumsForElement(this);r=n.reduce(function(s,a){return a.effectiveWidth+s},0),!!r&&r!==100&&(e.flexGrow=0,e.flexShrink=0,e.flexBasis=r+"%",e.minWidth=void 0,e.maxWidth=void 0)}if(Object.keys(e).length==0){var o=this.minWidth;o!="auto"&&(o="min(100%, "+o+")"),this.allowRootStyle&&this.renderWidth&&(e.flexGrow=1,e.flexShrink=1,e.flexBasis=this.renderWidth,e.minWidth=o,e.maxWidth=this.maxWidth)}this.rootStyle=e},t.prototype.isContainsSelection=function(e){var r=void 0,n=D.getDocument();if(D.isAvailable()&&!!n&&n.selection)r=n.selection.createRange().parentElement();else{var o=R.getSelection();if(!!o&&o.rangeCount>0){var s=o.getRangeAt(0);s.startOffset!==s.endOffset&&(r=s.startContainer.parentNode)}}return r==e},Object.defineProperty(t.prototype,"clickTitleFunction",{get:function(){var e=this;if(this.needClickTitleFunction())return function(r){if(!(!!r&&e.isContainsSelection(r.target)))return e.processTitleClick()}},enumerable:!1,configurable:!0}),t.prototype.needClickTitleFunction=function(){return this.state!=="default"},t.prototype.processTitleClick=function(){this.state!=="default"&&this.toggleState()},Object.defineProperty(t.prototype,"hasAdditionalTitleToolbar",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"additionalTitleToolbar",{get:function(){return this.getAdditionalTitleToolbar()},enumerable:!1,configurable:!0}),t.prototype.getAdditionalTitleToolbar=function(){return null},t.prototype.getCssTitle=function(e){var r=this.state!=="default",n=4;return new O().append(e.title).append(e.titleNumInline,(this.no||"").length>n||r).append(e.titleExpandable,r).append(e.titleExpanded,this.isExpanded).append(e.titleCollapsed,this.isCollapsed).append(e.titleDisabled,this.isDisabledStyle).append(e.titleReadOnly,this.isReadOnly).append(e.titleOnError,this.containsErrors).toString()},Object.defineProperty(t.prototype,"isDisabledStyle",{get:function(){return this.getIsDisableAndReadOnlyStyles(!1)[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnlyStyle",{get:function(){return this.getIsDisableAndReadOnlyStyles(!1)[0]},enumerable:!1,configurable:!0}),t.prototype.getIsDisableAndReadOnlyStyles=function(e){var r=this.isPreviewStyle,n=e||this.isReadOnly,o=n&&!r,s=!this.isDefaultV2Theme&&(n||r);return[o,s]},Object.defineProperty(t.prototype,"isPreviewStyle",{get:function(){return!!this.survey&&this.survey.state==="preview"},enumerable:!1,configurable:!0}),t.prototype.localeChanged=function(){i.prototype.localeChanged.call(this),this.updateDescriptionVisibility(this.description),this.errors.length>0&&this.errors.forEach(function(e){e.updateText()})},t.prototype.setWrapperElement=function(e){this.wrapperElement=e},t.prototype.getWrapperElement=function(){return this.wrapperElement},Object.defineProperty(t.prototype,"isAnimatingCollapseExpand",{get:function(){return this._isAnimatingCollapseExpand||this._renderedIsExpanded!=this.isExpanded},set:function(e){e!==this._isAnimatingCollapseExpand&&(this._isAnimatingCollapseExpand=e,this.updateElementCss(!1))},enumerable:!1,configurable:!0}),t.prototype.onElementExpanded=function(e){},t.prototype.getExpandCollapseAnimationOptions=function(){var e=this,r=function(o){e.isAnimatingCollapseExpand=!0,o.style.setProperty("--animation-height",o.offsetHeight+"px")},n=function(o){e.isAnimatingCollapseExpand=!1};return{getRerenderEvent:function(){return e.onElementRerendered},getEnterOptions:function(){var o=e.isPanel?e.cssClasses.panel:e.cssClasses;return{cssClass:o.contentFadeIn,onBeforeRunAnimation:r,onAfterRunAnimation:function(s){n(),e.onElementExpanded(!0)}}},getLeaveOptions:function(){var o=e.isPanel?e.cssClasses.panel:e.cssClasses;return{cssClass:o.contentFadeOut,onBeforeRunAnimation:r,onAfterRunAnimation:n}},getAnimatedElement:function(){var o,s=e.isPanel?e.cssClasses.panel:e.cssClasses;if(s.content){var a=Ke(s.content);if(a)return(o=e.getWrapperElement())===null||o===void 0?void 0:o.querySelector(":scope "+a)}},isAnimationEnabled:function(){return e.isExpandCollapseAnimationEnabled}}},Object.defineProperty(t.prototype,"isExpandCollapseAnimationEnabled",{get:function(){return this.animationAllowed&&!this.isDesignMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedIsExpanded",{get:function(){return!!this._renderedIsExpanded},set:function(e){var r=this._renderedIsExpanded;this.animationCollapsed.sync(e),!this.isExpandCollapseAnimationEnabled&&!r&&this.renderedIsExpanded&&this.onElementExpanded(!1)},enumerable:!1,configurable:!0}),t.prototype.getIsAnimationAllowed=function(){return i.prototype.getIsAnimationAllowed.call(this)&&!!this.survey&&!this.survey.isEndLoadingFromJson},t.prototype.dispose=function(){i.prototype.dispose.call(this),this.titleToolbarValue&&this.titleToolbarValue.dispose()},t.CreateDisabledDesignElements=!1,Te([y({defaultValue:null})],t.prototype,"dragTypeOverMe",void 0),Te([y({defaultValue:!1})],t.prototype,"isDragMe",void 0),Te([y({onSet:function(e,r){r.colSpan=e}})],t.prototype,"effectiveColSpan",void 0),Te([y({defaultValue:!1})],t.prototype,"hasVisibleErrors",void 0),Te([y({defaultValue:!0})],t.prototype,"isSingleInRow",void 0),Te([y({defaultValue:!0})],t.prototype,"allowRootStyle",void 0),Te([y()],t.prototype,"rootStyle",void 0),Te([y()],t.prototype,"_renderedIsExpanded",void 0),t}(Ut),we=function(){function i(t,e,r){e===void 0&&(e=!1);var n;this.owner=t,this.useMarkdown=e,this.name=r,this.values={},this.htmlValues={},this._allowLineBreaks=!1,this.onStringChanged=new Oe,t instanceof Ut&&(this._allowLineBreaks=((n=x.findProperty(t.getType(),r))===null||n===void 0?void 0:n.type)=="text"),this.onCreating()}return Object.defineProperty(i,"defaultLocale",{get:function(){return b.localization.defaultLocaleName},set:function(t){b.localization.defaultLocaleName=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"localizationName",{get:function(){return this._localizationName},set:function(t){this._localizationName!=t&&(this._localizationName=t,this.strChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"allowLineBreaks",{get:function(){return this._allowLineBreaks},enumerable:!1,configurable:!0}),i.prototype.getIsMultiple=function(){return!1},Object.defineProperty(i.prototype,"locale",{get:function(){if(this.owner&&this.owner.getLocale){var t=this.owner.getLocale();if(!!t||!this.sharedData)return t}return this.sharedData?this.sharedData.locale:""},enumerable:!1,configurable:!0}),i.prototype.strChanged=function(){this.searchableText=void 0,!(this.renderedText===void 0&&this.isEmpty&&!this.onGetTextCallback&&!this.localizationName)&&(this.calculatedTextValue=this.calcText(),this.renderedText!==this.calculatedTextValue&&(this.renderedText=void 0,this.calculatedTextValue=void 0),this.htmlValues={},this.onChanged(),this.onStringChanged.fire(this,{}))},Object.defineProperty(i.prototype,"text",{get:function(){return this.pureText},set:function(t){this.setLocaleText(this.locale,t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"calculatedText",{get:function(){return this.renderedText=this.calculatedTextValue!==void 0?this.calculatedTextValue:this.calcText(),this.calculatedTextValue=void 0,this.renderedText},enumerable:!1,configurable:!0}),i.prototype.calcText=function(){var t=this.pureText;return t&&this.owner&&this.owner.getProcessedText&&t.indexOf("{")>-1&&(t=this.owner.getProcessedText(t)),this.onGetTextCallback&&(t=this.onGetTextCallback(t)),t},Object.defineProperty(i.prototype,"pureText",{get:function(){var t=this.locale;t||(t=this.defaultLoc);var e=this.getValue(t);if(this.isValueEmpty(e)&&t===this.defaultLoc&&(e=this.getValue(z.defaultLocale)),this.isValueEmpty(e)){var r=this.getRootDialect(t);r&&(e=this.getValue(r))}return this.isValueEmpty(e)&&t!==this.defaultLoc&&(e=this.getValue(this.defaultLoc)),this.isValueEmpty(e)&&!!this.getLocalizationName()&&(e=this.getLocalizationStr(),this.onGetLocalizationTextCallback&&(e=this.onGetLocalizationTextCallback(e))),e||(e=this.defaultValue||""),e},enumerable:!1,configurable:!0}),i.prototype.getRootDialect=function(t){if(!t)return t;var e=t.indexOf("-");return e>-1?t.substring(0,e):""},i.prototype.getLocalizationName=function(){return this.sharedData?this.sharedData.localizationName:this.localizationName},i.prototype.getLocalizationStr=function(){var t=this.getLocalizationName();return t?z.getString(t,this.locale):""},Object.defineProperty(i.prototype,"hasHtml",{get:function(){return this.hasHtmlValue()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"html",{get:function(){return this.hasHtml?this.getHtmlValue():""},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isEmpty",{get:function(){return this.getValuesKeys().length==0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textOrHtml",{get:function(){return this.hasHtml?this.getHtmlValue():this.calculatedText},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"renderedHtml",{get:function(){return this.textOrHtml},enumerable:!1,configurable:!0}),i.prototype.getLocaleText=function(t){var e=this.getLocaleTextCore(t);return e||""},i.prototype.getLocaleTextCore=function(t){return t||(t=this.defaultLoc),this.getValue(t)},i.prototype.isLocaleTextEqualsWithDefault=function(t,e){var r=this.getLocaleTextCore(t);return r===e?!0:this.isValueEmpty(r)&&this.isValueEmpty(e)},i.prototype.clear=function(){this.setJson(void 0)},i.prototype.clearLocale=function(t){this.setLocaleText(t,void 0)},i.prototype.setLocaleText=function(t,e){if(t=this.getValueLoc(t),!this.storeDefaultText&&this.isLocaleTextEqualsWithDefault(t,e)){if(!this.isValueEmpty(e)||!!t&&t!==this.defaultLoc)return;var r=z.defaultLocale,n=this.getValue(r);!!r&&!this.isValueEmpty(n)&&(this.setValue(r,e),this.fireStrChanged(r,n));return}if(!(!b.localization.storeDuplicatedTranslations&&!this.isValueEmpty(e)&&t&&t!=this.defaultLoc&&!this.getValue(t)&&e==this.getLocaleText(this.defaultLoc))){var o=this.curLocale;t||(t=this.defaultLoc);var s=this.onStrChanged&&t===o?this.pureText:void 0;delete this.htmlValues[t],this.isValueEmpty(e)?this.deleteValue(t):typeof e=="string"&&(this.canRemoveLocValue(t,e)?this.setLocaleText(t,null):(this.setValue(t,e),t==this.defaultLoc&&this.deleteValuesEqualsToDefault(e))),this.fireStrChanged(t,s)}},i.prototype.isValueEmpty=function(t){return t==null?!0:this.localizationName?!1:t===""},Object.defineProperty(i.prototype,"curLocale",{get:function(){return this.locale?this.locale:this.defaultLoc},enumerable:!1,configurable:!0}),i.prototype.canRemoveLocValue=function(t,e){if(b.localization.storeDuplicatedTranslations||t===this.defaultLoc)return!1;var r=this.getRootDialect(t);if(r){var n=this.getLocaleText(r);return n?n==e:this.canRemoveLocValue(r,e)}else return e==this.getLocaleText(this.defaultLoc)},i.prototype.fireStrChanged=function(t,e){if(this.strChanged(),!!this.onStrChanged){var r=this.pureText;(t!==this.curLocale||e!==r)&&this.onStrChanged(e,r)}},i.prototype.hasNonDefaultText=function(){var t=this.getValuesKeys();return t.length==0?!1:t.length>1||t[0]!=this.defaultLoc},i.prototype.getLocales=function(){var t=this.getValuesKeys();return t.length==0?[]:t},i.prototype.getJson=function(){if(this.sharedData)return this.sharedData.getJson();var t=this.getValuesKeys();if(t.length==0)return null;if(t.length==1&&t[0]==b.localization.defaultLocaleName&&!b.serialization.localizableStringSerializeAsObject)return this.values[t[0]];var e={};for(var r in this.values)e[r]=this.values[r];return e},i.prototype.setJson=function(t){if(this.sharedData){this.sharedData.setJson(t);return}if(this.values={},this.htmlValues={},t!=null){if(typeof t=="string")this.setLocaleText(null,t);else for(var e in t)this.setLocaleText(e,t[e]);this.strChanged()}},Object.defineProperty(i.prototype,"renderAs",{get:function(){return!this.owner||typeof this.owner.getRenderer!="function"?i.defaultRenderer:this.owner.getRenderer(this.name)||i.defaultRenderer},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"renderAsData",{get:function(){return!this.owner||typeof this.owner.getRendererContext!="function"?this:this.owner.getRendererContext(this)||this},enumerable:!1,configurable:!0}),i.prototype.equals=function(t){return this.sharedData?this.sharedData.equals(t):!t||!t.values?!1:P.isTwoValueEquals(this.values,t.values,!1,!0,!1)},i.prototype.setFindText=function(t){if(this.searchText!=t){if(this.searchText=t,!this.searchableText){var e=this.textOrHtml;this.searchableText=e?e.toLowerCase():""}var r=this.searchableText,n=!!r&&!!t?r.indexOf(t):void 0;return n<0&&(n=void 0),(n!=null||this.searchIndex!=n)&&(this.searchIndex=n,this.onSearchChanged&&this.onSearchChanged()),this.searchIndex!=null}},i.prototype.onChanged=function(){},i.prototype.onCreating=function(){},i.prototype.hasHtmlValue=function(){if(!this.owner||!this.useMarkdown)return!1;var t=this.locale;if(t||(t=this.defaultLoc),this.htmlValues[t]!==void 0)return!!this.htmlValues[t];var e=this.calculatedText;if(!e)return this.setHtmlValue(t,""),!1;if(!!this.getLocalizationName()&&e===this.getLocalizationStr())return this.setHtmlValue(t,""),!1;var r=this.owner.getMarkdownHtml(e,this.name);return this.setHtmlValue(t,r),!!r},i.prototype.setHtmlValue=function(t,e){this.htmlValues[t]=e},i.prototype.getHtmlValue=function(){var t=this.locale;return t||(t=this.defaultLoc),this.htmlValues[t]},i.prototype.deleteValuesEqualsToDefault=function(t){if(!b.localization.storeDuplicatedTranslations)for(var e=this.getValuesKeys(),r=0;r<e.length;r++)e[r]!=this.defaultLoc&&this.getValue(e[r])==t&&this.deleteValue(e[r])},i.prototype.getValue=function(t){return this.sharedData?this.sharedData.getValue(t):this.values[this.getValueLoc(t)]},i.prototype.setValue=function(t,e){this.sharedData?this.sharedData.setValue(t,e):this.values[this.getValueLoc(t)]=e},i.prototype.deleteValue=function(t){this.sharedData?this.sharedData.deleteValue(t):delete this.values[this.getValueLoc(t)]},i.prototype.getValueLoc=function(t){return this.disableLocalization?b.localization.defaultLocaleName:t},i.prototype.getValuesKeys=function(){return this.sharedData?this.sharedData.getValuesKeys():Object.keys(this.values)},Object.defineProperty(i.prototype,"defaultLoc",{get:function(){return b.localization.defaultLocaleName},enumerable:!1,configurable:!0}),i.SerializeAsObject=!1,i.defaultRenderer="sv-string-viewer",i.editableRenderer="sv-string-editor",i}(),_i=function(){function i(t){this.owner=t,this.values={}}return i.prototype.getIsMultiple=function(){return!0},Object.defineProperty(i.prototype,"locale",{get:function(){return this.owner&&this.owner.getLocale?this.owner.getLocale():""},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this.getValue("")},set:function(t){this.setValue("",t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return Array.isArray(this.value)?this.value.join(`
`):""},set:function(t){this.value=t?t.split(`
`):[]},enumerable:!1,configurable:!0}),i.prototype.getLocaleText=function(t){var e=this.getValueCore(t,!t||t===this.locale);return!e||!Array.isArray(e)||e.length==0?"":e.join(`
`)},i.prototype.setLocaleText=function(t,e){var r=e?e.split(`
`):null;this.setValue(t,r)},i.prototype.getValue=function(t){return this.getValueCore(t)},i.prototype.getValueCore=function(t,e){if(e===void 0&&(e=!0),t=this.getLocale(t),this.values[t])return this.values[t];if(e){var r=b.localization.defaultLocaleName;if(t!==r&&this.values[r])return this.values[r]}return[]},i.prototype.setValue=function(t,e){t=this.getLocale(t);var r=P.createCopy(this.values);!e||e.length==0?delete this.values[t]:this.values[t]=e,this.onValueChanged&&this.onValueChanged(r,this.values)},i.prototype.hasValue=function(t){return t===void 0&&(t=""),!this.isEmpty&&this.getValue(t).length>0},Object.defineProperty(i.prototype,"isEmpty",{get:function(){return this.getValuesKeys().length==0},enumerable:!1,configurable:!0}),i.prototype.getLocale=function(t){return t||(t=this.locale,t||b.localization.defaultLocaleName)},i.prototype.getLocales=function(){var t=this.getValuesKeys();return t.length==0?[]:t},i.prototype.getJson=function(){var t=this.getValuesKeys();return t.length==0?null:t.length==1&&t[0]==b.localization.defaultLocaleName&&!b.serialization.localizableStringSerializeAsObject?this.values[t[0]]:P.createCopy(this.values)},i.prototype.setJson=function(t){if(this.values={},!!t)if(Array.isArray(t))this.setValue(null,t);else for(var e in t)this.setValue(e,t[e])},i.prototype.getValuesKeys=function(){return Object.keys(this.values)},i}();function ki(i){return!!b&&!!b.confirmActionFunc?b.confirmActionFunc(i):confirm(i)}function xt(i,t,e,r,n){var o=function(s){s?t():e&&e()};!!b&&!!b.confirmActionAsync&&b.confirmActionAsync(i,o,void 0,r,n)||o(ki(i))}function Ot(){if(typeof Ot.isIEOrEdge=="undefined"){var i=navigator.userAgent,t=i.indexOf("MSIE "),e=i.indexOf("Trident/"),r=i.indexOf("Edge/");Ot.isIEOrEdge=r>0||e>0||t>0}return Ot.isIEOrEdge}function Bi(i,t){try{for(var e=atob(i.split(",")[1]),r=i.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(e.length),o=new Uint8Array(n),s=0;s<e.length;s++)o[s]=e.charCodeAt(s);var a=new Blob([n],{type:r});!!navigator&&navigator.msSaveBlob&&navigator.msSaveOrOpenBlob(a,t)}catch{}}function Ll(){return R.isAvailable()&&R.hasOwn("orientation")}var St=function(i){return!!i&&!!("host"in i&&i.host)},Nr=function(i){var t=b.environment.root;return typeof i=="string"?t.getElementById(i):i};function Ml(i,t){if(t===void 0&&(t=0),typeof b.environment=="undefined")return!1;var e=b.environment.root,r=St(e)?e.host.clientHeight:e.documentElement.clientHeight,n=i.getBoundingClientRect(),o=Math.max(r,R.getInnerHeight()),s=-t,a=o+t,l=n.top,u=n.bottom,d=Math.max(s,l),v=Math.min(a,u);return d<=v}function Wt(i){var t=b.environment.root;return i?i.scrollHeight>i.clientHeight&&(getComputedStyle(i).overflowY==="scroll"||getComputedStyle(i).overflowY==="auto")||i.scrollWidth>i.clientWidth&&(getComputedStyle(i).overflowX==="scroll"||getComputedStyle(i).overflowX==="auto")?i:Wt(i.parentElement):St(t)?t.host:t.documentElement}function jl(i){var t=b.environment;if(!!t){var e=t.root,r=e.getElementById(i);if(!!r){var n=Wt(r);n&&setTimeout(function(){return n.dispatchEvent(new CustomEvent("scroll"))},10)}}}function Fl(i){var t=R.getLocation();!i||!t||(t.href=kl(i))}function _r(i){return i?["url(",i,")"].join(""):""}function Nl(i){if(!i)return i;var t=b.customIcons[i];return t||i}function _l(i,t,e,r,n,o){if(!!n){i!=="auto"&&(n.style.width=(i||t||16)+"px",n.style.height=(i||e||16)+"px");var s=n.childNodes[0],a=Nl(r);s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#"+a);var l=n.getElementsByTagName("title")[0];if(o)l||(l=D.getDocument().createElementNS("http://www.w3.org/2000/svg","title"),n.appendChild(l));else{l&&n.removeChild(l);return}l.textContent=o}}function kl(i){return i&&(i.toLocaleLowerCase().indexOf("javascript:")>-1?encodeURIComponent(i):i)}function Bl(i){return typeof i!="function"?i:i()}function Ze(i){if(typeof i=="string")if(isNaN(Number(i))){if(i.includes("px"))return parseFloat(i)}else return Number(i);if(typeof i=="number")return i}function $t(i){if(Ze(i)===void 0)return i}var kr="sv-focused--by-key";function qi(i){var t=i.target;!t||!t.classList||t.classList.remove(kr)}function Qi(i,t){if(!(!!i.target&&i.target.contentEditable==="true")){var e=i.target;if(!!e){var r=i.which||i.keyCode;if(r===9){!!e.classList&&!e.classList.contains(kr)&&e.classList.add(kr);return}if(t){if(!t.__keyDownReceived)return;t.__keyDownReceived=!1}r===13||r===32?e.click&&e.click():(!t||t.processEsc)&&r===27&&e.blur&&e.blur()}}}function ql(i,t){if(t===void 0&&(t={processEsc:!0}),t&&(t.__keyDownReceived=!0),!(!!i.target&&i.target.contentEditable==="true")){var e=i.which||i.keyCode,r=[13,32];t.processEsc&&r.push(27),r.indexOf(e)!==-1&&i.preventDefault()}}function Br(i,t){if(!!i){t||(t=function(r){return D.getComputedStyle(r)});var e=t(i);i.style.height="auto",i.scrollHeight&&(i.style.height=i.scrollHeight+parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth)+"px")}}function Ql(i){return i.originalEvent||i}function Hi(i){i.preventDefault(),i.stopPropagation()}function Ke(i){if(!i)return i;var t=/\s*?([\w-]+)\s*?/g;return i.replace(t,".$1")}function qr(i){return getComputedStyle?Number.parseFloat(getComputedStyle(i).width):i.offsetWidth}function Qr(i){return!!(i.offsetWidth||i.offsetHeight||i.getClientRects().length)}function Hl(i){for(var t,e=0;e<i.children.length;e++)!t&&getComputedStyle(i.children[e]).display!=="none"&&(t=i.children[e]);return t}function zl(i,t){if(t===void 0&&(t=!0),R.isAvailable()&&D.isAvailable()&&i.childNodes.length>0){var e=R.getSelection();if(e.rangeCount==0)return;var r=e.getRangeAt(0);r.setStart(r.endContainer,r.endOffset),r.setEndAfter(i.lastChild),e.removeAllRanges(),e.addRange(r);var n=e.toString(),o=i.innerText;n=n.replace(/\r/g,""),t&&(n=n.replace(/\n/g,""),o=o.replace(/\n/g,""));var s=n.length;for(i.innerText=o,r=D.getDocument().createRange(),r.setStart(i.firstChild,0),r.setEnd(i.firstChild,0),e.removeAllRanges(),e.addRange(r);e.toString().length<o.length-s;){var a=e.toString().length;if(e.modify("extend","forward","character"),e.toString().length==a)break}r=e.getRangeAt(0),r.setStart(r.endContainer,r.endOffset)}}function Fe(i,t){if(!(!t||!i)&&typeof t=="object")for(var e in i){var r=i[e];!Array.isArray(r)&&r&&typeof r=="object"?((!t[e]||typeof t[e]!="object")&&(t[e]={}),Fe(r,t[e])):t[e]=r}}(function(){function i(){this._result=""}return i.prototype.log=function(t){this._result+="->"+t},Object.defineProperty(i.prototype,"result",{get:function(){return this._result},enumerable:!1,configurable:!0}),i})();function Ul(i,t,e,r,n){var o=new we(void 0),s=b.showDialog({componentName:"sv-string-viewer",data:{locStr:o,locString:o,model:o},onApply:function(){return t(!0),!0},onCancel:function(){return t(!1),!1},title:i,displayMode:"popup",isFocusedContent:!1,cssClass:"sv-popup--confirm-delete"},n),a=s.footerToolbar,l=a.getActionById("apply"),u=a.getActionById("cancel");return u.title=z.getString("cancel",r),u.innerCss="sv-popup__body-footer-item sv-popup__button sd-btn sd-btn--small",l.title=e||z.getString("ok",r),l.innerCss="sv-popup__body-footer-item sv-popup__button sv-popup__button--danger sd-btn sd-btn--small sd-btn--danger",Wl(s),!0}function Wl(i){i.width="min-content"}function zi(i,t){!R.isFileReaderAvailable()||(i.value="",i.onchange=function(e){if(!!R.isFileReaderAvailable()&&!(!i||!i.files||i.files.length<1)){for(var r=[],n=0;n<i.files.length;n++)r.push(i.files[n]);t(r)}},i.click())}function $l(i,t,e){var r=new Map,n=new Map,o=new Map,s=new Map;i.forEach(function(N){var j=e(N);if(!r.has(j))r.set(e(N),N);else throw new Error("keys must be unique")}),t.forEach(function(N){var j=e(N);if(!n.has(j))n.set(j,N);else throw new Error("keys must be unique")});var a=[],l=[];n.forEach(function(N,j){r.has(j)?o.set(j,o.size):a.push(N)}),r.forEach(function(N,j){n.has(j)?s.set(j,s.size):l.push(N)});var u=[];o.forEach(function(N,j){var H=s.get(j),te=n.get(j);H!==N&&u.push({item:te,movedForward:H<N})});var d=new Array(i.length),v=0,V=Array.from(o.keys());i.forEach(function(N,j){o.has(e(N))?(d[j]=n.get(V[v]),v++):d[j]=N});var E=new Map,I=[];d.forEach(function(N){var j=e(N);n.has(j)?I.length>0&&(E.set(j,I),I=[]):I.push(N)});var k=new Array;return n.forEach(function(N,j){E.has(j)&&E.get(j).forEach(function(H){k.push(H)}),k.push(N)}),I.forEach(function(N){k.push(N)}),{reorderedItems:u,deletedItems:l,addedItems:a,mergedItems:k}}function Jl(i){return Math.round(i*100)/100}var Jt=typeof globalThis!="undefined"?globalThis.document:(void 0).document,Gl=Jt?{root:Jt,_rootElement:D.getBody(),get rootElement(){var i;return(i=this._rootElement)!==null&&i!==void 0?i:D.getBody()},set rootElement(i){this._rootElement=i},_popupMountContainer:D.getBody(),get popupMountContainer(){var i;return(i=this._popupMountContainer)!==null&&i!==void 0?i:D.getBody()},set popupMountContainer(i){this._popupMountContainer=i},svgMountContainer:Jt.head,stylesSheetsMountContainer:Jt.head}:void 0,Zl={file:{minWidth:"240px"},comment:{minWidth:"200px"}},b={designMode:{showEmptyDescriptions:!0,showEmptyTitles:!0},get allowShowEmptyDescriptionInDesignMode(){return this.designMode.showEmptyDescriptions},set allowShowEmptyDescriptionInDesignMode(i){this.designMode.showEmptyDescriptions=i},get allowShowEmptyTitleInDesignMode(){return this.designMode.showEmptyTitles},set allowShowEmptyTitleInDesignMode(i){this.designMode.showEmptyTitles=i},localization:{useLocalTimeZone:!0,storeDuplicatedTranslations:!1,defaultLocaleName:"default"},get useLocalTimeZone(){return this.localization.useLocalTimeZone},set useLocalTimeZone(i){this.localization.useLocalTimeZone=i},get storeDuplicatedTranslations(){return this.localization.storeDuplicatedTranslations},set storeDuplicatedTranslations(i){this.localization.storeDuplicatedTranslations=i},get defaultLocaleName(){return this.localization.defaultLocaleName},set defaultLocaleName(i){this.localization.defaultLocaleName=i},web:{onBeforeRequestChoices:function(i,t){},encodeUrlParams:!0,cacheLoadedChoices:!0,disableQuestionWhileLoadingChoices:!1,surveyServiceUrl:"https://api.surveyjs.io/public/v1/Survey"},get webserviceEncodeParameters(){return this.web.encodeUrlParams},set webserviceEncodeParameters(i){this.web.encodeUrlParams=i},get useCachingForChoicesRestful(){return this.web.cacheLoadedChoices},set useCachingForChoicesRestful(i){this.web.cacheLoadedChoices=i},get useCachingForChoicesRestfull(){return this.web.cacheLoadedChoices},set useCachingForChoicesRestfull(i){this.web.cacheLoadedChoices=i},get disableOnGettingChoicesFromWeb(){return this.web.disableQuestionWhileLoadingChoices},set disableOnGettingChoicesFromWeb(i){this.web.disableQuestionWhileLoadingChoices=i},get surveyServiceUrl(){return this.web.surveyServiceUrl},set surveyServiceUrl(i){this.web.surveyServiceUrl=i},triggers:{changeNavigationButtonsOnComplete:!0,executeCompleteOnValueChanged:!1,executeSkipOnValueChanged:!0},get executeCompleteTriggerOnValueChanged(){return this.triggers.executeCompleteOnValueChanged},set executeCompleteTriggerOnValueChanged(i){this.triggers.executeCompleteOnValueChanged=i},get changeNavigationButtonsOnCompleteTrigger(){return this.triggers.changeNavigationButtonsOnComplete},set changeNavigationButtonsOnCompleteTrigger(i){this.triggers.changeNavigationButtonsOnComplete=i},get executeSkipTriggerOnValueChanged(){return this.triggers.executeSkipOnValueChanged},set executeSkipTriggerOnValueChanged(i){this.triggers.executeSkipOnValueChanged=i},serialization:{itemValueSerializeAsObject:!1,itemValueSerializeDisplayText:!1,localizableStringSerializeAsObject:!1},get itemValueAlwaysSerializeAsObject(){return this.serialization.itemValueSerializeAsObject},set itemValueAlwaysSerializeAsObject(i){this.serialization.itemValueSerializeAsObject=i},get itemValueAlwaysSerializeText(){return this.serialization.itemValueSerializeDisplayText},set itemValueAlwaysSerializeText(i){this.serialization.itemValueSerializeDisplayText=i},get serializeLocalizableStringAsObject(){return this.serialization.localizableStringSerializeAsObject},set serializeLocalizableStringAsObject(i){this.serialization.localizableStringSerializeAsObject=i},lazyRender:{enabled:!1,firstBatchSize:3},get lazyRowsRendering(){return this.lazyRender.enabled},set lazyRowsRendering(i){this.lazyRender.enabled=i},get lazyRowsRenderingStartRow(){return this.lazyRender.firstBatchSize},set lazyRowsRenderingStartRow(i){this.lazyRender.firstBatchSize=i},matrix:{defaultCellType:"dropdown",defaultRowName:"default",totalsSuffix:"-total",maxRowCount:1e3,maxRowCountInCondition:1,renderRemoveAsIcon:!0,columnWidthsByType:Zl,rateSize:"small"},get matrixDefaultRowName(){return this.matrix.defaultRowName},set matrixDefaultRowName(i){this.matrix.defaultRowName=i},get matrixDefaultCellType(){return this.matrix.defaultCellType},set matrixDefaultCellType(i){this.matrix.defaultCellType=i},get matrixTotalValuePostFix(){return this.matrix.totalsSuffix},set matrixTotalValuePostFix(i){this.matrix.totalsSuffix=i},get matrixMaximumRowCount(){return this.matrix.maxRowCount},set matrixMaximumRowCount(i){this.matrix.maxRowCount=i},get matrixMaxRowCountInCondition(){return this.matrix.maxRowCountInCondition},set matrixMaxRowCountInCondition(i){this.matrix.maxRowCountInCondition=i},get matrixRenderRemoveAsIcon(){return this.matrix.renderRemoveAsIcon},set matrixRenderRemoveAsIcon(i){this.matrix.renderRemoveAsIcon=i},panel:{maxPanelCount:100,maxPanelCountInCondition:1},get panelDynamicMaxPanelCountInCondition(){return this.panel.maxPanelCountInCondition},set panelDynamicMaxPanelCountInCondition(i){this.panel.maxPanelCountInCondition=i},get panelMaximumPanelCount(){return this.panel.maxPanelCount},set panelMaximumPanelCount(i){this.panel.maxPanelCount=i},readOnly:{enableValidation:!1,commentRenderMode:"textarea",textRenderMode:"input"},get readOnlyCommentRenderMode(){return this.readOnly.commentRenderMode},set readOnlyCommentRenderMode(i){this.readOnly.commentRenderMode=i},get readOnlyTextRenderMode(){return this.readOnly.textRenderMode},set readOnlyTextRenderMode(i){this.readOnly.textRenderMode=i},numbering:{includeQuestionsWithHiddenNumber:!1,includeQuestionsWithHiddenTitle:!1},get setQuestionVisibleIndexForHiddenTitle(){return this.numbering.includeQuestionsWithHiddenTitle},set setQuestionVisibleIndexForHiddenTitle(i){this.numbering.includeQuestionsWithHiddenTitle=i},get setQuestionVisibleIndexForHiddenNumber(){return this.numbering.includeQuestionsWithHiddenNumber},set setQuestionVisibleIndexForHiddenNumber(i){this.numbering.includeQuestionsWithHiddenNumber=i},enterKeyAction:"default",comparator:{trimStrings:!0,caseSensitive:!1,normalizeTextCallback:function(i,t){return i}},expressionDisableConversionChar:"#",get commentPrefix(){return b.commentSuffix},set commentPrefix(i){b.commentSuffix=i},commentSuffix:"-Comment",itemValueSeparator:"|",ratingMaximumRateValueCount:20,tagboxCloseOnSelect:!1,dropdownSearchDelay:500,confirmActionFunc:function(i){return confirm(i)},confirmActionAsync:function(i,t,e,r,n){return Ul(i,t,e,r,n)},minWidth:"300px",maxWidth:"100%",maxConditionRunCountOnValueChanged:10,notifications:{lifetime:2e3},autoAdvanceDelay:300,showItemsInOrder:"default",noneItemValue:"none",refuseItemValue:"refused",dontKnowItemValue:"dontknow",specialChoicesOrder:{selectAllItem:[-1],noneItem:[1],refuseItem:[2],dontKnowItem:[3],otherItem:[4]},choicesSeparator:", ",supportedValidators:{question:["expression"],comment:["text","regex"],text:["numeric","text","regex","email"],checkbox:["answercount"],imagepicker:["answercount"]},minDate:"",maxDate:"",showModal:void 0,showDialog:void 0,supportCreatorV2:!1,showDefaultItemsInCreatorV2:!0,customIcons:{},rankingDragHandleArea:"entireItem",environment:Gl,showMaxLengthIndicator:!0,animationEnabled:!0,titleTags:{survey:"h3",page:"h4",panel:"h4",question:"h5"},questions:{inputTypes:["color","date","datetime-local","email","month","number","password","range","tel","text","time","url","week"],dataList:["","name","honorific-prefix","given-name","additional-name","family-name","honorific-suffix","nickname","organization-title","username","new-password","current-password","organization","street-address","address-line1","address-line2","address-line3","address-level4","address-level3","address-level2","address-level1","country","country-name","postal-code","cc-name","cc-given-name","cc-additional-name","cc-family-name","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc","cc-type","transaction-currency","transaction-amount","language","bday","bday-day","bday-month","bday-year","sex","url","photo","tel","tel-country-code","tel-national","tel-area-code","tel-local","tel-local-prefix","tel-local-suffix","tel-extension","email","impp"]},legacyProgressBarView:!1,maskSettings:{patternPlaceholderChar:"_",patternEscapeChar:"\\",patternDefinitions:{9:/[0-9]/,a:/[a-zA-Z]/,"#":/[a-zA-Z0-9]/}},storeUtcDates:!1,parseNumber:function(i,t){return t}},ge=function(){function i(t,e){t===void 0&&(t=null),e===void 0&&(e=null),this.text=t,this.errorOwner=e,this.visible=!0,this.onUpdateErrorTextCallback=void 0}return i.prototype.equals=function(t){return!t||!t.getErrorType||this.getErrorType()!==t.getErrorType()?!1:this.text===t.text&&this.visible===t.visible},Object.defineProperty(i.prototype,"locText",{get:function(){return this.locTextValue||(this.locTextValue=new we(this.errorOwner,!0),this.locTextValue.storeDefaultText=!0,this.locTextValue.text=this.getText()),this.locTextValue},enumerable:!1,configurable:!0}),i.prototype.getText=function(){var t=this.text;return t||(t=this.getDefaultText()),this.errorOwner&&(t=this.errorOwner.getErrorCustomText(t,this)),t},i.prototype.getErrorType=function(){return"base"},i.prototype.getDefaultText=function(){return""},i.prototype.getLocale=function(){return this.errorOwner?this.errorOwner.getLocale():""},i.prototype.getLocalizationString=function(t){return z.getString(t,this.getLocale())},i.prototype.updateText=function(){this.onUpdateErrorTextCallback&&this.onUpdateErrorTextCallback(this),this.locText.text=this.getText()},i}(),ye=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ui=function(i){ye(t,i);function t(e,r){e===void 0&&(e=null),r===void 0&&(r=null);var n=i.call(this,e,r)||this;return n.text=e,n}return t.prototype.getErrorType=function(){return"required"},t.prototype.getDefaultText=function(){return this.getLocalizationString("requiredError")},t}(ge),Wi=function(i){ye(t,i);function t(e,r){e===void 0&&(e=null),r===void 0&&(r=null);var n=i.call(this,e,r)||this;return n.text=e,n}return t.prototype.getErrorType=function(){return"requireoneanswer"},t.prototype.getDefaultText=function(){return this.getLocalizationString("requiredErrorInPanel")},t}(ge),$i=function(i){ye(t,i);function t(e,r){e===void 0&&(e=null),r===void 0&&(r=null);var n=i.call(this,e,r)||this;return n.text=e,n}return t.prototype.getErrorType=function(){return"requirenumeric"},t.prototype.getDefaultText=function(){return this.getLocalizationString("numericError")},t}(ge),Ji=function(i){ye(t,i);function t(e,r){r===void 0&&(r=null);var n=i.call(this,null,r)||this;return n.maxSize=e,n.locText.text=n.getText(),n}return t.prototype.getErrorType=function(){return"exceedsize"},t.prototype.getDefaultText=function(){return z.getString("exceedMaxSize").format(this.getTextSize())},t.prototype.getTextSize=function(){var e=["Bytes","KB","MB","GB","TB"],r=[0,0,2,3,3];if(this.maxSize===0)return"0 Byte";var n=Math.floor(Math.log(this.maxSize)/Math.log(1024)),o=this.maxSize/Math.pow(1024,n);return o.toFixed(r[n])+" "+e[n]},t}(ge),Kl=function(i){ye(t,i);function t(e,r,n){n===void 0&&(n=null);var o=i.call(this,null,n)||this;return o.status=e,o.response=r,o}return t.prototype.getErrorType=function(){return"webrequest"},t.prototype.getDefaultText=function(){var e=this.getLocalizationString("urlRequestError");return e?e.format(this.status,this.response):""},t}(ge),Yl=function(i){ye(t,i);function t(e,r){r===void 0&&(r=null);var n=i.call(this,e,r)||this;return n.text=e,n}return t.prototype.getErrorType=function(){return"webrequestempty"},t.prototype.getDefaultText=function(){return this.getLocalizationString("urlGetChoicesError")},t}(ge),Xl=function(i){ye(t,i);function t(e,r){r===void 0&&(r=null);var n=i.call(this,e,r)||this;return n.text=e,n}return t.prototype.getErrorType=function(){return"otherempty"},t.prototype.getDefaultText=function(){return this.getLocalizationString("otherRequiredError")},t}(ge),Gt=function(i){ye(t,i);function t(e,r){r===void 0&&(r=null);var n=i.call(this,e,r)||this;return n.text=e,n}return t.prototype.getErrorType=function(){return"uploadingfile"},t.prototype.getDefaultText=function(){return this.getLocalizationString("uploadingFile")},t}(ge),eu=function(i){ye(t,i);function t(e,r){r===void 0&&(r=null);var n=i.call(this,e,r)||this;return n.text=e,n}return t.prototype.getErrorType=function(){return"requiredinallrowserror"},t.prototype.getDefaultText=function(){return this.getLocalizationString("requiredInAllRowsError")},t}(ge),tu=function(i){ye(t,i);function t(e,r){r===void 0&&(r=null);var n=i.call(this,e,r)||this;return n.text=e,n}return t.prototype.getErrorType=function(){return"eachrowuniqueeerror"},t.prototype.getDefaultText=function(){return this.getLocalizationString("eachRowUniqueError")},t}(ge),ru=function(i){ye(t,i);function t(e,r){r===void 0&&(r=null);var n=i.call(this,null,r)||this;return n.minRowCount=e,n}return t.prototype.getErrorType=function(){return"minrowcounterror"},t.prototype.getDefaultText=function(){return z.getString("minRowCountError").format(this.minRowCount)},t}(ge),Gi=function(i){ye(t,i);function t(e,r){r===void 0&&(r=null);var n=i.call(this,e,r)||this;return n.text=e,n}return t.prototype.getErrorType=function(){return"keyduplicationerror"},t.prototype.getDefaultText=function(){return this.getLocalizationString("keyDuplicationError")},t}(ge),Ce=function(i){ye(t,i);function t(e,r){r===void 0&&(r=null);var n=i.call(this,e,r)||this;return n.text=e,n}return t.prototype.getErrorType=function(){return"custom"},t}(ge),Ye=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ve=function(){function i(t,e){e===void 0&&(e=null),this.value=t,this.error=e}return i}(),Xe=function(i){Ye(t,i);function t(){var e=i.call(this)||this;return e.createLocalizableString("text",e,!0),e}return t.prototype.getSurvey=function(e){return!!this.errorOwner&&!!this.errorOwner.getSurvey?this.errorOwner.getSurvey():null},Object.defineProperty(t.prototype,"text",{get:function(){return this.getLocalizableStringText("text")},set:function(e){this.setLocalizableStringText("text",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isValidateAllValues",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locText",{get:function(){return this.getLocalizableString("text")},enumerable:!1,configurable:!0}),t.prototype.getErrorText=function(e){return this.text?this.text:this.getDefaultErrorText(e)},t.prototype.getDefaultErrorText=function(e){return""},t.prototype.validate=function(e,r,n,o){return null},Object.defineProperty(t.prototype,"isRunning",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAsync",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.getLocale=function(){return this.errorOwner?this.errorOwner.getLocale():""},t.prototype.getMarkdownHtml=function(e,r){return this.errorOwner?this.errorOwner.getMarkdownHtml(e,r):void 0},t.prototype.getRenderer=function(e){return this.errorOwner?this.errorOwner.getRenderer(e):null},t.prototype.getRendererContext=function(e){return this.errorOwner?this.errorOwner.getRendererContext(e):e},t.prototype.getProcessedText=function(e){return this.errorOwner?this.errorOwner.getProcessedText(e):e},t.prototype.createCustomError=function(e){var r=this,n=new Ce(this.getErrorText(e),this.errorOwner);return n.onUpdateErrorTextCallback=function(o){return o.text=r.getErrorText(e)},n},t.prototype.toString=function(){var e=this.getType().replace("validator","");return this.text&&(e+=", "+this.text),e},t}(W),Zi=function(){function i(){}return i.prototype.run=function(t){var e=this,r=[],n=null,o=null;this.prepareAsyncValidators();for(var s=[],a=t.getValidators(),l=0;l<a.length;l++){var u=a[l];!n&&u.isValidateAllValues&&(n=t.getDataFilteredValues(),o=t.getDataFilteredProperties()),u.isAsync&&(this.asyncValidators.push(u),u.onAsyncCompleted=function(v){if(!!v&&!!v.error&&s.push(v.error),!!e.onAsyncCompleted){for(var V=0;V<e.asyncValidators.length;V++)if(e.asyncValidators[V].isRunning)return;e.onAsyncCompleted(s)}})}a=t.getValidators();for(var l=0;l<a.length;l++){var u=a[l],d=u.validate(t.validatedValue,t.getValidatorTitle(),n,o);!!d&&!!d.error&&r.push(d.error)}return this.asyncValidators.length==0&&!!this.onAsyncCompleted&&this.onAsyncCompleted([]),r},i.prototype.prepareAsyncValidators=function(){if(this.asyncValidators)for(var t=0;t<this.asyncValidators.length;t++)this.asyncValidators[t].onAsyncCompleted=null;this.asyncValidators=[]},i}(),Ki=function(i){Ye(t,i);function t(e,r){e===void 0&&(e=null),r===void 0&&(r=null);var n=i.call(this)||this;return n.minValue=e,n.maxValue=r,n}return t.prototype.getType=function(){return"numericvalidator"},t.prototype.validate=function(e,r,n,o){if(r===void 0&&(r=null),this.isValueEmpty(e))return null;if(!P.isNumber(e))return new Ve(null,new $i(this.text,this.errorOwner));var s=new Ve(P.getNumber(e));return this.minValue!==null&&this.minValue>s.value?(s.error=this.createCustomError(r),s):this.maxValue!==null&&this.maxValue<s.value?(s.error=this.createCustomError(r),s):typeof e=="number"?null:s},t.prototype.getDefaultErrorText=function(e){var r=e||this.getLocalizationString("value");return this.minValue!==null&&this.maxValue!==null?this.getLocalizationFormatString("numericMinMax",r,this.minValue,this.maxValue):this.minValue!==null?this.getLocalizationFormatString("numericMin",r,this.minValue):this.getLocalizationFormatString("numericMax",r,this.maxValue)},Object.defineProperty(t.prototype,"minValue",{get:function(){return this.getPropertyValue("minValue")},set:function(e){this.setPropertyValue("minValue",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.getPropertyValue("maxValue")},set:function(e){this.setPropertyValue("maxValue",e)},enumerable:!1,configurable:!0}),t}(Xe),Yi=function(i){Ye(t,i);function t(){return i.call(this)||this}return t.prototype.getType=function(){return"textvalidator"},t.prototype.validate=function(e,r,n,o){if(r===void 0&&(r=null),this.isValueEmpty(e))return null;if(!this.allowDigits){var s=/^[A-Za-z\s\.]*$/;if(!s.test(e))return new Ve(null,this.createCustomError(r))}return this.minLength>0&&e.length<this.minLength?new Ve(null,this.createCustomError(r)):this.maxLength>0&&e.length>this.maxLength?new Ve(null,this.createCustomError(r)):null},t.prototype.getDefaultErrorText=function(e){return this.minLength>0&&this.maxLength>0?this.getLocalizationFormatString("textMinMaxLength",this.minLength,this.maxLength):this.minLength>0?this.getLocalizationFormatString("textMinLength",this.minLength):this.getLocalizationFormatString("textMaxLength",this.maxLength)},Object.defineProperty(t.prototype,"minLength",{get:function(){return this.getPropertyValue("minLength")},set:function(e){this.setPropertyValue("minLength",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLength",{get:function(){return this.getPropertyValue("maxLength")},set:function(e){this.setPropertyValue("maxLength",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowDigits",{get:function(){return this.getPropertyValue("allowDigits")},set:function(e){this.setPropertyValue("allowDigits",e)},enumerable:!1,configurable:!0}),t}(Xe),Xi=function(i){Ye(t,i);function t(e,r){e===void 0&&(e=null),r===void 0&&(r=null);var n=i.call(this)||this;return n.minCount=e,n.maxCount=r,n}return t.prototype.getType=function(){return"answercountvalidator"},t.prototype.validate=function(e,r,n,o){if(e==null||e.constructor!=Array)return null;var s=e.length;return s==0?null:this.minCount&&s<this.minCount?new Ve(null,this.createCustomError(this.getLocalizationFormatString("minSelectError",this.minCount))):this.maxCount&&s>this.maxCount?new Ve(null,this.createCustomError(this.getLocalizationFormatString("maxSelectError",this.maxCount))):null},t.prototype.getDefaultErrorText=function(e){return e},Object.defineProperty(t.prototype,"minCount",{get:function(){return this.getPropertyValue("minCount")},set:function(e){this.setPropertyValue("minCount",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxCount",{get:function(){return this.getPropertyValue("maxCount")},set:function(e){this.setPropertyValue("maxCount",e)},enumerable:!1,configurable:!0}),t}(Xe),eo=function(i){Ye(t,i);function t(e){e===void 0&&(e=null);var r=i.call(this)||this;return r.regex=e,r}return t.prototype.getType=function(){return"regexvalidator"},t.prototype.validate=function(e,r,n,o){if(r===void 0&&(r=null),!this.regex||this.isValueEmpty(e))return null;var s=this.createRegExp();if(Array.isArray(e))for(var a=0;a<e.length;a++){var l=this.hasError(s,e[a],r);if(l)return l}return this.hasError(s,e,r)},t.prototype.hasError=function(e,r,n){return e.test(r)?null:new Ve(r,this.createCustomError(n))},Object.defineProperty(t.prototype,"regex",{get:function(){return this.getPropertyValue("regex")},set:function(e){this.setPropertyValue("regex",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"insensitive",{get:function(){return this.getPropertyValue("insensitive")},set:function(e){this.setPropertyValue("insensitive",e)},enumerable:!1,configurable:!0}),t.prototype.createRegExp=function(){return new RegExp(this.regex,this.insensitive?"i":"")},t}(Xe),Hr=function(i){Ye(t,i);function t(){var e=i.call(this)||this;return e.re=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()=[\]\.,;:\s@\"]+\.)+[^<>()=[\]\.,;:\s@\"]{2,})$/i,e}return t.prototype.getType=function(){return"emailvalidator"},t.prototype.validate=function(e,r,n,o){return r===void 0&&(r=null),!e||this.re.test(e)?null:new Ve(e,this.createCustomError(r))},t.prototype.getDefaultErrorText=function(e){return this.getLocalizationString("invalidEmail")},t}(Xe),to=function(i){Ye(t,i);function t(e){e===void 0&&(e=null);var r=i.call(this)||this;return r.conditionRunner=null,r.isRunningValue=!1,r.expression=e,r}return t.prototype.getType=function(){return"expressionvalidator"},Object.defineProperty(t.prototype,"isValidateAllValues",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAsync",{get:function(){return this.ensureConditionRunner()?this.conditionRunner.isAsync:!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRunning",{get:function(){return this.isRunningValue},enumerable:!1,configurable:!0}),t.prototype.validate=function(e,r,n,o){var s=this;if(r===void 0&&(r=null),n===void 0&&(n=null),o===void 0&&(o=null),!this.ensureConditionRunner())return null;this.conditionRunner.onRunComplete=function(l){s.isRunningValue=!1,s.onAsyncCompleted&&s.onAsyncCompleted(s.generateError(l,e,r))},this.isRunningValue=!0;var a=this.conditionRunner.run(n,o);return this.conditionRunner.isAsync?null:(this.isRunningValue=!1,this.generateError(a,e,r))},t.prototype.generateError=function(e,r,n){return e?null:new Ve(r,this.createCustomError(n))},t.prototype.getDefaultErrorText=function(e){return this.getLocalizationFormatString("invalidExpression",this.expression)},t.prototype.ensureConditionRunner=function(){return this.conditionRunner?(this.conditionRunner.expression=this.expression,!0):this.expression?(this.conditionRunner=new ve(this.expression),!0):!1},Object.defineProperty(t.prototype,"expression",{get:function(){return this.getPropertyValue("expression")},set:function(e){this.setPropertyValue("expression",e)},enumerable:!1,configurable:!0}),t}(Xe);x.addClass("surveyvalidator",[{name:"text",serializationProperty:"locText"}]),x.addClass("numericvalidator",["minValue:number","maxValue:number"],function(){return new Ki},"surveyvalidator"),x.addClass("textvalidator",[{name:"minLength:number",default:0},{name:"maxLength:number",default:0},{name:"allowDigits:boolean",default:!0}],function(){return new Yi},"surveyvalidator"),x.addClass("answercountvalidator",["minCount:number","maxCount:number"],function(){return new Xi},"surveyvalidator"),x.addClass("regexvalidator",["regex",{name:"insensitive:boolean",visible:!1}],function(){return new eo},"surveyvalidator"),x.addClass("emailvalidator",[],function(){return new Hr},"surveyvalidator"),x.addClass("expressionvalidator",["expression:condition"],function(){return new to},"surveyvalidator");var ro=function(){function i(t,e){this.name=t,this.widgetJson=e,this.htmlTemplate=e.htmlTemplate?e.htmlTemplate:""}return i.prototype.afterRender=function(t,e){var r=this;!this.widgetJson.afterRender||(t.localeChangedCallback=function(){r.widgetJson.willUnmount&&r.widgetJson.willUnmount(t,e),r.widgetJson.afterRender(t,e)},this.widgetJson.afterRender(t,e))},i.prototype.willUnmount=function(t,e){this.widgetJson.willUnmount&&this.widgetJson.willUnmount(t,e)},i.prototype.getDisplayValue=function(t,e){return e===void 0&&(e=void 0),this.widgetJson.getDisplayValue?this.widgetJson.getDisplayValue(t,e):null},i.prototype.validate=function(t){if(this.widgetJson.validate)return this.widgetJson.validate(t)},i.prototype.isFit=function(t){return this.isLibraryLoaded()&&this.widgetJson.isFit?this.widgetJson.isFit(t):!1},Object.defineProperty(i.prototype,"canShowInToolbox",{get:function(){return this.widgetJson.showInToolbox===!1||zr.Instance.getActivatedBy(this.name)!="customtype"?!1:!this.widgetJson.widgetIsLoaded||this.widgetJson.widgetIsLoaded()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showInToolbox",{get:function(){return this.widgetJson.showInToolbox!==!1},set:function(t){this.widgetJson.showInToolbox=t},enumerable:!1,configurable:!0}),i.prototype.init=function(){this.widgetJson.init&&this.widgetJson.init()},i.prototype.activatedByChanged=function(t){this.isLibraryLoaded()&&this.widgetJson.activatedByChanged&&this.widgetJson.activatedByChanged(t)},i.prototype.isLibraryLoaded=function(){return this.widgetJson.widgetIsLoaded?this.widgetJson.widgetIsLoaded()==!0:!0},Object.defineProperty(i.prototype,"isDefaultRender",{get:function(){return this.widgetJson.isDefaultRender},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pdfQuestionType",{get:function(){return this.widgetJson.pdfQuestionType},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pdfRender",{get:function(){return this.widgetJson.pdfRender},enumerable:!1,configurable:!0}),i}(),zr=function(){function i(){this.widgetsValues=[],this.widgetsActivatedBy={},this.onCustomWidgetAdded=new Ir}return Object.defineProperty(i.prototype,"widgets",{get:function(){return this.widgetsValues},enumerable:!1,configurable:!0}),i.prototype.add=function(t,e){e===void 0&&(e="property"),this.addCustomWidget(t,e)},i.prototype.addCustomWidget=function(t,e){e===void 0&&(e="property");var r=t.name;r||(r="widget_"+this.widgets.length+1);var n=new ro(r,t);return this.widgetsValues.push(n),n.init(),this.widgetsActivatedBy[r]=e,n.activatedByChanged(e),this.onCustomWidgetAdded.fire(n,null),n},i.prototype.getActivatedBy=function(t){var e=this.widgetsActivatedBy[t];return e||"property"},i.prototype.setActivatedBy=function(t,e){if(!(!t||!e)){var r=this.getCustomWidgetByName(t);!r||(this.widgetsActivatedBy[t]=e,r.activatedByChanged(e))}},i.prototype.clear=function(){this.widgetsValues=[]},i.prototype.getCustomWidgetByName=function(t){for(var e=0;e<this.widgets.length;e++)if(this.widgets[e].name==t)return this.widgets[e];return null},i.prototype.getCustomWidget=function(t){for(var e=0;e<this.widgetsValues.length;e++)if(this.widgetsValues[e].isFit(t))return this.widgetsValues[e];return null},i.Instance=new i,i}(),no=function(){function i(){this.renderersHash={},this.defaultHash={}}return i.prototype.unregisterRenderer=function(t,e){delete this.renderersHash[t][e],this.defaultHash[t]===e&&delete this.defaultHash[t]},i.prototype.registerRenderer=function(t,e,r,n){n===void 0&&(n=!1),this.renderersHash[t]||(this.renderersHash[t]={}),this.renderersHash[t][e]=r,n&&(this.defaultHash[t]=e)},i.prototype.getRenderer=function(t,e){var r=this.renderersHash[t];if(r){if(!!e&&r[e])return r[e];var n=this.defaultHash[t];if(!!n&&r[n])return r[n]}return"default"},i.prototype.getRendererByQuestion=function(t){return this.getRenderer(t.getType(),t.renderAs)},i.prototype.clear=function(){this.renderersHash={}},i.Instance=new i,i}(),nu=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ft=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},iu=function(){function i(t,e,r){this.name=t,this.canRun=e,this.doComplete=r,this.runSecondCheck=function(n){return!1}}return i}(),le=function(i){nu(t,i);function t(e){var r=i.call(this,e)||this;r.customWidgetData={isNeedRender:!0},r.hasCssErrorCallback=function(){return!1},r.isReadyValue=!0,r.dependedQuestions=[],r.onReadyChanged=r.addEvent(),r.triggersInfo=[],r.isRunningValidatorsValue=!1,r.isValueChangedInSurvey=!1,r.allowNotifyValueChanged=!0,r.id=t.getQuestionId(),r.onCreating(),r.createNewArray("validators",function(o){o.errorOwner=r}),r.addExpressionProperty("visibleIf",function(o,s){r.visible=s===!0},function(o){return!r.areInvisibleElementsShowing}),r.addExpressionProperty("enableIf",function(o,s){r.readOnly=s===!1}),r.addExpressionProperty("requiredIf",function(o,s){r.isRequired=s===!0}),r.createLocalizableString("commentText",r,!0,"otherItemText"),r.createLocalizableString("requiredErrorText",r),r.addTriggerInfo("resetValueIf",function(){return!r.isEmpty()},function(){r.clearValue(),r.updateValueWithDefaults()});var n=r.addTriggerInfo("setValueIf",function(){return!0},function(){return r.runSetValueExpression()});return n.runSecondCheck=function(o){return r.checkExpressionIf(o)},r.registerPropertyChangedHandlers(["width"],function(){r.updateQuestionCss(),r.parent&&r.parent.elementWidthChanged(r)}),r.registerPropertyChangedHandlers(["isRequired"],function(){!r.isRequired&&r.errors.length>0&&r.validate(),r.locTitle.strChanged(),r.clearCssClasses()}),r.registerPropertyChangedHandlers(["indent","rightIndent"],function(){r.onIndentChanged()}),r.registerPropertyChangedHandlers(["showCommentArea","showOtherItem"],function(){r.initCommentFromSurvey()}),r.registerFunctionOnPropertiesValueChanged(["no","readOnly","hasVisibleErrors","containsErrors"],function(){r.updateQuestionCss()}),r.registerPropertyChangedHandlers(["isMobile"],function(){r.onMobileChanged()}),r.registerPropertyChangedHandlers(["colSpan"],function(){var o;(o=r.parent)===null||o===void 0||o.updateColumns()}),r}return t.getQuestionId=function(){return"sq_"+t.questionCounter++},t.prototype.isReadOnlyRenderDiv=function(){return this.isReadOnly&&b.readOnly.commentRenderMode==="div"},t.prototype.allowMobileInDesignMode=function(){return!1},t.prototype.updateIsMobileFromSurvey=function(){this.setIsMobile(this.survey._isMobile)},t.prototype.setIsMobile=function(e){this.isMobile=e&&(this.allowMobileInDesignMode()||!this.isDesignMode)},t.prototype.themeChanged=function(e){},t.prototype.getDefaultTitle=function(){return this.name},t.prototype.createLocTitleProperty=function(){var e=this,r=i.prototype.createLocTitleProperty.call(this);return r.storeDefaultText=!0,r.onGetTextCallback=function(n){return n||(n=e.getDefaultTitle()),e.survey?e.survey.getUpdatedQuestionTitle(e,n):n},this.locProcessedTitle=new we(this,!0),this.locProcessedTitle.sharedData=r,r},t.prototype.getSurvey=function(e){return e===void 0&&(e=!1),e?this.parent?this.parent.getSurvey(e):null:this.onGetSurvey?this.onGetSurvey():i.prototype.getSurvey.call(this)},t.prototype.getValueName=function(){return this.valueName?this.valueName.toString():this.name},Object.defineProperty(t.prototype,"valueName",{get:function(){return this.getPropertyValue("valueName","")},set:function(e){var r=this.getValueName();this.setPropertyValue("valueName",e),this.onValueNameChanged(r)},enumerable:!1,configurable:!0}),t.prototype.onValueNameChanged=function(e){!this.survey||(this.survey.questionRenamed(this,this.name,e||this.name),this.initDataFromSurvey())},t.prototype.onNameChanged=function(e){this.locTitle.strChanged(),this.survey&&this.survey.questionRenamed(this,e,this.valueName?this.valueName:e)},Object.defineProperty(t.prototype,"isReady",{get:function(){return this.isReadyValue},enumerable:!1,configurable:!0}),t.prototype.onAsyncRunningChanged=function(){this.updateIsReady()},t.prototype.updateIsReady=function(){var e=this.getIsQuestionReady();if(e){for(var r=this.getIsReadyDependsOn(),n=0;n<r.length;n++)if(!r[n].getIsQuestionReady()){e=!1;break}}this.setIsReady(e)},t.prototype.getIsQuestionReady=function(){return!this.isAsyncExpressionRunning&&this.getAreNestedQuestionsReady()},t.prototype.getAreNestedQuestionsReady=function(){var e=this.getIsReadyNestedQuestions();if(!Array.isArray(e))return!0;for(var r=0;r<e.length;r++)if(!e[r].isReady)return!1;return!0},t.prototype.getIsReadyNestedQuestions=function(){return this.getNestedQuestions()},t.prototype.setIsReady=function(e){var r=this.isReadyValue;this.isReadyValue=e,r!=e&&(this.getIsReadyDependends().forEach(function(n){return n.updateIsReady()}),this.onReadyChanged.fire(this,{question:this,isReady:e,oldIsReady:r}))},t.prototype.getIsReadyDependsOn=function(){return this.getIsReadyDependendCore(!0)},t.prototype.getIsReadyDependends=function(){return this.getIsReadyDependendCore(!1)},t.prototype.getIsReadyDependendCore=function(e){var r=this;if(!this.survey)return[];var n=this.survey.questionsByValueName(this.getValueName()),o=new Array;return n.forEach(function(s){s!==r&&o.push(s)}),e||(this.parentQuestion&&o.push(this.parentQuestion),this.dependedQuestions.length>0&&this.dependedQuestions.forEach(function(s){return o.push(s)})),o},t.prototype.choicesLoaded=function(){},Object.defineProperty(t.prototype,"page",{get:function(){return this.parentQuestion?this.parentQuestion.page:this.getPage(this.parent)},set:function(e){this.setPage(this.parent,e)},enumerable:!1,configurable:!0}),t.prototype.getPanel=function(){return null},t.prototype.delete=function(e){e===void 0&&(e=!0),this.removeFromParent(),e?this.dispose():this.resetDependedQuestions()},t.prototype.removeFromParent=function(){this.parent&&this.removeSelfFromList(this.parent.elements)},t.prototype.addDependedQuestion=function(e){!e||this.dependedQuestions.indexOf(e)>-1||this.dependedQuestions.push(e)},t.prototype.removeDependedQuestion=function(e){if(!!e){var r=this.dependedQuestions.indexOf(e);r>-1&&this.dependedQuestions.splice(r,1)}},t.prototype.updateDependedQuestions=function(){for(var e=0;e<this.dependedQuestions.length;e++)this.dependedQuestions[e].updateDependedQuestion()},t.prototype.updateDependedQuestion=function(){},t.prototype.resetDependedQuestion=function(){},Object.defineProperty(t.prototype,"isFlowLayout",{get:function(){return this.getLayoutType()==="flow"},enumerable:!1,configurable:!0}),t.prototype.getLayoutType=function(){return this.parent?this.parent.getChildrenLayoutType():"row"},t.prototype.isLayoutTypeSupported=function(e){return e!=="flow"},Object.defineProperty(t.prototype,"visible",{get:function(){return this.getPropertyValue("visible",!0)},set:function(e){e!=this.visible&&(this.setPropertyValue("visible",e),this.onVisibleChanged(),this.notifySurveyVisibilityChanged())},enumerable:!1,configurable:!0}),t.prototype.onVisibleChanged=function(){this.updateIsVisibleProp(),!this.isVisible&&this.errors&&this.errors.length>0&&(this.errors=[])},t.prototype.notifyStateChanged=function(e){i.prototype.notifyStateChanged.call(this,e),this.isCollapsed&&this.onHidingContent()},t.prototype.updateIsVisibleProp=function(){var e=this.getPropertyValue("isVisible"),r=this.isVisible;e!==r&&(this.setPropertyValue("isVisible",r),r||this.onHidingContent())},Object.defineProperty(t.prototype,"useDisplayValuesInDynamicTexts",{get:function(){return this.getPropertyValue("useDisplayValuesInDynamicTexts")},set:function(e){this.setPropertyValue("useDisplayValuesInDynamicTexts",e)},enumerable:!1,configurable:!0}),t.prototype.getUseDisplayValuesInDynamicTexts=function(){return this.useDisplayValuesInDynamicTexts},Object.defineProperty(t.prototype,"visibleIf",{get:function(){return this.getPropertyValue("visibleIf","")},set:function(e){this.setPropertyValue("visibleIf",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return this.survey&&this.survey.areEmptyElementsHidden&&this.isEmpty()?!1:this.areInvisibleElementsShowing?!0:this.isVisibleCore()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isVisibleInSurvey",{get:function(){return this.isVisible&&this.isParentVisible},enumerable:!1,configurable:!0}),t.prototype.isVisibleCore=function(){return this.visible},Object.defineProperty(t.prototype,"visibleIndex",{get:function(){return this.getPropertyValue("visibleIndex",-1)},enumerable:!1,configurable:!0}),t.prototype.onHidingContent=function(){},Object.defineProperty(t.prototype,"hideNumber",{get:function(){return this.getPropertyValue("hideNumber")},set:function(e){this.setPropertyValue("hideNumber",e),this.notifySurveyVisibilityChanged()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAllowTitleLeft",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"question"},Object.defineProperty(t.prototype,"isQuestion",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.moveTo=function(e,r){return r===void 0&&(r=null),this.moveToBase(this.parent,e,r)},t.prototype.getProgressInfo=function(){return this.hasInput?{questionCount:1,answeredQuestionCount:this.isEmpty()?0:1,requiredQuestionCount:this.isRequired?1:0,requiredAnsweredQuestionCount:!this.isEmpty()&&this.isRequired?1:0}:i.prototype.getProgressInfo.call(this)},t.prototype.ensureSetValueExpressionRunner=function(){var e=this;this.setValueExpressionRunner?this.setValueExpressionRunner.expression=this.setValueExpression:(this.setValueExpressionRunner=new $e(this.setValueExpression),this.setValueExpressionRunner.onRunComplete=function(r){e.runExpressionSetValue(r)})},t.prototype.runSetValueExpression=function(){this.setValueExpression?(this.ensureSetValueExpressionRunner(),this.setValueExpressionRunner.run(this.getDataFilteredValues(),this.getDataFilteredProperties())):this.clearValue()},t.prototype.checkExpressionIf=function(e){return this.ensureSetValueExpressionRunner(),this.setValueExpressionRunner?new ce().isAnyKeyChanged(e,this.setValueExpressionRunner.getVariables()):!1},t.prototype.addTriggerInfo=function(e,r,n){var o=new iu(e,r,n);return this.triggersInfo.push(o),o},t.prototype.runTriggerInfo=function(e,r,n){var o=this[e.name],s={};if(s[r]=n,!o||e.isRunning||!e.canRun()){e.runSecondCheck(s)&&e.doComplete();return}e.runner?e.runner.expression=o:(e.runner=new $e(o),e.runner.onRunComplete=function(a){a===!0&&e.doComplete(),e.isRunning=!1}),!(!new ce().isAnyKeyChanged(s,e.runner.getVariables())&&!e.runSecondCheck(s))&&(e.isRunning=!0,e.runner.run(this.getDataFilteredValues(),this.getDataFilteredProperties()))},t.prototype.runTriggers=function(e,r){var n=this;this.isSettingQuestionValue||this.parentQuestion&&this.parentQuestion.getValueName()===e||this.triggersInfo.forEach(function(o){n.runTriggerInfo(o,e,r)})},t.prototype.runConditions=function(){this.data&&!this.isLoadingFromJson&&(this.isDesignMode||this.runCondition(this.getDataFilteredValues(),this.getDataFilteredProperties()),this.locStrsChanged())},t.prototype.setSurveyImpl=function(e,r){i.prototype.setSurveyImpl.call(this,e),this.survey&&(this.survey.questionCreated(this),r!==!0&&this.runConditions(),this.calcRenderedCommentPlaceholder(),this.visible||this.updateIsVisibleProp(),this.updateIsMobileFromSurvey())},Object.defineProperty(t.prototype,"parent",{get:function(){return this.getPropertyValue("parent",null)},set:function(e){this.parent!==e&&(this.removeFromParent(),this.setPropertyValue("parent",e),this.updateQuestionCss(),this.onParentChanged())},enumerable:!1,configurable:!0}),t.prototype.onParentChanged=function(){},Object.defineProperty(t.prototype,"hasTitle",{get:function(){return this.getTitleLocation()!=="hidden"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleLocation",{get:function(){return this.getPropertyValue("titleLocation")},set:function(e){var r=this.titleLocation=="hidden"||e=="hidden";this.setPropertyValue("titleLocation",e.toLowerCase()),this.updateQuestionCss(),r&&this.notifySurveyVisibilityChanged()},enumerable:!1,configurable:!0}),t.prototype.getTitleOwner=function(){return this},t.prototype.getIsTitleRenderedAsString=function(){return this.titleLocation==="hidden"},t.prototype.notifySurveyOnChildrenVisibilityChanged=function(){return!1},t.prototype.notifySurveyVisibilityChanged=function(){if(!(!this.survey||this.isLoadingFromJson)){this.survey.questionVisibilityChanged(this,this.isVisible,!this.parentQuestion||this.parentQuestion.notifySurveyOnChildrenVisibilityChanged());var e=this.isClearValueOnHidden;this.visible||this.clearValueOnHidding(e),e&&this.isVisibleInSurvey&&this.updateValueWithDefaults()}},t.prototype.clearValueOnHidding=function(e){e&&this.clearValueIfInvisible()},Object.defineProperty(t.prototype,"titleWidth",{get:function(){if(this.parent&&this.getTitleLocation()==="left"){var e=this.parent.getColumsForElement(this),r=e.length;if(r!==0&&!!e[0].questionTitleWidth)return e[0].questionTitleWidth;var n=this.getPercentQuestionTitleWidth();if(!n&&!!this.parent){var o=this.parent.getQuestionTitleWidth();return o&&!isNaN(o)&&(o=o+"px"),o}return n/(r||1)+"%"}},enumerable:!1,configurable:!0}),t.prototype.getPercentQuestionTitleWidth=function(){var e=!!this.parent&&this.parent.getQuestionTitleWidth();if(!!e&&e[e.length-1]==="%")return parseInt(e)},t.prototype.getTitleLocation=function(){if(this.isFlowLayout)return"hidden";var e=this.getTitleLocationCore();return e==="left"&&!this.isAllowTitleLeft&&(e="top"),e},t.prototype.getTitleLocationCore=function(){return this.titleLocation!=="default"?this.titleLocation:this.parent?this.parent.getQuestionTitleLocation():this.survey?this.survey.questionTitleLocation:"top"},Object.defineProperty(t.prototype,"hasTitleOnLeft",{get:function(){return this.hasTitle&&this.getTitleLocation()==="left"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitleOnTop",{get:function(){return this.hasTitle&&this.getTitleLocation()==="top"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitleOnBottom",{get:function(){return this.hasTitle&&this.getTitleLocation()==="bottom"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitleOnLeftTop",{get:function(){if(!this.hasTitle)return!1;var e=this.getTitleLocation();return e==="left"||e==="top"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"errorLocation",{get:function(){return this.getPropertyValue("errorLocation")},set:function(e){this.setPropertyValue("errorLocation",e)},enumerable:!1,configurable:!0}),t.prototype.getErrorLocation=function(){return this.errorLocation!=="default"?this.errorLocation:this.parentQuestion?this.parentQuestion.getChildErrorLocation(this):this.parent?this.parent.getQuestionErrorLocation():this.survey?this.survey.questionErrorLocation:"top"},t.prototype.getChildErrorLocation=function(e){return this.getErrorLocation()},Object.defineProperty(t.prototype,"hasInput",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasSingleInput",{get:function(){return this.hasInput},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputId",{get:function(){return this.id+"i"},enumerable:!1,configurable:!0}),t.prototype.getDefaultTitleValue=function(){return this.name},t.prototype.getDefaultTitleTagName=function(){return b.titleTags.question},Object.defineProperty(t.prototype,"descriptionLocation",{get:function(){return this.getPropertyValue("descriptionLocation")},set:function(e){this.setPropertyValue("descriptionLocation",e),this.updateQuestionCss()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasDescriptionUnderTitle",{get:function(){return this.getDescriptionLocation()=="underTitle"&&this.hasDescription},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasDescriptionUnderInput",{get:function(){return this.getDescriptionLocation()=="underInput"&&this.hasDescription},enumerable:!1,configurable:!0}),t.prototype.getDescriptionLocation=function(){return this.descriptionLocation!=="default"?this.descriptionLocation:this.survey?this.survey.questionDescriptionLocation:"underTitle"},t.prototype.needClickTitleFunction=function(){return i.prototype.needClickTitleFunction.call(this)||this.hasInput},t.prototype.processTitleClick=function(){var e=this;if(i.prototype.processTitleClick.call(this),!this.isCollapsed)return setTimeout(function(){e.focus()},1),!0},Object.defineProperty(t.prototype,"requiredErrorText",{get:function(){return this.getLocalizableStringText("requiredErrorText")},set:function(e){this.setLocalizableStringText("requiredErrorText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locRequiredErrorText",{get:function(){return this.getLocalizableString("requiredErrorText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"commentText",{get:function(){return this.getLocalizableStringText("commentText")},set:function(e){this.setLocalizableStringText("commentText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locCommentText",{get:function(){return this.getLocalizableString("commentText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"commentPlaceHolder",{get:function(){return this.commentPlaceholder},set:function(e){this.commentPlaceholder=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedCommentPlaceholder",{get:function(){return this.getPropertyValue("renderedCommentPlaceholder")},enumerable:!1,configurable:!0}),t.prototype.calcRenderedCommentPlaceholder=function(){var e=this.isReadOnly?void 0:this.commentPlaceHolder;this.setPropertyValue("renderedCommentPlaceholder",e)},t.prototype.getAllErrors=function(){return this.errors.slice()},t.prototype.getErrorByType=function(e){for(var r=0;r<this.errors.length;r++)if(this.errors[r].getErrorType()===e)return this.errors[r];return null},Object.defineProperty(t.prototype,"customWidget",{get:function(){return!this.isCustomWidgetRequested&&!this.customWidgetValue&&(this.isCustomWidgetRequested=!0,this.updateCustomWidget()),this.customWidgetValue},enumerable:!1,configurable:!0}),t.prototype.updateCustomWidget=function(){this.customWidgetValue=zr.Instance.getCustomWidget(this)},t.prototype.localeChanged=function(){i.prototype.localeChanged.call(this),this.calcRenderedCommentPlaceholder(),this.localeChangedCallback&&this.localeChangedCallback()},Object.defineProperty(t.prototype,"isCompositeQuestion",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isContainer",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.updateCommentElements=function(){if(!(!this.autoGrowComment||!Array.isArray(this.commentElements)))for(var e=0;e<this.commentElements.length;e++){var r=this.commentElements[e];r&&Br(r)}},t.prototype.onCommentInput=function(e){this.isInputTextUpdate?e.target&&(this.comment=e.target.value):this.updateCommentElements()},t.prototype.onCommentChange=function(e){this.comment=e.target.value,this.comment!==e.target.value&&(e.target.value=this.comment)},t.prototype.afterRenderQuestionElement=function(e){!this.survey||!this.hasSingleInput||this.survey.afterRenderQuestionInput(this,e)},t.prototype.afterRender=function(e){var r=this;this.afterRenderCore(e),this.survey&&(this.survey.afterRenderQuestion(this,e),this.afterRenderQuestionCallback&&this.afterRenderQuestionCallback(this,e),(this.supportComment()||this.supportOther())&&(this.commentElements=[],this.getCommentElementsId().forEach(function(n){var o=b.environment.root,s=o.getElementById(n);s&&r.commentElements.push(s)}),this.updateCommentElements()),this.checkForResponsiveness(e))},t.prototype.afterRenderCore=function(e){},t.prototype.getCommentElementsId=function(){return[this.commentId]},t.prototype.beforeDestroyQuestionElement=function(e){this.commentElements=void 0},Object.defineProperty(t.prototype,"processedTitle",{get:function(){var e=this.locProcessedTitle.textOrHtml;return e||this.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullTitle",{get:function(){return this.locTitle.renderedHtml},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titlePattern",{get:function(){return this.survey?this.survey.questionTitlePattern:"numTitleRequire"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRequireTextOnStart",{get:function(){return this.isRequired&&this.titlePattern=="requireNumTitle"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRequireTextBeforeTitle",{get:function(){return this.isRequired&&this.titlePattern=="numRequireTitle"&&this.requiredText!==""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRequireTextAfterTitle",{get:function(){return this.isRequired&&this.titlePattern=="numTitleRequire"&&this.requiredText!==""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"startWithNewLine",{get:function(){return this.getPropertyValue("startWithNewLine")},set:function(e){this.startWithNewLine!=e&&this.setPropertyValue("startWithNewLine",e)},enumerable:!1,configurable:!0}),t.prototype.calcCssClasses=function(e){var r={error:{}};return this.copyCssClasses(r,e.question),this.copyCssClasses(r.error,e.error),this.updateCssClasses(r,e),this.survey&&this.survey.updateQuestionCssClasses(this,r),this.onUpdateCssClassesCallback&&this.onUpdateCssClassesCallback(r),r},Object.defineProperty(t.prototype,"cssRoot",{get:function(){return this.ensureElementCss(),this.getPropertyValue("cssRoot","")},enumerable:!1,configurable:!0}),t.prototype.setCssRoot=function(e){this.setPropertyValue("cssRoot",e)},t.prototype.getCssRoot=function(e){var r=this.hasCssError();return new O().append(i.prototype.getCssRoot.call(this,e)).append(this.isFlowLayout&&!this.isDesignMode?e.flowRoot:e.mainRoot).append(e.titleLeftRoot,!this.isFlowLayout&&this.hasTitleOnLeft).append(e.titleTopRoot,!this.isFlowLayout&&this.hasTitleOnTop).append(e.titleBottomRoot,!this.isFlowLayout&&this.hasTitleOnBottom).append(e.descriptionUnderInputRoot,!this.isFlowLayout&&this.hasDescriptionUnderInput).append(e.hasError,r).append(e.hasErrorTop,r&&this.getErrorLocation()=="top").append(e.hasErrorBottom,r&&this.getErrorLocation()=="bottom").append(e.small,!this.width).append(e.answered,this.isAnswered).append(e.noPointerEventsMode,this.isReadOnlyAttr).toString()},Object.defineProperty(t.prototype,"cssHeader",{get:function(){return this.ensureElementCss(),this.getPropertyValue("cssHeader","")},enumerable:!1,configurable:!0}),t.prototype.setCssHeader=function(e){this.setPropertyValue("cssHeader",e)},t.prototype.getCssHeader=function(e){return new O().append(e.header).append(e.headerTop,this.hasTitleOnTop).append(e.headerLeft,this.hasTitleOnLeft).append(e.headerBottom,this.hasTitleOnBottom).toString()},t.prototype.supportContainerQueries=function(){return!1},Object.defineProperty(t.prototype,"cssContent",{get:function(){return this.ensureElementCss(),this.getPropertyValue("cssContent","")},enumerable:!1,configurable:!0}),t.prototype.setCssContent=function(e){this.setPropertyValue("cssContent",e)},t.prototype.getCssContent=function(e){return new O().append(e.content).append(e.contentSupportContainerQueries,this.supportContainerQueries()).append(e.contentLeft,this.hasTitleOnLeft).toString()},Object.defineProperty(t.prototype,"cssTitle",{get:function(){return this.ensureElementCss(),this.getPropertyValue("cssTitle","")},enumerable:!1,configurable:!0}),t.prototype.setCssTitle=function(e){this.setPropertyValue("cssTitle",e)},t.prototype.getCssTitle=function(e){return new O().append(i.prototype.getCssTitle.call(this,e)).append(e.titleOnAnswer,!this.containsErrors&&this.isAnswered).append(e.titleEmpty,!this.title.trim()).toString()},Object.defineProperty(t.prototype,"cssDescription",{get:function(){return this.ensureElementCss(),this.getPropertyValue("cssDescription","")},enumerable:!1,configurable:!0}),t.prototype.setCssDescription=function(e){this.setPropertyValue("cssDescription",e)},t.prototype.getCssDescription=function(e){return new O().append(e.description,this.hasDescriptionUnderTitle).append(e.descriptionUnderInput,this.hasDescriptionUnderInput).toString()},t.prototype.showErrorOnCore=function(e){return!this.showErrorsAboveQuestion&&!this.showErrorsBelowQuestion&&this.getErrorLocation()===e},Object.defineProperty(t.prototype,"showErrorOnTop",{get:function(){return this.showErrorOnCore("top")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showErrorOnBottom",{get:function(){return this.showErrorOnCore("bottom")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showErrorsOutsideQuestion",{get:function(){return this.isDefaultV2Theme},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showErrorsAboveQuestion",{get:function(){return this.showErrorsOutsideQuestion&&this.getErrorLocation()==="top"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showErrorsBelowQuestion",{get:function(){return this.showErrorsOutsideQuestion&&this.getErrorLocation()==="bottom"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssError",{get:function(){return this.ensureElementCss(),this.getPropertyValue("cssError","")},enumerable:!1,configurable:!0}),t.prototype.setCssError=function(e){this.setPropertyValue("cssError",e)},t.prototype.getCssError=function(e){return new O().append(e.error.root).append(e.errorsContainer,this.showErrorsBelowQuestion||this.showErrorsAboveQuestion).append(e.errorsContainerTop,this.showErrorsAboveQuestion).append(e.errorsContainerBottom,this.showErrorsBelowQuestion).append(e.error.locationTop,this.showErrorOnTop).append(e.error.locationBottom,this.showErrorOnBottom).toString()},t.prototype.hasCssError=function(){return this.errors.length>0||this.hasCssErrorCallback()},t.prototype.getRootCss=function(){return new O().append(this.cssRoot).append(this.cssClasses.readOnly,this.isReadOnlyStyle).append(this.cssClasses.disabled,this.isDisabledStyle).append(this.cssClasses.preview,this.isPreviewStyle).append(this.cssClasses.invisible,!this.isDesignMode&&this.areInvisibleElementsShowing&&!this.visible).toString()},t.prototype.getQuestionRootCss=function(){return new O().append(this.cssClasses.root).append(this.cssClasses.rootMobile,this.isMobile).toString()},t.prototype.updateElementCss=function(e){i.prototype.updateElementCss.call(this,e),e&&this.updateQuestionCss(!0),this.onIndentChanged()},t.prototype.updateQuestionCss=function(e){this.isLoadingFromJson||!this.survey||e!==!0&&!this.cssClassesValue||this.updateElementCssCore(this.cssClasses)},t.prototype.ensureElementCss=function(){this.cssClassesValue||this.updateQuestionCss(!0)},t.prototype.updateElementCssCore=function(e){this.setCssRoot(this.getCssRoot(e)),this.setCssHeader(this.getCssHeader(e)),this.setCssContent(this.getCssContent(e)),this.setCssTitle(this.getCssTitle(e)),this.setCssDescription(this.getCssDescription(e)),this.setCssError(this.getCssError(e))},t.prototype.updateCssClasses=function(e,r){if(!!r.question){var n=r[this.getCssType()],o=new O().append(e.title).append(r.question.titleRequired,this.isRequired);e.title=o.toString();var s=new O().append(e.root).append(n,this.isRequired&&!!r.question.required);if(n==null)e.root=s.toString();else if(typeof n=="string"||n instanceof String)e.root=s.append(n.toString()).toString();else{e.root=s.toString();for(var a in n)e[a]=n[a]}}},t.prototype.getCssType=function(){return this.getType()},Object.defineProperty(t.prototype,"renderCssRoot",{get:function(){return this.cssClasses.root||void 0},enumerable:!1,configurable:!0}),t.prototype.onIndentChanged=function(){this.paddingLeft=this.getIndentSize(this.indent),this.paddingRight=this.getIndentSize(this.rightIndent)},t.prototype.getIndentSize=function(e){return e<1||!this.getSurvey()||!this.cssClasses||!this.cssClasses.indent?"":e*this.cssClasses.indent+"px"},t.prototype.focus=function(e,r){if(e===void 0&&(e=!1),!(this.isDesignMode||!this.isVisible||!this.survey)){var n=this.page,o=!!n&&this.survey.activePage!==n;o?this.survey.focusQuestionByInstance(this,e):this.focuscore(e,r)}},t.prototype.focuscore=function(e,r){e===void 0&&(e=!1),this.survey&&(this.expandAllParents(),this.survey.scrollElementToTop(this,this,null,this.id,r)),this.focusInputElement(e)},t.prototype.focusInputElement=function(e){var r=e?this.getFirstErrorInputElementId():this.getFirstInputElementId();de.FocusElement(r)&&this.fireCallback(this.focusCallback)},Object.defineProperty(t.prototype,"isValidateVisitedEmptyFields",{get:function(){return this.supportEmptyValidation()&&!!this.survey&&this.survey.getValidateVisitedEmptyFields()&&this.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.supportEmptyValidation=function(){return!1},t.prototype.onBlur=function(e){this.onBlurCore(e)},t.prototype.onFocus=function(e){this.onFocusCore(e)},t.prototype.onBlurCore=function(e){this.isFocusEmpty&&this.isEmpty()&&this.validate(!0)},t.prototype.onFocusCore=function(e){this.isFocusEmpty=this.isValidateVisitedEmptyFields},t.prototype.expandAllParents=function(){this.expandAllParentsCore(this)},t.prototype.expandAllParentsCore=function(e){!e||(e.isCollapsed&&e.expand(),this.expandAllParentsCore(e.parent),this.expandAllParentsCore(e.parentQuestion))},t.prototype.focusIn=function(){!this.survey||this.isDisposed||this.isContainer||this.survey.whenQuestionFocusIn(this)},t.prototype.fireCallback=function(e){e&&e()},t.prototype.getOthersMaxLength=function(){return this.survey&&this.survey.maxOthersLength>0?this.survey.maxOthersLength:null},t.prototype.onCreating=function(){},t.prototype.getFirstQuestionToFocus=function(e){return this.hasInput&&(!e||this.currentErrorCount>0)?this:null},t.prototype.getFirstInputElementId=function(){return this.inputId},t.prototype.getFirstErrorInputElementId=function(){return this.getFirstInputElementId()},t.prototype.getProcessedTextValue=function(e){var r=e.name.toLocaleLowerCase();e.isExists=Object.keys(t.TextPreprocessorValuesMap).indexOf(r)!==-1||this[e.name]!==void 0,e.value=this[t.TextPreprocessorValuesMap[r]||e.name]},t.prototype.supportComment=function(){var e=this.getPropertyByName("showCommentArea");return!e||e.visible},t.prototype.supportOther=function(){return!1},Object.defineProperty(t.prototype,"isRequired",{get:function(){return this.getPropertyValue("isRequired")},set:function(e){this.setPropertyValue("isRequired",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredIf",{get:function(){return this.getPropertyValue("requiredIf","")},set:function(e){this.setPropertyValue("requiredIf",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showCommentArea",{get:function(){return this.getPropertyValue("showCommentArea",!1)},set:function(e){!this.supportComment()||this.setPropertyValue("showCommentArea",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasComment",{get:function(){return this.showCommentArea},set:function(e){this.showCommentArea=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.getPropertyValue("id")},set:function(e){this.setPropertyValue("id",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaTitleId",{get:function(){return this.id+"_ariaTitle"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaDescriptionId",{get:function(){return this.id+"_ariaDescription"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"commentId",{get:function(){return this.id+"_comment"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showOtherItem",{get:function(){return this.getPropertyValue("showOtherItem",!1)},set:function(e){!this.supportOther()||this.showOtherItem==e||(this.setPropertyValue("showOtherItem",e),this.hasOtherChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasOther",{get:function(){return this.showOtherItem},set:function(e){this.showOtherItem=e},enumerable:!1,configurable:!0}),t.prototype.hasOtherChanged=function(){},Object.defineProperty(t.prototype,"requireUpdateCommentValue",{get:function(){return this.hasComment||this.hasOther},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnly",{get:function(){var e=!!this.parent&&this.parent.isReadOnly,r=!!this.parentQuestion&&this.parentQuestion.isReadOnly,n=!!this.survey&&this.survey.isDisplayMode,o=!!this.readOnlyCallback&&this.readOnlyCallback();return this.readOnly||e||n||r||o},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isInputReadOnly",{get:function(){return this.forceIsInputReadOnly!==void 0?this.forceIsInputReadOnly:this.isReadOnly||this.isDesignModeV2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedInputReadOnly",{get:function(){return this.isInputReadOnly?"":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedInputDisabled",{get:function(){return this.isInputReadOnly?"":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnlyAttr",{get:function(){return this.isReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDisabledAttr",{get:function(){return this.isDesignModeV2},enumerable:!1,configurable:!0}),t.prototype.onReadOnlyChanged=function(){this.setPropertyValue("isInputReadOnly",this.isInputReadOnly),i.prototype.onReadOnlyChanged.call(this),this.isReadOnly&&this.clearErrors(),this.updateQuestionCss(),this.calcRenderedCommentPlaceholder()},Object.defineProperty(t.prototype,"enableIf",{get:function(){return this.getPropertyValue("enableIf","")},set:function(e){this.setPropertyValue("enableIf",e)},enumerable:!1,configurable:!0}),t.prototype.surveyChoiceItemVisibilityChange=function(){},t.prototype.runCondition=function(e,r){this.isDesignMode||(r||(r={}),r.question=this,this.runConditionCore(e,r),!this.isValueChangedDirectly&&(!this.isClearValueOnHidden||this.isVisibleInSurvey)&&(this.defaultValueRunner=this.getDefaultRunner(this.defaultValueRunner,this.defaultValueExpression),this.runDefaultValueExpression(this.defaultValueRunner,e,r)))},Object.defineProperty(t.prototype,"no",{get:function(){return this.getPropertyValue("no")},enumerable:!1,configurable:!0}),t.prototype.calcNo=function(){if(!this.hasTitle||this.hideNumber)return"";var e=P.getNumberByIndex(this.visibleIndex,this.getStartIndex());return this.survey&&(e=this.survey.getUpdatedQuestionNo(this,e)),e},t.prototype.getStartIndex=function(){return this.parent?this.parent.getQuestionStartIndex():this.survey?this.survey.questionStartIndex:""},t.prototype.onSurveyLoad=function(){this.isCustomWidgetRequested=!1,this.fireCallback(this.surveyLoadCallback),this.updateValueWithDefaults(),this.isEmpty()&&this.initDataFromSurvey(),this.calcRenderedCommentPlaceholder(),this.onIndentChanged()},t.prototype.onSetData=function(){i.prototype.onSetData.call(this),this.survey&&(this.initDataFromSurvey(),this.onSurveyValueChanged(this.value),this.updateValueWithDefaults(),this.onIndentChanged(),this.updateQuestionCss(),this.updateIsAnswered())},t.prototype.initDataFromSurvey=function(){if(this.data){var e=this.data.getValue(this.getValueName());(!P.isValueEmpty(e)||!this.isLoadingFromJson)&&this.updateValueFromSurvey(e),this.initCommentFromSurvey()}},t.prototype.initCommentFromSurvey=function(){!!this.data&&this.requireUpdateCommentValue?this.updateCommentFromSurvey(this.data.getComment(this.getValueName())):this.updateCommentFromSurvey("")},t.prototype.runExpression=function(e){if(!(!this.survey||!e))return this.survey.runExpression(e)},Object.defineProperty(t.prototype,"commentAreaRows",{get:function(){return this.survey&&this.survey.commentAreaRows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoGrowComment",{get:function(){return this.survey&&this.survey.autoGrowComment},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowResizeComment",{get:function(){return this.survey&&this.survey.allowResizeComment},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questionValue",{get:function(){return this.getPropertyValueWithoutDefault("value")},set:function(e){this.setPropertyValue("value",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questionComment",{get:function(){return this.getPropertyValueWithoutDefault("comment")},set:function(e){this.setPropertyValue("comment",e),this.fireCallback(this.commentChangedCallback)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isValueArray",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValueCore()},set:function(e){this.setNewValue(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasFilteredValue",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.getFilteredValue=function(){return this.value},t.prototype.getFilteredName=function(){return this.getValueName()},Object.defineProperty(t.prototype,"valueForSurvey",{get:function(){return this.valueForSurveyCore(this.value)},enumerable:!1,configurable:!0}),t.prototype.valueForSurveyCore=function(e){return this.valueToDataCallback?this.valueToDataCallback(e):e},t.prototype.valueFromDataCore=function(e){return this.valueFromDataCallback?this.valueFromDataCallback(e):e},t.prototype.clearValue=function(e){this.value!==void 0&&(this.value=void 0),!!this.comment&&e!==!0&&(this.comment=void 0),this.setValueChangedDirectly(!1)},t.prototype.clearValueOnly=function(){this.clearValue(!0)},t.prototype.unbindValue=function(){this.clearValue()},t.prototype.createValueCopy=function(){return this.getUnbindValue(this.value)},t.prototype.initDataUI=function(){},t.prototype.getUnbindValue=function(e){return this.isValueSurveyElement(e)?e:P.getUnbindValue(e)},t.prototype.isValueSurveyElement=function(e){return e?Array.isArray(e)?e.length>0?this.isValueSurveyElement(e[0]):!1:!!e.getType&&!!e.onPropertyChanged:!1},t.prototype.canClearValueAsInvisible=function(e){return e==="onHiddenContainer"&&!this.isParentVisible?!0:this.isVisibleInSurvey||!!this.page&&this.page.isStartPage?!1:this.survey?!this.survey.hasVisibleQuestionByValueName(this.getValueName()):!0},Object.defineProperty(t.prototype,"isParentVisible",{get:function(){if(this.parentQuestion&&!this.parentQuestion.isVisible)return!1;for(var e=this.parent;e;){if(!e.isVisible)return!1;e=e.parent}return!0},enumerable:!1,configurable:!0}),t.prototype.clearValueIfInvisible=function(e){e===void 0&&(e="onHidden");var r=this.getClearIfInvisible();r!=="none"&&(e==="onHidden"&&r==="onComplete"||e==="onHiddenContainer"&&r!==e||this.clearValueIfInvisibleCore(e))},t.prototype.clearValueIfInvisibleCore=function(e){this.canClearValueAsInvisible(e)&&(this.clearValue(),this.setValueChangedDirectly(void 0))},Object.defineProperty(t.prototype,"clearIfInvisible",{get:function(){return this.getPropertyValue("clearIfInvisible")},set:function(e){this.setPropertyValue("clearIfInvisible",e)},enumerable:!1,configurable:!0}),t.prototype.getClearIfInvisible=function(){var e=this.clearIfInvisible;return this.survey?this.survey.getQuestionClearIfInvisible(e):e!=="default"?e:"onComplete"},Object.defineProperty(t.prototype,"displayValue",{get:function(){return this.isLoadingFromJson?"":this.getDisplayValue(!0)},enumerable:!1,configurable:!0}),t.prototype.getDisplayValue=function(e,r){r===void 0&&(r=void 0);var n=this.calcDisplayValue(e,r);return this.survey&&(n=this.survey.getQuestionDisplayValue(this,n)),this.displayValueCallback?this.displayValueCallback(n):n},t.prototype.calcDisplayValue=function(e,r){if(r===void 0&&(r=void 0),this.customWidget){var n=this.customWidget.getDisplayValue(this,r);if(n)return n}return r=r==null?this.createValueCopy():r,this.isValueEmpty(r,!this.allowSpaceAsAnswer)?this.getDisplayValueEmpty():this.getDisplayValueCore(e,r)},t.prototype.getDisplayValueCore=function(e,r){return r},t.prototype.getDisplayValueEmpty=function(){return""},Object.defineProperty(t.prototype,"defaultValue",{get:function(){return this.getPropertyValue("defaultValue")},set:function(e){if(this.isValueExpression(e)){this.defaultValueExpression=e.substring(1);return}this.setPropertyValue("defaultValue",this.convertDefaultValue(e)),this.updateValueWithDefaults()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultValueExpression",{get:function(){return this.getPropertyValue("defaultValueExpression")},set:function(e){this.setPropertyValue("defaultValueExpression",e),this.defaultValueRunner=void 0,this.updateValueWithDefaults()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resetValueIf",{get:function(){return this.getPropertyValue("resetValueIf")},set:function(e){this.setPropertyValue("resetValueIf",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setValueIf",{get:function(){return this.getPropertyValue("setValueIf")},set:function(e){this.setPropertyValue("setValueIf",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setValueExpression",{get:function(){return this.getPropertyValue("setValueExpression")},set:function(e){this.setPropertyValue("setValueExpression",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resizeStyle",{get:function(){return this.allowResizeComment?"both":"none"},enumerable:!1,configurable:!0}),t.prototype.getPlainData=function(e){var r=this;if(e||(e={includeEmpty:!0,includeQuestionTypes:!1}),e.includeEmpty||!this.isEmpty()){var n={name:this.name,title:this.locTitle.renderedHtml,value:this.value,displayValue:this.displayValue,isNode:!1,getString:function(o){return typeof o=="object"?JSON.stringify(o):o}};return e.includeQuestionTypes===!0&&(n.questionType=this.getType()),(e.calculations||[]).forEach(function(o){n[o.propertyName]=r.getPlainDataCalculatedValue(o.propertyName)}),this.hasComment&&(n.isNode=!0,n.data=[{name:0,isComment:!0,title:"Comment",value:b.commentSuffix,displayValue:this.comment,getString:function(o){return typeof o=="object"?JSON.stringify(o):o},isNode:!1}]),n}},t.prototype.getPlainDataCalculatedValue=function(e){return this[e]},Object.defineProperty(t.prototype,"correctAnswer",{get:function(){return this.getPropertyValue("correctAnswer")},set:function(e){this.setPropertyValue("correctAnswer",this.convertDefaultValue(e))},enumerable:!1,configurable:!0}),t.prototype.convertDefaultValue=function(e){return e},Object.defineProperty(t.prototype,"quizQuestionCount",{get:function(){return this.isVisible&&this.hasInput&&!this.isValueEmpty(this.correctAnswer)?this.getQuizQuestionCount():0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"correctAnswerCount",{get:function(){return!this.isEmpty()&&!this.isValueEmpty(this.correctAnswer)?this.getCorrectAnswerCount():0},enumerable:!1,configurable:!0}),t.prototype.getQuizQuestionCount=function(){return 1},t.prototype.getCorrectAnswerCount=function(){return this.checkIfAnswerCorrect()?1:0},t.prototype.checkIfAnswerCorrect=function(){var e=P.isTwoValueEquals(this.value,this.correctAnswer,this.getAnswerCorrectIgnoreOrder(),b.comparator.caseSensitive,!0),r=e?1:0,n={result:e,correctAnswer:r,correctAnswers:r,incorrectAnswers:this.quizQuestionCount-r};return this.survey&&this.survey.onCorrectQuestionAnswer(this,n),n.result},t.prototype.getAnswerCorrectIgnoreOrder=function(){return!1},t.prototype.isAnswerCorrect=function(){return this.correctAnswerCount==this.quizQuestionCount},t.prototype.updateValueWithDefaults=function(){this.isLoadingFromJson||!this.isDesignMode&&this.isDefaultValueEmpty()||!this.isDesignMode&&!this.isEmpty()||this.isEmpty()&&this.isDefaultValueEmpty()||this.isClearValueOnHidden&&!this.isVisible||this.isDesignMode&&this.isContentElement&&this.isDefaultValueEmpty()||this.setDefaultValue()},Object.defineProperty(t.prototype,"isValueDefault",{get:function(){return!this.isEmpty()&&(this.isTwoValueEquals(this.defaultValue,this.value)||!this.isValueChangedDirectly&&!!this.defaultValueExpression)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isClearValueOnHidden",{get:function(){var e=this.getClearIfInvisible();return e==="none"||e==="onComplete"?!1:e==="onHidden"||e==="onHiddenContainer"},enumerable:!1,configurable:!0}),t.prototype.getQuestionFromArray=function(e,r){return null},t.prototype.getDefaultValue=function(){return this.defaultValue},t.prototype.isDefaultValueEmpty=function(){return!this.defaultValueExpression&&this.isValueEmpty(this.defaultValue,!this.allowSpaceAsAnswer)},t.prototype.getDefaultRunner=function(e,r){return!e&&!!r&&(e=this.createExpressionRunner(r)),e&&(e.expression=r),e},t.prototype.setDefaultValue=function(){var e=this;this.setDefaultValueCore(function(r){e.isTwoValueEquals(e.value,r)||(e.value=r)})},t.prototype.setDefaultValueCore=function(e){this.defaultValueRunner=this.getDefaultRunner(this.defaultValueRunner,this.defaultValueExpression),this.setValueAndRunExpression(this.defaultValueRunner,this.getUnbindValue(this.defaultValue),function(r){return e(r)})},t.prototype.isValueExpression=function(e){return!!e&&typeof e=="string"&&e.length>0&&e[0]=="="},t.prototype.setValueAndRunExpression=function(e,r,n,o,s){var a=this;o===void 0&&(o=null),s===void 0&&(s=null);var l=function(u){a.runExpressionSetValueCore(u,n)};this.runDefaultValueExpression(e,o,s,l)||l(r)},t.prototype.convertFuncValuetoQuestionValue=function(e){return P.convertValToQuestionVal(e)},t.prototype.runExpressionSetValueCore=function(e,r){r(this.convertFuncValuetoQuestionValue(e))},t.prototype.runExpressionSetValue=function(e){var r=this;this.runExpressionSetValueCore(e,function(n){r.isTwoValueEquals(r.value,n)||(r.value=n)})},t.prototype.runDefaultValueExpression=function(e,r,n,o){var s=this;return r===void 0&&(r=null),n===void 0&&(n=null),!e||!this.data?!1:(o||(o=function(a){s.runExpressionSetValue(a)}),r||(r=this.defaultValueExpression?this.data.getFilteredValues():{}),n||(n=this.defaultValueExpression?this.data.getFilteredProperties():{}),!!e&&e.canRun&&(e.onRunComplete=function(a){a==null&&(a=s.defaultValue),s.isChangingViaDefaultValue=!0,o(a),s.isChangingViaDefaultValue=!1},e.run(r,n)),!0)},Object.defineProperty(t.prototype,"comment",{get:function(){return this.getQuestionComment()},set:function(e){if(e){var r=e.toString().trim();r!==e&&(e=r,e===this.comment&&this.setPropertyValueDirectly("comment",e))}this.comment!=e&&(this.setQuestionComment(e),this.updateCommentElements())},enumerable:!1,configurable:!0}),t.prototype.getCommentAreaCss=function(e){return e===void 0&&(e=!1),new O().append("form-group",e).append(this.cssClasses.formGroup,!e).append(this.cssClasses.commentArea).toString()},t.prototype.getQuestionComment=function(){return this.questionComment},t.prototype.setQuestionComment=function(e){this.setNewComment(e)},t.prototype.isEmpty=function(){return this.isValueEmpty(this.value,!this.allowSpaceAsAnswer)},Object.defineProperty(t.prototype,"isAnswered",{get:function(){return this.getPropertyValue("isAnswered")},set:function(e){this.setPropertyValue("isAnswered",e)},enumerable:!1,configurable:!0}),t.prototype.updateIsAnswered=function(){var e=this.isAnswered;this.setPropertyValue("isAnswered",this.getIsAnswered()),e!==this.isAnswered&&this.updateQuestionCss()},t.prototype.getIsAnswered=function(){return!this.isEmpty()},Object.defineProperty(t.prototype,"validators",{get:function(){return this.getPropertyValue("validators")},set:function(e){this.setPropertyValue("validators",e)},enumerable:!1,configurable:!0}),t.prototype.getValidators=function(){return this.validators},t.prototype.getSupportedValidators=function(){for(var e=[],r=this.getType();r;){var n=b.supportedValidators[r];if(n)for(var o=n.length-1;o>=0;o--)e.splice(0,0,n[o]);var s=x.findClass(r);r=s.parentName}return e},t.prototype.addConditionObjectsByContext=function(e,r){e.push({name:this.getFilteredName(),text:this.processedTitle,question:this})},t.prototype.getNestedQuestions=function(e){e===void 0&&(e=!1);var r=[];return this.collectNestedQuestions(r,e),r.length===1&&r[0]===this?[]:r},t.prototype.collectNestedQuestions=function(e,r){r===void 0&&(r=!1),!(r&&!this.isVisible)&&this.collectNestedQuestionsCore(e,r)},t.prototype.collectNestedQuestionsCore=function(e,r){e.push(this)},t.prototype.getConditionJson=function(e,r){var n=new ae().toJsonObject(this);return n.type=this.getType(),n},t.prototype.hasErrors=function(e,r){e===void 0&&(e=!0),r===void 0&&(r=null);var n=this.checkForErrors(!!r&&r.isOnValueChanged===!0);return e&&(this.survey&&this.survey.beforeSettingQuestionErrors(this,n),this.errors=n,this.errors!==n&&this.errors.forEach(function(o){return o.locText.strChanged()})),this.updateContainsErrors(),this.isCollapsed&&r&&e&&n.length>0&&this.expand(),n.length>0},t.prototype.validate=function(e,r){return e===void 0&&(e=!0),r===void 0&&(r=null),!!r&&r.isOnValueChanged&&this.parent&&this.parent.validateContainerOnly(),!this.hasErrors(e,r)},Object.defineProperty(t.prototype,"currentErrorCount",{get:function(){return this.errors.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredText",{get:function(){return this.survey!=null&&this.isRequired?this.survey.requiredText:""},enumerable:!1,configurable:!0}),t.prototype.addError=function(e){if(!!e){var r=null;typeof e=="string"||e instanceof String?r=this.addCustomError(e):r=e,this.errors.push(r)}},t.prototype.addCustomError=function(e){return new Ce(e,this.survey)},t.prototype.removeError=function(e){if(!!e){var r=this.errors,n=r.indexOf(e);n!==-1&&r.splice(n,1)}},t.prototype.checkForErrors=function(e){var r=new Array;return this.isVisible&&this.canCollectErrors()&&this.collectErrors(r,e),r},t.prototype.canCollectErrors=function(){return!this.isReadOnly||b.readOnly.enableValidation},t.prototype.collectErrors=function(e,r){if(this.onCheckForErrors(e,r),!(e.length>0||!this.canRunValidators(r))){var n=this.runValidators();if(n.length>0){e.length=0;for(var o=0;o<n.length;o++)e.push(n[o])}if(this.survey&&e.length==0){var s=this.fireSurveyValidation();s&&e.push(s)}}},t.prototype.canRunValidators=function(e){return!0},t.prototype.fireSurveyValidation=function(){return this.validateValueCallback?this.validateValueCallback():this.survey?this.survey.validateQuestion(this):null},t.prototype.onCheckForErrors=function(e,r){var n=this;if((!r||this.isOldAnswered)&&this.hasRequiredError()){var o=new Ui(this.requiredErrorText,this);o.onUpdateErrorTextCallback=function(a){a.text=n.requiredErrorText},e.push(o)}if(!this.isEmpty()&&this.customWidget){var s=this.customWidget.validate(this);s&&e.push(this.addCustomError(s))}},t.prototype.hasRequiredError=function(){return this.isRequired&&this.isEmpty()},Object.defineProperty(t.prototype,"isRunningValidators",{get:function(){return this.getIsRunningValidators()},enumerable:!1,configurable:!0}),t.prototype.getIsRunningValidators=function(){return this.isRunningValidatorsValue},t.prototype.runValidators=function(){var e=this;return this.validatorRunner&&(this.validatorRunner.onAsyncCompleted=null),this.validatorRunner=new Zi,this.isRunningValidatorsValue=!0,this.validatorRunner.onAsyncCompleted=function(r){e.doOnAsyncCompleted(r)},this.validatorRunner.run(this)},t.prototype.doOnAsyncCompleted=function(e){for(var r=0;r<e.length;r++)this.errors.push(e[r]);this.isRunningValidatorsValue=!1,this.raiseOnCompletedAsyncValidators()},t.prototype.raiseOnCompletedAsyncValidators=function(){!!this.onCompletedAsyncValidators&&!this.isRunningValidators&&(this.onCompletedAsyncValidators(this.getAllErrors().length>0),this.onCompletedAsyncValidators=null)},t.prototype.setNewValue=function(e){this.isNewValueEqualsToValue(e)||!this.checkIsValueCorrect(e)||(this.isOldAnswered=this.isAnswered,this.isSettingQuestionValue=!0,this.setNewValueInData(e),this.allowNotifyValueChanged&&this.onValueChanged(),this.isSettingQuestionValue=!1,this.isAnswered!==this.isOldAnswered&&this.updateQuestionCss(),this.isOldAnswered=void 0,this.parent&&this.parent.onQuestionValueChanged(this))},t.prototype.checkIsValueCorrect=function(e){var r=this.isValueEmpty(e,!this.allowSpaceAsAnswer)||this.isNewValueCorrect(e);return r||je.inCorrectQuestionValue(this.name,e),r},t.prototype.isNewValueCorrect=function(e){return!0},t.prototype.isNewValueEqualsToValue=function(e){var r=this.value;if(!this.isTwoValueEquals(e,r,!1,!1))return!1;var n=e===r&&!!r&&(Array.isArray(r)||typeof r=="object");return!n},t.prototype.isTextValue=function(){return!1},t.prototype.getIsInputTextUpdate=function(){return this.survey?this.survey.isUpdateValueTextOnTyping:!1},Object.defineProperty(t.prototype,"requireStrictCompare",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.getDataLocNotification=function(){return this.isInputTextUpdate?"text":!1},Object.defineProperty(t.prototype,"isInputTextUpdate",{get:function(){return this.getIsInputTextUpdate()&&this.isTextValue()},enumerable:!1,configurable:!0}),t.prototype.setNewValueInData=function(e){e=this.valueToData(e),this.isValueChangedInSurvey||this.setValueCore(e)},t.prototype.getValueCore=function(){return this.questionValue},t.prototype.setValueCore=function(e){this.setQuestionValue(e),this.data!=null&&this.canSetValueToSurvey()&&(e=this.valueForSurvey,this.data.setValue(this.getValueName(),e,this.getDataLocNotification(),this.allowNotifyValueChanged,this.name)),this.isMouseDown=!1},t.prototype.canSetValueToSurvey=function(){return!0},t.prototype.valueFromData=function(e){return e},t.prototype.valueToData=function(e){return e},t.prototype.convertToCorrectValue=function(e){return e},t.prototype.onValueChanged=function(){},t.prototype.onMouseDown=function(){this.isMouseDown=!0},t.prototype.setNewComment=function(e){this.questionComment!==e&&(this.questionComment=e,this.setCommentIntoData(e))},t.prototype.setCommentIntoData=function(e){this.data!=null&&this.data.setComment(this.getValueName(),e,this.getIsInputTextUpdate()?"text":!1)},t.prototype.getValidName=function(e){return Ur(e)},t.prototype.updateValueFromSurvey=function(e,r){var n=this;if(r===void 0&&(r=!1),e=this.getUnbindValue(e),e=this.valueFromDataCore(e),!!this.checkIsValueCorrect(e)){var o=this.isValueEmpty(e);!o&&this.defaultValueExpression?this.setDefaultValueCore(function(s){n.updateValueFromSurveyCore(e,n.isTwoValueEquals(e,s))}):(this.updateValueFromSurveyCore(e,this.data!==this.getSurvey()),r&&o&&(this.isValueChangedDirectly=!1)),this.updateDependedQuestions(),this.updateIsAnswered()}},t.prototype.updateValueFromSurveyCore=function(e,r){this.isChangingViaDefaultValue=r,this.setQuestionValue(this.valueFromData(e)),this.isChangingViaDefaultValue=!1},t.prototype.updateCommentFromSurvey=function(e){this.questionComment=e},t.prototype.onChangeQuestionValue=function(e){},t.prototype.setValueChangedDirectly=function(e){this.isValueChangedDirectly=e,this.setValueChangedDirectlyCallback&&this.setValueChangedDirectlyCallback(e)},t.prototype.setQuestionValue=function(e,r){r===void 0&&(r=!0),e=this.convertToCorrectValue(e);var n=this.isTwoValueEquals(this.questionValue,e);!n&&!this.isChangingViaDefaultValue&&!this.isParentChangingViaDefaultValue&&this.setValueChangedDirectly(!0),this.questionValue=e,n||this.onChangeQuestionValue(e),!n&&this.allowNotifyValueChanged&&this.fireCallback(this.valueChangedCallback),r&&this.updateIsAnswered()},Object.defineProperty(t.prototype,"isParentChangingViaDefaultValue",{get:function(){var e;return((e=this.data)===null||e===void 0?void 0:e.isChangingViaDefaultValue)===!0},enumerable:!1,configurable:!0}),t.prototype.onSurveyValueChanged=function(e){},t.prototype.setVisibleIndex=function(e){return(!this.isVisible||!this.hasTitle&&!b.numbering.includeQuestionsWithHiddenTitle||this.hideNumber&&!b.numbering.includeQuestionsWithHiddenNumber)&&(e=-1),this.setPropertyValue("visibleIndex",e),this.setPropertyValue("no",this.calcNo()),e<0?0:1},t.prototype.removeElement=function(e){return!1},t.prototype.supportGoNextPageAutomatic=function(){return!1},t.prototype.supportGoNextPageError=function(){return!0},t.prototype.clearIncorrectValues=function(){},t.prototype.clearOnDeletingContainer=function(){},t.prototype.clearErrors=function(){this.errors=[]},t.prototype.clearUnusedValues=function(){},t.prototype.onAnyValueChanged=function(e,r){},t.prototype.checkBindings=function(e,r){if(!(this.bindings.isEmpty()||!this.data))for(var n=this.bindings.getPropertiesByValueName(e),o=0;o<n.length;o++){var s=n[o];this.isValueEmpty(r)&&P.isNumber(this[s])&&(r=0),this[s]=r}},t.prototype.getComponentName=function(){return no.Instance.getRendererByQuestion(this)},t.prototype.isDefaultRendering=function(){return!!this.customWidget||this.getComponentName()==="default"},t.prototype.getErrorCustomText=function(e,r){return this.survey?this.survey.getSurveyErrorCustomText(this,e,r):e},t.prototype.getValidatorTitle=function(){return null},Object.defineProperty(t.prototype,"validatedValue",{get:function(){return this.value},set:function(e){this.value=e},enumerable:!1,configurable:!0}),t.prototype.getAllValues=function(){return this.data?this.data.getAllValues():null},t.prototype.processPopupVisiblilityChanged=function(e,r){this.survey.processPopupVisiblityChanged(this,e,r)},t.prototype.processOpenDropdownMenu=function(e){this.survey.processOpenDropdownMenu(this,e)},t.prototype.onTextKeyDownHandler=function(e){e.keyCode===13&&this.survey.questionEditFinishCallback(this,e)},t.prototype.transformToMobileView=function(){},t.prototype.transformToDesktopView=function(){},t.prototype.needResponsiveWidth=function(){return!1},t.prototype.supportResponsiveness=function(){return!1},t.prototype.needResponsiveness=function(){return this.supportResponsiveness()&&this.isDefaultV2Theme&&!this.isDesignMode},t.prototype.checkForResponsiveness=function(e){var r=this;if(this.needResponsiveness())if(this.isCollapsed){var n=function(){r.isExpanded&&(r.initResponsiveness(e),r.unregisterPropertyChangedHandlers(["state"],"for-responsiveness"))};this.registerPropertyChangedHandlers(["state"],n,"for-responsiveness")}else this.initResponsiveness(e)},t.prototype.getObservedElementSelector=function(){return".sd-scrollable-container"},t.prototype.onMobileChanged=function(){this.onMobileChangedCallback&&this.onMobileChangedCallback()},t.prototype.triggerResponsiveness=function(e){e===void 0&&(e=!0),this.triggerResponsivenessCallback&&this.triggerResponsivenessCallback(e)},t.prototype.initResponsiveness=function(e){var r=this;if(this.destroyResizeObserver(),!!e&&this.isDefaultRendering()){var n=this.getObservedElementSelector();if(!n)return;var o=e.querySelector(n);if(!o)return;var s=!1,a=void 0;this.triggerResponsivenessCallback=function(l){l&&(a=void 0,r.renderAs="default",s=!1);var u=function(){var d=e.querySelector(n);!a&&r.isDefaultRendering()&&(a=d.scrollWidth),s||!Qr(d)?s=!1:s=r.processResponsiveness(a,qr(d))};l?setTimeout(u,1):u()},this.resizeObserver=new ResizeObserver(function(l){R.requestAnimationFrame(function(){r.triggerResponsiveness(!1)})}),this.onMobileChangedCallback=function(){setTimeout(function(){var l=e.querySelector(n);r.processResponsiveness(a,qr(l))},0)},this.resizeObserver.observe(e)}},t.prototype.getCompactRenderAs=function(){return"default"},t.prototype.getDesktopRenderAs=function(){return"default"},t.prototype.onBeforeSetCompactRenderer=function(){},t.prototype.onBeforeSetDesktopRenderer=function(){},t.prototype.processResponsiveness=function(e,r){if(r=Math.round(r),Math.abs(e-r)>2){var n=this.renderAs;return e>r?(this.onBeforeSetCompactRenderer(),this.renderAs=this.getCompactRenderAs()):(this.onBeforeSetDesktopRenderer(),this.renderAs=this.getDesktopRenderAs()),n!==this.renderAs}return!1},t.prototype.destroyResizeObserver=function(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=void 0,this.onMobileChangedCallback=void 0,this.triggerResponsivenessCallback=void 0,this.renderAs=this.getDesktopRenderAs())},t.prototype.dispose=function(){i.prototype.dispose.call(this),this.resetDependedQuestions(),this.destroyResizeObserver()},t.prototype.resetDependedQuestions=function(){for(var e=0;e<this.dependedQuestions.length;e++)this.dependedQuestions[e].resetDependedQuestion()},Object.defineProperty(t.prototype,"isNewA11yStructure",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaLabel",{get:function(){return this.isNewA11yStructure?null:this.locTitle.renderedHtml},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaRole",{get:function(){return this.isNewA11yStructure?null:"textbox"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaRequired",{get:function(){return this.isNewA11yStructure?null:this.isRequired?"true":"false"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaInvalid",{get:function(){return this.isNewA11yStructure?null:this.hasCssError()?"true":"false"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaLabelledBy",{get:function(){return this.isNewA11yStructure?null:this.hasTitle?this.ariaTitleId:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaDescribedBy",{get:function(){return this.isNewA11yStructure?null:this.hasTitle?this.ariaDescriptionId:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaErrormessage",{get:function(){return this.isNewA11yStructure?null:this.hasCssError()?this.id+"_errors":null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaRole",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaRequired",{get:function(){return this.isRequired?"true":"false"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaInvalid",{get:function(){return this.hasCssError()?"true":"false"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaLabel",{get:function(){return this.hasTitle&&!this.parentQuestion?null:this.locTitle.renderedHtml},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaLabelledBy",{get:function(){return this.hasTitle&&!this.parentQuestion?this.ariaTitleId:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaDescribedBy",{get:function(){return this.hasTitle&&!this.parentQuestion?this.ariaDescriptionId:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaErrormessage",{get:function(){return this.hasCssError()?this.id+"_errors":null},enumerable:!1,configurable:!0}),t.TextPreprocessorValuesMap={title:"processedTitle",require:"requiredText"},t.questionCounter=100,ft([y({defaultValue:!1})],t.prototype,"isMobile",void 0),ft([y()],t.prototype,"forceIsInputReadOnly",void 0),ft([y()],t.prototype,"ariaExpanded",void 0),ft([y({localizable:!0,onSet:function(e,r){return r.calcRenderedCommentPlaceholder()}})],t.prototype,"commentPlaceholder",void 0),ft([y()],t.prototype,"renderAs",void 0),ft([y({defaultValue:!1})],t.prototype,"inMatrixMode",void 0),t}(de);function Ur(i){if(!i)return i;for(i=i.trim().replace(/[\{\}]+/g,"");!!i&&i[0]===b.expressionDisableConversionChar;)i=i.substring(1);return i}x.addClass("question",[{name:"!name",onSettingValue:function(i,t){return Ur(t)}},{name:"state",default:"default",choices:["default","collapsed","expanded"]},{name:"visible:switch",default:!0,overridingProperty:"visibleIf"},{name:"useDisplayValuesInDynamicTexts:boolean",alternativeName:"useDisplayValuesInTitle",default:!0,layout:"row"},"visibleIf:condition",{name:"width"},{name:"minWidth",defaultFunc:function(){return b.minWidth}},{name:"maxWidth",defaultFunc:function(){return b.maxWidth}},{name:"colSpan:number",visible:!1,onSerializeValue:function(i){return i.getPropertyValue("colSpan")}},{name:"effectiveColSpan:number",minValue:1,isSerializable:!1,visibleIf:function(i){return!!i&&!!i.survey&&i.survey.gridLayoutEnabled}},{name:"startWithNewLine:boolean",default:!0,layout:"row"},{name:"indent:number",default:0,choices:[0,1,2,3],layout:"row"},{name:"page",isSerializable:!1,visibleIf:function(i){var t=i?i.survey:null;return!t||!t.pages||t.pages.length>1},choices:function(i){var t=i?i.survey:null;return t?t.pages.map(function(e){return{value:e.name,text:e.title}}):[]}},{name:"title:text",serializationProperty:"locTitle",layout:"row",dependsOn:"name",onPropertyEditorUpdate:function(i,t){!!i&&!!t&&(t.placeholder=i.name)}},{name:"titleLocation",default:"default",choices:["default","top","bottom","left","hidden"],layout:"row"},{name:"description:text",serializationProperty:"locDescription",layout:"row"},{name:"descriptionLocation",default:"default",choices:["default","underInput","underTitle"]},{name:"hideNumber:boolean",dependsOn:"titleLocation",visibleIf:function(i){if(!i)return!0;if(i.titleLocation==="hidden")return!1;var t=i?i.parent:null,e=!t||t.showQuestionNumbers!=="off";if(!e)return!1;var r=i?i.survey:null;return!r||r.showQuestionNumbers!=="off"||!!t&&t.showQuestionNumbers==="onpanel"}},{name:"valueName",onSettingValue:function(i,t){return Ur(t)}},"enableIf:condition","resetValueIf:condition","setValueIf:condition","setValueExpression:expression","defaultValue:value",{name:"defaultValueExpression:expression",category:"logic"},"correctAnswer:value",{name:"clearIfInvisible",default:"default",choices:["default","none","onComplete","onHidden","onHiddenContainer"]},{name:"isRequired:switch",overridingProperty:"requiredIf"},"requiredIf:condition",{name:"requiredErrorText:text",serializationProperty:"locRequiredErrorText"},{name:"errorLocation",default:"default",choices:["default","top","bottom"]},{name:"readOnly:switch",overridingProperty:"enableIf"},{name:"validators:validators",baseClassName:"surveyvalidator",classNamePart:"validator"},{name:"bindings:bindings",serializationProperty:"bindings",visibleIf:function(i){return i.bindings.getNames().length>0}},{name:"renderAs",default:"default",visible:!1},{name:"showCommentArea",visible:!1,default:!1,alternativeName:"hasComment",category:"general"},{name:"commentText",dependsOn:"showCommentArea",visibleIf:function(i){return i.showCommentArea},serializationProperty:"locCommentText"},{name:"commentPlaceholder",alternativeName:"commentPlaceHolder",serializationProperty:"locCommentPlaceholder",dependsOn:"showCommentArea",visibleIf:function(i){return i.hasComment}}]),x.addAlterNativeClassName("question","questionbase");var ou=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Wr=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},q=function(i){ou(t,i);function t(e,r,n){r===void 0&&(r=null),n===void 0&&(n="itemvalue");var o=i.call(this)||this;return o.typeName=n,o.ownerPropertyName="",o.locTextValue=new we(o,!0,"text"),o.locTextValue.onStrChanged=function(s,a){a==o.value&&(a=void 0),o.propertyValueChanged("text",s,a)},o.locTextValue.onGetTextCallback=function(s){return s||(P.isValueEmpty(o.value)?null:o.value.toString())},r&&(o.locText.text=r),!!e&&typeof e=="object"?o.setData(e):o.value=e,o.getType()!="itemvalue"&&Ae.createProperties(o),o.data=o,o.onCreating(),o}return t.prototype.getMarkdownHtml=function(e,r){return this.locOwner?this.locOwner.getMarkdownHtml(e,r):void 0},t.prototype.getRenderer=function(e){return this.locOwner?this.locOwner.getRenderer(e):null},t.prototype.getRendererContext=function(e){return this.locOwner?this.locOwner.getRendererContext(e):e},t.prototype.getProcessedText=function(e){return this.locOwner?this.locOwner.getProcessedText(e):e},Object.defineProperty(t,"Separator",{get:function(){return b.itemValueSeparator},set:function(e){b.itemValueSeparator=e},enumerable:!1,configurable:!0}),t.setData=function(e,r,n){e.length=0;for(var o=0;o<r.length;o++){var s=r[o],a=!!s&&typeof s.getType=="function"?s.getType():n!=null?n:"itemvalue",l=x.createClass(a);l.setData(s),s.originalItem&&(l.originalItem=s.originalItem),e.push(l)}},t.getData=function(e){for(var r=[],n=0;n<e.length;n++)r.push(e[n].getData());return r},t.getItemByValue=function(e,r){if(!Array.isArray(e))return null;for(var n=P.isValueEmpty(r),o=0;o<e.length;o++)if(n&&P.isValueEmpty(e[o].value)||P.isTwoValueEquals(e[o].value,r,!1,!0,!1))return e[o];return null},t.getTextOrHtmlByValue=function(e,r){var n=t.getItemByValue(e,r);return n!==null?n.locText.textOrHtml:""},t.locStrsChanged=function(e){for(var r=0;r<e.length;r++)e[r].locStrsChanged()},t.runConditionsForItems=function(e,r,n,o,s,a,l){return a===void 0&&(a=!0),t.runConditionsForItemsCore(e,r,n,o,s,!0,a,l)},t.runEnabledConditionsForItems=function(e,r,n,o,s){return t.runConditionsForItemsCore(e,null,r,n,o,!1,!0,s)},t.runConditionsForItemsCore=function(e,r,n,o,s,a,l,u){l===void 0&&(l=!0),o||(o={});for(var d=o.item,v=o.choice,V=!1,E=0;E<e.length;E++){var I=e[E];o.item=I.value,o.choice=I.value;var k=l&&!!I.getConditionRunner?I.getConditionRunner(a):!1;k||(k=n);var N=!0;k&&(N=k.run(o,s)),u&&(N=u(I,N)),!!r&&N&&r.push(I);var j=a?I.isVisible:I.isEnabled;N!=j&&(V=!0,a?I.setIsVisible&&I.setIsVisible(N):I.setIsEnabled&&I.setIsEnabled(N))}return d?o.item=d:delete o.item,v?o.choice=v:delete o.choice,V},t.prototype.onCreating=function(){},t.prototype.getType=function(){return this.typeName?this.typeName:"itemvalue"},t.prototype.getSurvey=function(e){return!!this.locOwner&&!!this.locOwner.getSurvey?this.locOwner.getSurvey():null},t.prototype.getLocale=function(){return!!this.locOwner&&this.locOwner.getLocale?this.locOwner.getLocale():""},Object.defineProperty(t.prototype,"isInternal",{get:function(){return this.isGhost===!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locText",{get:function(){return this.locTextValue},enumerable:!1,configurable:!0}),t.prototype.setLocText=function(e){this.locTextValue=e},Object.defineProperty(t.prototype,"locOwner",{get:function(){return this._locOwner},set:function(e){this._locOwner=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.getPropertyValue("value")},set:function(e){var r=void 0;if(!P.isValueEmpty(e)){var n=e.toString(),o=n.indexOf(b.itemValueSeparator);o>-1&&(e=n.slice(0,o),r=n.slice(o+1))}this.setPropertyValue("value",e),r&&(this.text=r),this.id=this.value},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasText",{get:function(){return!!this.locText.pureText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pureText",{get:function(){return this.locText.pureText},set:function(e){this.text=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this.locText.calculatedText},set:function(e){this.locText.text=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"calculatedText",{get:function(){return this.locText.calculatedText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shortcutText",{get:function(){return this.text},enumerable:!1,configurable:!0}),t.prototype.canSerializeValue=function(){var e=this.value;return e==null?!1:!Array.isArray(e)&&typeof e!="object"},t.prototype.getData=function(){var e=this.toJSON();if(!!e.value&&!!e.value.pos&&delete e.value.pos,P.isValueEmpty(e.value))return e;var r=this.canSerializeValue(),n=!r||!b.serialization.itemValueSerializeAsObject&&!b.serialization.itemValueSerializeDisplayText;return n&&Object.keys(e).length==1?this.value:(b.serialization.itemValueSerializeDisplayText&&e.text===void 0&&r&&(e.text=this.value.toString()),e)},t.prototype.toJSON=function(){var e={},r=x.getProperties(this.getType());(!r||r.length==0)&&(r=x.getProperties("itemvalue"));for(var n=new ae,o=0;o<r.length;o++){var s=r[o];s.name==="text"&&!this.locText.hasNonDefaultText()&&P.isTwoValueEquals(this.value,this.text,!1,!0,!1)||n.valueToJson(this,e,s)}return e},t.prototype.setData=function(e){if(!P.isValueEmpty(e)){if(typeof e.value=="undefined"&&typeof e.text!="undefined"&&Object.keys(e).length===1&&(e.value=e.text),typeof e.value!="undefined"){var r=void 0;typeof e.toJSON=="function"?r=e.toJSON():r=e,new ae().toObject(r,this)}else this.value=e;this.locText.strChanged()}},Object.defineProperty(t.prototype,"visibleIf",{get:function(){return this.getPropertyValueWithoutDefault("visibleIf")||""},set:function(e){this.setPropertyValue("visibleIf",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enableIf",{get:function(){return this.getPropertyValueWithoutDefault("enableIf")||""},set:function(e){this.setPropertyValue("enableIf",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){var e=this.getPropertyValueWithoutDefault("isVisible");return e!==void 0?e:!0},enumerable:!1,configurable:!0}),t.prototype.setIsVisible=function(e){this.setPropertyValue("isVisible",e)},Object.defineProperty(t.prototype,"isEnabled",{get:function(){var e=this.getPropertyValueWithoutDefault("isEnabled");return e!==void 0?e:!0},enumerable:!1,configurable:!0}),t.prototype.setIsEnabled=function(e){this.setPropertyValue("isEnabled",e)},t.prototype.addUsedLocales=function(e){this.AddLocStringToUsedLocales(this.locTextValue,e)},t.prototype.locStrsChanged=function(){i.prototype.locStrsChanged.call(this),this.locText.strChanged()},t.prototype.onPropertyValueChanged=function(e,r,n){e==="value"&&!this.hasText&&this.locText.strChanged();var o="itemValuePropertyChanged";!this.locOwner||!this.locOwner[o]||this.locOwner[o](this,e,r,n)},t.prototype.getConditionRunner=function(e){return e?this.getVisibleConditionRunner():this.getEnableConditionRunner()},t.prototype.getVisibleConditionRunner=function(){return this.visibleIf?(this.visibleConditionRunner||(this.visibleConditionRunner=new ve(this.visibleIf)),this.visibleConditionRunner.expression=this.visibleIf,this.visibleConditionRunner):null},t.prototype.getEnableConditionRunner=function(){return this.enableIf?(this.enableConditionRunner||(this.enableConditionRunner=new ve(this.enableIf)),this.enableConditionRunner.expression=this.enableIf,this.enableConditionRunner):null},Object.defineProperty(t.prototype,"selected",{get:function(){var e=this,r=this._locOwner;return r instanceof le&&r.isItemSelected&&this.selectedValue===void 0&&(this.selectedValue=new ne(function(){return r.isItemSelected(e)})),this.selectedValue},enumerable:!1,configurable:!0}),t.prototype.getComponent=function(){return this._locOwner instanceof le?this.componentValue||this._locOwner.itemComponent:this.componentValue},t.prototype.setComponent=function(e){this.componentValue=e},t.prototype.getEnabled=function(){return this.isEnabled},t.prototype.setEnabled=function(e){this.setIsEnabled(e)},t.prototype.getVisible=function(){var e=this.isVisible===void 0?!0:this.isVisible,r=this._visible===void 0?!0:this._visible;return e&&r},t.prototype.setVisible=function(e){this._visible=e},t.prototype.getLocTitle=function(){return this.locText},t.prototype.getTitle=function(){return this.text},t.prototype.setLocTitle=function(e){},t.prototype.setTitle=function(e){},Wr([y({defaultValue:!0})],t.prototype,"_visible",void 0),Wr([y()],t.prototype,"selectedValue",void 0),Wr([y()],t.prototype,"icon",void 0),t}(Qt);W.createItemValue=function(i,t){var e=null;return t?e=ae.metaData.createClass(t,{}):typeof i.getType=="function"?e=new q(null,void 0,i.getType()):e=new q(null),e.setData(i),e},W.itemValueLocStrChanged=function(i){q.locStrsChanged(i)},_t.getItemValuesDefaultValue=function(i,t){var e=new Array;return q.setData(e,Array.isArray(i)?i:[],t),e},x.addClass("itemvalue",[{name:"!value",isUnique:!0},{name:"text",serializationProperty:"locText"},{name:"visibleIf:condition",showMode:"form"},{name:"enableIf:condition",showMode:"form",visibleIf:function(i){return!i||i.ownerPropertyName!=="rateValues"}}],function(i){return new q(i)});var su=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),io=function(i){su(t,i);function t(e,r){e===void 0&&(e=null),r===void 0&&(r=null);var n=i.call(this)||this;return n.expressionIsRunning=!1,n.isCalculated=!1,e&&(n.name=e),r&&(n.expression=r),n}return t.prototype.setOwner=function(e){this.data=e,this.rerunExpression()},t.prototype.getType=function(){return"calculatedvalue"},t.prototype.getSurvey=function(e){return!!this.data&&!!this.data.getSurvey?this.data.getSurvey():null},Object.defineProperty(t.prototype,"owner",{get:function(){return this.data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.getPropertyValue("name")||""},set:function(e){this.setPropertyValue("name",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"includeIntoResult",{get:function(){return this.getPropertyValue("includeIntoResult")},set:function(e){this.setPropertyValue("includeIntoResult",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"expression",{get:function(){return this.getPropertyValue("expression")||""},set:function(e){this.setPropertyValue("expression",e),this.rerunExpression()},enumerable:!1,configurable:!0}),t.prototype.locCalculation=function(){this.expressionIsRunning=!0},t.prototype.unlocCalculation=function(){this.expressionIsRunning=!1},t.prototype.resetCalculation=function(){this.isCalculated=!1},t.prototype.doCalculation=function(e,r,n){this.isCalculated||(this.runExpressionCore(e,r,n),this.isCalculated=!0)},t.prototype.runExpression=function(e,r){this.runExpressionCore(null,e,r)},Object.defineProperty(t.prototype,"value",{get:function(){if(!!this.data)return this.data.getVariable(this.name)},enumerable:!1,configurable:!0}),t.prototype.setValue=function(e){!this.data||this.data.setVariable(this.name,e)},Object.defineProperty(t.prototype,"canRunExpression",{get:function(){return!!this.data&&!this.isLoadingFromJson&&!!this.expression&&!this.expressionIsRunning&&!!this.name},enumerable:!1,configurable:!0}),t.prototype.rerunExpression=function(){!this.canRunExpression||this.runExpression(this.data.getFilteredValues(),this.data.getFilteredProperties())},t.prototype.runExpressionCore=function(e,r,n){!this.canRunExpression||(this.ensureExpression(r),this.locCalculation(),e&&this.runDependentExpressions(e,r,n),this.expressionRunner.run(r,n))},t.prototype.runDependentExpressions=function(e,r,n){var o=this.expressionRunner.getVariables();if(!!o)for(var s=0;s<e.length;s++){var a=e[s];a===this||o.indexOf(a.name)<0||(a.doCalculation(e,r,n),r[a.name]=a.value)}},t.prototype.ensureExpression=function(e){var r=this;this.expressionRunner||(this.expressionRunner=new $e(this.expression),this.expressionRunner.onRunComplete=function(n){P.isTwoValueEquals(n,r.value,!1,!0,!1)||r.setValue(n),r.unlocCalculation()})},t}(W);x.addClass("calculatedvalue",[{name:"!name",isUnique:!0},"expression:expression","includeIntoResult:boolean"],function(){return new io},"base");var $r=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Jr=function(i){$r(t,i);function t(e){e===void 0&&(e=null);var r=i.call(this)||this;return r.expression=e,r}return t.prototype.getType=function(){return"expressionitem"},t.prototype.runCondition=function(e,r){return this.expression?new ve(this.expression).run(e,r):!1},Object.defineProperty(t.prototype,"expression",{get:function(){return this.getPropertyValue("expression","")},set:function(e){this.setPropertyValue("expression",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locHtml",{get:function(){return this.getLocalizableString("html")},enumerable:!1,configurable:!0}),t.prototype.getLocale=function(){return this.locOwner?this.locOwner.getLocale():""},t.prototype.getMarkdownHtml=function(e,r){return this.locOwner?this.locOwner.getMarkdownHtml(e,r):void 0},t.prototype.getRenderer=function(e){return this.locOwner?this.locOwner.getRenderer(e):null},t.prototype.getRendererContext=function(e){return this.locOwner?this.locOwner.getRendererContext(e):e},t.prototype.getProcessedText=function(e){return this.locOwner?this.locOwner.getProcessedText(e):e},t.prototype.getSurvey=function(e){return this.locOwner},t}(W),oo=function(i){$r(t,i);function t(e,r){e===void 0&&(e=null),r===void 0&&(r=null);var n=i.call(this,e)||this;return n.createLocalizableString("html",n),n.html=r,n}return t.prototype.getType=function(){return"htmlconditionitem"},Object.defineProperty(t.prototype,"html",{get:function(){return this.getLocalizableStringText("html")},set:function(e){this.setLocalizableStringText("html",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locHtml",{get:function(){return this.getLocalizableString("html")},enumerable:!1,configurable:!0}),t}(Jr),so=function(i){$r(t,i);function t(e,r){e===void 0&&(e=null),r===void 0&&(r=null);var n=i.call(this,e)||this;return n.createLocalizableString("url",n),n.url=r,n}return t.prototype.getType=function(){return"urlconditionitem"},Object.defineProperty(t.prototype,"url",{get:function(){return this.getLocalizableStringText("url")},set:function(e){this.setLocalizableStringText("url",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locUrl",{get:function(){return this.getLocalizableString("url")},enumerable:!1,configurable:!0}),t}(Jr);x.addClass("expressionitem",["expression:condition"],function(){return new Jr},"base"),x.addClass("htmlconditionitem",[{name:"html:html",serializationProperty:"locHtml"}],function(){return new oo},"expressionitem"),x.addClass("urlconditionitem",[{name:"url:string",serializationProperty:"locUrl"}],function(){return new so},"expressionitem");var ao=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),au=function(){function i(){this.parser=new DOMParser}return i.prototype.assignValue=function(t,e,r){Array.isArray(t[e])?t[e].push(r):t[e]!==void 0?t[e]=[t[e]].concat(r):typeof r=="object"&&Object.keys(r).length===1&&Object.keys(r)[0]===e?t[e]=r[e]:t[e]=r},i.prototype.xml2Json=function(t,e){if(t.children&&t.children.length>0)for(var r=0;r<t.children.length;r++){var n=t.children[r],o={};this.xml2Json(n,o),this.assignValue(e,n.nodeName,o)}else this.assignValue(e,t.nodeName,t.textContent)},i.prototype.parseXmlString=function(t){var e=this.parser.parseFromString(t,"text/xml"),r={};return this.xml2Json(e,r),r},i}(),et=function(i){ao(t,i);function t(){var e=i.call(this)||this;return e.lastObjHash="",e.isRunningValue=!1,e.processedUrl="",e.processedPath="",e.isUsingCacheFromUrl=void 0,e.error=null,e.createItemValue=function(r){return new q(r)},e.registerPropertyChangedHandlers(["url"],function(){e.owner&&e.owner.setPropertyValue("isUsingRestful",!!e.url)}),e}return Object.defineProperty(t,"EncodeParameters",{get:function(){return b.web.encodeUrlParams},set:function(e){b.web.encodeUrlParams=e},enumerable:!1,configurable:!0}),t.clearCache=function(){t.itemsResult={},t.sendingSameRequests={}},t.addSameRequest=function(e){if(!e.isUsingCache)return!1;var r=e.objHash,n=t.sendingSameRequests[r];return n?(n.push(e),e.isRunningValue=!0,!0):(t.sendingSameRequests[e.objHash]=[],!1)},t.unregisterSameRequests=function(e,r){if(!!e.isUsingCache){var n=t.sendingSameRequests[e.objHash];if(delete t.sendingSameRequests[e.objHash],!!n)for(var o=0;o<n.length;o++)n[o].isRunningValue=!1,n[o].getResultCallback&&n[o].getResultCallback(r)}},Object.defineProperty(t,"onBeforeSendRequest",{get:function(){return b.web.onBeforeRequestChoices},set:function(e){b.web.onBeforeRequestChoices=e},enumerable:!1,configurable:!0}),t.getCachedItemsResult=function(e){var r=e.objHash,n=t.itemsResult[r];return n?(e.getResultCallback&&e.getResultCallback(n),!0):!1},t.prototype.getSurvey=function(e){return this.owner?this.owner.survey:null},t.prototype.run=function(e){if(e===void 0&&(e=null),!(!this.url||!this.getResultCallback)){if(this.processedText(e),!this.processedUrl){this.doEmptyResultCallback({}),this.lastObjHash=this.objHash;return}this.lastObjHash!==this.objHash&&(this.lastObjHash=this.objHash,this.error=null,!this.useChangedItemsResults()&&(t.addSameRequest(this)||this.sendRequest()))}},Object.defineProperty(t.prototype,"isUsingCache",{get:function(){return this.isUsingCacheFromUrl===!0?!0:this.isUsingCacheFromUrl===!1?!1:b.web.cacheLoadedChoices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRunning",{get:function(){return this.getIsRunning()},enumerable:!1,configurable:!0}),t.prototype.getIsRunning=function(){return this.isRunningValue},Object.defineProperty(t.prototype,"isWaitingForParameters",{get:function(){return this.url&&!this.processedUrl},enumerable:!1,configurable:!0}),t.prototype.useChangedItemsResults=function(){return t.getCachedItemsResult(this)},t.prototype.doEmptyResultCallback=function(e){var r=[];this.updateResultCallback&&(r=this.updateResultCallback(r,e)),this.getResultCallback(r)},t.prototype.processedText=function(e){var r=this.url;if(r&&(r=r.replace(t.cacheText,"").replace(t.noCacheText,"")),e){var n=e.processTextEx(r,!1,b.web.encodeUrlParams),o=e.processTextEx(this.path,!1,b.web.encodeUrlParams);!n.hasAllValuesOnLastRun||!o.hasAllValuesOnLastRun?(this.processedUrl="",this.processedPath=""):(this.processedUrl=n.text,this.processedPath=o.text)}else this.processedUrl=r,this.processedPath=this.path;this.onProcessedUrlCallback&&this.onProcessedUrlCallback(this.processedUrl,this.processedPath)},t.prototype.parseResponse=function(e){var r;if(!!e&&typeof e.indexOf=="function"&&e.indexOf("<")===0){var n=new au;r=n.parseXmlString(e)}else try{r=JSON.parse(e)}catch{r=(e||"").split(`
`).map(function(s){return s.trim(" ")}).filter(function(s){return!!s})}return r},t.prototype.sendRequest=function(){var e=new XMLHttpRequest;e.open("GET",this.processedUrl),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var r=this,n=this.objHash;e.onload=function(){r.beforeLoadRequest(),e.status===200?r.onLoad(r.parseResponse(e.response),n):r.onError(e.statusText,e.responseText)};var o={request:e};b.web.onBeforeRequestChoices&&b.web.onBeforeRequestChoices(this,o),this.beforeSendRequest(),o.request.send()},t.prototype.getType=function(){return"choicesByUrl"},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return!this.url&&!this.path},enumerable:!1,configurable:!0}),t.prototype.getCustomPropertiesNames=function(){for(var e=this.getCustomProperties(),r=new Array,n=0;n<e.length;n++)r.push(this.getCustomPropertyName(e[n].name));return r},t.prototype.getCustomPropertyName=function(e){return e+"Name"},t.prototype.getCustomProperties=function(){for(var e=x.getProperties(this.itemValueType),r=[],n=0;n<e.length;n++)e[n].name==="value"||e[n].name==="text"||e[n].name==="visibleIf"||e[n].name==="enableIf"||r.push(e[n]);return r},t.prototype.setData=function(e){this.clear(),e.url&&(this.url=e.url),e.path&&(this.path=e.path),e.valueName&&(this.valueName=e.valueName),e.titleName&&(this.titleName=e.titleName),e.imageLinkName&&(this.imageLinkName=e.imageLinkName),e.allowEmptyResponse!==void 0&&(this.allowEmptyResponse=e.allowEmptyResponse),e.attachOriginalItems!==void 0&&(this.attachOriginalItems=e.attachOriginalItems);for(var r=this.getCustomPropertiesNames(),n=0;n<r.length;n++)e[r[n]]&&(this[r[n]]=e[r[n]])},t.prototype.getData=function(){if(this.isEmpty)return null;var e={};this.url&&(e.url=this.url),this.path&&(e.path=this.path),this.valueName&&(e.valueName=this.valueName),this.titleName&&(e.titleName=this.titleName),this.imageLinkName&&(e.imageLinkName=this.imageLinkName),this.allowEmptyResponse&&(e.allowEmptyResponse=this.allowEmptyResponse),this.attachOriginalItems&&(e.attachOriginalItems=this.attachOriginalItems);for(var r=this.getCustomPropertiesNames(),n=0;n<r.length;n++)this[r[n]]&&(e[r[n]]=this[r[n]]);return e},Object.defineProperty(t.prototype,"url",{get:function(){return this.getPropertyValue("url")||""},set:function(e){this.setPropertyValue("url",e),this.isUsingCacheFromUrl=void 0,e&&(e.indexOf(t.cacheText)>-1?this.isUsingCacheFromUrl=!0:e.indexOf(t.noCacheText)>-1&&(this.isUsingCacheFromUrl=!1))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.getPropertyValue("path")||""},set:function(e){this.setPropertyValue("path",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"valueName",{get:function(){return this.getPropertyValue("valueName","")},set:function(e){this.setPropertyValue("valueName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleName",{get:function(){return this.getPropertyValue("titleName","")},set:function(e){this.setPropertyValue("titleName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageLinkName",{get:function(){return this.getPropertyValue("imageLinkName","")},set:function(e){this.setPropertyValue("imageLinkName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowEmptyResponse",{get:function(){return this.getPropertyValue("allowEmptyResponse")},set:function(e){this.setPropertyValue("allowEmptyResponse",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attachOriginalItems",{get:function(){return this.getPropertyValue("attachOriginalItems")},set:function(e){this.setPropertyValue("attachOriginalItems",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemValueType",{get:function(){if(!this.owner)return"itemvalue";var e=x.findProperty(this.owner.getType(),"choices");return!e||e.type=="itemvalue[]"?"itemvalue":e.type},enumerable:!1,configurable:!0}),t.prototype.clear=function(){this.url=void 0,this.path=void 0,this.valueName=void 0,this.titleName=void 0,this.imageLinkName=void 0;for(var e=this.getCustomPropertiesNames(),r=0;r<e.length;r++)this[e[r]]&&(this[e[r]]="")},t.prototype.beforeSendRequest=function(){this.isRunningValue=!0,this.beforeSendRequestCallback&&this.beforeSendRequestCallback()},t.prototype.beforeLoadRequest=function(){this.isRunningValue=!1},t.prototype.onLoad=function(e,r){r===void 0&&(r=null),r||(r=this.objHash);var n=new Array,o=this.getResultAfterPath(e);if(o&&o.length)for(var s=0;s<o.length;s++){var a=o[s];if(!!a){var l=this.getItemValueCallback?this.getItemValueCallback(a):this.getValue(a),u=this.createItemValue(l);this.setTitle(u,a),this.setCustomProperties(u,a),this.attachOriginalItems&&(u.originalItem=a);var d=this.getImageLink(a);d&&(u.imageLink=d),n.push(u)}}else this.allowEmptyResponse||(this.error=new Yl(null,this.owner));this.updateResultCallback&&(n=this.updateResultCallback(n,e)),this.isUsingCache&&(t.itemsResult[r]=n),this.callResultCallback(n,r),t.unregisterSameRequests(this,n)},t.prototype.callResultCallback=function(e,r){r==this.objHash&&this.getResultCallback(e)},t.prototype.setCustomProperties=function(e,r){for(var n=this.getCustomProperties(),o=0;o<n.length;o++){var s=n[o],a=this.getValueCore(r,this.getPropertyBinding(s.name));this.isValueEmpty(a)||(e[s.name]=a)}},t.prototype.getPropertyBinding=function(e){return this[this.getCustomPropertyName(e)]?this[this.getCustomPropertyName(e)]:this[e]?this[e]:e},t.prototype.onError=function(e,r){this.error=new Kl(e,r,this.owner),this.doEmptyResultCallback(r),t.unregisterSameRequests(this,[])},t.prototype.getResultAfterPath=function(e){if(!e||!this.processedPath)return e;for(var r=this.getPathes(),n=0;n<r.length;n++)if(e=e[r[n]],!e)return null;return e},t.prototype.getPathes=function(){var e=[];return this.processedPath.indexOf(";")>-1?e=this.path.split(";"):e=this.processedPath.split(","),e.length==0&&e.push(this.processedPath),e},t.prototype.getValue=function(e){if(!e)return null;if(this.valueName)return this.getValueCore(e,this.valueName);if(!(e instanceof Object))return e;var r=Object.keys(e).length;return r<1?null:e[Object.keys(e)[0]]},t.prototype.setTitle=function(e,r){var n=this.titleName?this.titleName:"title",o=this.getValueCore(r,n);!o||(typeof o=="string"?e.text=o:e.locText.setJson(o))},t.prototype.getImageLink=function(e){var r=this.imageLinkName?this.imageLinkName:"imageLink";return this.getValueCore(e,r)},t.prototype.getValueCore=function(e,r){if(!e)return null;if(r.indexOf(".")<0)return e[r];for(var n=r.split("."),o=0;o<n.length;o++)if(e=e[n[o]],!e)return null;return e},Object.defineProperty(t.prototype,"objHash",{get:function(){return this.processedUrl+";"+this.processedPath+";"+this.valueName+";"+this.titleName+";"+this.imageLinkName},enumerable:!1,configurable:!0}),t.cacheText="{CACHE}",t.noCacheText="{NOCACHE}",t.itemsResult={},t.sendingSameRequests={},t}(W),lu=function(i){ao(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(t,"EncodeParameters",{get:function(){return et.EncodeParameters},set:function(e){et.EncodeParameters=e},enumerable:!1,configurable:!0}),t.clearCache=function(){et.clearCache()},Object.defineProperty(t,"onBeforeSendRequest",{get:function(){return b.web.onBeforeRequestChoices},set:function(e){b.web.onBeforeRequestChoices=e},enumerable:!1,configurable:!0}),t}(et);x.addClass("choicesByUrl",["url","path","valueName","titleName",{name:"imageLinkName",visibleIf:function(i){return!!i&&!!i.owner&&i.owner.getType()=="imagepicker"}},{name:"allowEmptyResponse:boolean"},{name:"attachOriginalItems:boolean",visible:!1}],function(){return new et});var uu=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),lo=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Gr=function(i){uu(t,i);function t(e){var r=i.call(this,e)||this;return r.generatedVisibleRows=null,r.generatedTotalRow=null,r.filteredRows=null,r.filteredColumns=null,r.columns=r.createColumnValues(),r.rows=r.createItemValues("rows"),r}return t.prototype.createColumnValues=function(){return this.createItemValues("columns")},t.prototype.getType=function(){return"matrixbase"},t.prototype.endLoadingFromJson=function(){i.prototype.endLoadingFromJson.call(this),this.updateVisibilityBasedOnRows()},Object.defineProperty(t.prototype,"isCompositeQuestion",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showHeader",{get:function(){return this.getPropertyValue("showHeader")},set:function(e){this.setPropertyValue("showHeader",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columns",{get:function(){return this.getPropertyValue("columns")},set:function(e){this.setPropertyValue("columns",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visibleColumns",{get:function(){return this.filteredColumns?this.filteredColumns:this.columns},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return this.getPropertyValue("rows")},set:function(e){var r=this.processRowsOnSet(e);this.setPropertyValue("rows",r),this.filterItems()},enumerable:!1,configurable:!0}),t.prototype.processRowsOnSet=function(e){return e},t.prototype.getVisibleRows=function(){return[]},Object.defineProperty(t.prototype,"visibleRows",{get:function(){return this.getVisibleRows()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rowsVisibleIf",{get:function(){return this.getPropertyValue("rowsVisibleIf","")},set:function(e){this.setPropertyValue("rowsVisibleIf",e),this.filterItems()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columnsVisibleIf",{get:function(){return this.getPropertyValue("columnsVisibleIf","")},set:function(e){this.setPropertyValue("columnsVisibleIf",e),this.filterItems()},enumerable:!1,configurable:!0}),t.prototype.runCondition=function(e,r){i.prototype.runCondition.call(this,e,r),this.runItemsCondition(e,r)},t.prototype.filterItems=function(){return this.areInvisibleElementsShowing?(this.onRowsChanged(),!1):this.isLoadingFromJson||!this.data?!1:this.runItemsCondition(this.getDataFilteredValues(),this.getDataFilteredProperties())},t.prototype.onColumnsChanged=function(){},t.prototype.onRowsChanged=function(){this.updateVisibilityBasedOnRows(),this.fireCallback(this.visibleRowsChangedCallback)},t.prototype.updateVisibilityBasedOnRows=function(){this.hideIfRowsEmpty&&this.onVisibleChanged()},t.prototype.isVisibleCore=function(){var e=i.prototype.isVisibleCore.call(this);return!e||!this.hideIfRowsEmpty?e:this.rows.length>0&&(!this.filteredRows||this.filteredRows.length>0)},t.prototype.shouldRunColumnExpression=function(){return!this.survey||!this.survey.areInvisibleElementsShowing},t.prototype.hasRowsAsItems=function(){return!0},t.prototype.runItemsCondition=function(e,r){var n=null;if(!!this.filteredRows&&!P.isValueEmpty(this.defaultValue)){n=[];for(var o=0;o<this.filteredRows.length;o++)n.push(this.filteredRows[o])}var s=this.hasRowsAsItems()&&this.runConditionsForRows(e,r),a=this.runConditionsForColumns(e,r);return s=a||s,s&&(this.isClearValueOnHidden&&(!!this.filteredColumns||!!this.filteredRows)&&this.clearIncorrectValues(),n&&this.restoreNewVisibleRowsValues(n),this.clearGeneratedRows(),a&&this.onColumnsChanged(),this.onRowsChanged()),s},t.prototype.clearGeneratedRows=function(){this.generatedVisibleRows=null},t.prototype.runConditionsForRows=function(e,r){var n=!!this.survey&&this.survey.areInvisibleElementsShowing,o=!n&&!!this.rowsVisibleIf?new ve(this.rowsVisibleIf):null;this.filteredRows=[];var s=q.runConditionsForItems(this.rows,this.filteredRows,o,e,r,!n);return q.runEnabledConditionsForItems(this.rows,void 0,e,r),this.filteredRows.length===this.rows.length&&(this.filteredRows=null),s},t.prototype.runConditionsForColumns=function(e,r){var n=!!this.survey&&!this.survey.areInvisibleElementsShowing,o=n&&!!this.columnsVisibleIf?new ve(this.columnsVisibleIf):null;this.filteredColumns=[];var s=q.runConditionsForItems(this.columns,this.filteredColumns,o,e,r,this.shouldRunColumnExpression());return this.filteredColumns.length===this.columns.length&&(this.filteredColumns=null),s},t.prototype.clearIncorrectValues=function(){var e=this.value;if(!!e){var r=null,n=!1,o=this.filteredRows?this.filteredRows:this.rows,s=this.filteredColumns?this.filteredColumns:this.columns;for(var a in e)q.getItemByValue(o,a)&&q.getItemByValue(s,e[a])?(r==null&&(r={}),r[a]=e[a]):n=!0;n&&(this.value=r),i.prototype.clearIncorrectValues.call(this)}},t.prototype.clearInvisibleValuesInRows=function(){if(!this.isEmpty()){for(var e=this.getUnbindValue(this.value),r=this.rows,n=0;n<r.length;n++){var o=r[n].value;!!e[o]&&!r[n].isVisible&&delete e[o]}this.isTwoValueEquals(e,this.value)||(this.value=e)}},t.prototype.restoreNewVisibleRowsValues=function(e){var r=this.filteredRows?this.filteredRows:this.rows,n=this.defaultValue,o=this.getUnbindValue(this.value),s=!1;for(var a in n)q.getItemByValue(r,a)&&!q.getItemByValue(e,a)&&(o==null&&(o={}),o[a]=n[a],s=!0);s&&(this.value=o)},t.prototype.needResponsiveWidth=function(){return!0},Object.defineProperty(t.prototype,"columnsAutoWidth",{get:function(){return!this.isMobile&&!this.columns.some(function(e){return!!e.width})},enumerable:!1,configurable:!0}),t.prototype.getTableCss=function(){var e;return new O().append(this.cssClasses.root).append(this.cssClasses.columnsAutoWidth,this.columnsAutoWidth).append(this.cssClasses.noHeader,!this.showHeader).append(this.cssClasses.hasFooter,!!(!((e=this.renderedTable)===null||e===void 0)&&e.showAddRowOnBottom)).append(this.cssClasses.rootAlternateRows,this.alternateRows).append(this.cssClasses.rootVerticalAlignTop,this.verticalAlign==="top").append(this.cssClasses.rootVerticalAlignMiddle,this.verticalAlign==="middle").toString()},Object.defineProperty(t.prototype,"columnMinWidth",{get:function(){return this.getPropertyValue("columnMinWidth")||""},set:function(e){this.setPropertyValue("columnMinWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rowTitleWidth",{get:function(){return this.getPropertyValue("rowTitleWidth")||""},set:function(e){this.setPropertyValue("rowTitleWidth",e)},enumerable:!1,configurable:!0}),t.prototype.getCellAriaLabel=function(e,r){var n=(this.getLocalizationString("matrix_row")||"row").toLocaleLowerCase(),o=(this.getLocalizationString("matrix_column")||"column").toLocaleLowerCase();return n+" "+e+", "+o+" "+r},Object.defineProperty(t.prototype,"isNewA11yStructure",{get:function(){return!0},enumerable:!1,configurable:!0}),lo([y()],t.prototype,"verticalAlign",void 0),lo([y()],t.prototype,"alternateRows",void 0),t}(le);x.addClass("matrixbase",[{name:"showCommentArea:switch",layout:"row",visible:!0,category:"general"},"columnsVisibleIf:condition","rowsVisibleIf:condition","columnMinWidth",{name:"showHeader:boolean",default:!0},{name:"verticalAlign",choices:["top","middle"],default:"middle"},{name:"alternateRows:boolean",default:!1}],void 0,"question");var cu=function(){function i(){}return i}(),uo=function(){function i(t,e){this.name=t,this.returnDisplayValue=e,this.isExists=!1,this.canProcess=!0}return i}(),Zr=function(){function i(){this._unObservableValues=[void 0]}return Object.defineProperty(i.prototype,"hasAllValuesOnLastRunValue",{get:function(){return this._unObservableValues[0]},set:function(t){this._unObservableValues[0]=t},enumerable:!1,configurable:!0}),i.prototype.process=function(t,e,r){if(e===void 0&&(e=!1),r===void 0&&(r=!1),this.hasAllValuesOnLastRunValue=!0,!t||!this.onProcess)return t;for(var n=this.getItems(t),o=n.length-1;o>=0;o--){var s=n[o],a=this.getName(t.substring(s.start+1,s.end));if(!!a){var l=new uo(a,e);if(this.onProcess(l),!l.isExists){l.canProcess&&(this.hasAllValuesOnLastRunValue=!1);continue}P.isValueEmpty(l.value)&&(this.hasAllValuesOnLastRunValue=!1);var u=P.isValueEmpty(l.value)?"":l.value;r&&(u=encodeURIComponent(u)),t=t.substring(0,s.start)+u+t.substring(s.end+1)}}return t},i.prototype.processValue=function(t,e){var r=new uo(t,e);return this.onProcess&&this.onProcess(r),r},Object.defineProperty(i.prototype,"hasAllValuesOnLastRun",{get:function(){return!!this.hasAllValuesOnLastRunValue},enumerable:!1,configurable:!0}),i.prototype.getItems=function(t){for(var e=[],r=t.length,n=-1,o="",s=0;s<r;s++)if(o=t[s],o=="{"&&(n=s),o=="}"){if(n>-1){var a=new cu;a.start=n,a.end=s,e.push(a)}n=-1}return e},i.prototype.getName=function(t){if(!!t)return t.trim()},i}(),Kr=function(){function i(t){var e=this;this.variableName=t,this.textPreProcessor=new Zr,this.textPreProcessor.onProcess=function(r){e.getProcessedTextValue(r)}}return i.prototype.processValue=function(t,e){return this.textPreProcessor.processValue(t,e)},Object.defineProperty(i.prototype,"survey",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"panel",{get:function(){return null},enumerable:!1,configurable:!0}),i.prototype.getValues=function(){return this.panel?this.panel.getValue():null},i.prototype.getQuestionByName=function(t){return this.panel?this.panel.getQuestionByValueName(t):null},i.prototype.getParentTextProcessor=function(){return null},i.prototype.onCustomProcessText=function(t){return!1},i.prototype.getQuestionDisplayText=function(t){return t.displayValue},i.prototype.getProcessedTextValue=function(t){if(!!t&&!this.onCustomProcessText(t)){var e=new ce().getFirstName(t.name);if(t.isExists=e==this.variableName,t.canProcess=t.isExists,!!t.canProcess){t.name=t.name.replace(this.variableName+".","");var e=new ce().getFirstName(t.name),r=this.getQuestionByName(e),n={};if(r)n[e]=t.returnDisplayValue?this.getQuestionDisplayText(r):r.value;else{var o=this.panel?this.getValues():null;o&&(n[e]=o[e])}t.value=new ce().getValue(t.name,n)}}},i.prototype.processText=function(t,e){return this.survey&&this.survey.isDesignMode?t:(t=this.textPreProcessor.process(t,e),t=this.processTextCore(this.getParentTextProcessor(),t,e),this.processTextCore(this.survey,t,e))},i.prototype.processTextEx=function(t,e){t=this.processText(t,e);var r=this.textPreProcessor.hasAllValuesOnLastRun,n={hasAllValuesOnLastRun:!0,text:t};return this.survey&&(n=this.survey.processTextEx(t,e,!1)),n.hasAllValuesOnLastRun=n.hasAllValuesOnLastRun&&r,n},i.prototype.processTextCore=function(t,e,r){return t?t.processText(e,r):e},i}(),Zt=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),co=function(){function i(t,e){this.name=t,this.json=e;var r=this;x.addClass(t,[],function(n){return Kt.Instance.createQuestion(n?n.name:"",r)},"question"),this.onInit()}return i.prototype.onInit=function(){!this.json.onInit||this.json.onInit()},i.prototype.onCreated=function(t){!this.json.onCreated||this.json.onCreated(t)},i.prototype.onLoaded=function(t){!this.json.onLoaded||this.json.onLoaded(t)},i.prototype.onAfterRender=function(t,e){!this.json.onAfterRender||this.json.onAfterRender(t,e)},i.prototype.onAfterRenderContentElement=function(t,e,r){!this.json.onAfterRenderContentElement||this.json.onAfterRenderContentElement(t,e,r)},i.prototype.onUpdateQuestionCssClasses=function(t,e,r){!this.json.onUpdateQuestionCssClasses||this.json.onUpdateQuestionCssClasses(t,e,r)},i.prototype.onSetQuestionValue=function(t,e){this.json.onSetQuestionValue&&this.json.onSetQuestionValue(t,e),this.json.onValueSet&&this.json.onValueSet(t,e)},i.prototype.onPropertyChanged=function(t,e,r){!this.json.onPropertyChanged||this.json.onPropertyChanged(t,e,r)},i.prototype.onValueChanged=function(t,e,r){!this.json.onValueChanged||this.json.onValueChanged(t,e,r)},i.prototype.onValueChanging=function(t,e,r){return this.json.onValueChanging?this.json.onValueChanging(t,e,r):r},i.prototype.onGetErrorText=function(t){if(!!this.json.getErrorText)return this.json.getErrorText(t)},i.prototype.onItemValuePropertyChanged=function(t,e,r,n,o){!this.json.onItemValuePropertyChanged||this.json.onItemValuePropertyChanged(t,{obj:e,propertyName:r,name:n,newValue:o})},i.prototype.getDisplayValue=function(t,e,r){return this.json.getDisplayValue?this.json.getDisplayValue(r):r.getDisplayValue(t,e)},Object.defineProperty(i.prototype,"defaultQuestionTitle",{get:function(){return this.json.defaultQuestionTitle},enumerable:!1,configurable:!0}),i.prototype.setValueToQuestion=function(t){var e=this.json.valueToQuestion||this.json.setValue;return e?e(t):t},i.prototype.getValueFromQuestion=function(t){var e=this.json.valueFromQuestion||this.json.getValue;return e?e(t):t},Object.defineProperty(i.prototype,"isComposite",{get:function(){return!!this.json.elementsJSON||!!this.json.createElements},enumerable:!1,configurable:!0}),i.prototype.getDynamicProperties=function(){return Array.isArray(this.dynamicProperties)||(this.dynamicProperties=this.calcDynamicProperties()),this.dynamicProperties},i.prototype.calcDynamicProperties=function(){var t=this.json.inheritBaseProps;if(!t||!this.json.questionJSON)return[];var e=this.json.questionJSON.type;if(!e)return[];if(Array.isArray(t)){var r=[];return t.forEach(function(s){var a=x.findProperty(e,s);a&&r.push(a)}),r}var n=[];for(var o in this.json.questionJSON)n.push(o);return x.getDynamicPropertiesByTypes(this.name,e,n)},i}(),Kt=function(){function i(){this.customQuestionValues=[]}return i.prototype.add=function(t){if(!!t){var e=t.name;if(!e)throw"Attribute name is missed";if(e=e.toLowerCase(),this.getCustomQuestionByName(e))throw"There is already registered custom question with name '"+e+"'";if(x.findClass(e))throw"There is already class with name '"+e+"'";var r=new co(e,t);this.onAddingJson&&this.onAddingJson(e,r.isComposite),this.customQuestionValues.push(r)}},i.prototype.remove=function(t){if(!t)return!1;var e=this.getCustomQuestionIndex(t.toLowerCase());return e<0?!1:(this.removeByIndex(e),!0)},Object.defineProperty(i.prototype,"items",{get:function(){return this.customQuestionValues},enumerable:!1,configurable:!0}),i.prototype.getCustomQuestionByName=function(t){var e=this.getCustomQuestionIndex(t);return e>=0?this.customQuestionValues[e]:void 0},i.prototype.getCustomQuestionIndex=function(t){for(var e=0;e<this.customQuestionValues.length;e++)if(this.customQuestionValues[e].name===t)return e;return-1},i.prototype.removeByIndex=function(t){x.removeClass(this.customQuestionValues[t].name),this.customQuestionValues.splice(t,1)},i.prototype.clear=function(t){for(var e=this.customQuestionValues.length-1;e>=0;e--)(t||!this.customQuestionValues[e].json.internal)&&this.removeByIndex(e)},i.prototype.createQuestion=function(t,e){return e.isComposite?this.createCompositeModel(t,e):this.createCustomModel(t,e)},i.prototype.createCompositeModel=function(t,e){return this.onCreateComposite?this.onCreateComposite(t,e):new ho(t,e)},i.prototype.createCustomModel=function(t,e){return this.onCreateCustom?this.onCreateCustom(t,e):new fo(t,e)},i.Instance=new i,i}(),po=function(i){Zt(t,i);function t(e,r){var n=i.call(this,e)||this;return n.customQuestion=r,Ae.createProperties(n),de.CreateDisabledDesignElements=!0,n.locQuestionTitle=n.createLocalizableString("questionTitle",n),n.locQuestionTitle.setJson(n.customQuestion.defaultQuestionTitle),n.createWrapper(),de.CreateDisabledDesignElements=!1,n.customQuestion&&n.customQuestion.onCreated(n),n}return t.prototype.getType=function(){return this.customQuestion?this.customQuestion.name:"custom"},t.prototype.locStrsChanged=function(){i.prototype.locStrsChanged.call(this),this.getElement()&&this.getElement().locStrsChanged()},t.prototype.localeChanged=function(){i.prototype.locStrsChanged.call(this),this.getElement()&&this.getElement().localeChanged()},t.prototype.getDefaultTitle=function(){return this.locQuestionTitle.isEmpty?i.prototype.getDefaultTitle.call(this):this.getProcessedText(this.locQuestionTitle.textOrHtml)},t.prototype.addUsedLocales=function(e){i.prototype.addUsedLocales.call(this,e),this.getElement()&&this.getElement().addUsedLocales(e)},t.prototype.needResponsiveWidth=function(){var e=this.getElement();return e?e.needResponsiveWidth():!1},t.prototype.createWrapper=function(){},t.prototype.onPropertyValueChanged=function(e,r,n){i.prototype.onPropertyValueChanged.call(this,e,r,n),!!this.customQuestion&&!this.isLoadingFromJson&&this.customQuestion.onPropertyChanged(this,e,n)},t.prototype.itemValuePropertyChanged=function(e,r,n,o){i.prototype.itemValuePropertyChanged.call(this,e,r,n,o),!!this.customQuestion&&!this.isLoadingFromJson&&this.customQuestion.onItemValuePropertyChanged(this,e,e.ownerPropertyName,r,o)},t.prototype.onFirstRendering=function(){var e=this.getElement();e&&e.onFirstRendering(),i.prototype.onFirstRendering.call(this)},t.prototype.onHidingContent=function(){i.prototype.onHidingContent.call(this);var e=this.getElement();e&&e.onHidingContent()},t.prototype.getProgressInfo=function(){var e=i.prototype.getProgressInfo.call(this);return this.getElement()&&(e=this.getElement().getProgressInfo()),this.isRequired&&e.requiredQuestionCount==0&&(e.requiredQuestionCount=1,this.isEmpty()||(e.answeredQuestionCount=1)),e},t.prototype.initElement=function(e){!e||(e.setSurveyImpl(this),e.disableDesignActions=!0)},t.prototype.setSurveyImpl=function(e,r){this.isSettingValOnLoading=!0,i.prototype.setSurveyImpl.call(this,e,r),this.initElement(this.getElement()),this.isSettingValOnLoading=!1},t.prototype.onSurveyLoad=function(){i.prototype.onSurveyLoad.call(this),this.getElement()&&(this.getElement().onSurveyLoad(),this.customQuestion.onLoaded(this))},t.prototype.afterRenderQuestionElement=function(e){},t.prototype.afterRenderCore=function(e){i.prototype.afterRenderCore.call(this,e),this.customQuestion&&this.customQuestion.onAfterRender(this,e)},t.prototype.onUpdateQuestionCssClasses=function(e,r){this.customQuestion&&this.customQuestion.onUpdateQuestionCssClasses(this,e,r)},t.prototype.setQuestionValue=function(e,r){r===void 0&&(r=!0),i.prototype.setQuestionValue.call(this,e,r),this.updateElementCss(),this.customQuestion&&this.customQuestion.onSetQuestionValue(this,e)},t.prototype.setNewValue=function(e){i.prototype.setNewValue.call(this,e),this.updateElementCss()},t.prototype.onCheckForErrors=function(e,r){if(i.prototype.onCheckForErrors.call(this,e,r),this.customQuestion){var n=this.customQuestion.onGetErrorText(this);n&&e.push(new Ce(n,this))}},t.prototype.getSurveyData=function(){return this},t.prototype.getTextProcessor=function(){return this.textProcessor},t.prototype.getValue=function(e){return this.value},t.prototype.setValue=function(e,r,n,o){if(!!this.data){this.customQuestion&&this.customQuestion.onValueChanged(this,e,r);var s=this.convertDataName(e),a=this.convertDataValue(e,r);this.valueToDataCallback&&(a=this.valueToDataCallback(a)),this.data.setValue(s,a,n,o),this.updateIsAnswered(),this.updateElementCss()}},t.prototype.getQuestionByName=function(e){},t.prototype.isValueChanging=function(e,r){if(this.customQuestion){var n=r;if(r=this.customQuestion.onValueChanging(this,e,r),!P.isTwoValueEquals(r,n)){var o=this.getQuestionByName(e);if(o)return o.value=r,!0}}return!1},t.prototype.convertDataName=function(e){return this.getValueName()},t.prototype.convertDataValue=function(e,r){return r},t.prototype.getVariable=function(e){return this.data?this.data.getVariable(e):null},t.prototype.setVariable=function(e,r){!this.data||this.data.setVariable(e,r)},t.prototype.getComment=function(e){return this.data?this.data.getComment(this.getValueName()):""},t.prototype.setComment=function(e,r,n){!this.data||this.data.setComment(this.getValueName(),r,n)},t.prototype.getAllValues=function(){return this.data?this.data.getAllValues():{}},t.prototype.getFilteredValues=function(){return this.data?this.data.getFilteredValues():{}},t.prototype.getFilteredProperties=function(){return this.data?this.data.getFilteredProperties():{}},t.prototype.findQuestionByName=function(e){return this.data?this.data.findQuestionByName(e):null},t.prototype.getEditingSurveyElement=function(){},t.prototype.addElement=function(e,r){},t.prototype.removeElement=function(e){return!1},t.prototype.getQuestionTitleLocation=function(){return"left"},t.prototype.getQuestionTitleWidth=function(){},t.prototype.getColumsForElement=function(e){return[]},t.prototype.updateColumns=function(){},t.prototype.getQuestionStartIndex=function(){return this.getStartIndex()},t.prototype.getChildrenLayoutType=function(){return"row"},t.prototype.elementWidthChanged=function(e){},Object.defineProperty(t.prototype,"elements",{get:function(){return[]},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(e){return-1},t.prototype.ensureRowsVisibility=function(){},t.prototype.validateContainerOnly=function(){},t.prototype.onQuestionValueChanged=function(e){},t.prototype.getQuestionErrorLocation=function(){return this.getErrorLocation()},t.prototype.getContentDisplayValueCore=function(e,r,n){return n?this.customQuestion.getDisplayValue(e,r,n):i.prototype.getDisplayValueCore.call(this,e,r)},t}(le),fo=function(i){Zt(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.getTemplate=function(){return"custom"},t.prototype.getDynamicProperties=function(){return this.customQuestion.getDynamicProperties()||[]},t.prototype.getDynamicType=function(){return this.questionWrapper?this.questionWrapper.getType():"question"},t.prototype.getOriginalObj=function(){return this.questionWrapper},t.prototype.createWrapper=function(){var e=this;this.questionWrapper=this.createQuestion(),this.createDynamicProperties(this.questionWrapper),this.getDynamicProperties().length>0&&(this.questionWrapper.onPropertyValueChangedCallback=function(r,n,o,s,a){var l=e.getDynamicProperty(r);l&&e.propertyValueChanged(r,n,o,a)})},t.prototype.getDynamicProperty=function(e){for(var r=this.getDynamicProperties(),n=0;n<r.length;n++)if(r[n].name===e)return r[n];return null},t.prototype.getElement=function(){return this.contentQuestion},t.prototype.onAnyValueChanged=function(e,r){i.prototype.onAnyValueChanged.call(this,e,r),this.contentQuestion&&this.contentQuestion.onAnyValueChanged(e,r)},t.prototype.getQuestionByName=function(e){return this.contentQuestion},t.prototype.getDefaultTitle=function(){return this.hasJSONTitle&&this.contentQuestion?this.getProcessedText(this.contentQuestion.title):i.prototype.getDefaultTitle.call(this)},t.prototype.setValue=function(e,r,n,o){this.isValueChanging(e,r)||i.prototype.setValue.call(this,e,r,n,o)},t.prototype.onSetData=function(){i.prototype.onSetData.call(this),!!this.survey&&!this.isEmpty()&&this.setValue(this.name,this.value,!1,this.allowNotifyValueChanged)},t.prototype.hasErrors=function(e,r){if(e===void 0&&(e=!0),r===void 0&&(r=null),!this.contentQuestion)return!1;var n=this.contentQuestion.hasErrors(e,r);this.errors=[];for(var o=0;o<this.contentQuestion.errors.length;o++)this.errors.push(this.contentQuestion.errors[o]);return n||(n=i.prototype.hasErrors.call(this,e,r)),this.updateElementCss(),n},t.prototype.focus=function(e){e===void 0&&(e=!1),this.contentQuestion?this.contentQuestion.focus(e):i.prototype.focus.call(this,e)},t.prototype.afterRenderCore=function(e){i.prototype.afterRenderCore.call(this,e),this.contentQuestion&&this.contentQuestion.afterRender(e)},Object.defineProperty(t.prototype,"contentQuestion",{get:function(){return this.questionWrapper},enumerable:!1,configurable:!0}),t.prototype.createQuestion=function(){var e=this,r=this.customQuestion.json,n=null;if(r.questionJSON){this.hasJSONTitle=!!r.questionJSON.title;var o=r.questionJSON.type;if(!o||!x.findClass(o))throw"type attribute in questionJSON is empty or incorrect";n=x.createClass(o),n.fromJSON(r.questionJSON),n=this.checkCreatedQuestion(n)}else r.createQuestion&&(n=this.checkCreatedQuestion(r.createQuestion()));return this.initElement(n),n&&(n.isContentElement=!0,n.name||(n.name="question"),n.onUpdateCssClassesCallback=function(s){e.onUpdateQuestionCssClasses(n,s)},n.hasCssErrorCallback=function(){return e.errors.length>0},n.setValueChangedDirectlyCallback=function(s){e.setValueChangedDirectly(s)}),n},t.prototype.checkCreatedQuestion=function(e){return e&&(e.isQuestion||(Array.isArray(e.questions)&&e.questions.length>0?e=e.questions[0]:e=x.createClass("text"),je.error("Could not create component: '"+this.getType()+"'. questionJSON should be a question.")),e)},t.prototype.onSurveyLoad=function(){i.prototype.onSurveyLoad.call(this),!!this.contentQuestion&&this.isEmpty()&&!this.contentQuestion.isEmpty()&&(this.value=this.getContentQuestionValue())},t.prototype.runCondition=function(e,r){i.prototype.runCondition.call(this,e,r),this.contentQuestion&&this.contentQuestion.runCondition(e,r)},t.prototype.convertDataName=function(e){var r=this.contentQuestion;if(!r||e===this.getValueName())return i.prototype.convertDataName.call(this,e);var n=e.replace(r.getValueName(),this.getValueName());return n.indexOf(this.getValueName())==0?n:i.prototype.convertDataName.call(this,e)},t.prototype.convertDataValue=function(e,r){return this.convertDataName(e)==i.prototype.convertDataName.call(this,e)?this.getContentQuestionValue():r},t.prototype.getContentQuestionValue=function(){if(!!this.contentQuestion){var e=this.contentQuestion.value;return this.customQuestion&&(e=this.customQuestion.getValueFromQuestion(e)),e}},t.prototype.setContentQuestionValue=function(e){!this.contentQuestion||(this.customQuestion&&(e=this.customQuestion.setValueToQuestion(e)),this.contentQuestion.value=e)},t.prototype.canSetValueToSurvey=function(){return!1},t.prototype.setQuestionValue=function(e,r){r===void 0&&(r=!0),i.prototype.setQuestionValue.call(this,e,r),!this.isLoadingFromJson&&!!this.contentQuestion&&!this.isTwoValueEquals(this.getContentQuestionValue(),e)&&this.setContentQuestionValue(this.getUnbindValue(e))},t.prototype.onSurveyValueChanged=function(e){i.prototype.onSurveyValueChanged.call(this,e),this.contentQuestion&&this.contentQuestion.onSurveyValueChanged(e)},t.prototype.getValueCore=function(){return this.contentQuestion?this.getContentQuestionValue():i.prototype.getValueCore.call(this)},t.prototype.setValueChangedDirectly=function(e){this.isSettingValueChanged||(this.isSettingValueChanged=!0,i.prototype.setValueChangedDirectly.call(this,e),this.contentQuestion&&this.contentQuestion.setValueChangedDirectly(e),this.isSettingValueChanged=!1)},t.prototype.createDynamicProperties=function(e){if(!!e){var r=this.getDynamicProperties();Array.isArray(r)&&x.addDynamicPropertiesIntoObj(this,e,r)}},t.prototype.initElement=function(e){var r=this;i.prototype.initElement.call(this,e),e&&(e.parent=this,e.afterRenderQuestionCallback=function(n,o){r.customQuestion&&r.customQuestion.onAfterRenderContentElement(r,n,o)})},t.prototype.updateElementCss=function(e){this.contentQuestion&&this.questionWrapper.updateElementCss(e),i.prototype.updateElementCss.call(this,e)},t.prototype.updateElementCssCore=function(e){this.contentQuestion&&(e=this.contentQuestion.cssClasses),i.prototype.updateElementCssCore.call(this,e)},t.prototype.getDisplayValueCore=function(e,r){return i.prototype.getContentDisplayValueCore.call(this,e,r,this.contentQuestion)},t}(po),pu=function(i){Zt(t,i);function t(e,r){var n=i.call(this,r)||this;return n.composite=e,n.variableName=r,n}return Object.defineProperty(t.prototype,"survey",{get:function(){return this.composite.survey},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panel",{get:function(){return this.composite.contentPanel},enumerable:!1,configurable:!0}),t}(Kr),ho=function(i){Zt(t,i);function t(e,r){var n=i.call(this,e,r)||this;return n.customQuestion=r,n.settingNewValue=!1,n.textProcessing=new pu(n,t.ItemVariableName),n}return t.prototype.createWrapper=function(){this.panelWrapper=this.createPanel()},t.prototype.getTemplate=function(){return"composite"},t.prototype.getElement=function(){return this.contentPanel},t.prototype.getCssRoot=function(e){return new O().append(i.prototype.getCssRoot.call(this,e)).append(e.composite).toString()},Object.defineProperty(t.prototype,"contentPanel",{get:function(){return this.panelWrapper},enumerable:!1,configurable:!0}),t.prototype.hasErrors=function(e,r){e===void 0&&(e=!0),r===void 0&&(r=null);var n=i.prototype.hasErrors.call(this,e,r);return this.contentPanel&&this.contentPanel.hasErrors(e,!1,r)||n},t.prototype.updateElementCss=function(e){i.prototype.updateElementCss.call(this,e),this.contentPanel&&this.contentPanel.updateElementCss(e)},t.prototype.dispose=function(){this.unConnectEditingObj(),i.prototype.dispose.call(this)},t.prototype.updateEditingObj=function(){var e=this,r,n=(r=this.data)===null||r===void 0?void 0:r.getEditingSurveyElement();if(!!n){var o=n[this.getValueName()];return!!o&&!o.onPropertyChanged&&(o=void 0),o!==this.editingObjValue&&(this.unConnectEditingObj(),this.editingObjValue=o,o&&(this.onEditingObjPropertyChanged=function(s,a){e.setNewValueIntoQuestion(a.name,e.editingObjValue[a.name])},o.onPropertyChanged.add(this.onEditingObjPropertyChanged))),this.editingObjValue}},t.prototype.unConnectEditingObj=function(){!!this.editingObjValue&&!this.editingObjValue.isDisposed&&this.editingObjValue.onPropertyChanged.remove(this.onEditingObjPropertyChanged)},t.prototype.getEditingSurveyElement=function(){return this.editingObjValue},t.prototype.getTextProcessor=function(){return this.textProcessing},t.prototype.findQuestionByName=function(e){var r=this.getQuestionByName(e);return r||i.prototype.findQuestionByName.call(this,e)},t.prototype.clearValueIfInvisibleCore=function(e){i.prototype.clearValueIfInvisibleCore.call(this,e);for(var r=this.contentPanel.questions,n=0;n<r.length;n++)r[n].clearValueIfInvisible(e)},t.prototype.onAnyValueChanged=function(e,r){i.prototype.onAnyValueChanged.call(this,e,r);for(var n=this.contentPanel.questions,o=0;o<n.length;o++)n[o].onAnyValueChanged(e,r)},Object.defineProperty(t.prototype,"hasSingleInput",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isContainer",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.createPanel=function(){var e=this,r=x.createClass("panel");r.showQuestionNumbers="off",r.renderWidth="100%";var n=this.customQuestion.json;return n.elementsJSON&&r.fromJSON({elements:n.elementsJSON}),n.createElements&&n.createElements(r,this),this.initElement(r),r.readOnly=this.isReadOnly,r.questions.forEach(function(o){return o.onUpdateCssClassesCallback=function(s){e.onUpdateQuestionCssClasses(o,s)}}),this.setAfterRenderCallbacks(r),r},t.prototype.onReadOnlyChanged=function(){this.contentPanel&&(this.contentPanel.readOnly=this.isReadOnly),i.prototype.onReadOnlyChanged.call(this)},t.prototype.updateValueFromSurvey=function(e,r){r===void 0&&(r=!1),this.updateEditingObj(),i.prototype.updateValueFromSurvey.call(this,e,r)},t.prototype.onSurveyLoad=function(){if(this.isSettingValOnLoading=!0,this.contentPanel&&(this.contentPanel.readOnly=this.isReadOnly,this.setIsContentElement(this.contentPanel)),i.prototype.onSurveyLoad.call(this),this.contentPanel){var e=this.getContentPanelValue();P.isValueEmpty(e)||(this.value=e)}this.isSettingValOnLoading=!1},t.prototype.setIsContentElement=function(e){e.isContentElement=!0;for(var r=e.elements,n=0;n<r.length;n++){var o=r[n];o.isPanel?this.setIsContentElement(o):o.isContentElement=!0}},t.prototype.setVisibleIndex=function(e){var r=i.prototype.setVisibleIndex.call(this,e);return this.isVisible&&!!this.contentPanel&&(r+=this.contentPanel.setVisibleIndex(e)),r},t.prototype.runCondition=function(e,r){if(i.prototype.runCondition.call(this,e,r),this.contentPanel){var n=e[t.ItemVariableName];e[t.ItemVariableName]=this.contentPanel.getValue(),this.contentPanel.runCondition(e,r),delete e[t.ItemVariableName],n&&(e[t.ItemVariableName]=n)}},t.prototype.onSurveyValueChanged=function(e){i.prototype.onSurveyValueChanged.call(this,e);var r=e||{};this.contentPanel&&this.contentPanel.questions.forEach(function(n){n.onSurveyValueChanged(r[n.getValueName()])})},t.prototype.getValue=function(e){var r=this.value;return r?r[e]:null},t.prototype.getQuestionByName=function(e){return this.contentPanel?this.contentPanel.getQuestionByName(e):void 0},t.prototype.setValue=function(e,r,n,o){if(this.settingNewValue){this.setNewValueIntoQuestion(e,r);return}if(!this.isValueChanging(e,r)){if(this.settingNewValue=!0,!this.isEditingSurveyElement&&!!this.contentPanel)for(var s=0,a=this.contentPanel.questions.length+1;s<a&&this.updateValueCoreWithPanelValue();)s++;this.setNewValueIntoQuestion(e,r),i.prototype.setValue.call(this,e,r,n,o),this.settingNewValue=!1,this.runPanelTriggers(t.ItemVariableName+"."+e,r)}},t.prototype.runPanelTriggers=function(e,r){this.contentPanel&&this.contentPanel.questions.forEach(function(n){n.runTriggers(e,r)})},t.prototype.getFilteredValues=function(){var e=this.data?this.data.getFilteredValues():{};return this.contentPanel&&(e[t.ItemVariableName]=this.contentPanel.getValue()),e},t.prototype.updateValueCoreWithPanelValue=function(){var e=this.getContentPanelValue();return this.isTwoValueEquals(this.getValueCore(),e)?!1:(this.setValueCore(e),!0)},t.prototype.getContentPanelValue=function(e){return e||(e=this.contentPanel.getValue()),this.customQuestion.setValueToQuestion(e)},t.prototype.getValueForContentPanel=function(e){return this.customQuestion.getValueFromQuestion(e)},t.prototype.setNewValueIntoQuestion=function(e,r){var n=this.getQuestionByName(e);!!n&&!this.isTwoValueEquals(r,n.value)&&(n.value=r)},t.prototype.addConditionObjectsByContext=function(e,r){if(!!this.contentPanel)for(var n=this.contentPanel.questions,o=this.name,s=this.title,a=0;a<n.length;a++)e.push({name:o+"."+n[a].name,text:s+"."+n[a].title,question:n[a]})},t.prototype.collectNestedQuestionsCore=function(e,r){!this.contentPanel||this.contentPanel.questions.forEach(function(n){return n.collectNestedQuestions(e,r)})},t.prototype.convertDataValue=function(e,r){var n=!!this.contentPanel&&!this.isEditingSurveyElement?this.contentPanel.getValue():this.getValueForContentPanel(this.value);return n||(n={}),n.getType||(n=P.getUnbindValue(n)),this.isValueEmpty(r)&&!this.isEditingSurveyElement?delete n[e]:n[e]=r,this.getContentPanelValue(n)},t.prototype.setQuestionValue=function(e,r){r===void 0&&(r=!0),this.setValuesIntoQuestions(e),!this.isEditingSurveyElement&&!!this.contentPanel&&(e=this.getContentPanelValue()),i.prototype.setQuestionValue.call(this,e,r)},t.prototype.setValuesIntoQuestions=function(e){if(!!this.contentPanel){e=this.getValueForContentPanel(e);var r=this.settingNewValue;this.settingNewValue=!0;for(var n=this.contentPanel.questions,o=0;o<n.length;o++){var s=n[o].getValueName(),a=e?e[s]:void 0,l=n[o];!this.isTwoValueEquals(l.value,a)&&(a!==void 0||!l.isEmpty())&&(l.value=a)}this.settingNewValue=r}},t.prototype.getDisplayValueCore=function(e,r){return i.prototype.getContentDisplayValueCore.call(this,e,r,this.contentPanel)},t.prototype.setAfterRenderCallbacks=function(e){var r=this;if(!(!e||!this.customQuestion))for(var n=e.questions,o=0;o<n.length;o++)n[o].afterRenderQuestionCallback=function(s,a){r.customQuestion.onAfterRenderContentElement(r,s,a)}},t.ItemVariableName="composite",t}(po),Z=function(){function i(){}return Object.defineProperty(i,"DefaultChoices",{get:function(){return[z.getString("choices_Item")+"1",z.getString("choices_Item")+"2",z.getString("choices_Item")+"3"]},enumerable:!1,configurable:!0}),Object.defineProperty(i,"DefaultColums",{get:function(){var t=z.getString("matrix_column")+" ";return[t+"1",t+"2",t+"3"]},enumerable:!1,configurable:!0}),Object.defineProperty(i,"DefaultRows",{get:function(){var t=z.getString("matrix_row")+" ";return[t+"1",t+"2"]},enumerable:!1,configurable:!0}),Object.defineProperty(i,"DefaultMutlipleTextItems",{get:function(){var t=z.getString("multipletext_itemname");return[t+"1",t+"2"]},enumerable:!1,configurable:!0}),i.prototype.registerQuestion=function(t,e,r){r===void 0&&(r=!0),Ne.Instance.registerElement(t,e,r)},i.prototype.registerCustomQuestion=function(t){Ne.Instance.registerCustomQuestion(t)},i.prototype.unregisterElement=function(t,e){e===void 0&&(e=!1),Ne.Instance.unregisterElement(t,e)},i.prototype.clear=function(){Ne.Instance.clear()},i.prototype.getAllTypes=function(){return Ne.Instance.getAllTypes()},i.prototype.createQuestion=function(t,e){return Ne.Instance.createElement(t,e)},i.Instance=new i,i}(),Ne=function(){function i(){var t=this;this.creatorHash={},this.registerCustomQuestion=function(e,r){r===void 0&&(r=!0);var n=function(o){var s=x.createClass(e);return s&&(s.name=o),s};t.registerElement(e,n,r)}}return i.prototype.registerElement=function(t,e,r){r===void 0&&(r=!0),this.creatorHash[t]={showInToolbox:r,creator:e}},i.prototype.clear=function(){this.creatorHash={}},i.prototype.unregisterElement=function(t,e){e===void 0&&(e=!1),delete this.creatorHash[t],e&&x.removeClass(t)},i.prototype.getAllToolboxTypes=function(){return this.getAllTypesCore(!0)},i.prototype.getAllTypes=function(){return this.getAllTypesCore(!1)},i.prototype.createElement=function(t,e){var r=this.creatorHash[t];if(!!r&&!!r.creator)return r.creator(e);var n=Kt.Instance.getCustomQuestionByName(t);return n?Kt.Instance.createQuestion(e,n):null},i.prototype.getAllTypesCore=function(t){var e=new Array;for(var r in this.creatorHash)(!t||this.creatorHash[r].showInToolbox)&&e.push(r);return e.sort()},i.Instance=new i,i}(),fu=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Yr=function(i){fu(t,i);function t(e){var r=i.call(this,e)||this;return r.createLocalizableString("format",r),r.registerPropertyChangedHandlers(["expression"],function(){r.expressionRunner&&(r.expressionRunner=r.createRunner())}),r.registerPropertyChangedHandlers(["format","currency","displayStyle"],function(){r.updateFormatedValue()}),r}return t.prototype.getType=function(){return"expression"},Object.defineProperty(t.prototype,"hasInput",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){return this.getLocalizableStringText("format","")},set:function(e){this.setLocalizableStringText("format",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locFormat",{get:function(){return this.getLocalizableString("format")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"expression",{get:function(){return this.getPropertyValue("expression","")},set:function(e){this.setPropertyValue("expression",e)},enumerable:!1,configurable:!0}),t.prototype.locCalculation=function(){this.expressionIsRunning=!0},t.prototype.unlocCalculation=function(){this.expressionIsRunning=!1},t.prototype.runCondition=function(e,r){i.prototype.runCondition.call(this,e,r),!(!this.expression||this.expressionIsRunning||!this.runIfReadOnly&&this.isReadOnly)&&(this.locCalculation(),this.expressionRunner||(this.expressionRunner=this.createRunner()),this.expressionRunner.run(e,r))},t.prototype.canCollectErrors=function(){return!0},t.prototype.hasRequiredError=function(){return!1},t.prototype.createRunner=function(){var e=this,r=this.createExpressionRunner(this.expression);return r.onRunComplete=function(n){e.value=e.roundValue(n),e.unlocCalculation()},r},Object.defineProperty(t.prototype,"maximumFractionDigits",{get:function(){return this.getPropertyValue("maximumFractionDigits")},set:function(e){e<-1||e>20||this.setPropertyValue("maximumFractionDigits",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minimumFractionDigits",{get:function(){return this.getPropertyValue("minimumFractionDigits")},set:function(e){e<-1||e>20||this.setPropertyValue("minimumFractionDigits",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"runIfReadOnly",{get:function(){return this.runIfReadOnlyValue===!0},set:function(e){this.runIfReadOnlyValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"formatedValue",{get:function(){return this.getPropertyValue("formatedValue","")},enumerable:!1,configurable:!0}),t.prototype.updateFormatedValue=function(){this.setPropertyValue("formatedValue",this.getDisplayValueCore(!1,this.value))},t.prototype.onValueChanged=function(){this.updateFormatedValue()},t.prototype.updateValueFromSurvey=function(e,r){i.prototype.updateValueFromSurvey.call(this,e,r),this.updateFormatedValue()},t.prototype.getDisplayValueCore=function(e,r){var n=r==null?this.defaultValue:r,o="";if(!this.isValueEmpty(n)){var s=this.getValueAsStr(n);o=this.format?this.format.format(s):s}return this.survey&&(o=this.survey.getExpressionDisplayValue(this,n,o)),o},Object.defineProperty(t.prototype,"displayStyle",{get:function(){return this.getPropertyValue("displayStyle")},set:function(e){this.setPropertyValue("displayStyle",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currency",{get:function(){return this.getPropertyValue("currency")},set:function(e){Yt().indexOf(e)<0||this.setPropertyValue("currency",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useGrouping",{get:function(){return this.getPropertyValue("useGrouping")},set:function(e){this.setPropertyValue("useGrouping",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"precision",{get:function(){return this.getPropertyValue("precision")},set:function(e){this.setPropertyValue("precision",e)},enumerable:!1,configurable:!0}),t.prototype.roundValue=function(e){if(e!==1/0)return this.precision<0||!P.isNumber(e)?e:parseFloat(e.toFixed(this.precision))},t.prototype.getValueAsStr=function(e){if(this.displayStyle=="date"){var r=new Date(e);if(!!r&&!!r.toLocaleDateString)return r.toLocaleDateString()}if(this.displayStyle!="none"&&P.isNumber(e)){var n=this.getLocale();n||(n="en");var o={style:this.displayStyle,currency:this.currency,useGrouping:this.useGrouping};return this.maximumFractionDigits>-1&&(o.maximumFractionDigits=this.maximumFractionDigits),this.minimumFractionDigits>-1&&(o.minimumFractionDigits=this.minimumFractionDigits),e.toLocaleString(n,o)}return e.toString()},t}(le);function Yt(){return["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BOV","BRL","BSD","BTN","BWP","BYN","BZD","CAD","CDF","CHE","CHF","CHW","CLF","CLP","CNY","COP","COU","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","INR","IQD","IRR","ISK","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRO","MUR","MVR","MWK","MXN","MXV","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLL","SOS","SRD","SSP","STD","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","USN","UYI","UYU","UZS","VEF","VND","VUV","WST","XAF","XAG","XAU","XBA","XBB","XBC","XBD","XCD","XDR","XOF","XPD","XPF","XPT","XSU","XTS","XUA","XXX","YER","ZAR","ZMW","ZWL"]}x.addClass("expression",["expression:expression",{name:"format",serializationProperty:"locFormat"},{name:"displayStyle",default:"none",choices:["none","decimal","currency","percent","date"]},{name:"currency",choices:function(){return Yt()},default:"USD",visibleIf:function(i){return i.displayStyle==="currency"}},{name:"maximumFractionDigits:number",default:-1},{name:"minimumFractionDigits:number",default:-1},{name:"useGrouping:boolean",default:!0},{name:"precision:number",default:-1,category:"data"},{name:"enableIf",visible:!1},{name:"isRequired",visible:!1},{name:"readOnly",visible:!1},{name:"requiredErrorText",visible:!1},{name:"defaultValueExpression",visible:!1},{name:"defaultValue",visible:!1},{name:"correctAnswer",visible:!1},{name:"requiredIf",visible:!1}],function(){return new Yr("")},"question"),Z.Instance.registerQuestion("expression",function(i){return new Yr(i)});var hu=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();function Xt(i,t,e,r){i.storeOthersAsComment=e?e.storeOthersAsComment:!1,(!i.choices||i.choices.length==0)&&i.choicesByUrl.isEmpty&&(i.choices=e.choices),i.choicesByUrl.isEmpty||i.choicesByUrl.run(r.getTextProcessor())}function du(i,t,e,r){Xt(i,t,e,r),!!i.locPlaceholder&&i.locPlaceholder.isEmpty&&!e.locPlaceholder.isEmpty&&(i.optionsCaption=e.optionsCaption)}var Xr={dropdown:{onCellQuestionUpdate:function(i,t,e,r){du(i,t,e,r)}},checkbox:{onCellQuestionUpdate:function(i,t,e,r){Xt(i,t,e,r),i.colCount=t.colCount>-1?t.colCount:e.columnColCount}},radiogroup:{onCellQuestionUpdate:function(i,t,e,r){Xt(i,t,e,r),i.colCount=t.colCount>-1?t.colCount:e.columnColCount}},tagbox:{onCellQuestionUpdate:function(i,t,e,r){Xt(i,t,e,r)}},text:{},comment:{},boolean:{onCellQuestionUpdate:function(i,t,e,r){i.renderAs=t.renderAs}},expression:{},rating:{}},Tt=function(i){hu(t,i);function t(e,r){r===void 0&&(r=null);var n=i.call(this)||this;return n.colOwnerValue=null,n.indexValue=-1,n._hasVisibleCell=!0,n.previousChoicesId=void 0,n.createLocalizableString("totalFormat",n),n.createLocalizableString("cellHint",n),n.registerPropertyChangedHandlers(["showInMultipleColumns"],function(){n.doShowInMultipleColumnsChanged()}),n.registerPropertyChangedHandlers(["visible"],function(){n.doColumnVisibilityChanged()}),n.updateTemplateQuestion(),n.name=e,r?n.title=r:n.templateQuestion.locTitle.strChanged(),n}return t.getColumnTypes=function(){var e=[];for(var r in Xr)e.push(r);return e},t.prototype.getOriginalObj=function(){return this.templateQuestion},t.prototype.getClassNameProperty=function(){return"cellType"},t.prototype.getSurvey=function(e){return this.colOwner?this.colOwner.survey:null},t.prototype.endLoadingFromJson=function(){var e=this;i.prototype.endLoadingFromJson.call(this),this.templateQuestion.autoOtherMode=this.isShowInMultipleColumns,this.templateQuestion.endLoadingFromJson(),this.templateQuestion.onGetSurvey=function(){return e.getSurvey()}},t.prototype.getDynamicPropertyName=function(){return"cellType"},t.prototype.getDynamicType=function(){return this.cellType==="default"?"question":this.calcCellQuestionType(null)},Object.defineProperty(t.prototype,"colOwner",{get:function(){return this.colOwnerValue},set:function(e){this.colOwnerValue=e,e&&(this.updateTemplateQuestion(),this.setParentQuestionToTemplate(this.templateQuestion))},enumerable:!1,configurable:!0}),t.prototype.locStrsChanged=function(){i.prototype.locStrsChanged.call(this),this.locTitle.strChanged()},t.prototype.addUsedLocales=function(e){i.prototype.addUsedLocales.call(this,e),this.templateQuestion.addUsedLocales(e)},Object.defineProperty(t.prototype,"index",{get:function(){return this.indexValue},enumerable:!1,configurable:!0}),t.prototype.setIndex=function(e){this.indexValue=e},t.prototype.getType=function(){return"matrixdropdowncolumn"},Object.defineProperty(t.prototype,"cellType",{get:function(){return this.getPropertyValue("cellType")},set:function(e){e=e.toLocaleLowerCase(),this.updateTemplateQuestion(e),this.setPropertyValue("cellType",e),this.colOwner&&this.colOwner.onColumnCellTypeChanged(this)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"templateQuestion",{get:function(){return this.templateQuestionValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.templateQuestion.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isColumnVisible",{get:function(){return this.isDesignMode?!0:this.visible&&this.hasVisibleCell},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this.templateQuestion.visible},set:function(e){this.templateQuestion.visible=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasVisibleCell",{get:function(){return this._hasVisibleCell},set:function(e){this._hasVisibleCell=e},enumerable:!1,configurable:!0}),t.prototype.getVisibleMultipleChoices=function(){var e=this.templateQuestion.visibleChoices;if(!Array.isArray(e))return[];if(!Array.isArray(this._visiblechoices))return e;for(var r=new Array,n=0;n<e.length;n++){var o=e[n];this._visiblechoices.indexOf(o.value)>-1&&r.push(o)}return r},Object.defineProperty(t.prototype,"getVisibleChoicesInCell",{get:function(){if(Array.isArray(this._visiblechoices))return this._visiblechoices;var e=this.templateQuestion.visibleChoices;return Array.isArray(e)?e:[]},enumerable:!1,configurable:!0}),t.prototype.setVisibleChoicesInCell=function(e){this._visiblechoices=e},Object.defineProperty(t.prototype,"isFilteredMultipleColumns",{get:function(){if(!this.showInMultipleColumns)return!1;var e=this.templateQuestion.choices;if(!Array.isArray(e))return!1;for(var r=0;r<e.length;r++)if(e[r].visibleIf)return!0;return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.templateQuestion.name},set:function(e){this.templateQuestion.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this.templateQuestion.title},set:function(e){this.templateQuestion.title=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTitle",{get:function(){return this.templateQuestion.locTitle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullTitle",{get:function(){return this.locTitle.textOrHtml},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRequired",{get:function(){return this.templateQuestion.isRequired},set:function(e){this.templateQuestion.isRequired=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRenderedRequired",{get:function(){return this.getPropertyValue("isRenderedRequired",this.isRequired)},set:function(e){this.setPropertyValue("isRenderedRequired",e)},enumerable:!1,configurable:!0}),t.prototype.updateIsRenderedRequired=function(e){this.isRenderedRequired=e||this.isRequired},Object.defineProperty(t.prototype,"requiredText",{get:function(){return this.isRenderedRequired&&this.getSurvey()?this.getSurvey().requiredText:this.templateQuestion.requiredText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredErrorText",{get:function(){return this.templateQuestion.requiredErrorText},set:function(e){this.templateQuestion.requiredErrorText=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locRequiredErrorText",{get:function(){return this.templateQuestion.locRequiredErrorText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"readOnly",{get:function(){return this.templateQuestion.readOnly},set:function(e){this.templateQuestion.readOnly=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasOther",{get:function(){return this.templateQuestion.hasOther},set:function(e){this.templateQuestion.hasOther=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visibleIf",{get:function(){return this.templateQuestion.visibleIf},set:function(e){this.templateQuestion.visibleIf=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enableIf",{get:function(){return this.templateQuestion.enableIf},set:function(e){this.templateQuestion.enableIf=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredIf",{get:function(){return this.templateQuestion.requiredIf},set:function(e){this.templateQuestion.requiredIf=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resetValueIf",{get:function(){return this.templateQuestion.resetValueIf},set:function(e){this.templateQuestion.resetValueIf=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultValueExpression",{get:function(){return this.templateQuestion.defaultValueExpression},set:function(e){this.templateQuestion.defaultValueExpression=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setValueIf",{get:function(){return this.templateQuestion.setValueIf},set:function(e){this.templateQuestion.setValueIf=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setValueExpression",{get:function(){return this.templateQuestion.setValueExpression},set:function(e){this.templateQuestion.setValueExpression=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isUnique",{get:function(){return this.getPropertyValue("isUnique")},set:function(e){this.setPropertyValue("isUnique",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showInMultipleColumns",{get:function(){return this.getPropertyValue("showInMultipleColumns")},set:function(e){this.setPropertyValue("showInMultipleColumns",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSupportMultipleColumns",{get:function(){return["checkbox","radiogroup"].indexOf(this.cellType)>-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowInMultipleColumns",{get:function(){return this.showInMultipleColumns&&this.isSupportMultipleColumns},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"validators",{get:function(){return this.templateQuestion.validators},set:function(e){this.templateQuestion.validators=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalType",{get:function(){return this.getPropertyValue("totalType")},set:function(e){this.setPropertyValue("totalType",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalExpression",{get:function(){return this.getPropertyValue("totalExpression")},set:function(e){this.setPropertyValue("totalExpression",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTotal",{get:function(){return this.totalType!="none"||!!this.totalExpression},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalFormat",{get:function(){return this.getLocalizableStringText("totalFormat","")},set:function(e){this.setLocalizableStringText("totalFormat",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTotalFormat",{get:function(){return this.getLocalizableString("totalFormat")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cellHint",{get:function(){return this.getLocalizableStringText("cellHint","")},set:function(e){this.setLocalizableStringText("cellHint",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locCellHint",{get:function(){return this.getLocalizableString("cellHint")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderAs",{get:function(){return this.getPropertyValue("renderAs")},set:function(e){this.setPropertyValue("renderAs",e),this.templateQuestion&&(this.templateQuestion.renderAs=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalMaximumFractionDigits",{get:function(){return this.getPropertyValue("totalMaximumFractionDigits")},set:function(e){e<-1||e>20||this.setPropertyValue("totalMaximumFractionDigits",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalMinimumFractionDigits",{get:function(){return this.getPropertyValue("totalMinimumFractionDigits")},set:function(e){e<-1||e>20||this.setPropertyValue("totalMinimumFractionDigits",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalDisplayStyle",{get:function(){return this.getPropertyValue("totalDisplayStyle")},set:function(e){this.setPropertyValue("totalDisplayStyle",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalAlignment",{get:function(){return this.getPropertyValue("totalAlignment")},set:function(e){this.setPropertyValue("totalAlignment",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalCurrency",{get:function(){return this.getPropertyValue("totalCurrency")},set:function(e){Yt().indexOf(e)<0||this.setPropertyValue("totalCurrency",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minWidth",{get:function(){return this.getPropertyValue("minWidth","")},set:function(e){this.setPropertyValue("minWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.templateQuestion.width},set:function(e){this.templateQuestion.width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"colCount",{get:function(){return this.getPropertyValue("colCount")},set:function(e){e<-1||e>4||this.setPropertyValue("colCount",e)},enumerable:!1,configurable:!0}),t.prototype.getLocale=function(){return this.colOwner?this.colOwner.getLocale():""},t.prototype.getMarkdownHtml=function(e,r){return this.colOwner?this.colOwner.getMarkdownHtml(e,r):void 0},t.prototype.getRenderer=function(e){return this.colOwner?this.colOwner.getRenderer(e):null},t.prototype.getRendererContext=function(e){return this.colOwner?this.colOwner.getRendererContext(e):e},t.prototype.getProcessedText=function(e){return this.colOwner?this.colOwner.getProcessedText(e):e},t.prototype.createCellQuestion=function(e){var r=this.calcCellQuestionType(e),n=this.createNewQuestion(r);return this.callOnCellQuestionUpdate(n,e),n},t.prototype.startLoadingFromJson=function(e){i.prototype.startLoadingFromJson.call(this,e),!!e&&!e.cellType&&!!e.choices&&(e.cellType=this.colOwner.getCellType())},t.prototype.updateCellQuestion=function(e,r,n){n===void 0&&(n=null),this.setQuestionProperties(e,n)},t.prototype.callOnCellQuestionUpdate=function(e,r){var n=e.getType(),o=Xr[n];o&&o.onCellQuestionUpdate&&o.onCellQuestionUpdate(e,this,this.colOwner,r)},t.prototype.defaultCellTypeChanged=function(){this.updateTemplateQuestion()},t.prototype.calcCellQuestionType=function(e){var r=this.getDefaultCellQuestionType();return!!e&&!!this.colOwner&&(r=this.colOwner.getCustomCellType(this,e,r)),r},t.prototype.getDefaultCellQuestionType=function(e){return e||(e=this.cellType),e!=="default"?e:this.colOwner?this.colOwner.getCellType():b.matrix.defaultCellType},t.prototype.updateTemplateQuestion=function(e){var r=this,n=this.getDefaultCellQuestionType(e),o=this.templateQuestion?this.templateQuestion.getType():"";n!==o&&(this.templateQuestion&&this.removeProperties(o),this.templateQuestionValue=this.createNewQuestion(n),this.templateQuestion.locOwner=this,this.addProperties(n),this.templateQuestion.onPropertyChanged.add(function(s,a){r.propertyValueChanged(a.name,a.oldValue,a.newValue)}),this.templateQuestion.onItemValuePropertyChanged.add(function(s,a){r.doItemValuePropertyChanged(a.propertyName,a.obj,a.name,a.newValue,a.oldValue)}),this.templateQuestion.isContentElement=!0,this.isLoadingFromJson||(this.templateQuestion.onGetSurvey=function(){return r.getSurvey()}),this.templateQuestion.locTitle.strChanged())},t.prototype.createNewQuestion=function(e){var r=x.createClass(e);return r||(r=x.createClass("text")),r.loadingOwner=this,r.isEditableTemplateElement=!0,r.autoOtherMode=this.isShowInMultipleColumns,this.setQuestionProperties(r),this.setParentQuestionToTemplate(r),r},t.prototype.setParentQuestionToTemplate=function(e){!!this.colOwner&&this.colOwner.isQuestion&&e.setParentQuestion(this.colOwner)},t.prototype.setQuestionProperties=function(e,r){var n=this;if(r===void 0&&(r=null),this.templateQuestion){var o=new ae().toJsonObject(this.templateQuestion,!0);if(r&&r(o),o.type=e.getType(),this.cellType==="default"&&!!this.colOwner&&this.colOwner.hasChoices()&&delete o.choices,delete o.itemComponent,this.jsonObj&&Object.keys(this.jsonObj).forEach(function(a){o[a]=n.jsonObj[a]}),o.choicesOrder==="random"){o.choicesOrder="none";var s=this.templateQuestion.visibleChoices;Array.isArray(s)&&(o.choices=s)}new ae().toObject(o,e),e.isContentElement=this.templateQuestion.isContentElement,this.previousChoicesId=void 0,e.loadedChoicesFromServerCallback=function(){if(!!n.isShowInMultipleColumns&&!(!!n.previousChoicesId&&n.previousChoicesId!==e.id)){n.previousChoicesId=e.id;var a=e.visibleChoices;n.templateQuestion.choices=a,n.propertyValueChanged("choices",a,a)}}}},t.prototype.propertyValueChanged=function(e,r,n){if(i.prototype.propertyValueChanged.call(this,e,r,n),e==="isRequired"&&this.updateIsRenderedRequired(n),!(!this.colOwner||this.isLoadingFromJson)){if(this.isShowInMultipleColumns){if(e==="choicesOrder")return;["visibleChoices","choices"].indexOf(e)>-1&&this.colOwner.onShowInMultipleColumnsChanged(this)}!x.hasOriginalProperty(this,e)||this.colOwner.onColumnPropertyChanged(this,e,n)}},t.prototype.doItemValuePropertyChanged=function(e,r,n,o,s){!x.hasOriginalProperty(r,n)||this.colOwner!=null&&!this.isLoadingFromJson&&this.colOwner.onColumnItemValuePropertyChanged(this,e,r,n,o,s)},t.prototype.doShowInMultipleColumnsChanged=function(){this.colOwner!=null&&this.colOwner.onShowInMultipleColumnsChanged(this),this.templateQuestion&&(this.templateQuestion.autoOtherMode=this.isShowInMultipleColumns)},t.prototype.doColumnVisibilityChanged=function(){this.colOwner!=null&&!this.isDesignMode&&this.colOwner.onColumnVisibilityChanged(this)},t.prototype.getProperties=function(e){return x.getDynamicPropertiesByObj(this,e)},t.prototype.removeProperties=function(e){for(var r=this.getProperties(e),n=0;n<r.length;n++){var o=r[n];delete this[o.name],o.serializationProperty&&delete this[o.serializationProperty]}},t.prototype.addProperties=function(e){var r=this.getProperties(e);x.addDynamicPropertiesIntoObj(this,this.templateQuestion,r)},t}(W);x.addClass("matrixdropdowncolumn",[{name:"!name",isUnique:!0},{name:"title",serializationProperty:"locTitle",dependsOn:"name",onPropertyEditorUpdate:function(i,t){!!i&&!!t&&(t.placeholder=i.name)}},{name:"cellHint",serializationProperty:"locCellHint",visible:!1},{name:"cellType",default:"default",choices:function(){var i=Tt.getColumnTypes();return i.splice(0,0,"default"),i}},{name:"colCount",default:-1,choices:[-1,0,1,2,3,4]},"isRequired:boolean","isUnique:boolean",{name:"requiredErrorText:text",serializationProperty:"locRequiredErrorText"},"readOnly:boolean",{name:"minWidth",onPropertyEditorUpdate:function(i,t){!!i&&!!t&&(t.value=i.minWidth)}},"width",{name:"visible:switch",default:!0,overridingProperty:"visibleIf"},"visibleIf:condition","enableIf:condition","requiredIf:condition","resetValueIf:condition","setValueIf:condition","setValueExpression:expression",{name:"showInMultipleColumns:boolean",dependsOn:"cellType",visibleIf:function(i){return i.isSupportMultipleColumns}},{name:"validators:validators",baseClassName:"surveyvalidator",classNamePart:"validator"},{name:"totalType",visibleIf:function(i){return!i.isShowInMultipleColumns},default:"none",choices:["none","sum","count","min","max","avg"]},{name:"totalExpression:expression",visibleIf:function(i){return!i.isShowInMultipleColumns}},{name:"totalFormat",serializationProperty:"locTotalFormat",visibleIf:function(i){return i.hasTotal}},{name:"totalDisplayStyle",visibleIf:function(i){return i.hasTotal},default:"none",choices:["none","decimal","currency","percent"]},{name:"totalAlignment",visibleIf:function(i){return i.hasTotal},default:"auto",choices:["auto","left","center","right"]},{name:"totalCurrency",visibleIf:function(i){return i.hasTotal},choices:function(){return Yt()},default:"USD"},{name:"totalMaximumFractionDigits:number",default:-1,visibleIf:function(i){return i.hasTotal}},{name:"totalMinimumFractionDigits:number",default:-1,visibleIf:function(i){return i.hasTotal}},{name:"renderAs",default:"default",visible:!1}],function(){return new Tt("")});var en=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),It=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},gu=function(i,t){for(var e=0,r=t.length,n=i.length;e<r;e++,n++)i[n]=t[e];return i},Ie=function(){function i(){this.minWidth="",this.width="",this.colSpans=1,this.isActionsCell=!1,this.isErrorsCell=!1,this.isDragHandlerCell=!1,this.isDetailRowCell=!1,this.classNameValue="",this.idValue=i.counter++}return Object.defineProperty(i.prototype,"requiredText",{get:function(){return this.column&&this.column.isRenderedRequired?this.column.requiredText:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasQuestion",{get:function(){return!!this.question&&!this.isErrorsCell},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasTitle",{get:function(){return!!this.locTitle},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasPanel",{get:function(){return!!this.panel},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"id",{get:function(){return this.idValue},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"item",{get:function(){return this.itemValue},set:function(t){this.itemValue=t,t&&(t.hideCaption=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isChoice",{get:function(){return!!this.item},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isItemChoice",{get:function(){return this.isChoice&&!this.isOtherChoice},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"choiceValue",{get:function(){return this.isChoice?this.item.value:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isCheckbox",{get:function(){return this.isItemChoice&&this.question.isDescendantOf("checkbox")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isRadio",{get:function(){return this.isItemChoice&&this.question.isDescendantOf("radiogroup")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isFirstChoice",{get:function(){return this.choiceIndex===0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"className",{get:function(){var t=new O().append(this.classNameValue);return this.hasQuestion&&t.append(this.question.cssClasses.hasError,this.question.errors.length>0).append(this.question.cssClasses.answered,this.question.isAnswered),t.toString()},set:function(t){this.classNameValue=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cellQuestionWrapperClassName",{get:function(){return this.cell.getQuestionWrapperClassName(this.matrix.cssClasses.cellQuestionWrapper)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showResponsiveTitle",{get:function(){var t;return this.hasQuestion&&((t=this.matrix)===null||t===void 0?void 0:t.isMobile)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"responsiveTitleCss",{get:function(){return new O().append(this.matrix.cssClasses.cellResponsiveTitle).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"responsiveLocTitle",{get:function(){return this.cell.column.locTitle},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headers",{get:function(){if(this.cell&&this.cell.column){if(this.matrix.IsMultiplyColumn(this.cell.column))return this.item?this.item.locText.renderedHtml:"";var t=this.cell.column.cellHint;return t?t.trim()===""?"":this.cell.column.locCellHint.renderedHtml:this.hasQuestion&&this.question.isVisible&&this.question.title?this.question.title:this.cell.column.title}return this.hasQuestion&&this.question.isVisible?this.question.locTitle.renderedHtml:this.hasTitle&&this.locTitle.renderedHtml||""},enumerable:!1,configurable:!0}),i.prototype.getTitle=function(){return this.matrix&&this.matrix.showHeader?this.headers:""},i.prototype.calculateFinalClassName=function(t){var e=this.cell.question.cssClasses,r=new O().append(e.itemValue,!!e).append(e.asCell,!!e);return r.append(t.cell,r.isEmpty()&&!!t).append(t.choiceCell,this.isChoice).toString()},i.prototype.focusIn=function(){this.question&&this.question.focusIn()},i.counter=1,i}(),tn=function(i){en(t,i);function t(e,r){r===void 0&&(r=!1);var n=i.call(this)||this;return n.cssClasses=e,n.isDetailRow=r,n.hasEndActions=!1,n.isErrorsRow=!1,n.cells=[],n.idValue=t.counter++,n}return Object.defineProperty(t.prototype,"id",{get:function(){return this.idValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){return this.row?{"data-sv-drop-target-matrix-row":this.row.id}:{}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){var e,r;return new O().append(this.cssClasses.row).append(this.cssClasses.detailRow,this.isDetailRow).append(this.cssClasses.rowHasPanel,(e=this.row)===null||e===void 0?void 0:e.hasPanel).append(this.cssClasses.expandedRow,((r=this.row)===null||r===void 0?void 0:r.isDetailPanelShowing)&&!this.isDetailRow).append(this.cssClasses.rowHasEndActions,this.hasEndActions).append(this.cssClasses.ghostRow,this.isGhostRow).append(this.cssClasses.rowAdditional,this.isAdditionalClasses).toString()},enumerable:!1,configurable:!0}),t.prototype.setRootElement=function(e){this.rootElement=e},t.prototype.getRootElement=function(){return this.rootElement},t.counter=1,It([y({defaultValue:!1})],t.prototype,"isGhostRow",void 0),It([y({defaultValue:!1})],t.prototype,"isAdditionalClasses",void 0),It([y({defaultValue:!0})],t.prototype,"visible",void 0),t}(W),go=function(i){en(t,i);function t(e){var r=i.call(this,e)||this;return r.isErrorsRow=!0,r}return Object.defineProperty(t.prototype,"attributes",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return new O().append(this.cssClasses.row).append(this.cssClasses.errorRow).toString()},enumerable:!1,configurable:!0}),t.prototype.onAfterCreated=function(){var e=this,r=function(){e.visible=e.cells.some(function(n){return n.question&&n.question.hasVisibleErrors})};this.cells.forEach(function(n){n.question&&n.question.registerFunctionOnPropertyValueChanged("hasVisibleErrors",r)}),r()},t}(tn),rn=function(i){en(t,i);function t(e){var r=i.call(this)||this;return r.matrix=e,r._renderedRows=[],r.renderedRowsAnimation=new Ge(r.getRenderedRowsAnimationOptions(),function(n){r._renderedRows=n},function(){return r._renderedRows}),r.hasActionCellInRowsValues={},r.build(),r}return t.prototype.getIsAnimationAllowed=function(){return i.prototype.getIsAnimationAllowed.call(this)&&this.matrix.animationAllowed},t.prototype.getRenderedRowsAnimationOptions=function(){var e=this,r=function(n){n.querySelectorAll(":scope > td > *").forEach(function(o){o.style.setProperty("--animation-height",o.offsetHeight+"px")})};return{isAnimationEnabled:function(){return e.animationAllowed},getRerenderEvent:function(){return e.onElementRerendered},getAnimatedElement:function(n){return n.getRootElement()},getLeaveOptions:function(){return{cssClass:e.cssClasses.rowFadeOut,onBeforeRunAnimation:r}},getEnterOptions:function(){return{cssClass:e.cssClasses.rowFadeIn,onBeforeRunAnimation:r}}}},t.prototype.updateRenderedRows=function(){this.renderedRows=this.rows},Object.defineProperty(t.prototype,"renderedRows",{get:function(){return this._renderedRows},set:function(e){this.renderedRowsAnimation.sync(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showTable",{get:function(){return this.getPropertyValue("showTable",!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showHeader",{get:function(){return this.getPropertyValue("showHeader")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showAddRow",{get:function(){return this.getPropertyValue("showAddRow",!1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showAddRowOnTop",{get:function(){return this.getPropertyValue("showAddRowOnTop",!1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showAddRowOnBottom",{get:function(){return this.getPropertyValue("showAddRowOnBottom",!1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showFooter",{get:function(){return this.matrix.hasFooter&&this.matrix.isColumnLayoutHorizontal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasFooter",{get:function(){return!!this.footerRow},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasRemoveRows",{get:function(){return this.hasRemoveRowsValue},enumerable:!1,configurable:!0}),t.prototype.isRequireReset=function(){return this.hasRemoveRows!=this.matrix.canRemoveRows||!this.matrix.isColumnLayoutHorizontal},Object.defineProperty(t.prototype,"headerRow",{get:function(){return this.headerRowValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"footerRow",{get:function(){return this.footerRowValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRowsDragAndDrop",{get:function(){return this.matrix.isRowsDragAndDrop&&this.matrix.isColumnLayoutHorizontal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showCellErrorsTop",{get:function(){return this.matrix.getErrorLocation()==="top"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showCellErrorsBottom",{get:function(){return this.matrix.getErrorLocation()==="bottom"},enumerable:!1,configurable:!0}),t.prototype.build=function(){this.hasRemoveRowsValue=this.matrix.canRemoveRows,this.matrix.visibleRows,this.cssClasses=this.matrix.cssClasses,this.buildRowsActions(),this.buildHeader(),this.buildRows(),this.buildFooter(),this.updateShowTableAndAddRow()},t.prototype.updateShowTableAndAddRow=function(){var e=this.rows.length>0||this.matrix.isDesignMode||!this.matrix.getShowColumnsIfEmpty();this.setPropertyValue("showTable",e);var r=this.matrix.canAddRow&&e,n=r,o=r;n&&(this.matrix.getAddRowLocation()==="default"?n=!this.matrix.isColumnLayoutHorizontal:n=this.matrix.getAddRowLocation()!=="bottom"),o&&this.matrix.getAddRowLocation()!=="topBottom"&&(o=!n),this.setPropertyValue("showAddRow",this.matrix.canAddRow),this.setPropertyValue("showAddRowOnTop",n),this.setPropertyValue("showAddRowOnBottom",o)},t.prototype.onAddedRow=function(e,r){if(!(this.getRenderedDataRowCount()>=this.matrix.visibleRows.length)){var n=this.getRenderedRowIndexByIndex(r);this.rowsActions.splice(r,0,this.buildRowActions(e)),this.addHorizontalRow(this.rows,e,this.matrix.visibleRows.length==1&&!this.matrix.showHeader,n),this.updateShowTableAndAddRow()}},t.prototype.getRenderedRowIndexByIndex=function(e){for(var r=0,n=0,o=0;o<this.rows.length;o++){if(n===e){(this.rows[o].isErrorsRow||this.rows[o].isDetailRow)&&r++;break}r++,!this.rows[o].isErrorsRow&&!this.rows[o].isDetailRow&&n++}return n<e?this.rows.length:r},t.prototype.getRenderedDataRowCount=function(){for(var e=0,r=0;r<this.rows.length;r++)!this.rows[r].isErrorsRow&&!this.rows[r].isDetailRow&&e++;return e},t.prototype.onRemovedRow=function(e){var r=this.getRenderedRowIndex(e);if(!(r<0)){this.rowsActions.splice(r,1);var n=1;r<this.rows.length-1&&this.showCellErrorsBottom&&this.rows[r+1].isErrorsRow&&n++,r<this.rows.length-1&&(this.rows[r+1].isDetailRow||this.showCellErrorsBottom&&r+1<this.rows.length-1&&this.rows[r+2].isDetailRow)&&n++,r>0&&this.showCellErrorsTop&&this.rows[r-1].isErrorsRow&&(r--,n++),this.rows.splice(r,n),this.updateShowTableAndAddRow()}},t.prototype.onDetailPanelChangeVisibility=function(e,r){var n=this.getRenderedRowIndex(e);if(!(n<0)){var o=n;this.showCellErrorsBottom&&o++;var s=o<this.rows.length-1&&this.rows[o+1].isDetailRow?o+1:-1;if(!(r&&s>-1||!r&&s<0))if(r){var a=this.createDetailPanelRow(e,this.rows[n]);this.rows.splice(o+1,0,a)}else this.rows.splice(s,1)}},t.prototype.getRenderedRowIndex=function(e){for(var r=0;r<this.rows.length;r++)if(this.rows[r].row==e)return r;return-1},t.prototype.buildRowsActions=function(){this.rowsActions=[];for(var e=this.matrix.visibleRows,r=0;r<e.length;r++)this.rowsActions.push(this.buildRowActions(e[r]))},t.prototype.createRenderedRow=function(e,r){return r===void 0&&(r=!1),new tn(e,r)},t.prototype.createErrorRenderedRow=function(e){return new go(e)},t.prototype.buildHeader=function(){var e=this.matrix.isColumnLayoutHorizontal&&this.matrix.showHeader,r=e||this.matrix.hasRowText&&!this.matrix.isColumnLayoutHorizontal;if(this.setPropertyValue("showHeader",r),!!r){if(this.headerRowValue=this.createRenderedRow(this.cssClasses),this.isRowsDragAndDrop&&this.headerRow.cells.push(this.createHeaderCell(null,"action")),this.hasActionCellInRows("start")&&this.headerRow.cells.push(this.createHeaderCell(null,"action")),this.matrix.hasRowText&&this.matrix.showHeader&&this.headerRow.cells.push(this.createHeaderCell(null)),this.matrix.isColumnLayoutHorizontal)for(var n=0;n<this.matrix.visibleColumns.length;n++){var o=this.matrix.visibleColumns[n];!o.isColumnVisible||(this.matrix.IsMultiplyColumn(o)?this.createMutlipleColumnsHeader(o):this.headerRow.cells.push(this.createHeaderCell(o)))}else{for(var s=this.matrix.visibleRows,n=0;n<s.length;n++){var a=this.createTextCell(s[n].locText);this.setHeaderCellCssClasses(a),a.row=s[n],this.headerRow.cells.push(a)}if(this.matrix.hasFooter){var a=this.createTextCell(this.matrix.getFooterText());this.setHeaderCellCssClasses(a),this.headerRow.cells.push(a)}}this.hasActionCellInRows("end")&&this.headerRow.cells.push(this.createHeaderCell(null,"action"))}},t.prototype.buildFooter=function(){if(!!this.showFooter){if(this.footerRowValue=this.createRenderedRow(this.cssClasses),this.isRowsDragAndDrop&&this.footerRow.cells.push(this.createHeaderCell(null)),this.hasActionCellInRows("start")&&this.footerRow.cells.push(this.createHeaderCell(null,"action")),this.matrix.hasRowText){var e=this.createTextCell(this.matrix.getFooterText());e.className=new O().append(e.className).append(this.cssClasses.footerTotalCell).toString(),this.footerRow.cells.push(e)}for(var r=this.matrix.visibleTotalRow.cells,n=0;n<r.length;n++){var o=r[n];if(!!o.column.isColumnVisible)if(this.matrix.IsMultiplyColumn(o.column))this.createMutlipleColumnsFooter(this.footerRow,o);else{var s=this.createEditCell(o);o.column&&this.setHeaderCellWidth(o.column,s),s.className=new O().append(s.className).append(this.cssClasses.footerCell).toString(),this.footerRow.cells.push(s)}}this.hasActionCellInRows("end")&&this.footerRow.cells.push(this.createHeaderCell(null,"action"))}},t.prototype.buildRows=function(){this.blockAnimations();var e=this.matrix.isColumnLayoutHorizontal?this.buildHorizontalRows():this.buildVerticalRows();this.rows=e,this.releaseAnimations()},t.prototype.hasActionCellInRows=function(e){return this.hasActionCellInRowsValues[e]===void 0&&(this.hasActionCellInRowsValues[e]=this.hasActionsCellInLocaltion(e)),this.hasActionCellInRowsValues[e]},t.prototype.hasActionsCellInLocaltion=function(e){var r=this;return e=="end"&&this.hasRemoveRows?!0:this.matrix.visibleRows.some(function(n,o){return!r.isValueEmpty(r.getRowActions(o,e))})},t.prototype.canRemoveRow=function(e){return this.matrix.canRemoveRow(e)},t.prototype.buildHorizontalRows=function(){for(var e=this.matrix.visibleRows,r=[],n=0;n<e.length;n++)this.addHorizontalRow(r,e[n],n==0&&!this.matrix.showHeader);return r},t.prototype.addHorizontalRow=function(e,r,n,o){o===void 0&&(o=-1);var s=this.createHorizontalRow(r,n),a=this.createErrorRow(s);if(s.row=r,o<0&&(o=e.length),this.matrix.isMobile){for(var l=[],u=0;u<s.cells.length;u++)this.showCellErrorsTop&&!a.cells[u].isEmpty&&l.push(a.cells[u]),l.push(s.cells[u]),this.showCellErrorsBottom&&!a.cells[u].isEmpty&&l.push(a.cells[u]);s.cells=l,e.splice(o,0,s)}else e.splice.apply(e,gu([o,0],this.showCellErrorsTop?[a,s]:[s,a])),o++;r.isDetailPanelShowing&&e.splice(o+1,0,this.createDetailPanelRow(r,s))},t.prototype.getRowDragCell=function(e){var r=new Ie,n=this.matrix.lockedRowCount;return r.isDragHandlerCell=n<1||e>=n,r.isEmpty=!r.isDragHandlerCell,r.className=this.getActionsCellClassName(r),r.row=this.matrix.visibleRows[e],r},t.prototype.getActionsCellClassName=function(e){var r=this;e===void 0&&(e=null);var n=new O().append(this.cssClasses.actionsCell).append(this.cssClasses.actionsCellDrag,e==null?void 0:e.isDragHandlerCell).append(this.cssClasses.detailRowCell,e==null?void 0:e.isDetailRowCell).append(this.cssClasses.verticalCell,!this.matrix.isColumnLayoutHorizontal);if(e.isActionsCell){var o=e.item.value.actions;this.cssClasses.actionsCellPrefix&&o.forEach(function(s){n.append(r.cssClasses.actionsCellPrefix+"--"+s.id)})}return n.toString()},t.prototype.getRowActionsCell=function(e,r,n){n===void 0&&(n=!1);var o=this.getRowActions(e,r);if(!this.isValueEmpty(o)){var s=new Ie,a=this.matrix.allowAdaptiveActions?new Ht:new Se;!!this.matrix.survey&&this.matrix.survey.getCss().actionBar&&(a.cssClasses=this.matrix.survey.getCss().actionBar),a.setItems(o);var l=new q(a);return s.item=l,s.isActionsCell=!0,s.isDragHandlerCell=!1,s.isDetailRowCell=n,s.className=this.getActionsCellClassName(s),s.row=this.matrix.visibleRows[e],s}return null},t.prototype.getRowActions=function(e,r){var n=this.rowsActions[e];return Array.isArray(n)?n.filter(function(o){return o.location||(o.location="start"),o.location===r}):[]},t.prototype.buildRowActions=function(e){var r=[];return this.setDefaultRowActions(e,r),this.matrix.survey&&(r=this.matrix.survey.getUpdatedMatrixRowActions(this.matrix,e,r)),r},Object.defineProperty(t.prototype,"showRemoveButtonAsIcon",{get:function(){return b.matrix.renderRemoveAsIcon&&this.matrix.survey&&this.matrix.survey.css.root==="sd-root-modern"},enumerable:!1,configurable:!0}),t.prototype.setDefaultRowActions=function(e,r){var n=this,o=this.matrix;this.hasRemoveRows&&this.canRemoveRow(e)&&(this.showRemoveButtonAsIcon?r.push(new G({id:"remove-row",iconName:"icon-delete",iconSize:"auto",component:"sv-action-bar-item",innerCss:new O().append(this.matrix.cssClasses.button).append(this.matrix.cssClasses.buttonRemove).toString(),location:"end",showTitle:!1,title:o.removeRowText,enabled:!o.isInputReadOnly,data:{row:e,question:o},action:function(){o.removeRowUI(e)}})):r.push(new G({id:"remove-row",location:"end",enabled:!this.matrix.isInputReadOnly,component:"sv-matrix-remove-button",data:{row:e,question:this.matrix}}))),e.hasPanel&&(this.matrix.isMobile?r.unshift(new G({id:"show-detail-mobile",title:"Show Details",showTitle:!0,location:"end",action:function(s){s.title=e.isDetailPanelShowing?n.matrix.getLocalizationString("showDetails"):n.matrix.getLocalizationString("hideDetails"),e.showHideDetailPanelClick()}})):r.push(new G({id:"show-detail",title:this.matrix.getLocalizationString("editText"),showTitle:!1,location:"start",component:"sv-matrix-detail-button",data:{row:e,question:this.matrix}})))},t.prototype.createErrorRow=function(e){for(var r=this.createErrorRenderedRow(this.cssClasses),n=0;n<e.cells.length;n++){var o=e.cells[n];o.hasQuestion?this.matrix.IsMultiplyColumn(o.cell.column)?o.isFirstChoice?r.cells.push(this.createErrorCell(o.cell)):r.cells.push(this.createEmptyCell(!0)):r.cells.push(this.createErrorCell(o.cell)):r.cells.push(this.createEmptyCell(!0))}return r.onAfterCreated(),r},t.prototype.createHorizontalRow=function(e,r){var n=this.createRenderedRow(this.cssClasses);if(this.isRowsDragAndDrop){var o=this.matrix.visibleRows.indexOf(e);n.cells.push(this.getRowDragCell(o))}if(this.addRowActionsCell(e,n,"start"),this.matrix.hasRowText){var s=this.createTextCell(e.locText);s.row=e,n.cells.push(s),this.setHeaderCellWidth(null,s),s.className=new O().append(s.className).append(this.cssClasses.rowTextCell).append(this.cssClasses.columnTitleCell,!this.matrix.isColumnLayoutHorizontal).append(this.cssClasses.detailRowText,e.hasPanel).toString()}for(var a=0;a<e.cells.length;a++){var l=e.cells[a];if(!!l.column.isColumnVisible)if(this.matrix.IsMultiplyColumn(l.column))this.createMutlipleEditCells(n,l);else{l.column.isShowInMultipleColumns&&l.question.visibleChoices.map(function(d){return d.hideCaption=!1});var s=this.createEditCell(l);n.cells.push(s),r&&this.setHeaderCellWidth(l.column,s)}}return this.addRowActionsCell(e,n,"end"),n},t.prototype.addRowActionsCell=function(e,r,n){var o=this.matrix.visibleRows.indexOf(e);if(this.hasActionCellInRows(n)){var s=this.getRowActionsCell(o,n,r.isDetailRow);if(s)r.cells.push(s),r.hasEndActions=!0;else{var a=new Ie;a.isEmpty=!0,a.isDetailRowCell=r.isDetailRow,r.cells.push(a)}}},t.prototype.createDetailPanelRow=function(e,r){var n=this.matrix.isDesignMode,o=this.createRenderedRow(this.cssClasses,!0);o.row=e;var s=new Ie;this.matrix.hasRowText&&(s.colSpans=2),s.isEmpty=!0,n||o.cells.push(s);var a=null;this.hasActionCellInRows("end")&&(a=new Ie,a.isEmpty=!0);var l=new Ie;return l.panel=e.detailPanel,l.colSpans=r.cells.length-(n?0:s.colSpans)-(a?a.colSpans:0),l.className=this.cssClasses.detailPanelCell,o.cells.push(l),a&&(this.matrix.isMobile?this.addRowActionsCell(e,o,"end"):o.cells.push(a)),typeof this.matrix.onCreateDetailPanelRenderedRowCallback=="function"&&this.matrix.onCreateDetailPanelRenderedRowCallback(o),o},t.prototype.buildVerticalRows=function(){for(var e=this.matrix.columns,r=[],n=0;n<e.length;n++){var o=e[n];if(o.isColumnVisible)if(this.matrix.IsMultiplyColumn(o))this.createMutlipleVerticalRows(r,o,n);else{var s=this.createVerticalRow(o,n),a=this.createErrorRow(s);this.showCellErrorsTop?(r.push(a),r.push(s)):(r.push(s),r.push(a))}}return this.hasActionCellInRows("end")&&r.push(this.createEndVerticalActionRow()),r},t.prototype.createMutlipleVerticalRows=function(e,r,n){var o=this.getMultipleColumnChoices(r);if(!!o)for(var s=0;s<o.length;s++){var a=this.createVerticalRow(r,n,o[s],s),l=this.createErrorRow(a);this.showCellErrorsTop?(e.push(l),e.push(a)):(e.push(a),e.push(l))}},t.prototype.createVerticalRow=function(e,r,n,o){n===void 0&&(n=null),o===void 0&&(o=-1);var s=this.createRenderedRow(this.cssClasses);if(this.matrix.showHeader){var a=n?n.locText:e.locTitle,l=this.createTextCell(a);l.column=e,l.className=new O().append(l.className).append(this.cssClasses.rowTextCell).append(this.cssClasses.columnTitleCell).toString(),s.cells.push(l)}for(var u=this.matrix.visibleRows,d=0;d<u.length;d++){var v=n,V=o>=0?o:d,E=u[d].cells[r],I=n?E.question.visibleChoices:void 0;!!I&&V<I.length&&(v=I[V]);var k=this.createEditCell(E,v);k.item=v,k.choiceIndex=V,s.cells.push(k)}return this.matrix.hasTotal&&s.cells.push(this.createEditCell(this.matrix.visibleTotalRow.cells[r])),s},t.prototype.createEndVerticalActionRow=function(){var e=this.createRenderedRow(this.cssClasses);this.matrix.showHeader&&e.cells.push(this.createEmptyCell());for(var r=this.matrix.visibleRows,n=0;n<r.length;n++)e.cells.push(this.getRowActionsCell(n,"end"));return this.matrix.hasTotal&&e.cells.push(this.createEmptyCell()),e},t.prototype.createMutlipleEditCells=function(e,r,n){n===void 0&&(n=!1);var o=n?this.getMultipleColumnChoices(r.column):r.question.visibleChoices;if(!!o)for(var s=0;s<o.length;s++){var a=this.createEditCell(r,n?void 0:o[s]);n||(this.setItemCellCssClasses(a),a.choiceIndex=s),e.cells.push(a)}},t.prototype.setItemCellCssClasses=function(e){e.className=new O().append(this.cssClasses.cell).append(this.cssClasses.itemCell).append(this.cssClasses.radioCell,e.isRadio).append(this.cssClasses.checkboxCell,e.isCheckbox).toString()},t.prototype.createEditCell=function(e,r){r===void 0&&(r=void 0);var n=new Ie;return n.cell=e,n.row=e.row,n.question=e.question,n.matrix=this.matrix,n.item=r,n.isOtherChoice=!!r&&!!e.question&&e.question.otherItem===r,n.className=n.calculateFinalClassName(this.cssClasses),n},t.prototype.createErrorCell=function(e,r){var n=new Ie;return n.question=e.question,n.row=e.row,n.matrix=this.matrix,n.isErrorsCell=!0,n.className=new O().append(this.cssClasses.cell).append(this.cssClasses.errorsCell).append(this.cssClasses.errorsCellTop,this.showCellErrorsTop).append(this.cssClasses.errorsCellBottom,this.showCellErrorsBottom).toString(),n},t.prototype.createMutlipleColumnsFooter=function(e,r){this.createMutlipleEditCells(e,r,!0)},t.prototype.createMutlipleColumnsHeader=function(e){var r=this.getMultipleColumnChoices(e);if(!!r)for(var n=0;n<r.length;n++){var o=this.createTextCell(r[n].locText);this.setHeaderCell(e,o),this.setHeaderCellCssClasses(o),this.headerRow.cells.push(o)}},t.prototype.getMultipleColumnChoices=function(e){var r=e.templateQuestion.choices;return!!r&&Array.isArray(r)&&r.length==0?[].concat(this.matrix.choices,e.getVisibleMultipleChoices()):(r=e.getVisibleMultipleChoices(),!r||!Array.isArray(r)?null:r)},t.prototype.setHeaderCellCssClasses=function(e,r){e.className=new O().append(this.cssClasses.headerCell).append(this.cssClasses.columnTitleCell,this.matrix.isColumnLayoutHorizontal).append(this.cssClasses.emptyCell,!!e.isEmpty).append(this.cssClasses.cell+"--"+r,!!r).toString()},t.prototype.createHeaderCell=function(e,r){r===void 0&&(r=null);var n=e?this.createTextCell(e.locTitle):this.createEmptyCell();return n.column=e,this.setHeaderCell(e,n),r||(r=!!e&&e.cellType!=="default"?e.cellType:this.matrix.cellType),this.setHeaderCellCssClasses(n,r),n},t.prototype.setHeaderCell=function(e,r){this.setHeaderCellWidth(e,r)},t.prototype.setHeaderCellWidth=function(e,r){r.minWidth=e!=null?this.matrix.getColumnWidth(e):this.matrix.getRowTitleWidth(),r.width=e!=null?e.width:this.matrix.getRowTitleWidth()},t.prototype.createTextCell=function(e){var r=new Ie;return r.locTitle=e,e&&e.strChanged(),this.cssClasses.cell&&(r.className=this.cssClasses.cell),r},t.prototype.createEmptyCell=function(e){e===void 0&&(e=!1);var r=this.createTextCell(null);return r.isEmpty=!0,r.className=new O().append(this.cssClasses.cell).append(this.cssClasses.emptyCell).append(this.cssClasses.errorsCell,e).toString(),r},It([ue({onPush:function(e,r,n){n.updateRenderedRows()},onRemove:function(e,r,n){n.updateRenderedRows()}})],t.prototype,"rows",void 0),It([ue()],t.prototype,"_renderedRows",void 0),t}(W),er=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),nn=function(){function i(t,e,r){this.column=t,this.row=e,this.data=r,this.questionValue=this.createQuestion(t,e,r),this.questionValue.updateCustomWidget(),this.updateCellQuestionTitleDueToAccessebility(e)}return i.prototype.updateCellQuestionTitleDueToAccessebility=function(t){var e=this;this.questionValue.locTitle.onGetTextCallback=function(r){if(!t||!t.getSurvey())return e.questionValue.title;var n=t.getAccessbilityText();return n?e.column.colOwner.getCellAriaLabel(n,e.questionValue.title):e.questionValue.title}},i.prototype.locStrsChanged=function(){this.question.locStrsChanged()},i.prototype.createQuestion=function(t,e,r){var n=this,o=r.createQuestion(this.row,this.column);return o.readOnlyCallback=function(){return!n.row.isRowEnabled()},o.validateValueCallback=function(){return r.validateCell(e,t.name,e.value)},Ae.getProperties(t.getType()).forEach(function(s){var a=s.name;t[a]!==void 0&&(o[a]=t[a])}),o},Object.defineProperty(i.prototype,"question",{get:function(){return this.questionValue},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this.question.value},set:function(t){this.question.value=t},enumerable:!1,configurable:!0}),i.prototype.getQuestionWrapperClassName=function(t){return t},i.prototype.runCondition=function(t,e){this.question.runCondition(t,e)},i}(),yu=function(i){er(t,i);function t(e,r,n){var o=i.call(this,e,r,n)||this;return o.column=e,o.row=r,o.data=n,o.updateCellQuestion(),o}return t.prototype.createQuestion=function(e,r,n){var o=x.createClass("expression");return o.setSurveyImpl(r),o},t.prototype.locStrsChanged=function(){this.updateCellQuestion(),i.prototype.locStrsChanged.call(this)},t.prototype.updateCellQuestion=function(){this.question.locCalculation(),this.column.updateCellQuestion(this.question,null,function(e){delete e.defaultValue}),this.question.expression=this.getTotalExpression(),this.question.format=this.column.totalFormat,this.question.currency=this.column.totalCurrency,this.question.displayStyle=this.column.totalDisplayStyle,this.question.maximumFractionDigits=this.column.totalMaximumFractionDigits,this.question.minimumFractionDigits=this.column.totalMinimumFractionDigits,this.question.unlocCalculation(),this.question.runIfReadOnly=!0},t.prototype.getQuestionWrapperClassName=function(e){var r=i.prototype.getQuestionWrapperClassName.call(this,e);if(!r)return r;this.question.expression&&this.question.expression!="''"&&(r+=" "+e+"--expression");var n=this.column.totalAlignment;return n==="auto"&&this.column.cellType==="dropdown"&&(n="left"),r+" "+e+"--"+n},t.prototype.getTotalExpression=function(){if(this.column.totalExpression)return this.column.totalExpression;if(this.column.totalType=="none")return"''";var e=this.column.totalType+"InArray";return J.Instance.hasFunction(e)?e+"({self}, '"+this.column.name+"')":""},t}(nn),mu=function(i){er(t,i);function t(e,r,n){var o=i.call(this,r)||this;return o.row=e,o.variableName=r,o.parentTextProcessor=n,o}return t.prototype.getParentTextProcessor=function(){return this.parentTextProcessor},Object.defineProperty(t.prototype,"survey",{get:function(){return this.row.getSurvey()},enumerable:!1,configurable:!0}),t.prototype.getValues=function(){return this.row.value},t.prototype.getQuestionByName=function(e){return this.row.getQuestionByName(e)},t.prototype.onCustomProcessText=function(e){return e.name==ht.IndexVariableName?(e.isExists=!0,e.value=this.row.rowIndex,!0):e.name==ht.RowValueVariableName?(e.isExists=!0,e.value=this.row.rowName,!0):!1},t}(Kr),ht=function(){function i(t,e){var r=this;this.isSettingValue=!1,this.detailPanelValue=null,this.cells=[],this.isCreatingDetailPanel=!1,this.data=t,this.subscribeToChanges(e),this.textPreProcessor=new mu(this,i.RowVariableName,t?t.getParentTextProcessor():null),this.showHideDetailPanelClick=function(){if(r.getSurvey().isDesignMode)return!0;r.showHideDetailPanel()},this.idValue=i.getId()}return i.getId=function(){return"srow_"+i.idCounter++},Object.defineProperty(i.prototype,"id",{get:function(){return this.idValue},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowName",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataName",{get:function(){return this.rowName},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this.rowName},enumerable:!1,configurable:!0}),i.prototype.isRowEnabled=function(){return!0},i.prototype.isRowHasEnabledCondition=function(){return!1},Object.defineProperty(i.prototype,"value",{get:function(){for(var t={},e=this.questions,r=0;r<e.length;r++){var n=e[r];n.isEmpty()||(t[n.getValueName()]=n.value),!!n.comment&&!!this.getSurvey()&&this.getSurvey().storeOthersAsComment&&(t[n.getValueName()+W.commentSuffix]=n.comment)}return t},set:function(t){this.isSettingValue=!0,this.subscribeToChanges(t);for(var e=this.questions,r=0;r<e.length;r++){var n=e[r],o=this.getCellValue(t,n.getValueName()),s=n.comment,a=t?t[n.getValueName()+W.commentSuffix]:"";a==null&&(a=""),n.updateValueFromSurvey(o),(!!a||this.isTwoValueEquals(s,n.comment))&&n.updateCommentFromSurvey(a),n.onSurveyValueChanged(o)}this.isSettingValue=!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"locText",{get:function(){return null},enumerable:!1,configurable:!0}),i.prototype.getAccessbilityText=function(){return this.locText&&this.locText.renderedHtml},Object.defineProperty(i.prototype,"hasPanel",{get:function(){return this.data?this.data.hasDetailPanel(this):!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"detailPanel",{get:function(){return this.detailPanelValue},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"detailPanelId",{get:function(){return this.detailPanel?this.detailPanel.id:""},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isDetailPanelShowing",{get:function(){return this.data?this.data.getIsDetailPanelShowing(this):!1},enumerable:!1,configurable:!0}),i.prototype.setIsDetailPanelShowing=function(t){!t&&this.detailPanel&&this.detailPanel.onHidingContent(),this.data&&this.data.setIsDetailPanelShowing(this,t),this.onDetailPanelShowingChanged&&this.onDetailPanelShowingChanged()},i.prototype.showHideDetailPanel=function(){this.isDetailPanelShowing?this.hideDetailPanel():this.showDetailPanel()},i.prototype.showDetailPanel=function(){this.ensureDetailPanel(),this.detailPanelValue&&this.setIsDetailPanelShowing(!0)},i.prototype.hideDetailPanel=function(t){t===void 0&&(t=!1),this.setIsDetailPanelShowing(!1),t&&(this.detailPanelValue=null)},i.prototype.ensureDetailPanel=function(){if(!this.isCreatingDetailPanel&&!(!!this.detailPanelValue||!this.hasPanel||!this.data)){this.isCreatingDetailPanel=!0,this.detailPanelValue=this.data.createRowDetailPanel(this);var t=this.detailPanelValue.questions,e=this.data.getRowValue(this.data.getRowIndex(this));if(!P.isValueEmpty(e))for(var r=0;r<t.length;r++){var n=t[r].getValueName(),o=this.editingObj?x.getObjPropertyValue(this.editingObj,n):e[n];P.isValueEmpty(o)||(t[r].value=o)}this.detailPanelValue.setSurveyImpl(this),this.isCreatingDetailPanel=!1}},i.prototype.getAllValues=function(){return this.value},i.prototype.getFilteredValues=function(){var t=this.data?this.data.getDataFilteredValues():{},e=this.validationValues;if(e)for(var r in e)t[r]=e[r];return t.row=this.getAllValues(),this.applyRowVariablesToValues(t,this.rowIndex),t},i.prototype.getFilteredProperties=function(){return{survey:this.getSurvey(),row:this}},i.prototype.applyRowVariablesToValues=function(t,e){t[i.IndexVariableName]=e,t[i.RowValueVariableName]=this.rowName},i.prototype.runCondition=function(t,e){this.data&&(t[i.OwnerVariableName]=this.data.value);var r=this.rowIndex;this.applyRowVariablesToValues(t,r);var n=P.createCopy(e);n[i.RowVariableName]=this;for(var o=r>0?this.data.getRowValue(this.rowIndex-1):this.value,s=0;s<this.cells.length;s++)s>0&&Fe(this.value,o),t[i.RowVariableName]=o,this.cells[s].runCondition(t,n);this.detailPanel&&this.detailPanel.runCondition(t,n),this.isRowHasEnabledCondition()&&this.onQuestionReadOnlyChanged()},i.prototype.getNamesWithDefaultValues=function(){var t=[];return this.questions.forEach(function(e){e.isValueDefault&&t.push(e.getValueName())}),t},i.prototype.clearValue=function(t){for(var e=this.questions,r=0;r<e.length;r++)e[r].clearValue(t)},i.prototype.onAnyValueChanged=function(t,e){for(var r=this.questions,n=0;n<r.length;n++)r[n].onAnyValueChanged(t,e)},i.prototype.getDataValueCore=function(t,e){var r=this.getSurvey();return r?r.getDataValueCore(t,e):t[e]},i.prototype.getValue=function(t){var e=this.getQuestionByName(t);return e?e.value:null},i.prototype.setValue=function(t,e){this.setValueCore(t,e,!1)},i.prototype.getVariable=function(t){},i.prototype.setVariable=function(t,e){},i.prototype.getComment=function(t){var e=this.getQuestionByName(t);return e?e.comment:""},i.prototype.setComment=function(t,e,r){this.setValueCore(t,e,!0)},i.prototype.findQuestionByName=function(t){if(!!t){var e=i.RowVariableName+".";if(t.indexOf(e)===0)return this.getQuestionByName(t.substring(e.length));var r=this.getSurvey();return r?r.getQuestionByName(t):null}},i.prototype.getEditingSurveyElement=function(){},i.prototype.setValueCore=function(t,e,r){if(!this.isSettingValue){this.updateQuestionsValue(t,e,r),r||this.updateSharedQuestionsValue(t,e);var n=this.value,o=r?t+W.commentSuffix:t,s=e,a=this.getQuestionByName(t),l=this.data.onRowChanging(this,o,n);if(!!a&&!this.isTwoValueEquals(l,s)&&(this.isSettingValue=!0,r?a.comment=l:a.value=l,this.isSettingValue=!1,n=this.value),!(this.data.isValidateOnValueChanging&&this.hasQuestonError(a))){var u=e==null&&!a||r&&!e&&!!a;this.data.onRowChanged(this,o,n,u),o&&this.runTriggers(tr.RowVariableName+"."+o,n),this.onAnyValueChanged(i.RowVariableName,"")}}},i.prototype.updateQuestionsValue=function(t,e,r){if(!!this.detailPanel){var n=this.getQuestionByColumnName(t),o=this.detailPanel.getQuestionByName(t);if(!(!n||!o)){var s=this.isTwoValueEquals(e,r?n.comment:n.value),a=s?o:n;this.isSettingValue=!0,r?a.comment=e:a.value=e,this.isSettingValue=!1}}},i.prototype.updateSharedQuestionsValue=function(t,e){var r=this.getQuestionsByValueName(t);if(r.length>1)for(var n=0;n<r.length;n++)P.isTwoValueEquals(r[n].value,e)||(this.isSettingValue=!0,r[n].updateValueFromSurvey(e),this.isSettingValue=!1)},i.prototype.runTriggers=function(t,e){!t||this.questions.forEach(function(r){return r.runTriggers(t,e)})},i.prototype.hasQuestonError=function(t){if(!t)return!1;if(t.hasErrors(!0,{isOnValueChanged:!this.data.isValidateOnValueChanging}))return!0;if(t.isEmpty())return!1;var e=this.getCellByColumnName(t.name);return!e||!e.column||!e.column.isUnique?!1:this.data.checkIfValueInRowDuplicated(this,t)},Object.defineProperty(i.prototype,"isEmpty",{get:function(){var t=this.value;if(P.isValueEmpty(t))return!0;for(var e in t)if(t[e]!==void 0&&t[e]!==null)return!1;return!0},enumerable:!1,configurable:!0}),i.prototype.getQuestionByColumn=function(t){var e=this.getCellByColumn(t);return e?e.question:null},i.prototype.getCellByColumn=function(t){for(var e=0;e<this.cells.length;e++)if(this.cells[e].column==t)return this.cells[e];return null},i.prototype.getCellByColumnName=function(t){for(var e=0;e<this.cells.length;e++)if(this.cells[e].column.name==t)return this.cells[e];return null},i.prototype.getQuestionByColumnName=function(t){var e=this.getCellByColumnName(t);return e?e.question:null},Object.defineProperty(i.prototype,"questions",{get:function(){for(var t=[],e=0;e<this.cells.length;e++)t.push(this.cells[e].question);for(var r=this.detailPanel?this.detailPanel.questions:[],e=0;e<r.length;e++)t.push(r[e]);return t},enumerable:!1,configurable:!0}),i.prototype.getQuestionByName=function(t){var e=this.getQuestionByColumnName(t);return e||(this.detailPanel?this.detailPanel.getQuestionByName(t):null)},i.prototype.getQuestionsByName=function(t){var e=[],r=this.getQuestionByColumnName(t);return r&&e.push(r),this.detailPanel&&(r=this.detailPanel.getQuestionByName(t),r&&e.push(r)),e},i.prototype.getQuestionsByValueName=function(t){for(var e=[],r=0;r<this.cells.length;r++){var n=this.cells[r];n.question&&n.question.getValueName()===t&&e.push(n.question)}return this.detailPanel&&(e=e.concat(this.detailPanel.getQuestionsByValueName(t))),e},i.prototype.getSharedQuestionByName=function(t){return this.data?this.data.getSharedQuestionByName(t,this):null},i.prototype.clearIncorrectValues=function(t){for(var e in t){var r=this.getQuestionByName(e);if(r){var n=r.value;r.clearIncorrectValues(),this.isTwoValueEquals(n,r.value)||this.setValue(e,r.value)}else!this.getSharedQuestionByName(e)&&e.indexOf(b.matrix.totalsSuffix)<0&&this.setValue(e,null)}},i.prototype.getLocale=function(){return this.data?this.data.getLocale():""},i.prototype.getMarkdownHtml=function(t,e){return this.data?this.data.getMarkdownHtml(t,e):void 0},i.prototype.getRenderer=function(t){return this.data?this.data.getRenderer(t):null},i.prototype.getRendererContext=function(t){return this.data?this.data.getRendererContext(t):t},i.prototype.getProcessedText=function(t){return this.data?this.data.getProcessedText(t):t},i.prototype.locStrsChanged=function(){for(var t=0;t<this.cells.length;t++)this.cells[t].locStrsChanged();this.detailPanel&&this.detailPanel.locStrsChanged()},i.prototype.updateCellQuestionOnColumnChanged=function(t,e,r){var n=this.getCellByColumn(t);!n||this.updateCellOnColumnChanged(n,e,r)},i.prototype.updateCellQuestionOnColumnItemValueChanged=function(t,e,r,n,o,s){var a=this.getCellByColumn(t);!a||this.updateCellOnColumnItemValueChanged(a,e,r,n,o,s)},i.prototype.onQuestionReadOnlyChanged=function(){for(var t=this.questions,e=0;e<t.length;e++){var r=t[e];r.setPropertyValue("isReadOnly",r.isReadOnly)}if(this.detailPanel){var n=!!this.data&&this.data.isMatrixReadOnly();this.detailPanel.readOnly=n||!this.isRowEnabled()}},i.prototype.hasErrors=function(t,e,r){var n=!1,o=this.cells;if(!o)return n;this.validationValues=e.validationValues;for(var s=0;s<o.length;s++)if(!!o[s]){var a=o[s].question;!a||!a.visible||(a.onCompletedAsyncValidators=function(u){r()},!(!!e&&e.isOnValueChanged===!0&&a.isEmpty())&&(n=a.hasErrors(t,e)||n))}if(this.hasPanel){this.ensureDetailPanel();var l=this.detailPanel.hasErrors(t,!1,e);!e.hideErroredPanel&&l&&t&&(e.isSingleDetailPanel&&(e.hideErroredPanel=!0),this.showDetailPanel()),n=l||n}return this.validationValues=void 0,n},i.prototype.updateCellOnColumnChanged=function(t,e,r){e==="choices"&&Array.isArray(r)&&r.length===0&&this.data&&(r=this.data.choices),t.question[e]=r},i.prototype.updateCellOnColumnItemValueChanged=function(t,e,r,n,o,s){var a=t.question[e];if(!!Array.isArray(a)){var l=n==="value"?s:r.value,u=q.getItemByValue(a,l);!u||(u[n]=o)}},i.prototype.buildCells=function(t){this.isSettingValue=!0;for(var e=this.data.columns,r=0;r<e.length;r++){var n=e[r],o=this.createCell(n);this.cells.push(o);var s=this.getCellValue(t,n.name);if(!P.isValueEmpty(s)){o.question.value=s;var a=n.name+W.commentSuffix;!!t&&!P.isValueEmpty(t[a])&&(o.question.comment=t[a])}}this.isSettingValue=!1},i.prototype.isTwoValueEquals=function(t,e){return P.isTwoValueEquals(t,e,!1,!0,!1)},i.prototype.getCellValue=function(t,e){return this.editingObj?x.getObjPropertyValue(this.editingObj,e):t?t[e]:void 0},i.prototype.createCell=function(t){return new nn(t,this,this.data)},i.prototype.getSurveyData=function(){return this},i.prototype.getSurvey=function(){return this.data?this.data.getSurvey():null},i.prototype.getTextProcessor=function(){return this.textPreProcessor},Object.defineProperty(i.prototype,"rowIndex",{get:function(){return this.data?this.data.getRowIndex(this)+1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editingObj",{get:function(){return this.editingObjValue},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){this.editingObj&&(this.editingObj.onPropertyChanged.remove(this.onEditingObjPropertyChanged),this.editingObjValue=null)},i.prototype.subscribeToChanges=function(t){var e=this;!t||!t.getType||!t.onPropertyChanged||t!==this.editingObj&&(this.editingObjValue=t,this.onEditingObjPropertyChanged=function(r,n){e.updateOnSetValue(n.name,n.newValue)},this.editingObj.onPropertyChanged.add(this.onEditingObjPropertyChanged))},i.prototype.updateOnSetValue=function(t,e){this.isSettingValue=!0;for(var r=this.getQuestionsByName(t),n=0;n<r.length;n++)r[n].value=e;this.isSettingValue=!1},i.RowVariableName="row",i.OwnerVariableName="self",i.IndexVariableName="rowIndex",i.RowValueVariableName="rowValue",i.idCounter=1,i}(),tr=function(i){er(t,i);function t(e){var r=i.call(this,e,null)||this;return r.buildCells(null),r}return t.prototype.createCell=function(e){return new yu(e,this,this.data)},t.prototype.setValue=function(e,r){!!this.data&&!this.isSettingValue&&this.data.onTotalValueChanged()},t.prototype.runCondition=function(e,r){var n=0,o;do o=P.getUnbindValue(this.value),i.prototype.runCondition.call(this,e,r),n++;while(!P.isTwoValueEquals(o,this.value)&&n<3)},t.prototype.updateCellOnColumnChanged=function(e,r,n){e.updateCellQuestion()},t}(ht),dt=function(i){er(t,i);function t(e){var r=i.call(this,e)||this;return r.isRowChanging=!1,r.lockResetRenderedTable=!1,r.isDoingonAnyValueChanged=!1,r.createItemValues("choices"),r.createLocalizableString("placeholder",r,!1,!0),r.createLocalizableString("keyDuplicationError",r,!1,!0),r.detailPanelValue=r.createNewDetailPanel(),r.detailPanel.selectedElementInDesign=r,r.detailPanel.renderWidth="100%",r.detailPanel.isInteractiveDesignElement=!1,r.detailPanel.showTitle=!1,r.registerPropertyChangedHandlers(["columns","cellType"],function(){r.updateColumnsAndRows()}),r.registerPropertyChangedHandlers(["placeholder","columnColCount","rowTitleWidth","choices"],function(){r.clearRowsAndResetRenderedTable()}),r.registerPropertyChangedHandlers(["transposeData","addRowLocation","hideColumnsIfEmpty","showHeader","minRowCount","isReadOnly","rowCount","hasFooter","detailPanelMode"],function(){r.resetRenderedTable()}),r.registerPropertyChangedHandlers(["isMobile"],function(){r.resetRenderedTable()}),r}return Object.defineProperty(t,"defaultCellType",{get:function(){return b.matrix.defaultCellType},set:function(e){b.matrix.defaultCellType=e},enumerable:!1,configurable:!0}),t.addDefaultColumns=function(e){for(var r=Z.DefaultColums,n=0;n<r.length;n++)e.addColumn(r[n])},t.prototype.createColumnValues=function(){var e=this;return this.createNewArray("columns",function(r){r.colOwner=e,e.onAddColumn&&e.onAddColumn(r),e.survey&&e.survey.matrixColumnAdded(e,r)},function(r){r.colOwner=null,e.onRemoveColumn&&e.onRemoveColumn(r)})},t.prototype.getType=function(){return"matrixdropdownbase"},t.prototype.dispose=function(){i.prototype.dispose.call(this),this.clearGeneratedRows()},Object.defineProperty(t.prototype,"hasSingleInput",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isContainer",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRowsDynamic",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isUpdateLocked",{get:function(){return this.isLoadingFromJson||this.isUpdating},enumerable:!1,configurable:!0}),t.prototype.beginUpdate=function(){this.isUpdating=!0},t.prototype.endUpdate=function(){this.isUpdating=!1,this.updateColumnsAndRows()},t.prototype.updateColumnsAndRows=function(){this.updateColumnsIndexes(this.columns),this.updateColumnsCellType(),this.generatedTotalRow=null,this.clearRowsAndResetRenderedTable()},t.prototype.itemValuePropertyChanged=function(e,r,n,o){i.prototype.itemValuePropertyChanged.call(this,e,r,n,o),e.ownerPropertyName==="choices"&&this.clearRowsAndResetRenderedTable()},Object.defineProperty(t.prototype,"transposeData",{get:function(){return this.getPropertyValue("transposeData")},set:function(e){this.setPropertyValue("transposeData",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columnLayout",{get:function(){return this.transposeData?"vertical":"horizontal"},set:function(e){this.transposeData=e==="vertical"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columnsLocation",{get:function(){return this.columnLayout},set:function(e){this.columnLayout=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"detailErrorLocation",{get:function(){return this.getPropertyValue("detailErrorLocation")},set:function(e){this.setPropertyValue("detailErrorLocation",e.toLowerCase())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cellErrorLocation",{get:function(){return this.getPropertyValue("cellErrorLocation")},set:function(e){this.setPropertyValue("cellErrorLocation",e.toLowerCase())},enumerable:!1,configurable:!0}),t.prototype.getChildErrorLocation=function(e){var r=e.parent?this.detailErrorLocation:this.cellErrorLocation;return r!=="default"?r:i.prototype.getChildErrorLocation.call(this,e)},Object.defineProperty(t.prototype,"isColumnLayoutHorizontal",{get:function(){return this.isMobile?!0:!this.transposeData},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isUniqueCaseSensitive",{get:function(){return this.isUniqueCaseSensitiveValue!==void 0?this.isUniqueCaseSensitiveValue:b.comparator.caseSensitive},set:function(e){this.isUniqueCaseSensitiveValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"detailPanelMode",{get:function(){return this.getPropertyValue("detailPanelMode")},set:function(e){this.setPropertyValue("detailPanelMode",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"detailPanel",{get:function(){return this.detailPanelValue},enumerable:!1,configurable:!0}),t.prototype.getPanel=function(){return this.detailPanel},Object.defineProperty(t.prototype,"detailElements",{get:function(){return this.detailPanel.elements},enumerable:!1,configurable:!0}),t.prototype.createNewDetailPanel=function(){return x.createClass("panel")},Object.defineProperty(t.prototype,"hasRowText",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getFooterText=function(){return null},Object.defineProperty(t.prototype,"canAddRow",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canRemoveRows",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.canRemoveRow=function(e){return!0},t.prototype.onPointerDown=function(e,r){},t.prototype.onRowsChanged=function(){this.resetRenderedTable(),i.prototype.onRowsChanged.call(this)},t.prototype.onStartRowAddingRemoving=function(){this.lockResetRenderedTable=!0,this.setValueChangedDirectly(!0)},t.prototype.onEndRowAdding=function(){if(this.lockResetRenderedTable=!1,!!this.renderedTable)if(this.renderedTable.isRequireReset())this.resetRenderedTable();else{var e=this.visibleRows.length-1;this.renderedTable.onAddedRow(this.visibleRows[e],e)}},t.prototype.onEndRowRemoving=function(e){this.lockResetRenderedTable=!1,this.renderedTable.isRequireReset()?this.resetRenderedTable():e&&this.renderedTable.onRemovedRow(e)},Object.defineProperty(t.prototype,"renderedTableValue",{get:function(){return this.getPropertyValue("renderedTable",null)},set:function(e){this.setPropertyValue("renderedTable",e)},enumerable:!1,configurable:!0}),t.prototype.clearRowsAndResetRenderedTable=function(){this.clearGeneratedRows(),this.resetRenderedTable(),this.fireCallback(this.columnsChangedCallback)},t.prototype.resetRenderedTable=function(){this.lockResetRenderedTable||this.isUpdateLocked||(this.renderedTableValue=null,this.fireCallback(this.onRenderedTableResetCallback))},t.prototype.clearGeneratedRows=function(){if(!!this.generatedVisibleRows){for(var e=0;e<this.generatedVisibleRows.length;e++)this.generatedVisibleRows[e].dispose();i.prototype.clearGeneratedRows.call(this)}},Object.defineProperty(t.prototype,"isRendredTableCreated",{get:function(){return!!this.renderedTableValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedTable",{get:function(){return this.renderedTableValue||(this.renderedTableValue=this.createRenderedTable(),this.onRenderedTableCreatedCallback&&this.onRenderedTableCreatedCallback(this.renderedTableValue)),this.renderedTableValue},enumerable:!1,configurable:!0}),t.prototype.createRenderedTable=function(){return new rn(this)},t.prototype.onMatrixRowCreated=function(e){if(!!this.survey)for(var r={rowValue:e.value,row:e,column:null,columnName:null,cell:null,cellQuestion:null,value:null},n=0;n<this.visibleColumns.length;n++){r.column=this.visibleColumns[n],r.columnName=r.column.name;var o=e.cells[n];r.cell=o,r.cellQuestion=o.question,r.value=o.value,this.onCellCreatedCallback&&this.onCellCreatedCallback(r),this.survey.matrixCellCreated(this,r)}},Object.defineProperty(t.prototype,"cellType",{get:function(){return this.getPropertyValue("cellType",b.matrix.defaultCellType)},set:function(e){e=e.toLowerCase(),this.setPropertyValue("cellType",e)},enumerable:!1,configurable:!0}),t.prototype.isSelectCellType=function(){return x.isDescendantOf(this.cellType,"selectbase")},t.prototype.updateColumnsCellType=function(){for(var e=0;e<this.columns.length;e++)this.columns[e].defaultCellTypeChanged()},t.prototype.updateColumnsIndexes=function(e){for(var r=0;r<e.length;r++)e[r].setIndex(r)},Object.defineProperty(t.prototype,"columnColCount",{get:function(){return this.getPropertyValue("columnColCount")},set:function(e){e<0||e>4||this.setPropertyValue("columnColCount",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"horizontalScroll",{get:function(){return this.getPropertyValue("horizontalScroll")},set:function(e){this.setPropertyValue("horizontalScroll",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowAdaptiveActions",{get:function(){return this.getPropertyValue("allowAdaptiveActions")},set:function(e){this.setPropertyValue("allowAdaptiveActions",e),this.detailPanel&&(this.detailPanel.allowAdaptiveActions=e)},enumerable:!1,configurable:!0}),t.prototype.getRequiredText=function(){return this.survey?this.survey.requiredText:""},t.prototype.hasChoices=function(){return this.choices.length>0},t.prototype.onColumnPropertyChanged=function(e,r,n){if(this.updateHasFooter(),!!this.generatedVisibleRows){for(var o=0;o<this.generatedVisibleRows.length;o++)this.generatedVisibleRows[o].updateCellQuestionOnColumnChanged(e,r,n);this.generatedTotalRow&&this.generatedTotalRow.updateCellQuestionOnColumnChanged(e,r,n),this.onColumnsChanged(),r=="isRequired"&&this.resetRenderedTable()}},t.prototype.onColumnItemValuePropertyChanged=function(e,r,n,o,s,a){if(!!this.generatedVisibleRows)for(var l=0;l<this.generatedVisibleRows.length;l++)this.generatedVisibleRows[l].updateCellQuestionOnColumnItemValueChanged(e,r,n,o,s,a)},t.prototype.onShowInMultipleColumnsChanged=function(e){this.resetTableAndRows()},t.prototype.onColumnVisibilityChanged=function(e){this.resetTableAndRows()},t.prototype.onColumnCellTypeChanged=function(e){this.resetTableAndRows()},t.prototype.resetTableAndRows=function(){this.clearGeneratedRows(),this.resetRenderedTable()},t.prototype.getRowTitleWidth=function(){return""},Object.defineProperty(t.prototype,"hasFooter",{get:function(){return this.getPropertyValue("hasFooter",!1)},enumerable:!1,configurable:!0}),t.prototype.getAddRowLocation=function(){return"default"},t.prototype.getShowColumnsIfEmpty=function(){return!1},t.prototype.updateShowTableAndAddRow=function(){this.renderedTable&&this.renderedTable.updateShowTableAndAddRow()},t.prototype.updateHasFooter=function(){this.setPropertyValue("hasFooter",this.hasTotal)},Object.defineProperty(t.prototype,"hasTotal",{get:function(){for(var e=0;e<this.columns.length;e++)if(this.columns[e].hasTotal)return!0;return!1},enumerable:!1,configurable:!0}),t.prototype.getCellType=function(){return this.cellType},t.prototype.getCustomCellType=function(e,r,n){if(!this.survey)return n;var o={rowValue:r.value,row:r,column:e,columnName:e.name,cellType:n};return this.survey.matrixCellCreating(this,o),o.cellType},t.prototype.getConditionJson=function(e,r){if(e===void 0&&(e=null),r===void 0&&(r=null),!r)return i.prototype.getConditionJson.call(this,e);for(var n="",o=r.length-1;o>=0&&r[o]!=".";o--)n=r[o]+n;var s=void 0,a=this.getColumnByName(n);return a?s=a.createCellQuestion(null):this.detailPanelMode!=="none"&&(s=this.detailPanel.getQuestionByName(n)),s?s.getConditionJson(e):null},t.prototype.clearIncorrectValues=function(){var e=this.visibleRows;if(!!e)for(var r=0;r<e.length;r++)e[r].clearIncorrectValues(this.getRowValue(r))},t.prototype.clearErrors=function(){i.prototype.clearErrors.call(this),this.runFuncForCellQuestions(function(e){e.clearErrors()})},t.prototype.localeChanged=function(){i.prototype.localeChanged.call(this),this.runFuncForCellQuestions(function(e){e.localeChanged()})},t.prototype.runFuncForCellQuestions=function(e){if(this.generatedVisibleRows)for(var r=0;r<this.generatedVisibleRows.length;r++)for(var n=this.generatedVisibleRows[r],o=0;o<n.cells.length;o++)e(n.cells[o].question)},t.prototype.runCondition=function(e,r){i.prototype.runCondition.call(this,e,r);var n=0,o;do o=P.getUnbindValue(this.totalValue),this.runCellsCondition(e,r),this.runTotalsCondition(e,r),n++;while(!P.isTwoValueEquals(o,this.totalValue)&&n<3)},t.prototype.runTriggers=function(e,r){i.prototype.runTriggers.call(this,e,r),this.runFuncForCellQuestions(function(n){n.runTriggers(e,r)})},t.prototype.shouldRunColumnExpression=function(){return!1},t.prototype.runCellsCondition=function(e,r){if(!!this.generatedVisibleRows){for(var n=this.getRowConditionValues(e),o=this.generatedVisibleRows,s=0;s<o.length;s++)o[s].runCondition(n,r);this.checkColumnsVisibility(),this.checkColumnsRenderedRequired()}},t.prototype.checkColumnsVisibility=function(){if(!this.isDesignMode){for(var e=!1,r=0;r<this.visibleColumns.length;r++){var n=this.visibleColumns[r];!n.visibleIf&&!n.isFilteredMultipleColumns||(e=this.isColumnVisibilityChanged(n)||e)}e&&this.resetRenderedTable()}},t.prototype.checkColumnsRenderedRequired=function(){for(var e=this.generatedVisibleRows,r=0;r<this.visibleColumns.length;r++){var n=this.visibleColumns[r];if(!!n.requiredIf){for(var o=e.length>0,s=0;s<e.length;s++)if(!e[s].cells[r].question.isRequired){o=!1;break}n.updateIsRenderedRequired(o)}}},t.prototype.isColumnVisibilityChanged=function(e){for(var r=e.isColumnVisible,n=e.isFilteredMultipleColumns,o=n?e.getVisibleChoicesInCell:[],s=new Array,a=!1,l=this.generatedVisibleRows,u=0;u<l.length;u++){var d=l[u].cells[e.index],v=d==null?void 0:d.question;if(!!v&&v.isVisible)if(a=!0,n)this.updateNewVisibleChoices(v,s);else break}return e.hasVisibleCell=a,n&&(e.setVisibleChoicesInCell(s),!P.isArraysEqual(o,s,!0,!1,!1))?!0:r!==e.isColumnVisible},t.prototype.updateNewVisibleChoices=function(e,r){var n=e.visibleChoices;if(!!Array.isArray(n))for(var o=0;o<n.length;o++){var s=n[o];r.indexOf(s.value)<0&&r.push(s.value)}},t.prototype.runTotalsCondition=function(e,r){!this.generatedTotalRow||this.generatedTotalRow.runCondition(this.getRowConditionValues(e),r)},t.prototype.getRowConditionValues=function(e){var r=e;r||(r={});var n={};return this.isValueEmpty(this.totalValue)||(n=JSON.parse(JSON.stringify(this.totalValue))),r.row={},r.totalRow=n,r},t.prototype.IsMultiplyColumn=function(e){return e.isShowInMultipleColumns&&!this.isMobile},t.prototype.locStrsChanged=function(){i.prototype.locStrsChanged.call(this);for(var e=this.columns,r=0;r<e.length;r++)e[r].locStrsChanged();var n=this.generatedVisibleRows;if(!!n){for(var r=0;r<n.length;r++)n[r].locStrsChanged();this.generatedTotalRow&&this.generatedTotalRow.locStrsChanged()}},t.prototype.getColumnByName=function(e){for(var r=0;r<this.columns.length;r++)if(this.columns[r].name==e)return this.columns[r];return null},t.prototype.getColumnName=function(e){return this.getColumnByName(e)},t.prototype.getColumnWidth=function(e){var r;return e.minWidth?e.minWidth:this.columnMinWidth?this.columnMinWidth:((r=b.matrix.columnWidthsByType[e.cellType])===null||r===void 0?void 0:r.minWidth)||""},Object.defineProperty(t.prototype,"choices",{get:function(){return this.getPropertyValue("choices")},set:function(e){this.setPropertyValue("choices",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"placeholder",{get:function(){return this.getLocalizableStringText("placeholder")},set:function(e){this.setLocalizableStringText("placeholder",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPlaceholder",{get:function(){return this.getLocalizableString("placeholder")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"optionsCaption",{get:function(){return this.placeholder},set:function(e){this.placeholder=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keyDuplicationError",{get:function(){return this.getLocalizableStringText("keyDuplicationError")},set:function(e){this.setLocalizableStringText("keyDuplicationError",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locKeyDuplicationError",{get:function(){return this.getLocalizableString("keyDuplicationError")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storeOthersAsComment",{get:function(){return this.survey?this.survey.storeOthersAsComment:!1},enumerable:!1,configurable:!0}),t.prototype.addColumn=function(e,r){r===void 0&&(r=null);var n=new Tt(e,r);return this.columns.push(n),n},t.prototype.getVisibleRows=function(){var e=this;return this.isUpdateLocked?null:(this.generatedVisibleRows||(this.generatedVisibleRows=this.generateRows(),this.generatedVisibleRows.forEach(function(r){return e.onMatrixRowCreated(r)}),this.data&&this.runCellsCondition(this.data.getFilteredValues(),this.data.getFilteredProperties()),this.updateValueOnRowsGeneration(this.generatedVisibleRows),this.updateIsAnswered()),this.generatedVisibleRows)},t.prototype.updateValueOnRowsGeneration=function(e){for(var r=this.createNewValue(!0),n=this.createNewValue(),o=0;o<e.length;o++){var s=e[o];if(!s.editingObj){var a=this.getRowValue(o),l=s.value;this.isTwoValueEquals(a,l)||(n=this.getNewValueOnRowChanged(s,"",l,!1,n).value)}}this.isTwoValueEquals(r,n)||(this.isRowChanging=!0,this.setNewValue(n),this.isRowChanging=!1)},Object.defineProperty(t.prototype,"totalValue",{get:function(){return!this.hasTotal||!this.visibleTotalRow?{}:this.visibleTotalRow.value},enumerable:!1,configurable:!0}),t.prototype.getVisibleTotalRow=function(){if(this.isUpdateLocked)return null;if(this.hasTotal){if(!this.generatedTotalRow&&(this.generatedTotalRow=this.generateTotalRow(),this.data)){var e={survey:this.survey};this.runTotalsCondition(this.data.getAllValues(),e)}}else this.generatedTotalRow=null;return this.generatedTotalRow},Object.defineProperty(t.prototype,"visibleTotalRow",{get:function(){return this.getVisibleTotalRow()},enumerable:!1,configurable:!0}),t.prototype.onSurveyLoad=function(){i.prototype.onSurveyLoad.call(this),this.updateColumnsIndexes(this.columns),this.clearGeneratedRows(),this.generatedTotalRow=null,this.updateHasFooter()},t.prototype.getRowValue=function(e){if(e<0)return null;var r=this.visibleRows;if(e>=r.length)return null;var n=this.createNewValue();return this.getRowValueCore(r[e],n)},t.prototype.checkIfValueInRowDuplicated=function(e,r){return this.generatedVisibleRows?this.isValueInColumnDuplicated(r.name,!0,e):!1},t.prototype.setRowValue=function(e,r){if(e<0)return null;var n=this.visibleRows;if(e>=n.length)return null;n[e].value=r,this.onRowChanged(n[e],"",r,!1)},t.prototype.generateRows=function(){return null},t.prototype.generateTotalRow=function(){return new tr(this)},t.prototype.createNewValue=function(e){e===void 0&&(e=!1);var r=this.value?this.createValueCopy():{};return e&&this.isMatrixValueEmpty(r)?null:r},t.prototype.getRowValueCore=function(e,r,n){n===void 0&&(n=!1);var o=!!r&&!!r[e.rowName]?r[e.rowName]:null;return!o&&n&&(o={},r&&(r[e.rowName]=o)),o},t.prototype.getRowObj=function(e){var r=this.getRowValueCore(e,this.value);return!!r&&!!r.getType?r:null},t.prototype.getRowDisplayValue=function(e,r,n){if(!n||r.editingObj)return n;for(var o=Object.keys(n),s=0;s<o.length;s++){var a=o[s],l=r.getQuestionByName(a);if(l||(l=this.getSharedQuestionByName(a,r)),l){var u=l.getDisplayValue(e,n[a]);e&&!!l.title&&l.title!==a?(n[l.title]=u,delete n[a]):n[a]=u}}return n},t.prototype.getPlainData=function(e){var r=this;e===void 0&&(e={includeEmpty:!0});var n=i.prototype.getPlainData.call(this,e);if(n){n.isNode=!0;var o=Array.isArray(n.data)?[].concat(n.data):[];n.data=this.visibleRows.map(function(s){var a={name:s.dataName,title:s.text,value:s.value,displayValue:r.getRowDisplayValue(!1,s,s.value),getString:function(l){return typeof l=="object"?JSON.stringify(l):l},isNode:!0,data:s.cells.map(function(l){return l.question.getPlainData(e)}).filter(function(l){return!!l})};return(e.calculations||[]).forEach(function(l){a[l.propertyName]=s[l.propertyName]}),a}),n.data=n.data.concat(o)}return n},t.prototype.addConditionObjectsByContext=function(e,r){var n=[].concat(this.columns);this.detailPanelMode!=="none"&&(n=n.concat(this.detailPanel.questions));var o=!!r&&n.indexOf(r)>-1,s=r===!0||o,a=this.getConditionObjectsRowIndeces();s&&a.push(-1);for(var l=0;l<a.length;l++){var u=a[l],d=u>-1?this.getConditionObjectRowName(u):"row";if(!!d)for(var v=u>-1?this.getConditionObjectRowText(u):"row",V=u>-1||r===!0,E=V&&u===-1?".":"",I=(V?this.getValueName():"")+E+d+".",k=(V?this.processedTitle:"")+E+v+".",N=0;N<n.length;N++){var j=n[N];if(!(u===-1&&r===j)){var H={name:I+j.name,text:k+j.fullTitle,question:this};u===-1&&r===!0?H.context=this:o&&I.startsWith("row.")&&(H.context=r),e.push(H)}}}},t.prototype.onHidingContent=function(){i.prototype.onHidingContent.call(this);var e=[];this.collectNestedQuestions(e,!0),e.forEach(function(r){return r.onHidingContent()})},t.prototype.getIsReadyNestedQuestions=function(){if(!this.generatedVisibleRows)return[];var e=new Array;return this.collectNestedQuestonsInRows(this.generatedVisibleRows,e,!1),this.generatedTotalRow&&this.collectNestedQuestonsInRows([this.generatedTotalRow],e,!1),e},t.prototype.collectNestedQuestionsCore=function(e,r){this.collectNestedQuestonsInRows(this.visibleRows,e,r)},t.prototype.collectNestedQuestonsInRows=function(e,r,n){!Array.isArray(e)||e.forEach(function(o){o.questions.forEach(function(s){return s.collectNestedQuestions(r,n)})})},t.prototype.getConditionObjectRowName=function(e){return""},t.prototype.getConditionObjectRowText=function(e){return this.getConditionObjectRowName(e)},t.prototype.getConditionObjectsRowIndeces=function(){return[]},t.prototype.getProgressInfo=function(){if(this.generatedVisibleRows)return de.getProgressInfoByElements(this.getCellQuestions(),this.isRequired);var e=W.createProgressInfo();return this.updateProgressInfoByValues(e),e.requiredQuestionCount===0&&this.isRequired&&(e.requiredQuestionCount=1,e.requiredAnsweredQuestionCount=this.isEmpty()?0:1),e},t.prototype.updateProgressInfoByValues=function(e){},t.prototype.updateProgressInfoByRow=function(e,r){for(var n=0;n<this.columns.length;n++){var o=this.columns[n];if(!!o.templateQuestion.hasInput){var s=!P.isValueEmpty(r[o.name]);!s&&!!o.templateQuestion.visibleIf||(e.questionCount+=1,e.requiredQuestionCount+=o.isRequired,e.answeredQuestionCount+=s?1:0,e.requiredAnsweredQuestionCount+=s&&o.isRequired?1:0)}}},t.prototype.getCellQuestions=function(){var e=[];return this.runFuncForCellQuestions(function(r){e.push(r)}),e},t.prototype.onBeforeValueChanged=function(e){},t.prototype.onSetQuestionValue=function(){if(!this.isRowChanging&&(this.onBeforeValueChanged(this.value),!(!this.generatedVisibleRows||this.generatedVisibleRows.length==0))){this.isRowChanging=!0;for(var e=this.createNewValue(),r=0;r<this.generatedVisibleRows.length;r++){var n=this.generatedVisibleRows[r];this.generatedVisibleRows[r].value=this.getRowValueCore(n,e)}this.isRowChanging=!1}},t.prototype.setQuestionValue=function(e){i.prototype.setQuestionValue.call(this,e,!1),this.onSetQuestionValue(),this.updateIsAnswered()},t.prototype.supportGoNextPageAutomatic=function(){var e=this.generatedVisibleRows;if(e||(e=this.visibleRows),!e)return!0;for(var r=0;r<e.length;r++){var n=this.generatedVisibleRows[r].cells;if(!!n)for(var o=0;o<n.length;o++){var s=n[o].question;if(s&&(!s.supportGoNextPageAutomatic()||!s.value))return!1}}return!0},t.prototype.getContainsErrors=function(){return i.prototype.getContainsErrors.call(this)||this.checkForAnswersOrErrors(function(e){return e.containsErrors},!1)},t.prototype.getIsAnswered=function(){return i.prototype.getIsAnswered.call(this)&&this.checkForAnswersOrErrors(function(e){return e.isAnswered},!0)},t.prototype.checkForAnswersOrErrors=function(e,r){r===void 0&&(r=!1);var n=this.generatedVisibleRows;if(!n)return!1;for(var o=0;o<n.length;o++){var s=n[o].cells;if(!!s){for(var a=0;a<s.length;a++)if(!!s[a]){var l=s[a].question;if(l&&l.isVisible){if(e(l)){if(!r)return!0}else if(r)return!1}}}}return!!r},t.prototype.hasErrors=function(e,r){e===void 0&&(e=!0),r===void 0&&(r=null);var n=this.hasErrorInRows(e,r),o=this.isValueDuplicated();return i.prototype.hasErrors.call(this,e,r)||n||o},t.prototype.getIsRunningValidators=function(){if(i.prototype.getIsRunningValidators.call(this))return!0;if(!this.generatedVisibleRows)return!1;for(var e=0;e<this.generatedVisibleRows.length;e++){var r=this.generatedVisibleRows[e].cells;if(!!r){for(var n=0;n<r.length;n++)if(!!r[n]){var o=r[n].question;if(!!o&&o.isRunningValidators)return!0}}}return!1},t.prototype.getAllErrors=function(){var e=i.prototype.getAllErrors.call(this),r=this.generatedVisibleRows;if(r===null)return e;for(var n=0;n<r.length;n++)for(var o=r[n],s=0;s<o.cells.length;s++){var a=o.cells[s].question.getAllErrors();a&&a.length>0&&(e=e.concat(a))}return e},t.prototype.hasErrorInRows=function(e,r){var n=this,o=this.generatedVisibleRows;this.generatedVisibleRows||(o=this.visibleRows);var s=!1;if(r||(r={}),!o)return r;r.validationValues=this.getDataFilteredValues(),r.isSingleDetailPanel=this.detailPanelMode==="underRowSingle";for(var a=0;a<o.length;a++)s=o[a].hasErrors(e,r,function(){n.raiseOnCompletedAsyncValidators()})||s;return s},t.prototype.isValueDuplicated=function(){if(!this.generatedVisibleRows)return!1;for(var e=this.getUniqueColumnsNames(),r=!1,n=0;n<e.length;n++)r=this.isValueInColumnDuplicated(e[n],!0)||r;return r},t.prototype.getUniqueColumnsNames=function(){for(var e=new Array,r=0;r<this.columns.length;r++)this.columns[r].isUnique&&e.push(this.columns[r].name);return e},t.prototype.isValueInColumnDuplicated=function(e,r,n){var o=this.getDuplicatedRows(e);return r&&this.showDuplicatedErrorsInRows(o,e),this.removeDuplicatedErrorsInRows(o,e),n?o.indexOf(n)>-1:o.length>0},t.prototype.getDuplicatedRows=function(e){for(var r={},n=[],o=this.generatedVisibleRows,s=0;s<o.length;s++){var a=void 0,l=o[s].getQuestionByName(e);if(l)a=l.value;else{var u=this.getRowValue(s);a=u?u[e]:void 0}this.isValueEmpty(a)||(!this.isUniqueCaseSensitive&&typeof a=="string"&&(a=a.toLocaleLowerCase()),r[a]||(r[a]=[]),r[a].push(o[s]))}for(var d in r)r[d].length>1&&r[d].forEach(function(v){return n.push(v)});return n},t.prototype.showDuplicatedErrorsInRows=function(e,r){var n=this;e.forEach(function(o){var s=o.getQuestionByName(r),a=n.detailPanel.getQuestionByName(r);!s&&a&&(o.showDetailPanel(),o.detailPanel&&(s=o.detailPanel.getQuestionByName(r))),s&&(a&&o.showDetailPanel(),n.addDuplicationError(s))})},t.prototype.removeDuplicatedErrorsInRows=function(e,r){var n=this;this.generatedVisibleRows.forEach(function(o){if(e.indexOf(o)<0){var s=o.getQuestionByName(r);s&&n.removeDuplicationError(s)}})},t.prototype.getDuplicationError=function(e){for(var r=e.errors,n=0;n<r.length;n++)if(r[n].getErrorType()==="keyduplicationerror")return r[n];return null},t.prototype.addDuplicationError=function(e){this.getDuplicationError(e)||e.addError(new Gi(this.keyDuplicationError,this))},t.prototype.removeDuplicationError=function(e){e.removeError(this.getDuplicationError(e))},t.prototype.getFirstQuestionToFocus=function(e){return this.getFirstCellQuestion(e)},t.prototype.getFirstInputElementId=function(){var e=this.getFirstCellQuestion(!1);return e?e.inputId:i.prototype.getFirstInputElementId.call(this)},t.prototype.getFirstErrorInputElementId=function(){var e=this.getFirstCellQuestion(!0);return e?e.inputId:i.prototype.getFirstErrorInputElementId.call(this)},t.prototype.getFirstCellQuestion=function(e){if(!this.generatedVisibleRows)return null;for(var r=0;r<this.generatedVisibleRows.length;r++)for(var n=this.generatedVisibleRows[r].cells,o=0;o<n.length;o++)if(!e||n[o].question.currentErrorCount>0)return n[o].question;return null},t.prototype.onReadOnlyChanged=function(){if(i.prototype.onReadOnlyChanged.call(this),!!this.generateRows)for(var e=0;e<this.visibleRows.length;e++)this.visibleRows[e].onQuestionReadOnlyChanged()},t.prototype.createQuestion=function(e,r){return this.createQuestionCore(e,r)},t.prototype.createQuestionCore=function(e,r){var n=r.createCellQuestion(e);return n.setSurveyImpl(e),n.setParentQuestion(this),n.inMatrixMode=!0,n},t.prototype.deleteRowValue=function(e,r){return e&&(delete e[r.rowName],this.isObject(e)&&Object.keys(e).length==0?null:e)},t.prototype.onAnyValueChanged=function(e,r){if(!(this.isUpdateLocked||this.isDoingonAnyValueChanged||!this.generatedVisibleRows)){this.isDoingonAnyValueChanged=!0;for(var n=this.visibleRows,o=0;o<n.length;o++)n[o].onAnyValueChanged(e,r);var s=this.visibleTotalRow;s&&s.onAnyValueChanged(e,r),this.isDoingonAnyValueChanged=!1}},t.prototype.isObject=function(e){return e!==null&&typeof e=="object"},t.prototype.getOnCellValueChangedOptions=function(e,r,n){var o=function(s){return e.getQuestionByName(s)};return{row:e,columnName:r,rowValue:n,value:n?n[r]:null,getCellQuestion:o,cellQuestion:e.getQuestionByName(r),column:this.getColumnByName(r)}},t.prototype.onCellValueChanged=function(e,r,n){if(!!this.survey){var o=this.getOnCellValueChangedOptions(e,r,n);this.onCellValueChangedCallback&&this.onCellValueChangedCallback(o),this.survey.matrixCellValueChanged(this,o)}},t.prototype.validateCell=function(e,r,n){if(!!this.survey){var o=this.getOnCellValueChangedOptions(e,r,n);return this.survey.matrixCellValidate(this,o)}},Object.defineProperty(t.prototype,"isValidateOnValueChanging",{get:function(){return this.survey?this.survey.isValidateOnValueChanging:!1},enumerable:!1,configurable:!0}),t.prototype.onRowChanging=function(e,r,n){if(!this.survey&&!this.cellValueChangingCallback)return n?n[r]:null;var o=this.getOnCellValueChangedOptions(e,r,n),s=this.getRowValueCore(e,this.createNewValue(),!0);return o.oldValue=s?s[r]:null,this.cellValueChangingCallback&&(o.value=this.cellValueChangingCallback(e,r,o.value,o.oldValue)),this.survey&&this.survey.matrixCellValueChanging(this,o),o.value},t.prototype.onRowChanged=function(e,r,n,o){var s=r?this.getRowObj(e):null;if(s){var a=null;!!n&&!o&&(a=n[r]),this.isRowChanging=!0,x.setObjPropertyValue(s,r,a),this.isRowChanging=!1,this.onCellValueChanged(e,r,s)}else{var l=this.createNewValue(!0),u=this.getNewValueOnRowChanged(e,r,n,o,this.createNewValue());if(this.isTwoValueEquals(l,u.value))return;this.isRowChanging=!0,this.setNewValue(u.value),this.isRowChanging=!1,r&&this.onCellValueChanged(e,r,u.rowValue)}this.getUniqueColumnsNames().indexOf(r)>-1&&this.isValueInColumnDuplicated(r,!!s)},t.prototype.getNewValueOnRowChanged=function(e,r,n,o,s){var a=this.getRowValueCore(e,s,!0);o&&delete a[r];for(var l=0;l<e.cells.length;l++){var u=e.cells[l].question.getValueName();delete a[u]}if(n){n=JSON.parse(JSON.stringify(n));for(var u in n)this.isValueEmpty(n[u])||(a[u]=n[u])}return this.isObject(a)&&Object.keys(a).length===0&&(s=this.deleteRowValue(s,e)),{value:s,rowValue:a}},t.prototype.getRowIndex=function(e){return this.generatedVisibleRows?this.visibleRows.indexOf(e):-1},t.prototype.getElementsInDesign=function(e){e===void 0&&(e=!1);var r;return this.detailPanelMode=="none"?r=i.prototype.getElementsInDesign.call(this,e):r=e?[this.detailPanel]:this.detailElements,this.columns.concat(r)},t.prototype.hasDetailPanel=function(e){return this.detailPanelMode=="none"?!1:this.isDesignMode?!0:this.onHasDetailPanelCallback?this.onHasDetailPanelCallback(e):this.detailElements.length>0},t.prototype.getIsDetailPanelShowing=function(e){if(this.detailPanelMode=="none")return!1;if(this.isDesignMode){var r=this.visibleRows.indexOf(e)==0;return r&&(e.detailPanel||e.showDetailPanel()),r}return this.getPropertyValue("isRowShowing"+e.id,!1)},t.prototype.setIsDetailPanelShowing=function(e,r){if(r!=this.getIsDetailPanelShowing(e)&&(this.setPropertyValue("isRowShowing"+e.id,r),this.updateDetailPanelButtonCss(e),this.renderedTable&&this.renderedTable.onDetailPanelChangeVisibility(e,r),this.survey&&this.survey.matrixDetailPanelVisibleChanged(this,e.rowIndex-1,e,r),r&&this.detailPanelMode==="underRowSingle"))for(var n=this.visibleRows,o=0;o<n.length;o++)n[o].id!==e.id&&n[o].isDetailPanelShowing&&n[o].hideDetailPanel()},t.prototype.getDetailPanelButtonCss=function(e){var r=new O().append(this.getPropertyValue("detailButtonCss"+e.id));return r.append(this.cssClasses.detailButton,r.toString()==="").toString()},t.prototype.getDetailPanelIconCss=function(e){var r=new O().append(this.getPropertyValue("detailIconCss"+e.id));return r.append(this.cssClasses.detailIcon,r.toString()==="").toString()},t.prototype.getDetailPanelIconId=function(e){return this.getIsDetailPanelShowing(e)?this.cssClasses.detailIconExpandedId:this.cssClasses.detailIconId},t.prototype.updateDetailPanelButtonCss=function(e){var r=this.cssClasses,n=this.getIsDetailPanelShowing(e),o=new O().append(r.detailIcon).append(r.detailIconExpanded,n);this.setPropertyValue("detailIconCss"+e.id,o.toString());var s=new O().append(r.detailButton).append(r.detailButtonExpanded,n);this.setPropertyValue("detailButtonCss"+e.id,s.toString())},t.prototype.createRowDetailPanel=function(e){var r=this;if(this.isDesignMode)return this.detailPanel;var n=this.createNewDetailPanel();n.readOnly=this.isReadOnly||!e.isRowEnabled(),n.setSurveyImpl(e);var o=this.detailPanel.toJSON();return new ae().toObject(o,n),n.renderWidth="100%",n.updateCustomWidgets(),this.onCreateDetailPanelCallback&&this.onCreateDetailPanelCallback(e,n),n.questions.forEach(function(s){return s.setParentQuestion(r)}),n.onSurveyLoad(),n},t.prototype.getSharedQuestionByName=function(e,r){if(!this.survey||!this.valueName)return null;var n=this.getRowIndex(r);return n<0?null:this.survey.getQuestionByValueNameFromArray(this.valueName,e,n)},t.prototype.onTotalValueChanged=function(){!!this.data&&!!this.visibleTotalRow&&!this.isUpdateLocked&&!this.isSett&&this.data.setValue(this.getValueName()+b.matrix.totalsSuffix,this.totalValue,!1)},t.prototype.getDataFilteredValues=function(){return this.data?this.data.getFilteredValues():{}},t.prototype.getParentTextProcessor=function(){if(!this.parentQuestion||!this.parent)return null;var e=this.parent.data;return!!e&&!!e.getTextProcessor?e.getTextProcessor():null},t.prototype.isMatrixReadOnly=function(){return this.isReadOnly},t.prototype.getQuestionFromArray=function(e,r){return r>=this.visibleRows.length?null:this.visibleRows[r].getQuestionByName(e)},t.prototype.isMatrixValueEmpty=function(e){if(!!e){if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(this.isObject(e[r])&&Object.keys(e[r]).length>0)return!1;return!0}return Object.keys(e).length==0}},Object.defineProperty(t.prototype,"SurveyModel",{get:function(){return this.survey},enumerable:!1,configurable:!0}),t.prototype.getCellTemplateData=function(e){return this.SurveyModel.getMatrixCellTemplateData(e)},t.prototype.getCellWrapperComponentName=function(e){return this.SurveyModel.getElementWrapperComponentName(e,e.row instanceof tr?"row-footer":"cell")},t.prototype.getCellWrapperComponentData=function(e){return this.SurveyModel.getElementWrapperComponentData(e,e.row instanceof tr?"row-footer":"cell")},t.prototype.getColumnHeaderWrapperComponentName=function(e){return this.SurveyModel.getElementWrapperComponentName(e,"column-header")},t.prototype.getColumnHeaderWrapperComponentData=function(e){return this.SurveyModel.getElementWrapperComponentData(e,"column-header")},t.prototype.getRowHeaderWrapperComponentName=function(e){return this.SurveyModel.getElementWrapperComponentName(e,"row-header")},t.prototype.getRowHeaderWrapperComponentData=function(e){return this.SurveyModel.getElementWrapperComponentData(e,"row-header")},Object.defineProperty(t.prototype,"showHorizontalScroll",{get:function(){return!this.isDefaultV2Theme&&this.horizontalScroll},enumerable:!1,configurable:!0}),t.prototype.getRootCss=function(){return new O().append(i.prototype.getRootCss.call(this)).append(this.cssClasses.rootScroll,this.horizontalScroll).toString()},t}(Gr);x.addClass("matrixdropdownbase",[{name:"columns:matrixdropdowncolumns",className:"matrixdropdowncolumn",isArray:!0},{name:"columnLayout",alternativeName:"columnsLocation",choices:["horizontal","vertical"],visible:!1,isSerializable:!1},{name:"transposeData:boolean",version:"1.9.130",oldName:"columnLayout"},{name:"detailElements",baseClassName:"question",visible:!1,isLightSerializable:!1},{name:"columnsVisibleIf",visible:!1},{name:"detailPanelMode",choices:["none","underRow","underRowSingle"],default:"none"},{name:"cellErrorLocation",default:"default",choices:["default","top","bottom"]},{name:"detailErrorLocation",default:"default",choices:["default","top","bottom"],visibleIf:function(i){return!!i&&i.detailPanelMode!="none"}},{name:"horizontalScroll:boolean",visible:!1},{name:"choices:itemvalue[]",uniqueProperty:"value",visibleIf:function(i){return i.isSelectCellType()}},{name:"placeholder",alternativeName:"optionsCaption",serializationProperty:"locPlaceholder"},{name:"keyDuplicationError",serializationProperty:"locKeyDuplicationError"},{name:"cellType",default:"dropdown",choices:function(){return Tt.getColumnTypes()}},{name:"columnColCount",default:0,choices:[0,1,2,3,4]},"columnMinWidth",{name:"allowAdaptiveActions:boolean",default:!1,visible:!1}],function(){return new dt("")},"matrixbase");var yo=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),mo=function(i){yo(t,i);function t(e,r,n,o){var s=i.call(this,n,o)||this;return s.name=e,s.item=r,s.buildCells(o),s}return Object.defineProperty(t.prototype,"rowName",{get:function(){return this.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this.item.text},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locText",{get:function(){return this.item.locText},enumerable:!1,configurable:!0}),t.prototype.isRowEnabled=function(){return this.item.isEnabled},t.prototype.isRowHasEnabledCondition=function(){return!!this.item.enableIf},t}(ht),on=function(i){yo(t,i);function t(e){var r=i.call(this,e)||this;return r.defaultValuesInRows={},r.createLocalizableString("totalText",r,!0),r.registerPropertyChangedHandlers(["rows"],function(){r.clearGeneratedRows(),r.resetRenderedTable(),r.filterItems()||r.onRowsChanged(),r.clearIncorrectValues()}),r.registerPropertyChangedHandlers(["hideIfRowsEmpty"],function(){r.updateVisibilityBasedOnRows()}),r}return t.prototype.getType=function(){return"matrixdropdown"},Object.defineProperty(t.prototype,"totalText",{get:function(){return this.getLocalizableStringText("totalText","")},set:function(e){this.setLocalizableStringText("totalText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTotalText",{get:function(){return this.getLocalizableString("totalText")},enumerable:!1,configurable:!0}),t.prototype.getFooterText=function(){return this.locTotalText},t.prototype.getRowTitleWidth=function(){return this.rowTitleWidth},Object.defineProperty(t.prototype,"hideIfRowsEmpty",{get:function(){return this.getPropertyValue("hideIfRowsEmpty")},set:function(e){this.setPropertyValue("hideIfRowsEmpty",e)},enumerable:!1,configurable:!0}),t.prototype.getDisplayValueCore=function(e,r){if(!r)return r;var n=this.visibleRows,o={};if(!n)return o;for(var s=0;s<n.length;s++){var a=n[s].rowName,l=r[a];if(!!l){if(e){var u=q.getTextOrHtmlByValue(this.rows,a);u&&(a=u)}o[a]=this.getRowDisplayValue(e,n[s],l)}}return o},t.prototype.getConditionObjectRowName=function(e){return"."+this.rows[e].value},t.prototype.getConditionObjectRowText=function(e){return"."+this.rows[e].calculatedText},t.prototype.getConditionObjectsRowIndeces=function(){for(var e=[],r=0;r<this.rows.length;r++)e.push(r);return e},t.prototype.isNewValueCorrect=function(e){return P.isValueObject(e,!0)},t.prototype.clearIncorrectValues=function(){var e=this.value;if(!!e){var r=null,n=!1,o=this.filteredRows?this.filteredRows:this.rows;for(var s in e)q.getItemByValue(o,s)?(r==null&&(r={}),r[s]=e[s]):n=!0;n&&(this.value=r),i.prototype.clearIncorrectValues.call(this)}},t.prototype.clearValueIfInvisibleCore=function(e){i.prototype.clearValueIfInvisibleCore.call(this,e),this.clearInvisibleValuesInRows()},t.prototype.clearGeneratedRows=function(){var e=this;!this.generatedVisibleRows||(this.isDisposed||this.generatedVisibleRows.forEach(function(r){e.defaultValuesInRows[r.rowName]=r.getNamesWithDefaultValues()}),i.prototype.clearGeneratedRows.call(this))},t.prototype.getRowValueForCreation=function(e,r){var n=e[r];if(!n)return n;var o=this.defaultValuesInRows[r];return!Array.isArray(o)||o.length===0||o.forEach(function(s){delete n[s]}),n},t.prototype.generateRows=function(){var e=new Array,r=this.filteredRows?this.filteredRows:this.rows;if(!r||r.length===0)return e;var n=this.value;n||(n={});for(var o=0;o<r.length;o++){var s=r[o];this.isValueEmpty(s.value)||e.push(this.createMatrixRow(s,this.getRowValueForCreation(n,s.value)))}return e},t.prototype.createMatrixRow=function(e,r){return new mo(e.value,e,this,r)},t.prototype.getSearchableItemValueKeys=function(e){e.push("rows")},t.prototype.updateProgressInfoByValues=function(e){var r=this.value;r||(r={});for(var n=0;n<this.rows.length;n++){var o=this.rows[n],s=r[o.value];this.updateProgressInfoByRow(e,s||{})}},t}(dt);x.addClass("matrixdropdown",[{name:"rows:itemvalue[]",uniqueProperty:"value"},"rowsVisibleIf:condition","rowTitleWidth",{name:"totalText",serializationProperty:"locTotalText"},"hideIfRowsEmpty:boolean"],function(){return new on("")},"matrixdropdownbase"),Z.Instance.registerQuestion("matrixdropdown",function(i){var t=new on(i);return t.choices=[1,2,3,4,5],t.rows=Z.DefaultRows,dt.addDefaultColumns(t),t});var sn=!1,vo=null;typeof navigator!="undefined"&&!!navigator&&R.isAvailable()&&(vo=navigator.userAgent||navigator.vendor||R.hasOwn("opera")),function(i){!i||(navigator.platform==="MacIntel"&&navigator.maxTouchPoints>0||navigator.platform==="iPad"||/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(i)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(i.substring(0,4)))&&(sn=!0)}(vo);var vu=!1,rr=sn||vu,bo={get isTouch(){return!this.hasMouse&&this.hasTouchEvent},get hasTouchEvent(){return R.isAvailable()&&(R.hasOwn("ontouchstart")||navigator.maxTouchPoints>0)},hasMouse:!0},bu=R.matchMedia;bo.hasMouse=Pu(bu);var re=bo.isTouch;function Cu(i){re=i}function Pu(i){if(!i||rr)return!1;var t=i("(pointer:fine)"),e=i("(any-hover:hover)");return!!t&&t.matches||!!e&&e.matches}var wu=function(i,t){for(var e=0,r=t.length,n=i.length;e<r;e++,n++)i[n]=t[e];return i};typeof window!="undefined"&&window.addEventListener("touchmove",function(i){!Co.PreventScrolling||i.preventDefault()},{passive:!1});var Co=function(){function i(t,e,r){var n=this;e===void 0&&(e=!0),r===void 0&&(r=!1),this.dd=t,this.longTap=e,this.fitToContainer=r,this.scrollIntervalId=null,this.stopLongTapIfMoveEnough=function(o){o.preventDefault(),n.currentX=o.pageX,n.currentY=o.pageY,!n.isMicroMovement&&(n.returnUserSelectBack(),n.stopLongTap())},this.stopLongTap=function(o){clearTimeout(n.timeoutID),n.timeoutID=null,document.removeEventListener("pointerup",n.stopLongTap),document.removeEventListener("pointermove",n.stopLongTapIfMoveEnough)},this.handlePointerCancel=function(o){n.clear()},this.handleEscapeButton=function(o){o.keyCode==27&&n.clear()},this.onContextMenu=function(o){o.preventDefault(),o.stopPropagation()},this.dragOver=function(o){n.moveShortcutElement(o),n.draggedElementShortcut.style.cursor="grabbing",n.dd.dragOver(o)},this.clear=function(){cancelAnimationFrame(n.scrollIntervalId),document.removeEventListener("pointermove",n.dragOver),document.removeEventListener("pointercancel",n.handlePointerCancel),document.removeEventListener("keydown",n.handleEscapeButton),document.removeEventListener("pointerup",n.drop),n.draggedElementShortcut.removeEventListener("pointerup",n.drop),re&&n.draggedElementShortcut.removeEventListener("contextmenu",n.onContextMenu),n.draggedElementShortcut.parentElement.removeChild(n.draggedElementShortcut),n.dd.clear(),n.draggedElementShortcut=null,n.scrollIntervalId=null,re&&(n.savedTargetNode.style.cssText=null,n.savedTargetNode&&n.savedTargetNode.parentElement.removeChild(n.savedTargetNode),n.insertNodeToParentAtIndex(n.savedTargetNodeParent,n.savedTargetNode,n.savedTargetNodeIndex),i.PreventScrolling=!1),n.savedTargetNode=null,n.savedTargetNodeParent=null,n.savedTargetNodeIndex=null,n.returnUserSelectBack()},this.drop=function(){n.dd.drop(),n.clear()},this.draggedElementShortcut=null}return Object.defineProperty(i.prototype,"documentOrShadowRoot",{get:function(){return b.environment.root},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rootElement",{get:function(){return St(b.environment.root)?this.rootContainer||b.environment.root.host:this.rootContainer||b.environment.root.documentElement||document.body},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isMicroMovement",{get:function(){var t=5,e=Math.abs(this.currentX-this.startX),r=Math.abs(this.currentY-this.startY);return e<t&&r<t},enumerable:!1,configurable:!0}),i.prototype.startLongTapProcessing=function(t,e,r,n,o){var s=this;o===void 0&&(o=!1),this.startX=t.pageX,this.startY=t.pageY,document.body.style.setProperty("touch-action","none","important"),this.timeoutID=setTimeout(function(){s.doStartDrag(t,e,r,n),o||(s.savedTargetNode=t.target,s.savedTargetNode.style.cssText=`
          position: absolute;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden;
          clip: rect(1px 1px 1px 1px);
          clip: rect(1px, 1px, 1px, 1px);
        `,s.savedTargetNodeParent=s.savedTargetNode.parentElement,s.savedTargetNodeIndex=s.getNodeIndexInParent(s.savedTargetNode),s.rootElement.appendChild(s.savedTargetNode)),s.stopLongTap()},this.longTap?500:0),document.addEventListener("pointerup",this.stopLongTap),document.addEventListener("pointermove",this.stopLongTapIfMoveEnough)},i.prototype.moveShortcutElement=function(t){var e=this.rootElement.getBoundingClientRect().x,r=this.rootElement.getBoundingClientRect().y,n=this.rootElement.scrollLeft,o=this.rootElement.scrollTop;this.doScroll(t.clientY,t.clientX);var s=this.draggedElementShortcut.offsetHeight,a=this.draggedElementShortcut.offsetWidth,l=this.draggedElementShortcut.shortcutXOffset||a/2,u=this.draggedElementShortcut.shortcutYOffset||s/2;document.querySelectorAll("[dir='rtl']").length!==0&&(l=a/2,u=s/2);var d=document.documentElement.clientHeight,v=document.documentElement.clientWidth,V=t.pageX,E=t.pageY,I=t.clientX,k=t.clientY;e-=n,r-=o;var N=this.getShortcutBottomCoordinate(k,s,u),j=this.getShortcutRightCoordinate(I,a,l);if(j>=v){this.draggedElementShortcut.style.left=v-a-e+"px",this.draggedElementShortcut.style.top=k-u-r+"px";return}if(I-l<=0){this.draggedElementShortcut.style.left=V-I-e+"px",this.draggedElementShortcut.style.top=k-r-u+"px";return}if(N>=d){this.draggedElementShortcut.style.left=I-l-e+"px",this.draggedElementShortcut.style.top=d-s-r+"px";return}if(k-u<=0){this.draggedElementShortcut.style.left=I-l-e+"px",this.draggedElementShortcut.style.top=E-k-r+"px";return}this.draggedElementShortcut.style.left=I-e-l+"px",this.draggedElementShortcut.style.top=k-r-u+"px"},i.prototype.getShortcutBottomCoordinate=function(t,e,r){return t+e-r},i.prototype.getShortcutRightCoordinate=function(t,e,r){return t+e-r},i.prototype.requestAnimationFrame=function(t){return requestAnimationFrame(t)},i.prototype.scrollByDrag=function(t,e,r){var n=this,o=100,s,a,l,u;t.tagName==="HTML"?(s=0,a=document.documentElement.clientHeight,l=0,u=document.documentElement.clientWidth):(s=t.getBoundingClientRect().top,a=t.getBoundingClientRect().bottom,l=t.getBoundingClientRect().left,u=t.getBoundingClientRect().right);var d=function(){var v=e-s<=o,V=a-e<=o,E=r-l<=o,I=u-r<=o;v&&!E&&!I?t.scrollTop-=15:V&&!E&&!I?t.scrollTop+=15:I&&!v&&!V?t.scrollLeft+=15:E&&!v&&!V&&(t.scrollLeft-=15),n.scrollIntervalId=n.requestAnimationFrame(d)};this.scrollIntervalId=this.requestAnimationFrame(d)},i.prototype.doScroll=function(t,e){cancelAnimationFrame(this.scrollIntervalId);var r=this.draggedElementShortcut.style.display;this.draggedElementShortcut.style.display="none";var n=this.documentOrShadowRoot.elementFromPoint(e,t);this.draggedElementShortcut.style.display=r||"block";var o=Wt(n);this.scrollByDrag(o,t,e)},i.prototype.doStartDrag=function(t,e,r,n){re&&(i.PreventScrolling=!0),t.which!==3&&(this.dd.dragInit(t,e,r,n),this.rootElement.append(this.draggedElementShortcut),this.moveShortcutElement(t),document.addEventListener("pointermove",this.dragOver),document.addEventListener("pointercancel",this.handlePointerCancel),document.addEventListener("keydown",this.handleEscapeButton),document.addEventListener("pointerup",this.drop),re?this.draggedElementShortcut.addEventListener("contextmenu",this.onContextMenu):this.draggedElementShortcut.addEventListener("pointerup",this.drop))},i.prototype.returnUserSelectBack=function(){document.body.style.setProperty("touch-action","auto"),document.body.style.setProperty("user-select","auto"),document.body.style.setProperty("-webkit-user-select","auto")},i.prototype.startDrag=function(t,e,r,n,o){if(o===void 0&&(o=!1),document.body.style.setProperty("user-select","none","important"),document.body.style.setProperty("-webkit-user-select","none","important"),re){this.startLongTapProcessing(t,e,r,n,o);return}this.doStartDrag(t,e,r,n)},i.prototype.getNodeIndexInParent=function(t){return wu([],t.parentElement.childNodes).indexOf(t)},i.prototype.insertNodeToParentAtIndex=function(t,e,r){t.insertBefore(e,t.childNodes[r])},i.PreventScrolling=!1,i}(),an=function(){function i(t,e,r,n){var o=this,s;this.surveyValue=t,this.creator=e,this._isBottom=null,this.onGhostPositionChanged=new Oe,this.onDragStart=new Oe,this.onDragEnd=new Oe,this.onDragClear=new Oe,this.onBeforeDrop=this.onDragStart,this.onAfterDrop=this.onDragEnd,this.draggedElement=null,this.dropTarget=null,this.prevDropTarget=null,this.allowDropHere=!1,this.banDropHere=function(){o.allowDropHere=!1,o.doBanDropHere(),o.dropTarget=null,o.domAdapter.draggedElementShortcut.style.cursor="not-allowed",o.isBottom=null},this.doBanDropHere=function(){},this.domAdapter=n||new Co(this,r,(s=this.survey)===null||s===void 0?void 0:s.fitToContainer)}return Object.defineProperty(i.prototype,"isBottom",{get:function(){return!!this._isBottom},set:function(t){this._isBottom=t,this.ghostPositionChanged()},enumerable:!1,configurable:!0}),i.prototype.ghostPositionChanged=function(){this.onGhostPositionChanged.fire({},{})},Object.defineProperty(i.prototype,"dropTargetDataAttributeName",{get:function(){return"[data-sv-drop-target-"+this.draggedElementType+"]"},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"survey",{get:function(){var t;return this.surveyValue||((t=this.creator)===null||t===void 0?void 0:t.survey)},enumerable:!1,configurable:!0}),i.prototype.startDrag=function(t,e,r,n,o){o===void 0&&(o=!1),this.domAdapter.rootContainer=this.getRootElement(this.survey,this.creator),this.domAdapter.startDrag(t,e,r,n,o)},i.prototype.getRootElement=function(t,e){return e?e.rootElement:t.rootElement},i.prototype.dragInit=function(t,e,r,n){this.draggedElement=e,this.parentElement=r;var o=this.getShortcutText(this.draggedElement);this.domAdapter.draggedElementShortcut=this.createDraggedElementShortcut(o,n,t),this.onStartDrag(t);var s=this.draggedElement&&this.draggedElement.parent;this.onDragStart.fire(this,{fromElement:s,draggedElement:this.draggedElement})},i.prototype.onStartDrag=function(t){},i.prototype.isDropTargetDoesntChanged=function(t){return this.dropTarget===this.prevDropTarget&&t===this.isBottom},i.prototype.getShortcutText=function(t){return t==null?void 0:t.shortcutText},i.prototype.createDraggedElementShortcut=function(t,e,r){var n=D.createElement("div");return n&&(n.innerText=t,n.className=this.getDraggedElementClass()),n},i.prototype.getDraggedElementClass=function(){return"sv-dragged-element-shortcut"},i.prototype.doDragOver=function(){},i.prototype.afterDragOver=function(t){},i.prototype.findDropTargetNodeFromPoint=function(t,e){var r=this.domAdapter.draggedElementShortcut.style.display;if(this.domAdapter.draggedElementShortcut.style.display="none",!D.isAvailable())return null;var n=this.domAdapter.documentOrShadowRoot.elementFromPoint(t,e);return this.domAdapter.draggedElementShortcut.style.display=r||"block",n?this.findDropTargetNodeByDragOverNode(n):null},i.prototype.getDataAttributeValueByNode=function(t){var e=this,r="svDropTarget",n=this.draggedElementType.split("-");return n.forEach(function(o){r+=e.capitalizeFirstLetter(o)}),t.dataset[r]},i.prototype.getDropTargetByNode=function(t,e){var r=this.getDataAttributeValueByNode(t);return this.getDropTargetByDataAttributeValue(r,t,e)},i.prototype.capitalizeFirstLetter=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},i.prototype.calculateVerticalMiddleOfHTMLElement=function(t){var e=t.getBoundingClientRect();return e.y+e.height/2},i.prototype.calculateHorizontalMiddleOfHTMLElement=function(t){var e=t.getBoundingClientRect();return e.x+e.width/2},i.prototype.calculateIsBottom=function(t,e){return!1},i.prototype.findDropTargetNodeByDragOverNode=function(t){var e=t.closest(this.dropTargetDataAttributeName);return e},i.prototype.dragOver=function(t){var e=this.findDropTargetNodeFromPoint(t.clientX,t.clientY);if(!e){this.banDropHere();return}this.dropTarget=this.getDropTargetByNode(e,t);var r=this.isDropTargetValid(this.dropTarget,e);if(this.doDragOver(),!r){this.banDropHere();return}var n=this.calculateIsBottom(t.clientY,e);this.allowDropHere=!0,!this.isDropTargetDoesntChanged(n)&&(this.isBottom=null,this.isBottom=n,this.draggedElement!=this.dropTarget&&this.afterDragOver(e),this.prevDropTarget=this.dropTarget)},i.prototype.drop=function(){if(this.allowDropHere){var t=this.draggedElement.parent,e=this.doDrop();this.onDragEnd.fire(this,{fromElement:t,draggedElement:e,toElement:this.dropTarget})}},i.prototype.clear=function(){this.dropTarget=null,this.prevDropTarget=null,this.draggedElement=null,this.isBottom=null,this.parentElement=null,this.onDragClear.fire(this,{})},i}(),Vu=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),xu=function(i){Vu(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.fromIndex=null,e.toIndex=null,e.doDrop=function(){return e.parentElement.moveRowByIndex(e.fromIndex,e.toIndex),e.parentElement},e}return Object.defineProperty(t.prototype,"draggedElementType",{get:function(){return"matrix-row"},enumerable:!1,configurable:!0}),t.prototype.onStartDrag=function(){var e=D.getBody();e&&(this.restoreUserSelectValue=e.style.userSelect,e.style.userSelect="none")},t.prototype.createDraggedElementShortcut=function(e,r,n){var o=this,s=D.createElement("div");if(!!s){s.style.cssText=` 
          cursor: grabbing;
          position: absolute;
          z-index: 10000;
          font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));
        `;var a=!0;if(r){var l=r.closest("[data-sv-drop-target-matrix-row]"),u=l.cloneNode(a);u.style.cssText=`
        box-shadow: var(--sjs-shadow-large, 0px 8px 16px 0px rgba(0, 0, 0, 0.1)), var(--sjs-shadow-medium, 0px 2px 6px 0px rgba(0, 0, 0, 0.1));
        background-color: var(--sjs-general-backcolor, var(--background, #fff));
        display: flex;
        flex-grow: 0;
        flex-shrink: 0;
        align-items: center;
        line-height: 0;
        width: `+l.offsetWidth+`px;
      `,u.classList.remove("sv-matrix__drag-drop--moveup"),u.classList.remove("sv-matrix__drag-drop--movedown"),this.draggedElement.isDragDropMoveDown=!1,this.draggedElement.isDragDropMoveUp=!1,s.appendChild(u);var d=r.getBoundingClientRect();s.shortcutXOffset=n.clientX-d.x,s.shortcutYOffset=n.clientY-d.y}var v=this.parentElement.renderedTable.rows;return v.forEach(function(V,E){V.row===o.draggedElement&&(V.isGhostRow=!0)}),this.fromIndex=this.parentElement.visibleRows.indexOf(this.draggedElement),s}},t.prototype.getDropTargetByDataAttributeValue=function(e){var r=this.parentElement,n;return n=r.renderedTable.rows.filter(function(o){return o.row&&o.row.id===e})[0],n.row},t.prototype.canInsertIntoThisRow=function(e){var r=this.parentElement.lockedRowCount;return r<=0||e.rowIndex>r},t.prototype.isDropTargetValid=function(e,r){return this.canInsertIntoThisRow(e)},t.prototype.calculateIsBottom=function(e){var r=this.parentElement.renderedTable.rows,n=r.map(function(o){return o.row});return n.indexOf(this.dropTarget)-n.indexOf(this.draggedElement)>0},t.prototype.afterDragOver=function(e){var r=this;if(!this.isDropTargetDoesntChanged(this.isBottom)){var n,o,s,a=this.parentElement.renderedTable.rows;a.forEach(function(l,u){l.row===r.dropTarget&&(n=u),l.row===r.draggedElement&&(s=l,o=u,s.isGhostRow=!0)}),a.splice(o,1),a.splice(n,0,s),this.toIndex=this.parentElement.visibleRows.indexOf(this.dropTarget),i.prototype.ghostPositionChanged.call(this)}},t.prototype.clear=function(){var e=this.parentElement.renderedTable.rows;e.forEach(function(n){n.isGhostRow=!1}),this.parentElement.clearOnDrop(),this.fromIndex=null,this.toIndex=null;var r=D.getBody();r&&(r.style.userSelect=this.restoreUserSelectValue||"initial"),i.prototype.clear.call(this)},t}(an),ln=function(){function i(t){var e=this;this.dragHandler=t,this.onPointerUp=function(r){e.clearListeners()},this.tryToStartDrag=function(r){if(e.currentX=r.pageX,e.currentY=r.pageY,!e.isMicroMovement)return e.clearListeners(),e.dragHandler(e.pointerDownEvent,e.currentTarget,e.itemModel),!0}}return i.prototype.onPointerDown=function(t,e){if(re){this.dragHandler(t,t.currentTarget,e);return}this.pointerDownEvent=t,this.currentTarget=t.currentTarget,this.startX=t.pageX,this.startY=t.pageY,D.addEventListener("pointermove",this.tryToStartDrag),this.currentTarget.addEventListener("pointerup",this.onPointerUp),this.itemModel=e},Object.defineProperty(i.prototype,"isMicroMovement",{get:function(){var t=10,e=Math.abs(this.currentX-this.startX),r=Math.abs(this.currentY-this.startY);return e<t&&r<t},enumerable:!1,configurable:!0}),i.prototype.clearListeners=function(){!this.pointerDownEvent||(D.removeEventListener("pointermove",this.tryToStartDrag),this.currentTarget.removeEventListener("pointerup",this.onPointerUp))},i}(),un=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Po=function(i){un(t,i);function t(e,r,n){var o=i.call(this,r,n)||this;return o.index=e,o.buildCells(n),o}return Object.defineProperty(t.prototype,"rowName",{get:function(){return this.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataName",{get:function(){return"row"+(this.index+1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return"row "+(this.index+1)},enumerable:!1,configurable:!0}),t.prototype.getAccessbilityText=function(){return(this.index+1).toString()},Object.defineProperty(t.prototype,"shortcutText",{get:function(){var e=this.data,r=e.visibleRows.indexOf(this)+1,n=this.cells.length>1?this.cells[1].questionValue:void 0,o=this.cells.length>0?this.cells[0].questionValue:void 0;return n&&n.value||o&&o.value||""+r},enumerable:!1,configurable:!0}),t}(ht),cn=function(i){un(t,i);function t(e){var r=i.call(this,e)||this;r.rowCounter=0,r.setRowCountValueFromData=!1,r.startDragMatrixRow=function(o,s){r.dragDropMatrixRows.startDrag(o,r.draggedRow,r,o.target)},r.initialRowCount=r.getDefaultPropertyValue("rowCount"),r.createLocalizableString("confirmDeleteText",r,!1,"confirmDelete");var n=r.createLocalizableString("addRowText",r);return n.onGetTextCallback=function(o){return o||r.defaultAddRowText},r.createLocalizableString("removeRowText",r,!1,"removeRow"),r.createLocalizableString("emptyRowsText",r,!1,!0),r.registerPropertyChangedHandlers(["hideColumnsIfEmpty","allowAddRows"],function(){r.updateShowTableAndAddRow()}),r.registerPropertyChangedHandlers(["allowRowsDragAndDrop","isReadOnly","lockedRowCount"],function(){r.clearRowsAndResetRenderedTable()}),r.dragOrClickHelper=new ln(r.startDragMatrixRow),r}return t.prototype.setSurveyImpl=function(e,r){i.prototype.setSurveyImpl.call(this,e,r),this.dragDropMatrixRows=new xu(this.survey,null,!0)},t.prototype.isBanStartDrag=function(e){var r=e.target;return r.getAttribute("contenteditable")==="true"||r.nodeName==="INPUT"||!this.isDragHandleAreaValid(r)},t.prototype.isDragHandleAreaValid=function(e){return this.survey.matrixDragHandleArea==="icon"?e.classList.contains(this.cssClasses.dragElementDecorator):!0},t.prototype.onPointerDown=function(e,r){!r||!this.isRowsDragAndDrop||this.isBanStartDrag(e)||r.isDetailPanelShowing||(this.draggedRow=r,this.dragOrClickHelper.onPointerDown(e))},t.prototype.getType=function(){return"matrixdynamic"},Object.defineProperty(t.prototype,"isRowsDynamic",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"confirmDelete",{get:function(){return this.getPropertyValue("confirmDelete")},set:function(e){this.setPropertyValue("confirmDelete",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isValueArray",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keyName",{get:function(){return this.getPropertyValue("keyName","")},set:function(e){this.setPropertyValue("keyName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultRowValue",{get:function(){return this.getPropertyValue("defaultRowValue")},set:function(e){this.setPropertyValue("defaultRowValue",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultValueFromLastRow",{get:function(){return this.getPropertyValue("defaultValueFromLastRow")},set:function(e){this.setPropertyValue("defaultValueFromLastRow",e)},enumerable:!1,configurable:!0}),t.prototype.isDefaultValueEmpty=function(){return i.prototype.isDefaultValueEmpty.call(this)&&this.isValueEmpty(this.defaultRowValue)},t.prototype.valueFromData=function(e){if(this.minRowCount<1)return i.prototype.valueFromData.call(this,e);Array.isArray(e)||(e=[]);for(var r=e.length;r<this.minRowCount;r++)e.push({});return e},t.prototype.isNewValueCorrect=function(e){return Array.isArray(e)},t.prototype.setDefaultValue=function(){if(this.isValueEmpty(this.defaultRowValue)||!this.isValueEmpty(this.defaultValue)){i.prototype.setDefaultValue.call(this);return}if(!(!this.isEmpty()||this.rowCount==0)){for(var e=[],r=0;r<this.rowCount;r++)e.push(this.defaultRowValue);this.value=e}},t.prototype.moveRowByIndex=function(e,r){var n=this.createNewValue();if(!(!Array.isArray(n)&&Math.max(e,r)>=n.length)){var o=n[e];n.splice(e,1),n.splice(r,0,o),this.value=n}},t.prototype.clearOnDrop=function(){this.isEditingSurveyElement||this.resetRenderedTable()},t.prototype.initDataUI=function(){this.generatedVisibleRows||this.visibleRows},Object.defineProperty(t.prototype,"rowCount",{get:function(){return this.rowCountValue},set:function(e){if(!(e<0||e>b.matrix.maxRowCount)){this.setRowCountValueFromData=!1;var r=this.rowCountValue;if(this.rowCountValue=e,this.value&&this.value.length>e){var n=this.value;n.splice(e),this.value=n}if(this.isUpdateLocked){this.initialRowCount=e;return}if(this.generatedVisibleRows||r==0){this.generatedVisibleRows||(this.generatedVisibleRows=[]),this.generatedVisibleRows.splice(e);for(var o=r;o<e;o++){var s=this.createMatrixRow(this.getValueForNewRow());this.generatedVisibleRows.push(s),this.onMatrixRowCreated(s)}this.runCondition(this.getDataFilteredValues(),this.getDataFilteredProperties())}this.onRowsChanged()}},enumerable:!1,configurable:!0}),t.prototype.updateProgressInfoByValues=function(e){var r=this.value;Array.isArray(r)||(r=[]);for(var n=0;n<this.rowCount;n++){var o=n<r.length?r[n]:{};this.updateProgressInfoByRow(e,o)}},t.prototype.getValueForNewRow=function(){var e=null;return this.onGetValueForNewRowCallBack&&(e=this.onGetValueForNewRowCallBack(this)),e},Object.defineProperty(t.prototype,"allowRowsDragAndDrop",{get:function(){return this.getPropertyValue("allowRowsDragAndDrop")},set:function(e){this.setPropertyValue("allowRowsDragAndDrop",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRowsDragAndDrop",{get:function(){return this.allowRowsDragAndDrop&&!this.isReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lockedRowCount",{get:function(){return this.getPropertyValue("lockedRowCount",0)},set:function(e){this.setPropertyValue("lockedRowCount",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iconDragElement",{get:function(){return this.cssClasses.iconDragElement},enumerable:!1,configurable:!0}),t.prototype.createRenderedTable=function(){return new Ou(this)},Object.defineProperty(t.prototype,"rowCountValue",{get:function(){return this.getPropertyValue("rowCount")},set:function(e){this.setPropertyValue("rowCount",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minRowCount",{get:function(){return this.getPropertyValue("minRowCount")},set:function(e){e<0&&(e=0),this.setPropertyValue("minRowCount",e),e>this.maxRowCount&&(this.maxRowCount=e),this.rowCount<e&&(this.rowCount=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxRowCount",{get:function(){return this.getPropertyValue("maxRowCount")},set:function(e){e<=0||(e>b.matrix.maxRowCount&&(e=b.matrix.maxRowCount),e!=this.maxRowCount&&(this.setPropertyValue("maxRowCount",e),e<this.minRowCount&&(this.minRowCount=e),this.rowCount>e&&(this.rowCount=e)))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowAddRows",{get:function(){return this.getPropertyValue("allowAddRows")},set:function(e){this.setPropertyValue("allowAddRows",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowRemoveRows",{get:function(){return this.getPropertyValue("allowRemoveRows")},set:function(e){this.setPropertyValue("allowRemoveRows",e),this.isUpdateLocked||this.resetRenderedTable()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canAddRow",{get:function(){return this.allowAddRows&&!this.isReadOnly&&this.rowCount<this.maxRowCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canRemoveRows",{get:function(){var e=this.allowRemoveRows&&!this.isReadOnly&&this.rowCount>this.minRowCount;return this.canRemoveRowsCallback?this.canRemoveRowsCallback(e):e},enumerable:!1,configurable:!0}),t.prototype.canRemoveRow=function(e){if(!this.survey)return!0;var r=e.rowIndex-1;return this.lockedRowCount>0&&r<this.lockedRowCount?!1:this.survey.matrixAllowRemoveRow(this,r,e)},t.prototype.addRowUI=function(){this.addRow(!0)},t.prototype.getQuestionToFocusOnAddingRow=function(){for(var e=this.visibleRows[this.visibleRows.length-1],r=0;r<e.cells.length;r++){var n=e.cells[r].question;if(!!n&&n.isVisible&&!n.isReadOnly)return n}return null},t.prototype.addRow=function(e){var r=this.rowCount,n=this.canAddRow,o={question:this,canAddRow:n,allow:n};this.survey&&this.survey.matrixBeforeRowAdded(o);var s=n!==o.allow?o.allow:n!==o.canAddRow?o.canAddRow:n;if(!!s&&(this.onStartRowAddingRemoving(),this.addRowCore(),this.onEndRowAdding(),this.detailPanelShowOnAdding&&this.visibleRows.length>0&&this.visibleRows[this.visibleRows.length-1].showDetailPanel(),e&&r!==this.rowCount)){var a=this.getQuestionToFocusOnAddingRow();a&&a.focus()}},Object.defineProperty(t.prototype,"detailPanelShowOnAdding",{get:function(){return this.getPropertyValue("detailPanelShowOnAdding")},set:function(e){this.setPropertyValue("detailPanelShowOnAdding",e)},enumerable:!1,configurable:!0}),t.prototype.hasRowsAsItems=function(){return!1},t.prototype.unbindValue=function(){this.clearGeneratedRows(),this.clearPropertyValue("value"),this.rowCountValue=0,i.prototype.unbindValue.call(this)},t.prototype.isValueSurveyElement=function(e){return this.isEditingSurveyElement||i.prototype.isValueSurveyElement.call(this,e)},t.prototype.addRowCore=function(){var e=this.rowCount;this.rowCount=this.rowCount+1;var r=this.getDefaultRowValue(!0),n=null;if(this.isValueEmpty(r)||(n=this.createNewValue(),n.length==this.rowCount&&(n[n.length-1]=r,this.value=n)),this.data&&(this.runCellsCondition(this.getDataFilteredValues(),this.getDataFilteredProperties()),this.isValueEmpty(r))){var o=this.visibleRows[this.rowCount-1];this.isValueEmpty(o.value)||(n||(n=this.createNewValue()),!this.isValueSurveyElement(n)&&!this.isTwoValueEquals(n[n.length-1],o.value)&&(n[n.length-1]=o.value,this.value=n))}this.survey&&e+1==this.rowCount&&(this.survey.matrixRowAdded(this,this.visibleRows[this.visibleRows.length-1]),this.onRowsChanged())},t.prototype.getDefaultRowValue=function(e){for(var r=null,n=0;n<this.columns.length;n++){var o=this.columns[n].templateQuestion;!!o&&!this.isValueEmpty(o.getDefaultValue())&&(r=r||{},r[this.columns[n].name]=o.getDefaultValue())}if(!this.isValueEmpty(this.defaultRowValue))for(var s in this.defaultRowValue)r=r||{},r[s]=this.defaultRowValue[s];if(e&&this.defaultValueFromLastRow){var a=this.value;if(!!a&&Array.isArray(a)&&a.length>=this.rowCount-1){var l=a[this.rowCount-2];for(var s in l)r=r||{},r[s]=l[s]}}return r},t.prototype.removeRowUI=function(e){if(!!e&&!!e.rowName){var r=this.visibleRows.indexOf(e);if(r<0)return;e=r}this.removeRow(e)},t.prototype.isRequireConfirmOnRowDelete=function(e){if(!this.confirmDelete||e<0||e>=this.rowCount)return!1;var r=this.createNewValue();return this.isValueEmpty(r)||!Array.isArray(r)||e>=r.length?!1:!this.isValueEmpty(r[e])},t.prototype.removeRow=function(e,r){var n=this;if(!!this.canRemoveRows&&!(e<0||e>=this.rowCount)){var o=!!this.visibleRows&&e<this.visibleRows.length?this.visibleRows[e]:null;if(r===void 0&&(r=this.isRequireConfirmOnRowDelete(e)),r){xt(this.confirmDeleteText,function(){n.removeRowAsync(e,o)},void 0,this.getLocale(),this.survey.rootElement);return}this.removeRowAsync(e,o)}},t.prototype.removeRowAsync=function(e,r){!!r&&!!this.survey&&!this.survey.matrixRowRemoving(this,e,r)||(this.onStartRowAddingRemoving(),this.removeRowCore(e),this.onEndRowRemoving(r))},t.prototype.removeRowCore=function(e){var r=this.generatedVisibleRows?this.generatedVisibleRows[e]:null;if(this.generatedVisibleRows&&e<this.generatedVisibleRows.length&&this.generatedVisibleRows.splice(e,1),this.rowCountValue--,this.value){var n=[];Array.isArray(this.value)&&e<this.value.length?n=this.createValueCopy():n=this.createNewValue(),n.splice(e,1),n=this.deleteRowValue(n,null),this.isRowChanging=!0,this.value=n,this.isRowChanging=!1}this.onRowsChanged(),this.survey&&this.survey.matrixRowRemoved(this,e,r)},Object.defineProperty(t.prototype,"confirmDeleteText",{get:function(){return this.getLocalizableStringText("confirmDeleteText")},set:function(e){this.setLocalizableStringText("confirmDeleteText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locConfirmDeleteText",{get:function(){return this.getLocalizableString("confirmDeleteText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"addRowText",{get:function(){return this.getLocalizableStringText("addRowText",this.defaultAddRowText)},set:function(e){this.setLocalizableStringText("addRowText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locAddRowText",{get:function(){return this.getLocalizableString("addRowText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultAddRowText",{get:function(){return this.getLocalizationString(this.isColumnLayoutHorizontal?"addRow":"addColumn")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"addRowLocation",{get:function(){return this.getPropertyValue("addRowLocation")},set:function(e){this.setPropertyValue("addRowLocation",e)},enumerable:!1,configurable:!0}),t.prototype.getAddRowLocation=function(){return this.addRowLocation},Object.defineProperty(t.prototype,"hideColumnsIfEmpty",{get:function(){return this.getPropertyValue("hideColumnsIfEmpty")},set:function(e){this.setPropertyValue("hideColumnsIfEmpty",e)},enumerable:!1,configurable:!0}),t.prototype.getShowColumnsIfEmpty=function(){return this.hideColumnsIfEmpty},Object.defineProperty(t.prototype,"removeRowText",{get:function(){return this.getLocalizableStringText("removeRowText")},set:function(e){this.setLocalizableStringText("removeRowText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locRemoveRowText",{get:function(){return this.getLocalizableString("removeRowText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"emptyRowsText",{get:function(){return this.getLocalizableStringText("emptyRowsText")},set:function(e){this.setLocalizableStringText("emptyRowsText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locEmptyRowsText",{get:function(){return this.getLocalizableString("emptyRowsText")},enumerable:!1,configurable:!0}),t.prototype.getDisplayValueCore=function(e,r){if(!r||!Array.isArray(r))return r;for(var n=this.getUnbindValue(r),o=this.visibleRows,s=0;s<o.length&&s<n.length;s++){var a=n[s];!a||(n[s]=this.getRowDisplayValue(e,o[s],a))}return n},t.prototype.getConditionObjectRowName=function(e){return"["+e.toString()+"]"},t.prototype.getConditionObjectsRowIndeces=function(){for(var e=[],r=Math.max(this.rowCount,1),n=0;n<Math.min(b.matrix.maxRowCountInCondition,r);n++)e.push(n);return e},t.prototype.supportGoNextPageAutomatic=function(){return!1},Object.defineProperty(t.prototype,"hasRowText",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.onCheckForErrors=function(e,r){i.prototype.onCheckForErrors.call(this,e,r),!r&&this.hasErrorInMinRows()&&e.push(new ru(this.minRowCount,this))},t.prototype.hasErrorInMinRows=function(){if(this.minRowCount<=0||!this.isRequired||!this.generatedVisibleRows)return!1;for(var e=0,r=0;r<this.generatedVisibleRows.length;r++){var n=this.generatedVisibleRows[r];n.isEmpty||e++}return e<this.minRowCount},t.prototype.getUniqueColumnsNames=function(){var e=i.prototype.getUniqueColumnsNames.call(this),r=this.keyName;return!!r&&e.indexOf(r)<0&&e.push(r),e},t.prototype.generateRows=function(){var e=new Array;if(this.rowCount===0)return e;for(var r=this.createNewValue(),n=0;n<this.rowCount;n++)e.push(this.createMatrixRow(this.getRowValueByIndex(r,n)));return this.isValueEmpty(this.getDefaultRowValue(!1))||(this.value=r),e},t.prototype.createMatrixRow=function(e){return new Po(this.rowCounter++,this,e)},t.prototype.getInsertedDeletedIndex=function(e,r){for(var n=Math.min(e.length,r.length),o=0;o<n;o++)if(r[o]!==e[o].editingObj)return o;return n},t.prototype.isEditingObjectValueChanged=function(){var e=this.value;if(!this.generatedVisibleRows||!this.isValueSurveyElement(e))return!1;var r=this.lastDeletedRow;this.lastDeletedRow=void 0;var n=this.generatedVisibleRows;if(!Array.isArray(e)||Math.abs(n.length-e.length)>1||n.length===e.length)return!1;var o=this.getInsertedDeletedIndex(n,e);if(n.length>e.length){this.lastDeletedRow=n[o];var s=n[o];n.splice(o,1),this.isRendredTableCreated&&this.renderedTable.onRemovedRow(s)}else{var a=void 0;!!r&&r.editingObj===e[o]?a=r:a=this.createMatrixRow(e[o]),n.splice(o,0,a),r||this.onMatrixRowCreated(a),this.isRendredTableCreated&&this.renderedTable.onAddedRow(a,o)}return this.setPropertyValueDirectly("rowCount",e.length),!0},t.prototype.updateValueFromSurvey=function(e,r){r===void 0&&(r=!1),this.setRowCountValueFromData=!0,i.prototype.updateValueFromSurvey.call(this,e,r),this.setRowCountValueFromData=!1},t.prototype.onBeforeValueChanged=function(e){if(!(!e||!Array.isArray(e))){var r=e.length;if(r!=this.rowCount&&!(!this.setRowCountValueFromData&&r<this.initialRowCount)&&!this.isEditingObjectValueChanged()&&(this.setRowCountValueFromData=!0,this.rowCountValue=r,!!this.generatedVisibleRows)){if(r==this.generatedVisibleRows.length+1){this.onStartRowAddingRemoving();var n=this.getRowValueByIndex(e,r-1),o=this.createMatrixRow(n);this.generatedVisibleRows.push(o),this.onMatrixRowCreated(o),this.onEndRowAdding()}else this.clearGeneratedRows(),this.generatedVisibleRows=this.visibleRows,this.onRowsChanged();this.setRowCountValueFromData=!1}}},t.prototype.createNewValue=function(){var e=this.createValueCopy();(!e||!Array.isArray(e))&&(e=[]),e.length>this.rowCount&&e.splice(this.rowCount);var r=this.getDefaultRowValue(!1);r=r||{};for(var n=e.length;n<this.rowCount;n++)e.push(this.getUnbindValue(r));return e},t.prototype.deleteRowValue=function(e,r){for(var n=!0,o=0;o<e.length;o++)if(this.isObject(e[o])&&Object.keys(e[o]).length>0){n=!1;break}return n?null:e},t.prototype.getRowValueByIndex=function(e,r){return Array.isArray(e)&&r>=0&&r<e.length?e[r]:null},t.prototype.getRowValueCore=function(e,r,n){if(n===void 0&&(n=!1),!this.generatedVisibleRows)return{};var o=this.getRowValueByIndex(r,this.generatedVisibleRows.indexOf(e));return!o&&n&&(o={}),o},t.prototype.getAddRowButtonCss=function(e){return e===void 0&&(e=!1),new O().append(this.cssClasses.button).append(this.cssClasses.buttonAdd).append(this.cssClasses.emptyRowsButton,e).toString()},t.prototype.getRemoveRowButtonCss=function(){return new O().append(this.cssClasses.button).append(this.cssClasses.buttonRemove).toString()},t.prototype.getRootCss=function(){var e;return new O().append(i.prototype.getRootCss.call(this)).append(this.cssClasses.empty,!(!((e=this.renderedTable)===null||e===void 0)&&e.showTable)).toString()},t}(dt),Ou=function(i){un(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.setDefaultRowActions=function(e,r){i.prototype.setDefaultRowActions.call(this,e,r)},t}(rn);x.addClass("matrixdynamic",[{name:"rowsVisibleIf:condition",visible:!1},{name:"allowAddRows:boolean",default:!0},{name:"allowRemoveRows:boolean",default:!0},{name:"rowCount:number",default:2,minValue:0,isBindable:!0},{name:"minRowCount:number",default:0,minValue:0},{name:"maxRowCount:number",default:b.matrix.maxRowCount},{name:"keyName"},"defaultRowValue:rowvalue","defaultValueFromLastRow:boolean",{name:"confirmDelete:boolean"},{name:"confirmDeleteText",dependsOn:"confirmDelete",visibleIf:function(i){return!i||i.confirmDelete},serializationProperty:"locConfirmDeleteText"},{name:"addRowLocation",default:"default",choices:["default","top","bottom","topBottom"]},{name:"addRowText",serializationProperty:"locAddRowText"},{name:"removeRowText",serializationProperty:"locRemoveRowText"},"hideColumnsIfEmpty:boolean",{name:"emptyRowsText:text",serializationProperty:"locEmptyRowsText",dependsOn:"hideColumnsIfEmpty",visibleIf:function(i){return!i||i.hideColumnsIfEmpty}},{name:"detailPanelShowOnAdding:boolean",dependsOn:"detailPanelMode",visibleIf:function(i){return i.detailPanelMode!=="none"}},"allowRowsDragAndDrop:switch"],function(){return new cn("")},"matrixdropdownbase"),Z.Instance.registerQuestion("matrixdynamic",function(i){var t=new cn(i);return t.choices=[1,2,3,4,5],dt.addDefaultColumns(t),t});var oe={currentType:"",getCss:function(){var i=this.currentType?this[this.currentType]:nr;return i||(i=nr),i},getAvailableThemes:function(){return Object.keys(this).filter(function(i){return["currentType","getCss","getAvailableThemes"].indexOf(i)===-1})}},nr={root:"sd-root-modern",rootProgress:"sd-progress",rootMobile:"sd-root-modern--mobile",rootAnimationDisabled:"sd-root-modern--animation-disabled",rootReadOnly:"sd-root--readonly",rootCompact:"sd-root--compact",rootFitToContainer:"sd-root-modern--full-container",rootWrapper:"sd-root-modern__wrapper",rootWrapperFixed:"sd-root-modern__wrapper--fixed",rootWrapperHasImage:"sd-root-modern__wrapper--has-image",rootBackgroundImage:"sd-root_background-image",container:"sd-container-modern",header:"sd-title sd-container-modern__title",bodyContainer:"sv-components-row",body:"sd-body",bodyWithTimer:"sd-body--with-timer",clockTimerRoot:"sd-timer",clockTimerRootTop:"sd-timer--top",clockTimerRootBottom:"sd-timer--bottom",clockTimerProgress:"sd-timer__progress",clockTimerProgressAnimation:"sd-timer__progress--animation",clockTimerTextContainer:"sd-timer__text-container",clockTimerMinorText:"sd-timer__text--minor",clockTimerMajorText:"sd-timer__text--major",bodyEmpty:"sd-body sd-body--empty",bodyLoading:"sd-body--loading",footer:"sd-footer sd-body__navigation sd-clearfix",title:"sd-title",description:"sd-description",logo:"sd-logo",logoImage:"sd-logo__image",headerText:"sd-header__text",headerClose:"sd-hidden",navigationButton:"",bodyNavigationButton:"sd-btn",completedPage:"sd-completedpage",completedBeforePage:"sd-completed-before-page",timerRoot:"sd-body__timer",navigation:{complete:"sd-btn--action sd-navigation__complete-btn",prev:"sd-navigation__prev-btn",next:"sd-navigation__next-btn",start:"sd-navigation__start-btn",preview:"sd-navigation__preview-btn",edit:"sd-btn sd-btn--small"},panel:{contentFadeIn:"sd-element__content--fade-in",contentFadeOut:"sd-element__content--fade-out",fadeIn:"sd-element-wrapper--fade-in",fadeOut:"sd-element-wrapper--fade-out",asPage:"sd-panel--as-page",number:"sd-element__num",title:"sd-title sd-element__title sd-panel__title",titleExpandable:"sd-element__title--expandable",titleNumInline:"sd-element__title--num-inline",titleExpanded:"sd-element__title--expanded",titleCollapsed:"sd-element__title--collapsed",titleDisabled:"sd-element__title--disabled",titleHidden:"sd-element__title--hidden",titleOnExpand:"sd-panel__title--expanded",titleOnError:"sd-panel__title--error",titleBar:"sd-action-title-bar",description:"sd-description sd-panel__description",container:"sd-element sd-element--complex sd-panel sd-row__panel",withFrame:"sd-element--with-frame",content:"sd-element__content sd-panel__content",icon:"sd-panel__icon",iconExpanded:"sd-panel__icon--expanded",footer:"sd-panel__footer",requiredText:"sd-panel__required-text",header:"sd-panel__header sd-element__header sd-element__header--location-top",headerHidden:"sd-panel__header--hidden",collapsed:"sd-element--collapsed",expanded:"sd-element--expanded",expandable:"sd-element--expandable",expandableAnimating:"sd-elemenet--expandable--animating",nested:"sd-element--nested sd-element--nested-with-borders",invisible:"sd-element--invisible",navigationButton:"",compact:"sd-element--with-frame sd-element--compact",errorsContainer:"sd-panel__errbox sd-element__erbox sd-element__erbox--above-element"},paneldynamic:{mainRoot:"sd-element  sd-question sd-question--paneldynamic sd-element--complex sd-question--complex sd-row__question",empty:"sd-question--empty",root:"sd-paneldynamic",iconRemove:"sd-hidden",navigation:"sd-paneldynamic__navigation",title:"sd-title sd-element__title sd-question__title",header:"sd-paneldynamic__header sd-element__header",headerTab:"sd-paneldynamic__header-tab",button:"sd-action sd-paneldynamic__btn",buttonRemove:"sd-action--negative sd-paneldynamic__remove-btn",buttonAdd:"sd-paneldynamic__add-btn",buttonPrev:"sd-paneldynamic__prev-btn sd-action--icon sd-action",buttonPrevDisabled:"sd-action--disabled",buttonNextDisabled:"sd-action--disabled",buttonNext:"sd-paneldynamic__next-btn sd-action--icon sd-action",progressContainer:"sd-paneldynamic__progress-container",progress:"sd-progress",progressBar:"sd-progress__bar",nested:"sd-element--nested sd-element--nested-with-borders",progressText:"sd-paneldynamic__progress-text",separator:"sd-paneldynamic__separator",panelWrapper:"sd-paneldynamic__panel-wrapper",footer:"sd-paneldynamic__footer",panelFooter:"sd-paneldynamic__panel-footer",footerButtonsContainer:"sd-paneldynamic__buttons-container",panelsContainer:"sd-paneldynamic__panels-container",panelWrapperInRow:"sd-paneldynamic__panel-wrapper--in-row",panelWrapperFadeIn:"sd-paneldynamic__panel-wrapper--fade-in",panelWrapperFadeOut:"sd-paneldynamic__panel-wrapper--fade-out",panelWrapperList:"sd-paneldynamic__panel-wrapper--list",progressBtnIcon:"icon-progressbuttonv2",noEntriesPlaceholder:"sd-paneldynamic__placeholder sd-question__placeholder",compact:"sd-element--with-frame sd-element--compact",tabsRoot:"sd-tabs-toolbar",tabsLeft:"sd-tabs-toolbar--left",tabsRight:"sd-tabs-toolbar--right",tabsCenter:"sd-tabs-toolbar--center",tabs:{item:"sd-tab-item",itemPressed:"sd-tab-item--pressed",itemAsIcon:"sd-tab-item--icon",itemIcon:"sd-tab-item__icon",itemTitle:"sd-tab-item__title"}},progress:"sd-progress sd-body__progress",progressTop:"sd-body__progress--top",progressBottom:"sd-body__progress--bottom",progressBar:"sd-progress__bar",progressText:"sd-progress__text",progressButtonsRoot:"sd-progress-buttons",progressButtonsNumbered:"sd-progress-buttons--numbered",progressButtonsFitSurveyWidth:"sd-progress-buttons--fit-survey-width",progressButtonsContainerCenter:"sd-progress-buttons__container-center",progressButtonsContainer:"sd-progress-buttons__container",progressButtonsConnector:"sd-progress-buttons__connector",progressButtonsButton:"sd-progress-buttons__button",progressButtonsButtonBackground:"sd-progress-buttons__button-background",progressButtonsButtonContent:"sd-progress-buttons__button-content",progressButtonsHeader:"sd-progress-buttons__header",progressButtonsFooter:"sd-progress-buttons__footer",progressButtonsImageButtonLeft:"sd-progress-buttons__image-button-left",progressButtonsImageButtonRight:"sd-progress-buttons__image-button-right",progressButtonsImageButtonHidden:"sd-progress-buttons__image-button--hidden",progressButtonsListContainer:"sd-progress-buttons__list-container",progressButtonsList:"sd-progress-buttons__list",progressButtonsListElementPassed:"sd-progress-buttons__list-element--passed",progressButtonsListElementCurrent:"sd-progress-buttons__list-element--current",progressButtonsListElementNonClickable:"sd-progress-buttons__list-element--nonclickable",progressButtonsPageTitle:"sd-progress-buttons__page-title",progressButtonsPageDescription:"sd-progress-buttons__page-description",progressTextInBar:"sd-hidden",page:{root:"sd-page sd-body__page",emptyHeaderRoot:"sd-page__empty-header",title:"sd-title sd-page__title",description:"sd-description sd-page__description",errorsContainer:"sd-page__errbox"},pageTitle:"sd-title sd-page__title",pageDescription:"sd-description sd-page__description",row:"sd-row sd-clearfix",rowMultiple:"sd-row--multiple",rowCompact:"sd-row--compact",rowFadeIn:"sd-row--fade-in",rowDelayedFadeIn:"sd-row--delayed-fade-in",rowFadeOut:"sd-row--fade-out",pageRow:"sd-page__row",question:{contentFadeIn:"sd-element__content--fade-in",contentFadeOut:"sd-element__content--fade-out",fadeIn:"sd-element-wrapper--fade-in",fadeOut:"sd-element-wrapper--fade-out",mainRoot:"sd-element sd-question sd-row__question",flowRoot:"sd-element sd-question sd-row__question sd-row__question--flow",withFrame:"sd-element--with-frame",asCell:"sd-table__cell",answered:"sd-question--answered",header:"sd-question__header sd-element__header",headerLeft:"sd-question__header--location--left",headerTop:"sd-question__header--location-top sd-element__header--location-top",headerBottom:"sd-question__header--location--bottom",content:"sd-element__content sd-question__content",contentSupportContainerQueries:"sd-question__content--support-container-queries",contentLeft:"sd-question__content--left",titleNumInline:"sd-element__title--num-inline",titleLeftRoot:"sd-question--left",titleTopRoot:"sd-question--title-top",descriptionUnderInputRoot:"sd-question--description-under-input",titleBottomRoot:"sd-question--title-bottom",titleOnAnswer:"sd-question__title--answer",titleEmpty:"sd-question__title--empty",titleOnError:"sd-question__title--error",title:"sd-title sd-element__title sd-question__title",titleExpandable:"sd-element__title--expandable",titleExpanded:"sd-element__title--expanded",titleCollapsed:"sd-element__title--collapsed",titleDisabled:"sd-element__title--disabled",titleReadOnly:"sd-element__title--readonly",titleBar:"sd-action-title-bar",requiredText:"sd-question__required-text",number:"sd-element__num",description:"sd-description sd-question__description",descriptionUnderInput:"sd-description sd-question__description sd-question__description--under-input",comment:"sd-input sd-comment",other:"sd-input sd-comment",required:"sd-question--required",titleRequired:"sd-question__title--required",indent:20,footer:"sd-question__footer",commentArea:"sd-question__comment-area",formGroup:"sd-question__form-group",hasError:"sd-question--error",hasErrorTop:"sd-question--error-top",hasErrorBottom:"sd-question--error-bottom",collapsed:"sd-element--collapsed",expandable:"sd-element--expandable",expandableAnimating:"sd-elemenet--expandable--animating",expanded:"sd-element--expanded",nested:"sd-element--nested",invisible:"sd-element--invisible",composite:"sd-element--complex sd-composite",disabled:"sd-question--disabled",readOnly:"sd-question--readonly",preview:"sd-question--preview",noPointerEventsMode:"sd-question--no-pointer-events",errorsContainer:"sd-element__erbox sd-question__erbox",errorsContainerTop:"sd-element__erbox--above-element sd-question__erbox--above-question",errorsContainerBottom:"sd-question__erbox--below-question"},image:{mainRoot:"sd-question sd-question--image",root:"sd-image",image:"sd-image__image",adaptive:"sd-image__image--adaptive",noImage:"sd-image__no-image",noImageSvgIconId:"icon-no-image",withFrame:""},html:{mainRoot:"sd-question sd-row__question sd-question--html",root:"sd-html",withFrame:"",nested:"sd-element--nested sd-html--nested"},error:{root:"sd-error",icon:"",item:"",locationTop:"",locationBottom:""},checkbox:{root:"sd-selectbase",rootMobile:"sd-selectbase--mobile",rootRow:"sd-selectbase--row",rootMultiColumn:"sd-selectbase--multi-column",item:"sd-item sd-checkbox sd-selectbase__item",itemOnError:"sd-item--error",itemSelectAll:"sd-checkbox--selectall",itemNone:"sd-checkbox--none",itemDisabled:"sd-item--disabled sd-checkbox--disabled",itemReadOnly:"sd-item--readonly sd-checkbox--readonly",itemPreview:"sd-item--preview sd-checkbox--preview",itemPreviewSvgIconId:"#icon-v2check",itemChecked:"sd-item--checked sd-checkbox--checked",itemHover:"sd-item--allowhover sd-checkbox--allowhover",itemInline:"sd-selectbase__item--inline",label:"sd-selectbase__label",labelChecked:"",itemControl:"sd-visuallyhidden sd-item__control sd-checkbox__control",itemDecorator:"sd-item__svg sd-checkbox__svg",itemSvgIconId:"#icon-v2check",controlLabel:"sd-item__control-label",materialDecorator:"sd-item__decorator sd-checkbox__decorator",other:"sd-input sd-comment sd-selectbase__other",column:"sd-selectbase__column"},radiogroup:{root:"sd-selectbase",rootMobile:"sd-selectbase--mobile",rootRow:"sd-selectbase--row",rootMultiColumn:"sd-selectbase--multi-column",item:"sd-item sd-radio sd-selectbase__item",itemOnError:"sd-item--error",itemInline:"sd-selectbase__item--inline",label:"sd-selectbase__label",labelChecked:"",itemDisabled:"sd-item--disabled sd-radio--disabled",itemReadOnly:"sd-item--readonly sd-radio--readonly",itemPreview:"sd-item--preview sd-radio--preview",itemPreviewSvgIconId:"#icon-v2check",itemChecked:"sd-item--checked sd-radio--checked",itemHover:"sd-item--allowhover sd-radio--allowhover",itemControl:"sd-visuallyhidden sd-item__control sd-radio__control",itemDecorator:"sd-item__svg sd-radio__svg",controlLabel:"sd-item__control-label",materialDecorator:"sd-item__decorator sd-radio__decorator",other:"sd-input sd-comment sd-selectbase__other",clearButton:"",column:"sd-selectbase__column"},boolean:{mainRoot:"sd-element sd-question sd-row__question sd-question--boolean",root:"sv_qcbc sv_qbln sd-scrollable-container sd-boolean-root",rootRadio:"sv_qcbc sv_qbln sd-scrollable-container sd-scrollable-container--compact",item:"sd-boolean",itemOnError:"sd-boolean--error",control:"sd-boolean__control sd-visuallyhidden",itemChecked:"sd-boolean--checked",itemExchanged:"sd-boolean--exchanged",itemIndeterminate:"sd-boolean--indeterminate",itemDisabled:"sd-boolean--disabled",itemReadOnly:"sd-boolean--readonly",itemPreview:"sd-boolean--preview",itemHover:"sd-boolean--allowhover",label:"sd-boolean__label",labelTrue:"sd-boolean__label--true",labelFalse:"sd-boolean__label--false",switch:"sd-boolean__switch",disabledLabel:"sd-checkbox__label--disabled",labelReadOnly:"sd-checkbox__label--readonly",labelPreview:"sd-checkbox__label--preview",sliderText:"sd-boolean__thumb-text",slider:"sd-boolean__thumb",sliderGhost:"sd-boolean__thumb-ghost",radioItem:"sd-item",radioItemChecked:"sd-item--checked sd-radio--checked",radioItemDisabled:"sd-item--disabled sd-radio--disabled",radioItemReadOnly:"sd-item--readonly sd-radio--readonly",radioItemPreview:"sd-item--preview sd-radio--preview",itemPreviewSvgIconId:"#icon-v2check",radioLabel:"sd-selectbase__label",radioControlLabel:"sd-item__control-label",radioFieldset:"sd-selectbase",itemRadioDecorator:"sd-item__svg sd-radio__svg",materialRadioDecorator:"sd-item__decorator sd-radio__decorator",itemRadioControl:"sd-visuallyhidden sd-item__control sd-radio__control",rootCheckbox:"sd-selectbase",checkboxItem:"sd-item sd-selectbase__item sd-checkbox",checkboxLabel:"sd-selectbase__label",checkboxItemOnError:"sd-item--error",checkboxItemIndeterminate:"sd-checkbox--intermediate",checkboxItemChecked:"sd-item--checked sd-checkbox--checked",checkboxItemDecorator:"sd-item__svg sd-checkbox__svg",checkboxItemDisabled:"sd-item--disabled sd-checkbox--disabled",checkboxItemReadOnly:"sd-item--readonly sd-checkbox--readonly",checkboxItemPreview:"sd-item--preview sd-checkbox--preview",controlCheckbox:"sd-visuallyhidden sd-item__control sd-checkbox__control",checkboxMaterialDecorator:"sd-item__decorator sd-checkbox__decorator",checkboxControlLabel:"sd-item__control-label",svgIconCheckedId:"#icon-v2check"},text:{root:"sd-input sd-text",small:"sd-row__question--small",controlDisabled:"sd-input--disabled",controlReadOnly:"sd-input--readonly",controlPreview:"sd-input--preview",constrolWithCharacterCounter:"sd-text__character-counter",characterCounterBig:"sd-text__character-counter--big",content:"sd-text__content sd-question__content",remainingCharacterCounter:"sd-remaining-character-counter",onError:"sd-input--error"},multipletext:{root:"sd-multipletext",rootMobile:"sd-multipletext--mobile",itemLabel:"sd-multipletext__item-container sd-input",itemLabelReadOnly:"sd-input--readonly",itemLabelDisabled:"sd-input--disabled",itemLabelPreview:"sd-input--preview",itemLabelOnError:"sd-multipletext__item-container--error",itemLabelAllowFocus:"sd-multipletext__item-container--allow-focus",itemLabelAnswered:"sd-multipletext__item-container--answered",itemWithCharacterCounter:"sd-multipletext-item__character-counter",item:"sd-multipletext__item",itemTitle:"sd-multipletext__item-title",content:"sd-multipletext__content sd-question__content",row:"sd-multipletext__row",cell:"sd-multipletext__cell",cellError:"sd-multipletext__cell--error",cellErrorTop:"sd-multipletext__cell--error-top",cellErrorBottom:"sd-multipletext__cell--error-bottom"},dropdown:{root:"sd-selectbase",popup:"sv-dropdown-popup",small:"sd-row__question--small",selectWrapper:"sv-dropdown_select-wrapper",other:"sd-input sd-comment sd-selectbase__other",onError:"sd-input--error",label:"sd-selectbase__label",item:"sd-item sd-radio sd-selectbase__item",itemDisabled:"sd-item--disabled sd-radio--disabled",itemChecked:"sd-item--checked sd-radio--checked",itemHover:"sd-item--allowhover sd-radio--allowhover",itemControl:"sd-visuallyhidden sd-item__control sd-radio__control",itemDecorator:"sd-item__svg sd-radio__svg",cleanButton:"sd-dropdown_clean-button",cleanButtonSvg:"sd-dropdown_clean-button-svg",cleanButtonIconId:"icon-clear",chevronButton:"sd-dropdown_chevron-button",chevronButtonSvg:"sd-dropdown_chevron-button-svg",chevronButtonIconId:"icon-chevron",control:"sd-input sd-dropdown",controlInputFieldComponent:"sd-dropdown__input-field-component",controlValue:"sd-dropdown__value",controlDisabled:"sd-input--disabled",controlReadOnly:"sd-input--readonly",controlPreview:"sd-input--preview",controlEmpty:"sd-dropdown--empty",controlLabel:"sd-item__control-label",filterStringInput:"sd-dropdown__filter-string-input",materialDecorator:"sd-item__decorator sd-radio__decorator",hintPrefix:"sd-dropdown__hint-prefix",hintSuffix:"sd-dropdown__hint-suffix"},imagepicker:{mainRoot:"sd-element sd-question sd-row__question",root:"sd-selectbase sd-imagepicker",rootColumn:"sd-imagepicker--column",item:"sd-imagepicker__item",itemOnError:"sd-imagepicker__item--error",itemInline:"sd-imagepicker__item--inline",itemChecked:"sd-imagepicker__item--checked",itemDisabled:"sd-imagepicker__item--disabled",itemReadOnly:"sd-imagepicker__item--readonly",itemPreview:"sd-imagepicker__item--preview",itemHover:"sd-imagepicker__item--allowhover",label:"sd-imagepicker__label",itemDecorator:"sd-imagepicker__item-decorator",imageContainer:"sd-imagepicker__image-container",itemControl:"sd-imagepicker__control sd-visuallyhidden",image:"sd-imagepicker__image",itemText:"sd-imagepicker__text",other:"sd-input sd-comment",itemNoImage:"sd-imagepicker__no-image",itemNoImageSvgIcon:"sd-imagepicker__no-image-svg",itemNoImageSvgIconId:"icon-no-image",column:"sd-selectbase__column sd-imagepicker__column",checkedItemDecorator:"sd-imagepicker__check-decorator",checkedItemSvgIcon:"sd-imagepicker__check-icon",checkedItemSvgIconId:"icon-v2check_24x24"},matrix:{mainRoot:"sd-element sd-question sd-row__question sd-element--complex sd-question--complex sd-question--table",tableWrapper:"sd-matrix sd-table-wrapper",root:"sd-table sd-matrix__table",columnsAutoWidth:"sd-table--columnsautowidth",noHeader:"sd-table--no-header",rootVerticalAlignTop:"sd-table--align-top",rootVerticalAlignMiddle:"sd-table--align-middle",rootAlternateRows:"sd-table--alternate-rows",rowError:"sd-matrix__row--error",cell:"sd-table__cell sd-matrix__cell",row:"sd-table__row",rowDisabled:"sd-table__row-disabled",rowReadOnly:"sd-table__row-readonly",headerCell:"sd-table__cell sd-table__cell--header",rowTextCell:"sd-table__cell sd-matrix__cell sd-table__cell--row-text",label:"sd-item sd-radio sd-matrix__label",itemOnError:"sd-item--error",itemValue:"sd-visuallyhidden sd-item__control sd-radio__control",itemChecked:"sd-item--checked sd-radio--checked",itemDisabled:"sd-item--disabled sd-radio--disabled",itemReadOnly:"sd-item--readonly sd-radio--readonly",itemPreview:"sd-item--preview sd-radio--preview",itemPreviewSvgIconId:"#icon-v2check",itemHover:"sd-radio--allowhover",materialDecorator:"sd-item__decorator sd-radio__decorator",itemDecorator:"sd-item__svg sd-radio__svg",cellText:"sd-matrix__text",cellTextSelected:"sd-matrix__text--checked",cellTextDisabled:"sd-matrix__text--disabled",cellResponsiveTitle:"sd-matrix__responsive-title",compact:"sd-element--with-frame sd-element--compact"},matrixdropdown:{mainRoot:"sd-element sd-question sd-row__question sd-element--complex sd-question--complex sd-question--table",rootScroll:"sd-question--scroll",root:"sd-table sd-matrixdropdown",columnsAutoWidth:"sd-table--columnsautowidth",noHeader:"sd-table--no-header",hasFooter:"sd-table--has-footer",rootVerticalAlignTop:"sd-table--align-top",rootVerticalAlignMiddle:"sd-table--align-middle",tableWrapper:"sd-table-wrapper",rootAlternateRows:"sd-table--alternate-rows",cell:"sd-table__cell",cellResponsiveTitle:"sd-table__responsive-title",errorsCell:"sd-table__cell--error",errorsCellTop:"sd-table__cell--error-top",errorsCellBottom:"sd-table__cell--error-bottom",itemCell:"sd-table__cell--item",row:"sd-table__row",rowFadeIn:"sd-table__row--fade-in",rowFadeOut:"sd-table__row--fade-out",expandedRow:"sd-table__row--expanded",rowHasPanel:"sd-table__row--has-panel",rowHasEndActions:"sd-table__row--has-end-actions",headerCell:"sd-table__cell sd-table__cell--header",rowTextCell:"sd-table__cell sd-table__cell--row-text",footerCell:"sd-table__cell sd-table__cell--footer",footerTotalCell:"sd-table__cell sd-table__cell--footer-total",columnTitleCell:"sd-table__cell--column-title",cellRequiredText:"sd-question__required-text",detailButton:"sd-table__cell--detail-button",detailButtonExpanded:"sd-table__cell--detail-button--expanded",detailIcon:"sd-detail-panel__icon",detailIconExpanded:"sd-detail-panel__icon--expanded",detailIconId:"icon-expanddetail",detailIconExpandedId:"icon-collapsedetail",detailPanelCell:"sd-table__cell--detail-panel",detailRowCell:"sd-table__cell--detail",actionsCellPrefix:"sd-table__cell-action",actionsCell:"sd-table__cell sd-table__cell--actions",actionsCellDrag:"sd-table__cell--drag",emptyCell:"sd-table__cell--empty",verticalCell:"sd-table__cell--vertical",cellQuestionWrapper:"sd-table__question-wrapper",compact:"sd-element--with-frame sd-element--compact"},matrixdynamic:{mainRoot:"sd-element sd-question sd-row__question sd-element--complex sd-question--complex sd-question--table",rootScroll:"sd-question--scroll",empty:"sd-question--empty",root:"sd-table sd-matrixdynamic",columnsAutoWidth:"sd-table--columnsautowidth",noHeader:"sd-table--no-header",hasFooter:"sd-table--has-footer",tableWrapper:"sd-table-wrapper",rootAlternateRows:"sd-table--alternate-rows",content:"sd-matrixdynamic__content sd-question__content",cell:"sd-table__cell",cellResponsiveTitle:"sd-table__responsive-title",row:"sd-table__row",rowFadeIn:"sd-table__row--fade-in",rowFadeOut:"sd-table__row--fade-out",rowHasPanel:"sd-table__row--has-panel",rowHasEndActions:"sd-table__row--has-end-actions",expandedRow:"sd-table__row--expanded",itemCell:"sd-table__cell--item",headerCell:"sd-table__cell sd-table__cell--header",rowTextCell:"sd-table__cell sd-table__cell--row-text",footerCell:"sd-table__cell sd-table__cell--footer",columnTitleCell:"sd-table__cell--column-title",cellRequiredText:"sd-question__required-text",button:"sd-action sd-matrixdynamic__btn",detailRow:"sd-table__row sd-table__row--detail",detailButton:"sd-table__cell--detail-button",detailButtonExpanded:"sd-table__cell--detail-button--expanded",detailIcon:"sd-detail-panel__icon",detailIconExpanded:"sd-detail-panel__icon--expanded",detailIconId:"icon-expanddetail",detailIconExpandedId:"icon-collapsedetail",detailPanelCell:"sd-table__cell--detail-panel",detailRowCell:"sd-table__cell--detail",actionsCellPrefix:"sd-table__cell-action",actionsCell:"sd-table__cell sd-table__cell--actions",actionsCellDrag:"sd-table__cell--drag",buttonAdd:"sd-matrixdynamic__add-btn",buttonRemove:"sd-action--negative sd-matrixdynamic__remove-btn",iconAdd:"sd-hidden",iconRemove:"",dragElementDecorator:"sd-drag-element__svg",iconDragElement:"#icon-v2dragelement_16x16",footer:"sd-matrixdynamic__footer",footerTotalCell:"sd-table__cell sd-table__cell--footer-total",emptyRowsSection:"sd-matrixdynamic__placeholder sd-question__placeholder",iconDrag:"sv-matrixdynamic__drag-icon",ghostRow:"sv-matrix-row--drag-drop-ghost-mod",emptyCell:"sd-table__cell--empty",verticalCell:"sd-table__cell--vertical",cellQuestionWrapper:"sd-table__question-wrapper",errorsCell:"sd-table__cell--error",errorsCellTop:"sd-table__cell--error-top",errorsCellBottom:"sd-table__cell--error-bottom",compact:"sd-element--with-frame sd-element--compact"},rating:{rootDropdown:"sd-scrollable-container sd-scrollable-container--compact sd-selectbase",root:"sd-scrollable-container sd-rating",rootWrappable:"sd-rating--wrappable",rootLabelsTop:"sd-rating--labels-top",rootLabelsBottom:"sd-rating--labels-bottom",rootLabelsDiagonal:"sd-rating--labels-diagonal",item:"sd-rating__item",itemOnError:"sd-rating__item--error",itemHover:"sd-rating__item--allowhover",selected:"sd-rating__item--selected",itemStar:"sd-rating__item-star",itemStarOnError:"sd-rating__item-star--error",itemStarHover:"sd-rating__item-star--allowhover",itemStarSelected:"sd-rating__item-star--selected",itemStarDisabled:"sd-rating__item-star--disabled",itemStarReadOnly:"sd-rating__item-star--readonly",itemStarPreview:"sd-rating__item-star--preview",itemStarHighlighted:"sd-rating__item-star--highlighted",itemStarUnhighlighted:"sd-rating__item-star--unhighlighted",itemStarSmall:"sd-rating__item-star--small",itemSmiley:"sd-rating__item-smiley",itemSmileyOnError:"sd-rating__item-smiley--error",itemSmileyHover:"sd-rating__item-smiley--allowhover",itemSmileySelected:"sd-rating__item-smiley--selected",itemSmileyDisabled:"sd-rating__item-smiley--disabled",itemSmileyReadOnly:"sd-rating__item-smiley--readonly",itemSmileyPreview:"sd-rating__item-smiley--preview",itemSmileyHighlighted:"sd-rating__item-star--highlighted",itemSmileyScaleColored:"sd-rating__item-smiley--scale-colored",itemSmileyRateColored:"sd-rating__item-smiley--rate-colored",itemSmileySmall:"sd-rating__item-smiley--small",minText:"sd-rating__item-text sd-rating__min-text",itemText:"sd-rating__item-text",maxText:"sd-rating__item-text sd-rating__max-text",itemDisabled:"sd-rating__item--disabled",itemReadOnly:"sd-rating__item--readonly",itemPreview:"sd-rating__item--preview",itemFixedSize:"sd-rating__item--fixed-size",control:"sd-input sd-dropdown",itemSmall:"sd-rating--small",selectWrapper:"sv-dropdown_select-wrapper",controlValue:"sd-dropdown__value",controlDisabled:"sd-input--disabled",controlReadOnly:"sd-input--readonly",controlPreview:"sd-input--preview",controlEmpty:"sd-dropdown--empty",filterStringInput:"sd-dropdown__filter-string-input",chevronButton:"sd-dropdown_chevron-button",chevronButtonSvg:"sd-dropdown_chevron-button-svg",chevronButtonIconId:"icon-chevron",popup:"sv-dropdown-popup",onError:"sd-input--error"},comment:{root:"sd-input sd-comment",small:"sd-row__question--small",controlDisabled:"sd-input--disabled",controlReadOnly:"sd-input--readonly",controlPreview:"sd-input--preview",content:"sd-comment__content sd-question__content",remainingCharacterCounter:"sd-remaining-character-counter",onError:"sd-input--error"},expression:"sd-expression",file:{root:"sd-file",rootDragging:"sd-file--dragging",rootAnswered:"sd-file--answered",rootDisabled:"sd-file--disabled",rootReadOnly:"sd-file--readonly",rootPreview:"sd-file--preview",other:"sd-input sd-comment",placeholderInput:"sd-visuallyhidden",previewItem:"sd-file__preview-item",fileSign:"",fileList:"sd-file__list",fileSignBottom:"sd-file__sign",dragArea:"sd-file__drag-area",dragAreaActive:"sd-file__drag-area--active",fileDecorator:"sd-file__decorator",onError:"sd-file__decorator--error",fileDecoratorDrag:"sd-file__decorator--drag",fileInput:"sd-visuallyhidden",noFileChosen:"sd-description sd-file__no-file-chosen",chooseFile:"sd-file__choose-btn",chooseFileAsText:"sd-action sd-file__choose-btn--text",chooseFileAsTextDisabled:"sd-action--disabled",chooseFileAsIcon:"sd-file__choose-btn--icon",chooseFileIconId:"icon-choosefile",disabled:"sd-file__choose-btn--disabled",controlDisabled:"sd-file__choose-file-btn--disabled",removeButton:"sd-context-btn--negative",removeButtonBottom:"",removeButtonIconId:"icon-clear",removeFile:"sd-hidden",removeFileSvg:"",removeFileSvgIconId:"icon-close_16x16",wrapper:"sd-file__wrapper",defaultImage:"sd-file__default-image",defaultImageIconId:"icon-defaultfile",leftIconId:"icon-arrowleft",rightIconId:"icon-arrowright",removeFileButton:"sd-context-btn--small sd-context-btn--with-border sd-context-btn--colorful sd-context-btn--negative sd-file__remove-file-button",dragAreaPlaceholder:"sd-file__drag-area-placeholder",imageWrapper:"sd-file__image-wrapper",imageWrapperDefaultImage:"sd-file__image-wrapper--default-image",single:"sd-file--single",singleImage:"sd-file--single-image",mobile:"sd-file--mobile",videoContainer:"sd-file__video-container",contextButton:"sd-context-btn",video:"sd-file__video",actionsContainer:"sd-file__actions-container",closeCameraButton:"sd-file__close-camera-button",changeCameraButton:"sd-file__change-camera-button",takePictureButton:"sd-file__take-picture-button",loadingIndicator:"sd-file__loading-indicator"},signaturepad:{mainRoot:"sd-element sd-question sd-question--signature sd-row__question",root:"sd-signaturepad sjs_sp_container",small:"sd-row__question--small",controls:"sjs_sp_controls sd-signaturepad__controls",placeholder:"sjs_sp_placeholder",canvas:"sjs_sp_canvas sd-signaturepad__canvas",backgroundImage:"sjs_sp__background-image sd-signaturepad__background-image",clearButton:"sjs_sp_clear sd-context-btn sd-context-btn--negative sd-signaturepad__clear",clearButtonIconId:"icon-clear",loadingIndicator:"sd-signaturepad__loading-indicator"},saveData:{root:"sv-save-data_root",rootWithButtons:"sv-save-data_root--with-buttons",info:"sv-save-data_info",error:"sv-save-data_error",success:"sv-save-data_success",button:"sv-save-data_button",shown:"sv-save-data_root--shown"},window:{root:"sv_window",rootCollapsedMod:"sv_window--collapsed",rootFullScreenMode:"sv_window--full-screen",rootContent:"sv_window_root-content",body:"sv_window_content",header:{root:"sv_window_header",titleCollapsed:"sv_window_header_title_collapsed",buttonsContainer:"sv_window_buttons_container",button:"sv_window_button",buttonExpanded:"",buttonCollapsed:"",collapseButton:"sv_window_button sv_window_button_collapse",closeButton:"sv_window_button sv_window_button_close",fullScreenButton:"sv_window_button sv_window_button_full_screen"}},ranking:{root:"sv-ranking",rootMobileMod:"sv-ranking--mobile",rootDragMod:"sv-ranking--drag",rootDisabled:"sd-ranking--disabled",rootReadOnly:"sd-ranking--readonly",rootPreview:"sd-ranking--preview",rootDesignMode:"sv-ranking--design-mode",rootDragHandleAreaIcon:"sv-ranking--drag-handle-area-icon",rootSelectToRankMod:"sv-ranking--select-to-rank",rootSelectToRankEmptyValueMod:"sv-ranking--select-to-rank-empty-value",rootSelectToRankAlignVertical:"sv-ranking--select-to-rank-vertical",rootSelectToRankAlignHorizontal:"sv-ranking--select-to-rank-horizontal",item:"sv-ranking-item",itemContent:"sv-ranking-item__content sd-ranking-item__content",itemIndex:"sv-ranking-item__index sd-ranking-item__index",itemIndexEmptyMode:"sv-ranking-item__index--empty sd-ranking-item__index--empty",itemDisabled:"sv-ranking-item--disabled",itemReadOnly:"sv-ranking-item--readonly",itemPreview:"sv-ranking-item--preview",controlLabel:"sv-ranking-item__text",itemGhostNode:"sv-ranking-item__ghost",itemIconContainer:"sv-ranking-item__icon-container",itemIcon:"sv-ranking-item__icon",itemIconHoverMod:"sv-ranking-item__icon--hover",itemIconFocusMod:"sv-ranking-item__icon--focus",itemGhostMod:"sv-ranking-item--ghost",itemDragMod:"sv-ranking--drag",itemOnError:"sv-ranking-item--error",container:"sv-ranking__container",containerEmptyMode:"sv-ranking__container--empty",containerFromMode:"sv-ranking__container--from",containerToMode:"sv-ranking__container--to",containerPlaceholder:"sv-ranking__container-placeholder",containersDivider:"sv-ranking__containers-divider"},buttongroup:{root:"sv-button-group",item:"sv-button-group__item",itemIcon:"sv-button-group__item-icon",itemDecorator:"sv-button-group__item-decorator",itemCaption:"sv-button-group__item-caption",itemHover:"sv-button-group__item--hover",itemSelected:"sv-button-group__item--selected",itemDisabled:"sv-button-group__item--disabled",itemControl:"sv-visuallyhidden"},list:{root:"sv-list__container sd-list",item:"sv-list__item sd-list__item",itemBody:"sv-list__item-body sd-list__item-body",itemSelected:"sv-list__item--selected sd-list__item--selected",itemFocused:"sv-list__item--focused sd-list__item--focused"},actionBar:{root:"sd-action-bar",item:"sd-action",defaultSizeMode:"",smallSizeMode:"",itemPressed:"sd-action--pressed",itemAsIcon:"sd-action--icon",itemIcon:"sd-action__icon",itemTitle:"sd-action__title"},variables:{mobileWidth:"--sd-mobile-width",themeMark:"--sv-defaultV2-mark"},tagbox:{root:"sd-selectbase",popup:"sv-dropdown-popup",small:"sd-row__question--small",selectWrapper:"sv-dropdown_select-wrapper",other:"sd-input sd-comment sd-selectbase__other",onError:"sd-input--error",label:"sd-selectbase__label",itemSvgIconId:"#icon-v2check",item:"sd-item sd-checkbox sd-selectbase__item",itemDisabled:"sd-item--disabled sd-checkbox--disabled",itemChecked:"sd-item--checked sd-checkbox--checked",itemHover:"sd-item--allowhover sd-checkbox--allowhover",itemControl:"sd-visuallyhidden sd-item__control sd-checkbox__control",itemDecorator:"sd-item__svg sd-checkbox__svg",cleanButton:"sd-tagbox_clean-button sd-dropdown_clean-button",cleanButtonSvg:"sd-tagbox_clean-button-svg sd-dropdown_clean-button-svg",cleanButtonIconId:"icon-clear",cleanItemButton:"sd-tagbox-item_clean-button",cleanItemButtonSvg:"sd-tagbox-item_clean-button-svg",cleanItemButtonIconId:"icon-clear_16x16",chevronButton:"sd-dropdown_chevron-button",chevronButtonSvg:"sd-dropdown_chevron-button-svg",chevronButtonIconId:"icon-chevron",control:"sd-input sd-tagbox sd-dropdown",controlValue:"sd-tagbox__value sd-dropdown__value",controlValueItems:"sd-tagbox__value-items",placeholderInput:"sd-tagbox__placeholder",controlEditable:"sd-input--editable",controlDisabled:"sd-input--disabled",controlReadOnly:"sd-input--readonly",controlPreview:"sd-input--preview",controlEmpty:"sd-dropdown--empty sd-tagbox--empty",controlLabel:"sd-item__control-label",filterStringInput:"sd-tagbox__filter-string-input sd-dropdown__filter-string-input",materialDecorator:"sd-item__decorator sd-checkbox__decorator",hint:"sd-tagbox__hint",hintPrefix:"sd-dropdown__hint-prefix sd-tagbox__hint-prefix",hintSuffix:"sd-dropdown__hint-suffix sd-tagbox__hint-suffix",hintSuffixWrapper:"sd-tagbox__hint-suffix-wrapper"}},wo="defaultV2";oe[wo]=nr;var Su="surveyjs.io",Tu=65536,Vo=function(){function i(){}return Object.defineProperty(i,"serviceUrl",{get:function(){return b.web.surveyServiceUrl},set:function(t){b.web.surveyServiceUrl=t},enumerable:!1,configurable:!0}),i.prototype.loadSurvey=function(t,e){var r=new XMLHttpRequest;r.open("GET",this.serviceUrl+"/getSurvey?surveyId="+t),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.onload=function(){var n=JSON.parse(r.response);e(r.status==200,n,r.response)},r.send()},i.prototype.getSurveyJsonAndIsCompleted=function(t,e,r){var n=new XMLHttpRequest;n.open("GET",this.serviceUrl+"/getSurveyAndIsCompleted?surveyId="+t+"&clientId="+e),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.onload=function(){var o=JSON.parse(n.response),s=o?o.survey:null,a=o?o.isCompleted:null;r(n.status==200,s,a,n.response)},n.send()},i.prototype.canSendResult=function(t){if(!this.isSurveJSIOService)return!0;var e=JSON.stringify(t);return e.length<Tu},Object.defineProperty(i.prototype,"isSurveJSIOService",{get:function(){return this.serviceUrl.indexOf(Su)>=0},enumerable:!1,configurable:!0}),i.prototype.sendResult=function(t,e,r,n,o){n===void 0&&(n=null),o===void 0&&(o=!1),this.canSendResult(e)?this.sendResultCore(t,e,r,n,o):r(!1,z.getString("savingExceedSize",this.locale),void 0)},i.prototype.sendResultCore=function(t,e,r,n,o){n===void 0&&(n=null),o===void 0&&(o=!1);var s=new XMLHttpRequest;s.open("POST",this.serviceUrl+"/post/"),s.setRequestHeader("Content-Type","application/json; charset=utf-8");var a={postId:t,surveyResult:JSON.stringify(e)};n&&(a.clientId=n),o&&(a.isPartialCompleted=!0);var l=JSON.stringify(a);s.onload=s.onerror=function(){!r||r(s.status===200,s.response,s)},s.send(l)},i.prototype.sendFile=function(t,e,r){var n=new XMLHttpRequest;n.onload=n.onerror=function(){!r||r(n.status==200,JSON.parse(n.response))},n.open("POST",this.serviceUrl+"/upload/",!0);var o=new FormData;o.append("file",e),o.append("postId",t),n.send(o)},i.prototype.getResult=function(t,e,r){var n=new XMLHttpRequest,o="resultId="+t+"&name="+e;n.open("GET",this.serviceUrl+"/getResult?"+o),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.onload=function(){var s=null,a=null;if(n.status==200){s=JSON.parse(n.response),a=[];for(var l in s.QuestionResult){var u={name:l,value:s.QuestionResult[l]};a.push(u)}}r(n.status==200,s,a,n.response)},n.send()},i.prototype.isCompleted=function(t,e,r){var n=new XMLHttpRequest,o="resultId="+t+"&clientId="+e;n.open("GET",this.serviceUrl+"/isCompleted?"+o),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.onload=function(){var s=null;n.status==200&&(s=JSON.parse(n.response)),r(n.status==200,s,n.response)},n.send()},Object.defineProperty(i.prototype,"serviceUrl",{get:function(){return i.serviceUrl||""},enumerable:!1,configurable:!0}),i}(),tt={setTimeout:function(i){return tt.safeTimeOut(i,1e3)},clearTimeout:function(i){clearTimeout(i)},safeTimeOut:function(i,t){return t<=0?(i(),0):setTimeout(i,t)},now:function(){return Date.now()}},pn=function(){function i(){this.listenerCounter=0,this.timerId=-1,this.onTimer=new Oe}return Object.defineProperty(i,"instance",{get:function(){return i.instanceValue||(i.instanceValue=new i),i.instanceValue},enumerable:!1,configurable:!0}),i.prototype.start=function(t){var e=this;t===void 0&&(t=null),t&&this.onTimer.add(t),this.prevTimeInMs=tt.now(),this.timerId<0&&(this.timerId=tt.setTimeout(function(){e.doTimer()})),this.listenerCounter++},i.prototype.stop=function(t){t===void 0&&(t=null),t&&this.onTimer.remove(t),this.listenerCounter--,this.listenerCounter==0&&this.timerId>-1&&(tt.clearTimeout(this.timerId),this.timerId=-1)},i.prototype.doTimer=function(){var t=this;if((this.onTimer.isEmpty||this.listenerCounter==0)&&(this.timerId=-1),!(this.timerId<0)){var e=tt.now(),r=Math.floor((e-this.prevTimeInMs)/1e3);this.prevTimeInMs=e,r<0&&(r=1);var n=this.timerId;this.onTimer.fire(this,{seconds:r}),n===this.timerId&&(this.timerId=tt.setTimeout(function(){t.doTimer()}))}},i.instanceValue=null,i}(),Iu=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Rt=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},xo=function(i){Iu(t,i);function t(e){var r=i.call(this)||this;return r.timerFunc=null,r.surveyValue=e,r.onCreating(),r}return Object.defineProperty(t.prototype,"survey",{get:function(){return this.surveyValue},enumerable:!1,configurable:!0}),t.prototype.onCreating=function(){},t.prototype.start=function(){var e=this;!this.survey||this.isRunning||this.isDesignMode||(this.survey.onCurrentPageChanged.add(function(){e.update()}),this.timerFunc=function(r,n){e.doTimer(n.seconds)},this.setIsRunning(!0),this.update(),pn.instance.start(this.timerFunc))},t.prototype.stop=function(){!this.isRunning||(this.setIsRunning(!1),pn.instance.stop(this.timerFunc))},Object.defineProperty(t.prototype,"isRunning",{get:function(){return this.getPropertyValue("isRunning",!1)},enumerable:!1,configurable:!0}),t.prototype.setIsRunning=function(e){this.setPropertyValue("isRunning",e)},t.prototype.update=function(){this.updateText(),this.updateProgress()},t.prototype.doTimer=function(e){var r=this.survey.currentPage;if(r){var n=r.getMaxTimeToFinish();n>0&&n<r.timeSpent+e&&(e=n-r.timeSpent),r.timeSpent=r.timeSpent+e}this.spent=this.spent+e,this.update(),this.onTimer&&this.onTimer(r)},t.prototype.updateProgress=function(){var e=this,r=this.survey.timerInfo,n=r.spent,o=r.limit;o?(n==0?(this.progress=0,setTimeout(function(){e.progress=Math.floor((n+1)/o*100)/100},0)):n<=o&&(this.progress=Math.floor((n+1)/o*100)/100),this.progress>1&&(this.progress=void 0)):this.progress=void 0},t.prototype.updateText=function(){var e=this.survey.timerClock;this.clockMajorText=e.majorText,this.clockMinorText=e.minorText,this.text=this.survey.timerInfoText},Object.defineProperty(t.prototype,"showProgress",{get:function(){return this.progress!==void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showTimerAsClock",{get:function(){return!!this.survey.getCss().clockTimerRoot},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rootCss",{get:function(){return new O().append(this.survey.getCss().clockTimerRoot).append(this.survey.getCss().clockTimerRootTop,this.survey.isTimerPanelShowingOnTop).append(this.survey.getCss().clockTimerRootBottom,this.survey.isTimerPanelShowingOnBottom).toString()},enumerable:!1,configurable:!0}),t.prototype.getProgressCss=function(){return new O().append(this.survey.getCss().clockTimerProgress).append(this.survey.getCss().clockTimerProgressAnimation,this.progress>0).toString()},Object.defineProperty(t.prototype,"textContainerCss",{get:function(){return this.survey.getCss().clockTimerTextContainer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minorTextCss",{get:function(){return this.survey.getCss().clockTimerMinorText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"majorTextCss",{get:function(){return this.survey.getCss().clockTimerMajorText},enumerable:!1,configurable:!0}),Rt([y()],t.prototype,"text",void 0),Rt([y()],t.prototype,"progress",void 0),Rt([y()],t.prototype,"clockMajorText",void 0),Rt([y()],t.prototype,"clockMinorText",void 0),Rt([y({defaultValue:0})],t.prototype,"spent",void 0),t}(W),Ru=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ir=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Oo=function(i){Ru(t,i);function t(e){var r=i.call(this)||this;return r.cssClasses=e,r.timeout=b.notifications.lifetime,r.timer=void 0,r.actionsVisibility={},r.showActions=!0,r.actionBar=new Se,r.actionBar.updateCallback=function(n){r.actionBar.actions.forEach(function(o){return o.cssClasses={}})},r.css=r.cssClasses.root,r}return t.prototype.getCssClass=function(e){return new O().append(this.cssClasses.root).append(this.cssClasses.rootWithButtons,this.actionBar.visibleActions.length>0).append(this.cssClasses.info,e!=="error"&&e!=="success").append(this.cssClasses.error,e==="error").append(this.cssClasses.success,e==="success").append(this.cssClasses.shown,this.active).toString()},t.prototype.updateActionsVisibility=function(e){var r=this;this.actionBar.actions.forEach(function(n){return n.visible=r.showActions&&r.actionsVisibility[n.id]===e})},t.prototype.notify=function(e,r,n){var o=this;r===void 0&&(r="info"),n===void 0&&(n=!1),this.isDisplayed=!0,setTimeout(function(){o.updateActionsVisibility(r),o.message=e,o.active=!0,o.css=o.getCssClass(r),o.timer&&(clearTimeout(o.timer),o.timer=void 0),n||(o.timer=setTimeout(function(){o.timer=void 0,o.active=!1,o.css=o.getCssClass(r)},o.timeout))},1)},t.prototype.addAction=function(e,r){e.visible=!1,e.innerCss=this.cssClasses.button;var n=this.actionBar.addAction(e);this.actionsVisibility[n.id]=r},ir([y({defaultValue:!1})],t.prototype,"active",void 0),ir([y({defaultValue:!1})],t.prototype,"isDisplayed",void 0),ir([y()],t.prototype,"message",void 0),ir([y()],t.prototype,"css",void 0),t}(W),Eu=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),X=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},So=function(){function i(t,e,r){this.cover=t,this.positionX=e,this.positionY=r}return i.prototype.calcRow=function(t){return t==="top"?1:t==="middle"?2:3},i.prototype.calcColumn=function(t){return t==="left"?1:t==="center"?2:3},i.prototype.calcAlignItems=function(t){return t==="left"?"flex-start":t==="center"?"center":"flex-end"},i.prototype.calcAlignText=function(t){return t==="left"?"start":t==="center"?"center":"end"},i.prototype.calcJustifyContent=function(t){return t==="top"?"flex-start":t==="middle"?"center":"flex-end"},Object.defineProperty(i.prototype,"survey",{get:function(){return this.cover.survey},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"css",{get:function(){var t=i.CLASSNAME+" "+i.CLASSNAME+"--"+this.positionX+" "+i.CLASSNAME+"--"+this.positionY;return t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"style",{get:function(){var t={};return t.gridColumn=this.calcColumn(this.positionX),t.gridRow=this.calcRow(this.positionY),t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"contentStyle",{get:function(){var t={};return t.textAlign=this.calcAlignText(this.positionX),t.alignItems=this.calcAlignItems(this.positionX),t.justifyContent=this.calcJustifyContent(this.positionY),t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showLogo",{get:function(){return this.survey.hasLogo&&this.positionX===this.cover.logoPositionX&&this.positionY===this.cover.logoPositionY},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showTitle",{get:function(){return this.survey.hasTitle&&this.positionX===this.cover.titlePositionX&&this.positionY===this.cover.titlePositionY},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showDescription",{get:function(){return this.survey.renderedHasDescription&&this.positionX===this.cover.descriptionPositionX&&this.positionY===this.cover.descriptionPositionY},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textAreaWidth",{get:function(){return this.cover.textAreaWidth?""+this.cover.textAreaWidth+"px":""},enumerable:!1,configurable:!0}),i.CLASSNAME="sv-header__cell",i}(),or=function(i){Eu(t,i);function t(){var e=i.call(this)||this;return e.cells=[],["top","middle","bottom"].forEach(function(r){return["left","center","right"].forEach(function(n){return e.cells.push(new So(e,n,r))})}),e.init(),e}return t.prototype.calcBackgroundSize=function(e){return e==="fill"?"100% 100%":e==="tile"?"auto":e},t.prototype.updateHeaderClasses=function(){this.headerClasses=new O().append("sv-header").append("sv-header__without-background",this.backgroundColor==="transparent"&&!this.backgroundImage).append("sv-header__background-color--none",this.backgroundColor==="transparent"&&!this.titleColor&&!this.descriptionColor).append("sv-header__background-color--accent",!this.backgroundColor&&!this.titleColor&&!this.descriptionColor).append("sv-header__background-color--custom",!!this.backgroundColor&&this.backgroundColor!=="transparent"&&!this.titleColor&&!this.descriptionColor).append("sv-header__overlap",this.overlapEnabled).toString()},t.prototype.updateContentClasses=function(){var e=!!this.survey&&this.survey.calculateWidthMode();this.maxWidth=this.inheritWidthFrom==="survey"&&!!e&&e==="static"&&this.survey.renderedWidth,this.contentClasses=new O().append("sv-header__content").append("sv-header__content--static",this.inheritWidthFrom==="survey"&&!!e&&e==="static").append("sv-header__content--responsive",this.inheritWidthFrom==="container"||!!e&&e==="responsive").toString()},t.prototype.updateBackgroundImageClasses=function(){this.backgroundImageClasses=new O().append("sv-header__background-image").append("sv-header__background-image--contain",this.backgroundImageFit==="contain").append("sv-header__background-image--tile",this.backgroundImageFit==="tile").toString()},t.prototype.fromTheme=function(e){i.prototype.fromJSON.call(this,e.header||{}),e.cssVariables&&(this.backgroundColor=e.cssVariables["--sjs-header-backcolor"],this.titleColor=e.cssVariables["--sjs-font-headertitle-color"],this.descriptionColor=e.cssVariables["--sjs-font-headerdescription-color"]),this.init()},t.prototype.init=function(){this.renderBackgroundImage=_r(this.backgroundImage),this.updateHeaderClasses(),this.updateContentClasses(),this.updateBackgroundImageClasses()},t.prototype.getType=function(){return"cover"},Object.defineProperty(t.prototype,"renderedHeight",{get:function(){return this.height&&(this.survey&&!this.survey.isMobile||!this.survey)?Math.max(this.height,this.actualHeight+40)+"px":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedtextAreaWidth",{get:function(){return this.textAreaWidth?this.textAreaWidth+"px":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"survey",{get:function(){return this._survey},set:function(e){var r=this;this._survey!==e&&(this._survey=e,e&&(this.updateContentClasses(),this._survey.onPropertyChanged.add(function(n,o){(o.name=="widthMode"||o.name=="width")&&r.updateContentClasses()})))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundImageStyle",{get:function(){return this.backgroundImage?{opacity:this.backgroundImageOpacity,backgroundImage:this.renderBackgroundImage,backgroundSize:this.calcBackgroundSize(this.backgroundImageFit)}:null},enumerable:!1,configurable:!0}),t.prototype.propertyValueChanged=function(e,r,n){i.prototype.propertyValueChanged.call(this,e,r,n),(e==="backgroundColor"||e==="backgroundImage"||e==="overlapEnabled")&&this.updateHeaderClasses(),e==="inheritWidthFrom"&&this.updateContentClasses(),e==="backgroundImageFit"&&this.updateBackgroundImageClasses()},t.prototype.calculateActualHeight=function(e,r,n){var o=["top","middle","bottom"],s=o.indexOf(this.logoPositionY),a=o.indexOf(this.titlePositionY),l=o.indexOf(this.descriptionPositionY),u=["left","center","right"],d=u.indexOf(this.logoPositionX),v=u.indexOf(this.titlePositionX),V=u.indexOf(this.descriptionPositionX),E=[[0,0,0],[0,0,0],[0,0,0]];return E[s][d]=e,E[a][v]+=r,E[l][V]+=n,E.reduce(function(I,k){return I+Math.max.apply(Math,k)},0)},t.prototype.processResponsiveness=function(e){if(this.survey&&this.survey.rootElement){var r=this.survey.rootElement.querySelectorAll(".sv-header__logo")[0],n=this.survey.rootElement.querySelectorAll(".sv-header__title")[0],o=this.survey.rootElement.querySelectorAll(".sv-header__description")[0],s=r?r.getBoundingClientRect().height:0,a=n?n.getBoundingClientRect().height:0,l=o?o.getBoundingClientRect().height:0;this.actualHeight=this.calculateActualHeight(s,a,l)}},Object.defineProperty(t.prototype,"hasBackground",{get:function(){return!!this.backgroundImage||this.backgroundColor!=="transparent"},enumerable:!1,configurable:!0}),X([y({defaultValue:0})],t.prototype,"actualHeight",void 0),X([y()],t.prototype,"height",void 0),X([y()],t.prototype,"inheritWidthFrom",void 0),X([y()],t.prototype,"textAreaWidth",void 0),X([y()],t.prototype,"textGlowEnabled",void 0),X([y()],t.prototype,"overlapEnabled",void 0),X([y()],t.prototype,"backgroundColor",void 0),X([y()],t.prototype,"titleColor",void 0),X([y()],t.prototype,"descriptionColor",void 0),X([y({onSet:function(e,r){r.renderBackgroundImage=_r(e)}})],t.prototype,"backgroundImage",void 0),X([y()],t.prototype,"renderBackgroundImage",void 0),X([y()],t.prototype,"backgroundImageFit",void 0),X([y()],t.prototype,"backgroundImageOpacity",void 0),X([y()],t.prototype,"logoPositionX",void 0),X([y()],t.prototype,"logoPositionY",void 0),X([y()],t.prototype,"titlePositionX",void 0),X([y()],t.prototype,"titlePositionY",void 0),X([y()],t.prototype,"descriptionPositionX",void 0),X([y()],t.prototype,"descriptionPositionY",void 0),X([y()],t.prototype,"logoStyle",void 0),X([y()],t.prototype,"titleStyle",void 0),X([y()],t.prototype,"descriptionStyle",void 0),X([y()],t.prototype,"headerClasses",void 0),X([y()],t.prototype,"contentClasses",void 0),X([y()],t.prototype,"maxWidth",void 0),X([y()],t.prototype,"backgroundImageClasses",void 0),t}(W);x.addClass("cover",[{name:"height:number",minValue:0,default:256},{name:"inheritWidthFrom",default:"container"},{name:"textAreaWidth:number",minValue:0,default:512},{name:"textGlowEnabled:boolean"},{name:"overlapEnabled:boolean"},{name:"backgroundImage:file"},{name:"backgroundImageOpacity:number",minValue:0,maxValue:1,default:1},{name:"backgroundImageFit",default:"cover",choices:["cover","fill","contain"]},{name:"logoPositionX",default:"right"},{name:"logoPositionY",default:"top"},{name:"titlePositionX",default:"left"},{name:"titlePositionY",default:"bottom"},{name:"descriptionPositionX",default:"left"},{name:"descriptionPositionY",default:"bottom"}],function(){return new or});var Du=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Au=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Lu=function(){function i(t){this.type=t,this.timestamp=new Date}return i}(),Mu=function(i){Du(t,i);function t(){var e=i.call(this)||this;return e.taskList=[],e.onAllTasksCompleted=e.addEvent(),e}return t.prototype.runTask=function(e,r){var n=this,o=new Lu(e);return this.taskList.push(o),this.hasActiveTasks=!0,r(function(){return n.taskFinished(o)}),o},t.prototype.waitAndExecute=function(e){if(!this.hasActiveTasks){e();return}this.onAllTasksCompleted.add(function(){e()})},t.prototype.taskFinished=function(e){var r=this.taskList.indexOf(e);r>-1&&this.taskList.splice(r,1),this.hasActiveTasks&&this.taskList.length==0&&(this.hasActiveTasks=!1,this.onAllTasksCompleted.fire(this,{}))},Au([y({defaultValue:!1})],t.prototype,"hasActiveTasks",void 0),t}(W),To=function(){function i(t,e,r){r===void 0&&(r=-1),this.source=t,this.target=e,this.nestedPanelDepth=r}return i}(),ju=function(){function i(t){this.panel=t}return i.prototype.dragDropAddTarget=function(t){var e=this.dragDropFindRow(t.target);this.dragDropAddTargetToRow(t,e)&&this.panel.updateRowsRemoveElementFromRow(t.target,e)},i.prototype.dragDropFindRow=function(t){if(!t||t.isPage)return null;for(var e=t,r=this.panel.rows,n=0;n<r.length;n++)if(r[n].elements.indexOf(e)>-1)return r[n];for(var n=0;n<this.panel.elements.length;n++){var o=this.panel.elements[n].getPanel();if(!!o){var s=o.dragDropFindRow(e);if(s)return s}}return null},i.prototype.dragDropMoveElement=function(t,e,r){var n=t.parent.elements.indexOf(t);r>n&&r--,this.panel.removeElement(t),this.panel.addElement(e,r)},i.prototype.updateRowsOnElementAdded=function(t,e,r,n){r||(r=new To(null,t),r.target=t,r.isEdge=this.panel.elements.length>1,this.panel.elements.length<2?r.destination=n:(r.isBottom=e>0,e==0?r.destination=this.panel.elements[1]:r.destination=this.panel.elements[e-1])),this.dragDropAddTargetToRow(r,null)},i.prototype.dragDropAddTargetToRow=function(t,e){if(!t.destination||this.dragDropAddTargetToEmptyPanel(t))return!0;var r=t.destination,n=this.dragDropFindRow(r);return n?t.target.startWithNewLine?this.dragDropAddTargetToNewRow(t,n,e):this.dragDropAddTargetToExistingRow(t,n,e):!0},i.prototype.dragDropAddTargetToEmptyPanel=function(t){if(t.destination.isPage)return this.dragDropAddTargetToEmptyPanelCore(this.panel.root,t.target,t.isBottom),!0;var e=t.destination;if(e.isPanel&&!t.isEdge){var r=e;if(t.target.template===e)return!1;if(t.nestedPanelDepth<0||t.nestedPanelDepth>=r.depth)return this.dragDropAddTargetToEmptyPanelCore(e,t.target,t.isBottom),!0}return!1},i.prototype.dragDropAddTargetToExistingRow=function(t,e,r){var n=e.elements.indexOf(t.destination);if(n==0&&!t.isBottom&&!this.panel.isDesignModeV2){if(e.elements[0].startWithNewLine)return e.index>0?(t.isBottom=!0,e=e.panel.rows[e.index-1],t.destination=e.elements[e.elements.length-1],this.dragDropAddTargetToExistingRow(t,e,r)):this.dragDropAddTargetToNewRow(t,e,r)}var o=-1;r==e&&(o=e.elements.indexOf(t.target)),t.isBottom&&n++;var s=this.panel.findRowByElement(t.source);return s==e&&s.elements.indexOf(t.source)==n||n==o?!1:(o>-1&&(e.elements.splice(o,1),o<n&&n--),e.elements.splice(n,0,t.target),e.updateVisible(),o<0)},i.prototype.dragDropAddTargetToNewRow=function(t,e,r){var n=e.panel.createRowAndSetLazy(e.panel.rows.length);this.panel.isDesignModeV2&&n.setIsLazyRendering(!1),n.addElement(t.target);var o=e.index;if(t.isBottom&&o++,!!r&&r.panel==n.panel&&r.index==o)return!1;var s=this.panel.findRowByElement(t.source);return!!s&&s.panel==n.panel&&s.elements.length==1&&s.index==o?!1:(e.panel.rows.splice(o,0,n),!0)},i.prototype.dragDropAddTargetToEmptyPanelCore=function(t,e,r){var n=t.createRow();n.addElement(e),t.elements.length==0||r?t.rows.push(n):t.rows.splice(0,0,n)},i}(),Fu=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),fn=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Io=function(i){Fu(t,i);function t(e,r){var n=i.call(this)||this;return n.effectiveWidth=e,n.questionTitleWidth=r,n}return t.prototype.getType=function(){return"panellayoutcolumn"},t.prototype.isEmpty=function(){return!this.width&&!this.questionTitleWidth},fn([y()],t.prototype,"width",void 0),fn([y({onSet:function(e,r,n){e!==n&&(r.width=e)}})],t.prototype,"effectiveWidth",void 0),fn([y()],t.prototype,"questionTitleWidth",void 0),t}(W);x.addClass("panellayoutcolumn",[{name:"effectiveWidth:number",isSerializable:!1,minValue:0},{name:"width:number",visible:!1},"questionTitleWidth"],function(i){return new Io});var hn=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Et=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Ro=function(i,t){for(var e=0,r=t.length,n=i.length;e<r;e++,n++)i[n]=t[e];return i},Eo=function(i){hn(t,i);function t(e){var r=i.call(this)||this;return r.panel=e,r._scrollableParent=void 0,r._updateVisibility=void 0,r.visibleElementsAnimation=new Ge(r.getVisibleElementsAnimationOptions(),function(n){r.setWidth(n),r.setPropertyValue("visibleElements",n)},function(){return r.visibleElements}),r.idValue=t.getRowId(),r.visible=e.areInvisibleElementsShowing,r.createNewArray("elements"),r.createNewArray("visibleElements"),r}return t.getRowId=function(){return"pr_"+t.rowCounter++},t.prototype.startLazyRendering=function(e,r){var n=this;if(r===void 0&&(r=Wt),!!D.isAvailable()){this._scrollableParent=r(e),this._scrollableParent===D.getDocumentElement()&&(this._scrollableParent=R.getWindow());var o=this._scrollableParent.scrollHeight>this._scrollableParent.clientHeight;this.isNeedRender=!o,o&&(this._updateVisibility=function(){var s=Ml(e,50);!n.isNeedRender&&s&&(n.isNeedRender=!0,n.stopLazyRendering())},setTimeout(function(){!!n._scrollableParent&&!!n._scrollableParent.addEventListener&&n._scrollableParent.addEventListener("scroll",n._updateVisibility),n.ensureVisibility()},10))}},t.prototype.ensureVisibility=function(){this._updateVisibility&&this._updateVisibility()},t.prototype.stopLazyRendering=function(){!!this._scrollableParent&&!!this._updateVisibility&&!!this._scrollableParent.removeEventListener&&this._scrollableParent.removeEventListener("scroll",this._updateVisibility),this._scrollableParent=void 0,this._updateVisibility=void 0},t.prototype.setIsLazyRendering=function(e){this.isLazyRenderingValue=e,this.isNeedRender=!e},t.prototype.isLazyRendering=function(){return this.isLazyRenderingValue===!0},Object.defineProperty(t.prototype,"id",{get:function(){return this.idValue},enumerable:!1,configurable:!0}),t.prototype.equalsCore=function(e){return this==e},Object.defineProperty(t.prototype,"elements",{get:function(){return this.getPropertyValue("elements")},enumerable:!1,configurable:!0}),t.prototype.getIsAnimationAllowed=function(){var e;return i.prototype.getIsAnimationAllowed.call(this)&&this.visible&&((e=this.panel)===null||e===void 0?void 0:e.animationAllowed)},t.prototype.getVisibleElementsAnimationOptions=function(){var e=this,r=function(n){n.style.setProperty("--animation-height",n.offsetHeight+"px"),n.style.setProperty("--animation-width",qr(n)+"px")};return{getRerenderEvent:function(){return e.onElementRerendered},isAnimationEnabled:function(){return e.animationAllowed},allowSyncRemovalAddition:!1,getAnimatedElement:function(n){return n.getWrapperElement()},getLeaveOptions:function(n){var o=n,s=n.isPanel?o.cssClasses.panel:o.cssClasses;return{cssClass:s.fadeOut,onBeforeRunAnimation:r}},getEnterOptions:function(n){var o=n,s=n.isPanel?o.cssClasses.panel:o.cssClasses;return{cssClass:s.fadeIn,onBeforeRunAnimation:r}}}},Object.defineProperty(t.prototype,"visibleElements",{get:function(){return this.getPropertyValue("visibleElements")},set:function(e){if(e.length)this.visible=!0;else{this.visible=!1,this.visibleElementsAnimation.cancel();return}this.visibleElementsAnimation.sync(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this.getPropertyValue("visible",!0)},set:function(e){this.setPropertyValue("visible",e),this.onVisibleChangedCallback&&this.onVisibleChangedCallback()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNeedRender",{get:function(){return this.getPropertyValue("isneedrender",!0)},set:function(e){this.setPropertyValue("isneedrender",e)},enumerable:!1,configurable:!0}),t.prototype.updateVisible=function(){for(var e=[],r=0;r<this.elements.length;r++)this.elements[r].isVisible&&e.push(this.elements[r]);this.visibleElements=e},t.prototype.addElement=function(e){this.elements.push(e),this.updateVisible()},Object.defineProperty(t.prototype,"index",{get:function(){return this.panel.rows.indexOf(this)},enumerable:!1,configurable:!0}),t.prototype.setWidth=function(e){var r,n=e.length;if(n!=0){for(var o=e.length===1,s=0,a=[],l=0;l<this.elements.length;l++){var u=this.elements[l];if(u.isVisible){u.isSingleInRow=o;var d=this.getElementWidth(u);d&&(u.renderWidth=this.getRenderedWidthFromWidth(d),a.push(u)),s<n-1&&!(this.panel.isDefaultV2Theme||((r=this.panel.parentQuestion)===null||r===void 0?void 0:r.isDefaultV2Theme))?u.rightIndent=1:u.rightIndent=0,s++}else u.renderWidth=""}for(var l=0;l<this.elements.length;l++){var u=this.elements[l];!u.isVisible||a.indexOf(u)>-1||(a.length==0?u.renderWidth=Number.parseFloat((100/n).toFixed(6))+"%":u.renderWidth=this.getRenderedCalcWidth(u,a,n))}}},t.prototype.getRenderedCalcWidth=function(e,r,n){for(var o="100%",s=0;s<r.length;s++)o+=" - "+r[s].renderWidth;var a=n-r.length;return a>1&&(o="("+o+")/"+a.toString()),"calc("+o+")"},t.prototype.getElementWidth=function(e){var r=e.width;return!r||typeof r!="string"?"":r.trim()},t.prototype.getRenderedWidthFromWidth=function(e){return P.isNumber(e)?e+"px":e},t.prototype.dispose=function(){i.prototype.dispose.call(this),this.stopLazyRendering()},t.prototype.getRowCss=function(){return new O().append(this.panel.cssClasses.row).append(this.panel.cssClasses.rowCompact,this.panel.isCompact).append(this.panel.cssClasses.pageRow,this.panel.isPage||this.panel.showPanelAsPage).append(this.panel.cssClasses.rowMultiple,this.visibleElements.length>1).toString()},t.prototype.setRootElement=function(e){this.rootElement=e},t.prototype.getRootElement=function(){return this.rootElement},t.rowCounter=100,Et([y({defaultValue:null})],t.prototype,"dragTypeOverMe",void 0),t}(W),sr=function(i){hn(t,i);function t(e){e===void 0&&(e="");var r=i.call(this,e)||this;return r.isQuestionsReady=!1,r.questionsValue=new Array,r._columns=void 0,r._columnsReady=!1,r.rowsAnimation=new Ge(r.getRowsAnimationOptions(),function(n){r.setPropertyValue("visibleRows",n)},function(){return r.visibleRows}),r.isRandomizing=!1,r.onColumnPropertyValueChangedCallback=function(n,o,s,a,l){r._columnsReady&&(r.updateColumnWidth(r.layoutColumns),r.updateRootStyle())},r.locCountRowUpdates=0,r.createNewArray("rows",function(n,o){r.onAddRow(n)},function(n){r.onRemoveRow(n)}),r.createNewArray("visibleRows"),r.elementsValue=r.createNewArray("elements",r.onAddElement.bind(r),r.onRemoveElement.bind(r)),r.id=t.getPanelId(),r.addExpressionProperty("visibleIf",function(n,o){r.visible=o===!0},function(n){return!r.areInvisibleElementsShowing}),r.addExpressionProperty("enableIf",function(n,o){r.readOnly=o===!1}),r.addExpressionProperty("requiredIf",function(n,o){r.isRequired=o===!0}),r.createLocalizableString("requiredErrorText",r),r.createLocalizableString("navigationTitle",r,!0).onGetTextCallback=function(n){return n||r.title||r.name},r.registerPropertyChangedHandlers(["questionTitleLocation"],function(){r.onVisibleChanged.bind(r),r.updateElementCss(!0)}),r.registerPropertyChangedHandlers(["questionStartIndex","showQuestionNumbers"],function(){r.updateVisibleIndexes()}),r.dragDropPanelHelper=new ju(r),r}return t.getPanelId=function(){return"sp_"+t.panelCounter++},t.prototype.onAddRow=function(e){var r=this;this.onRowVisibleChanged(),e.onVisibleChangedCallback=function(){return r.onRowVisibleChanged()}},t.prototype.getRowsAnimationOptions=function(){var e=this,r=function(n){n.style.setProperty("--animation-height",n.offsetHeight+"px")};return{getRerenderEvent:function(){return e.onElementRerendered},isAnimationEnabled:function(){return e.animationAllowed},getAnimatedElement:function(n){return n.getRootElement()},getLeaveOptions:function(n){return{cssClass:e.cssClasses.rowFadeOut,onBeforeRunAnimation:r}},getEnterOptions:function(n,o){var s=e.cssClasses;return{cssClass:new O().append(s.rowFadeIn).append(s.rowDelayedFadeIn,o.isDeletingRunning).toString(),onBeforeRunAnimation:r}}}},Object.defineProperty(t.prototype,"visibleRows",{get:function(){return this.getPropertyValue("visibleRows")},set:function(e){this.rowsAnimation.sync(e)},enumerable:!1,configurable:!0}),t.prototype.onRemoveRow=function(e){e.visibleElementsAnimation.cancel(),this.visibleRows=this.rows.filter(function(r){return r.visible}),e.onVisibleChangedCallback=void 0},t.prototype.onRowVisibleChanged=function(){this.visibleRows=this.rows.filter(function(e){return e.visible})},t.prototype.getType=function(){return"panelbase"},t.prototype.setSurveyImpl=function(e,r){this.blockAnimations(),i.prototype.setSurveyImpl.call(this,e,r),this.isDesignMode&&this.onVisibleChanged();for(var n=0;n<this.elements.length;n++)this.elements[n].setSurveyImpl(e,r);this.releaseAnimations()},t.prototype.endLoadingFromJson=function(){var e=this;i.prototype.endLoadingFromJson.call(this),this.updateDescriptionVisibility(this.description),this.markQuestionListDirty(),this.onRowsChanged(),this.layoutColumns.forEach(function(r){r.onPropertyValueChangedCallback=e.onColumnPropertyValueChangedCallback})},Object.defineProperty(t.prototype,"hasTitle",{get:function(){return this.canShowTitle()&&this.locTitle.textOrHtml.length>0||this.isDesignMode&&this.showTitle&&this.isInteractiveDesignElement&&b.designMode.showEmptyTitles},enumerable:!1,configurable:!0}),t.prototype.delete=function(e){e===void 0&&(e=!0),this.deletePanel(),this.removeFromParent(),e&&this.dispose()},t.prototype.deletePanel=function(){for(var e=this.elements,r=0;r<e.length;r++){var n=e[r];n.isPanel&&n.deletePanel(),this.onRemoveElementNotifySurvey(n)}},t.prototype.removeFromParent=function(){},t.prototype.canShowTitle=function(){return!0},Object.defineProperty(t.prototype,"_showDescription",{get:function(){return!this.hasTitle&&this.isDesignMode?!1:this.survey&&this.survey.showPageTitles&&this.hasDescription||this.showDescription&&this.isDesignMode&&b.designMode.showEmptyDescriptions},enumerable:!1,configurable:!0}),t.prototype.localeChanged=function(){i.prototype.localeChanged.call(this);for(var e=0;e<this.elements.length;e++)this.elements[e].localeChanged()},t.prototype.locStrsChanged=function(){i.prototype.locStrsChanged.call(this);for(var e=0;e<this.elements.length;e++)this.elements[e].locStrsChanged()},t.prototype.getMarkdownHtml=function(e,r){return r==="navigationTitle"&&this.locNavigationTitle.isEmpty?this.locTitle.renderedHtml||this.name:i.prototype.getMarkdownHtml.call(this,e,r)},Object.defineProperty(t.prototype,"locNavigationTitle",{get:function(){return this.getLocalizableString("navigationTitle")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedNavigationTitle",{get:function(){return this.locNavigationTitle.renderedHtml},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredText",{get:function(){return!!this.survey&&this.isRequired?this.survey.requiredText:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titlePattern",{get:function(){return this.survey?this.survey.questionTitlePattern:"numTitleRequire"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRequireTextOnStart",{get:function(){return this.isRequired&&this.titlePattern=="requireNumTitle"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRequireTextBeforeTitle",{get:function(){return this.isRequired&&this.titlePattern=="numRequireTitle"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRequireTextAfterTitle",{get:function(){return this.isRequired&&this.titlePattern=="numTitleRequire"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredErrorText",{get:function(){return this.getLocalizableStringText("requiredErrorText")},set:function(e){this.setLocalizableStringText("requiredErrorText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locRequiredErrorText",{get:function(){return this.getLocalizableString("requiredErrorText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questionsOrder",{get:function(){return this.getPropertyValue("questionsOrder")},set:function(e){this.setPropertyValue("questionsOrder",e)},enumerable:!1,configurable:!0}),t.prototype.canRandomize=function(e){return e&&this.questionsOrder!=="initial"||this.questionsOrder==="random"},t.prototype.randomizeElements=function(e){if(!(!this.canRandomize(e)||this.isRandomizing)){this.isRandomizing=!0;for(var r=[],n=this.elements,o=0;o<n.length;o++)r.push(n[o]);var s=P.randomizeArray(r);this.setArrayPropertyDirectly("elements",s,!1),this.updateRows(),this.updateVisibleIndexes(),this.isRandomizing=!1}},Object.defineProperty(t.prototype,"areQuestionsRandomized",{get:function(){var e=this.questionsOrder=="default"&&this.survey?this.survey.questionsOrder:this.questionsOrder;return e=="random"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getPropertyValue("parent",null)},set:function(e){this.setPropertyValue("parent",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depth",{get:function(){return this.parent==null?0:this.parent.depth+1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visibleIf",{get:function(){return this.getPropertyValue("visibleIf","")},set:function(e){this.setPropertyValue("visibleIf",e)},enumerable:!1,configurable:!0}),t.prototype.calcCssClasses=function(e){var r={panel:{},error:{},row:"",rowFadeIn:"",rowFadeOut:"",rowDelayedFadeIn:"",rowMultiple:"",pageRow:"",rowCompact:""};return this.copyCssClasses(r.panel,e.panel),this.copyCssClasses(r.error,e.error),e.pageRow&&(r.pageRow=e.pageRow),e.rowCompact&&(r.rowCompact=e.rowCompact),e.row&&(r.row=e.row),e.rowFadeIn&&(r.rowFadeIn=e.rowFadeIn),e.rowFadeOut&&(r.rowFadeOut=e.rowFadeOut),e.rowDelayedFadeIn&&(r.rowDelayedFadeIn=e.rowDelayedFadeIn),e.rowMultiple&&(r.rowMultiple=e.rowMultiple),this.survey&&this.survey.updatePanelCssClasses(this,r),r},Object.defineProperty(t.prototype,"id",{get:function(){return this.getPropertyValue("id")},set:function(e){this.setPropertyValue("id",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPanel",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.getPanel=function(){return this},t.prototype.getLayoutType=function(){return"row"},t.prototype.isLayoutTypeSupported=function(e){return e!=="flow"},Object.defineProperty(t.prototype,"questions",{get:function(){if(!this.isQuestionsReady){this.questionsValue=[];for(var e=0;e<this.elements.length;e++){var r=this.elements[e];if(r.isPanel)for(var n=r.questions,o=0;o<n.length;o++)this.questionsValue.push(n[o]);else this.questionsValue.push(r)}this.isQuestionsReady=!0}return this.questionsValue},enumerable:!1,configurable:!0}),t.prototype.getQuestions=function(e){var r=this.questions;if(!e)return r;var n=[];return r.forEach(function(o){n.push(o),o.getNestedQuestions().forEach(function(s){return n.push(s)})}),n},t.prototype.getValidName=function(e){return e&&e.trim()},t.prototype.getQuestionByName=function(e){for(var r=this.questions,n=0;n<r.length;n++)if(r[n].name==e)return r[n];return null},t.prototype.getElementByName=function(e){for(var r=this.elements,n=0;n<r.length;n++){var o=r[n];if(o.name==e)return o;var s=o.getPanel();if(s){var a=s.getElementByName(e);if(a)return a}}return null},t.prototype.getQuestionByValueName=function(e){var r=this.getQuestionsByValueName(e);return r.length>0?r[0]:null},t.prototype.getQuestionsByValueName=function(e){for(var r=[],n=this.questions,o=0;o<n.length;o++)n[o].getValueName()==e&&r.push(n[o]);return r},t.prototype.getValue=function(){var e={};return this.collectValues(e,0),e},t.prototype.collectValues=function(e,r){var n=this.elements;r===0&&(n=this.questions);for(var o=0;o<n.length;o++){var s=n[o];if(s.isPanel||s.isPage){var a={};s.collectValues(a,r-1)&&(e[s.name]=a)}else{var l=s;if(!l.isEmpty()){var u=l.getValueName();if(e[u]=l.value,this.data){var d=this.data.getComment(u);d&&(e[u+W.commentSuffix]=d)}}}}return!0},t.prototype.getDisplayValue=function(e){for(var r={},n=this.questions,o=0;o<n.length;o++){var s=n[o];if(!s.isEmpty()){var a=e?s.title:s.getValueName();r[a]=s.getDisplayValue(e)}}return r},t.prototype.getComments=function(){var e={};if(!this.data)return e;for(var r=this.questions,n=0;n<r.length;n++){var o=r[n],s=this.data.getComment(o.getValueName());s&&(e[o.getValueName()]=s)}return e},t.prototype.clearIncorrectValues=function(){for(var e=0;e<this.elements.length;e++)this.elements[e].clearIncorrectValues()},t.prototype.clearErrors=function(){for(var e=0;e<this.elements.length;e++)this.elements[e].clearErrors();this.errors=[]},t.prototype.markQuestionListDirty=function(){this.isQuestionsReady=!1,this.parent&&this.parent.markQuestionListDirty()},Object.defineProperty(t.prototype,"elements",{get:function(){return this.elementsValue},enumerable:!1,configurable:!0}),t.prototype.getElementsInDesign=function(e){return this.elements},t.prototype.containsElement=function(e){for(var r=0;r<this.elements.length;r++){var n=this.elements[r];if(n==e)return!0;var o=n.getPanel();if(o&&o.containsElement(e))return!0}return!1},Object.defineProperty(t.prototype,"isRequired",{get:function(){return this.getPropertyValue("isRequired")},set:function(e){this.setPropertyValue("isRequired",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredIf",{get:function(){return this.getPropertyValue("requiredIf","")},set:function(e){this.setPropertyValue("requiredIf",e)},enumerable:!1,configurable:!0}),t.prototype.searchText=function(e,r){i.prototype.searchText.call(this,e,r);for(var n=0;n<this.elements.length;n++)this.elements[n].searchText(e,r)},t.prototype.hasErrors=function(e,r,n){return e===void 0&&(e=!0),r===void 0&&(r=!1),n===void 0&&(n=null),!this.validate(e,r,n)},t.prototype.validate=function(e,r,n){return e===void 0&&(e=!0),r===void 0&&(r=!1),n===void 0&&(n=null),n=n||{fireCallback:e,focusOnFirstError:r,firstErrorQuestion:null,result:!1},n.result!==!0&&(n.result=!1),this.hasErrorsCore(n),!n.result},t.prototype.validateContainerOnly=function(){this.hasErrorsInPanels({fireCallback:!0}),this.parent&&this.parent.validateContainerOnly()},t.prototype.onQuestionValueChanged=function(e){var r=this.questions.indexOf(e);if(!(r<0)){for(var n=5,o=this.questions.length-1,s=r-n>0?r-n:0,a=r+n<o?r+n:o,l=s;l<=a;l++)if(l!==r){var u=this.questions[l];u.errors.length>0&&u.validate(!1)&&u.validate(!0)}}},t.prototype.hasErrorsInPanels=function(e){var r=[];if(this.hasRequiredError(e,r),this.survey){var n=this.survey.validatePanel(this);n&&(r.push(n),e.result=!0)}e.fireCallback&&(this.survey&&this.survey.beforeSettingPanelErrors(this,r),this.errors=r)},t.prototype.getErrorCustomText=function(e,r){return this.survey?this.survey.getSurveyErrorCustomText(this,e,r):e},t.prototype.hasRequiredError=function(e,r){if(!!this.isRequired){var n=[];if(this.addQuestionsToList(n,!0),n.length!=0){for(var o=0;o<n.length;o++)if(!n[o].isEmpty())return;e.result=!0,r.push(new Wi(this.requiredErrorText,this)),e.focusOnFirstError&&!e.firstErrorQuestion&&(e.firstErrorQuestion=n[0])}}},t.prototype.hasErrorsCore=function(e){for(var r=this.elements,n=null,o=null,s=0;s<r.length;s++)if(n=r[s],!!n.isVisible)if(n.isPanel)n.hasErrorsCore(e);else{var a=n;a.validate(e.fireCallback,e)||(o||(o=a),e.firstErrorQuestion||(e.firstErrorQuestion=a),e.result=!0)}this.hasErrorsInPanels(e),this.updateContainsErrors(),!o&&this.errors.length>0&&(o=this.getFirstQuestionToFocus(!1,!0),e.firstErrorQuestion||(e.firstErrorQuestion=o)),e.fireCallback&&o&&(o===e.firstErrorQuestion&&e.focusOnFirstError?o.focus(!0):o.expandAllParents())},t.prototype.getContainsErrors=function(){var e=i.prototype.getContainsErrors.call(this);if(e)return e;for(var r=this.elements,n=0;n<r.length;n++)if(r[n].containsErrors)return!0;return!1},t.prototype.updateElementVisibility=function(){for(var e=0;e<this.elements.length;e++){var r=this.elements[e];r.setPropertyValue("isVisible",r.isVisible),r.isPanel&&r.updateElementVisibility()}},t.prototype.getFirstQuestionToFocus=function(e,r){if(e===void 0&&(e=!1),r===void 0&&(r=!1),!e&&!r&&this.isCollapsed)return null;for(var n=this.elements,o=0;o<n.length;o++){var s=n[o];if(!(!s.isVisible||!r&&s.isCollapsed))if(s.isPanel){var a=s.getFirstQuestionToFocus(e,r);if(a)return a}else{var l=s.getFirstQuestionToFocus(e);if(l)return l}}return null},t.prototype.focusFirstQuestion=function(){var e=this.getFirstQuestionToFocus();e&&e.focus()},t.prototype.focusFirstErrorQuestion=function(){var e=this.getFirstQuestionToFocus(!0);e&&e.focus()},t.prototype.addQuestionsToList=function(e,r,n){r===void 0&&(r=!1),n===void 0&&(n=!1),this.addElementsToList(e,r,n,!1)},t.prototype.addPanelsIntoList=function(e,r,n){r===void 0&&(r=!1),n===void 0&&(n=!1),this.addElementsToList(e,r,n,!0)},t.prototype.addElementsToList=function(e,r,n,o){r&&!this.visible||this.addElementsToListCore(e,this.elements,r,n,o)},t.prototype.addElementsToListCore=function(e,r,n,o,s){for(var a=0;a<r.length;a++){var l=r[a];n&&!l.visible||((s&&l.isPanel||!s&&!l.isPanel)&&e.push(l),l.isPanel?l.addElementsToListCore(e,l.elements,n,o,s):o&&this.addElementsToListCore(e,l.getElementsInDesign(!1),n,o,s))}},t.prototype.calcMaxRowColSpan=function(){var e=0;return this.rows.forEach(function(r){var n=0,o=!1;r.elements.forEach(function(s){s.width&&(o=!0),n+=s.colSpan||1}),!o&&n>e&&(e=n)}),e},t.prototype.updateColumnWidth=function(e){var r=0,n=0;if(e.forEach(function(a){a.width?(r+=a.width,a.setPropertyValue("effectiveWidth",a.width)):n++}),n)for(var o=Jl((100-r)/n),s=0;s<e.length;s++)e[s].width||e[s].setPropertyValue("effectiveWidth",o)},t.prototype.updateColumns=function(){this._columns=void 0,this.updateRootStyle()},t.prototype.updateRootStyle=function(){var e;i.prototype.updateRootStyle.call(this),(e=this.elements)===null||e===void 0||e.forEach(function(r){return r.updateRootStyle()})},t.prototype.updateCustomWidgets=function(){for(var e=0;e<this.elements.length;e++)this.elements[e].updateCustomWidgets()},Object.defineProperty(t.prototype,"questionTitleLocation",{get:function(){return this.getPropertyValue("questionTitleLocation")},set:function(e){this.setPropertyValue("questionTitleLocation",e.toLowerCase())},enumerable:!1,configurable:!0}),t.prototype.getQuestionTitleLocation=function(){return this.onGetQuestionTitleLocation?this.onGetQuestionTitleLocation():this.questionTitleLocation!="default"?this.questionTitleLocation:this.parent?this.parent.getQuestionTitleLocation():this.survey?this.survey.questionTitleLocation:"top"},t.prototype.availableQuestionTitleWidth=function(){var e=this.getQuestionTitleLocation();return e==="left"?!0:this.hasElementWithTitleLocationLeft()},t.prototype.hasElementWithTitleLocationLeft=function(){var e=this.elements.some(function(r){if(r instanceof t)return r.hasElementWithTitleLocationLeft();if(r instanceof le)return r.getTitleLocation()==="left"});return e},t.prototype.getQuestionTitleWidth=function(){return this.questionTitleWidth||this.parent&&this.parent.getQuestionTitleWidth()},Object.defineProperty(t.prototype,"columns",{get:function(){return this._columns||this.generateColumns(),this._columns||[]},enumerable:!1,configurable:!0}),t.prototype.generateColumns=function(){var e=this.calcMaxRowColSpan(),r=[].concat(this.layoutColumns);if(e<=this.layoutColumns.length)r=this.layoutColumns.slice(0,e);else for(var n=this.layoutColumns.length;n<e;n++){var o=new Io;o.onPropertyValueChangedCallback=this.onColumnPropertyValueChangedCallback,r.push(o)}this._columns=r;try{this._columnsReady=!1,this.updateColumnWidth(r)}finally{this._columnsReady=!0}this.layoutColumns=r},t.prototype.getColumsForElement=function(e){var r=this.findRowByElement(e);if(!r||!this.survey||!this.survey.gridLayoutEnabled)return[];for(var n=r.elements.length-1;n>=0&&r.elements[n].getPropertyValueWithoutDefault("colSpan");)n--;for(var o=r.elements.indexOf(e),s=0,a=0;a<o;a++)s+=r.elements[a].colSpan;var l=e.getPropertyValueWithoutDefault("colSpan");if(!l&&o===n){for(var u=0,a=0;a<r.elements.length;a++)a!==n&&(u+=r.elements[a].colSpan);l=this.columns.length-u}var d=this.columns.slice(s,s+(l||1));return e.setPropertyValue("effectiveColSpan",d.length),d},t.prototype.getStartIndex=function(){return this.parent?this.parent.getQuestionStartIndex():this.survey?this.survey.questionStartIndex:""},t.prototype.getQuestionStartIndex=function(){return this.getStartIndex()},t.prototype.getChildrenLayoutType=function(){return"row"},t.prototype.getProgressInfo=function(){return de.getProgressInfoByElements(this.elements,this.isRequired)},Object.defineProperty(t.prototype,"root",{get:function(){for(var e=this;e.parent;)e=e.parent;return e},enumerable:!1,configurable:!0}),t.prototype.childVisibilityChanged=function(){var e=this.getIsPageVisible(null),r=this.getPropertyValue("isVisible",!0);e!==r&&this.onVisibleChanged()},t.prototype.createRowAndSetLazy=function(e){var r=this.createRow();return r.setIsLazyRendering(this.isLazyRenderInRow(e)),r},t.prototype.createRow=function(){return new Eo(this)},t.prototype.onSurveyLoad=function(){this.blockAnimations(),i.prototype.onSurveyLoad.call(this);for(var e=0;e<this.elements.length;e++)this.elements[e].onSurveyLoad();this.onElementVisibilityChanged(this),this.releaseAnimations()},t.prototype.onFirstRendering=function(){i.prototype.onFirstRendering.call(this);for(var e=0;e<this.elements.length;e++)this.elements[e].onFirstRendering();this.onRowsChanged()},t.prototype.updateRows=function(){if(!this.isLoadingFromJson){for(var e=0;e<this.elements.length;e++)this.elements[e].isPanel&&this.elements[e].updateRows();this.onRowsChanged()}},Object.defineProperty(t.prototype,"rows",{get:function(){return this.getPropertyValue("rows")},enumerable:!1,configurable:!0}),t.prototype.ensureRowsVisibility=function(){this.rows.forEach(function(e){e.ensureVisibility()})},t.prototype.onRowsChanged=function(){this.isLoadingFromJson||(this.blockAnimations(),this.setArrayPropertyDirectly("rows",this.buildRows()),this.updateColumns(),this.releaseAnimations())},t.prototype.blockRowsUpdates=function(){this.locCountRowUpdates++},t.prototype.releaseRowsUpdates=function(){this.locCountRowUpdates--},t.prototype.updateRowsBeforeElementRemoved=function(e){var r=this,n=this.findRowByElement(e),o=this.rows.indexOf(n),s=n.elements.indexOf(e);n.elements.splice(s,1),n.elements.length==0?this.rows.splice(o,1):!n.elements[0].startWithNewLine&&this.rows[o-1]?(n.elements.forEach(function(a){return r.rows[o-1].addElement(a)}),this.rows.splice(o,1)):n.updateVisible()},t.prototype.updateRowsOnElementAdded=function(e){var r=this,n=this.elements.indexOf(e),o=this.elements[n+1],s=function(v){var V=r.createRowAndSetLazy(v);return r.isDesignModeV2&&V.setIsLazyRendering(!1),r.rows.splice(v,0,V),V},a=function(v,V,E){for(var I,k=[],N=3;N<arguments.length;N++)k[N-3]=arguments[N];var j=(I=v.elements).splice.apply(I,Ro([V,E],k));return v.updateVisible(),j};if(!o){n==0||e.startWithNewLine?a(s(this.rows.length),0,0,e):this.rows[this.rows.length-1].addElement(e);return}var l=this.findRowByElement(o);if(!!l){var u=this.rows.indexOf(l),d=l.elements.indexOf(o);d==0?o.startWithNewLine?e.startWithNewLine||u<1?s(u).addElement(e):this.rows[u-1].addElement(e):a(l,0,0,e):e.startWithNewLine?a.apply(void 0,Ro([s(u+1),0,0],[e].concat(a(l,d,l.elements.length)))):a(l,d,0,e)}},t.prototype.onAddElement=function(e,r){var n=this;if(e.setSurveyImpl(this.surveyImpl),e.parent=this,this.markQuestionListDirty(),this.canBuildRows()&&this.updateRowsOnElementAdded(e),e.isPanel){var o=e;this.survey&&this.survey.panelAdded(o,r,this,this.root)}else if(this.survey){var s=e;this.survey.questionAdded(s,r,this,this.root)}this.addElementCallback&&this.addElementCallback(e),e.registerPropertyChangedHandlers(["visible","isVisible"],function(){n.onElementVisibilityChanged(e)},this.id),e.registerPropertyChangedHandlers(["startWithNewLine"],function(){n.onElementStartWithNewLineChanged(e)},this.id),this.onElementVisibilityChanged(this)},t.prototype.onRemoveElement=function(e){e.parent=null,this.markQuestionListDirty(),e.unregisterPropertyChangedHandlers(["visible","isVisible","startWithNewLine"],this.id),this.updateRowsOnElementRemoved(e),!this.isRandomizing&&(this.onRemoveElementNotifySurvey(e),this.removeElementCallback&&this.removeElementCallback(e),this.onElementVisibilityChanged(this))},t.prototype.onRemoveElementNotifySurvey=function(e){!this.survey||(e.isPanel?this.survey.panelRemoved(e):this.survey.questionRemoved(e))},t.prototype.onElementVisibilityChanged=function(e){this.isLoadingFromJson||this.isRandomizing||(this.updateRowsVisibility(e),this.childVisibilityChanged(),this.parent&&this.parent.onElementVisibilityChanged(this))},t.prototype.onElementStartWithNewLineChanged=function(e){this.locCountRowUpdates>0||(this.updateRowsBeforeElementRemoved(e),this.updateRowsOnElementAdded(e))},t.prototype.updateRowsVisibility=function(e){for(var r=this.rows,n=0;n<r.length;n++){var o=r[n];if(o.elements.indexOf(e)>-1){o.updateVisible(),o.visible&&!o.isNeedRender&&(o.isNeedRender=!0);break}}},t.prototype.canBuildRows=function(){return!this.isLoadingFromJson&&this.getChildrenLayoutType()=="row"},t.prototype.buildRows=function(){if(!this.canBuildRows())return[];for(var e=new Array,r=0;r<this.elements.length;r++){var n=this.elements[r],o=r==0||n.startWithNewLine,s=o?this.createRowAndSetLazy(e.length):e[e.length-1];o&&e.push(s),s.addElement(n)}for(var r=0;r<e.length;r++)e[r].updateVisible();return e},t.prototype.isLazyRenderInRow=function(e){return!this.survey||!this.survey.isLazyRendering?!1:e>=this.survey.lazyRenderingFirstBatchSize||!this.canRenderFirstRows()},t.prototype.canRenderFirstRows=function(){return this.isPage},t.prototype.getDragDropInfo=function(){var e=this.getPage(this.parent);return e?e.getDragDropInfo():void 0},t.prototype.updateRowsOnElementRemoved=function(e){!this.canBuildRows()||(this.updateRowsRemoveElementFromRow(e,this.findRowByElement(e)),this.updateColumns())},t.prototype.updateRowsRemoveElementFromRow=function(e,r){if(!(!r||!r.panel)){var n=r.elements.indexOf(e);n<0||(r.elements.splice(n,1),r.elements.length>0?(this.blockRowsUpdates(),r.elements[0].startWithNewLine=!0,this.releaseRowsUpdates(),r.updateVisible()):r.index>=0&&r.panel.rows.splice(r.index,1))}},t.prototype.findRowByElement=function(e){for(var r=this.rows,n=0;n<r.length;n++)if(r[n].elements.indexOf(e)>-1)return r[n];return null},t.prototype.elementWidthChanged=function(e){if(!this.isLoadingFromJson){var r=this.findRowByElement(e);r&&r.updateVisible()}},Object.defineProperty(t.prototype,"processedTitle",{get:function(){return this.getRenderedTitle(this.locTitle.textOrHtml)},enumerable:!1,configurable:!0}),t.prototype.getRenderedTitle=function(e){return this.textProcessor!=null?this.textProcessor.processText(e,!0):e},Object.defineProperty(t.prototype,"visible",{get:function(){return this.getPropertyValue("visible",!0)},set:function(e){e!==this.visible&&(this.setPropertyValue("visible",e),this.setPropertyValue("isVisible",this.isVisible),this.isLoadingFromJson||this.onVisibleChanged())},enumerable:!1,configurable:!0}),t.prototype.onHidingContent=function(){this.questions.forEach(function(e){return e.onHidingContent()})},t.prototype.onVisibleChanged=function(){if(!this.isRandomizing&&(this.setPropertyValue("isVisible",this.isVisible),!!this.survey&&this.survey.getQuestionClearIfInvisible("default")!=="none"&&!this.isLoadingFromJson))for(var e=this.questions,r=this.isVisible,n=0;n<e.length;n++){var o=e[n];r?o.updateValueWithDefaults():(o.clearValueIfInvisible("onHiddenContainer"),o.onHidingContent())}},t.prototype.notifyStateChanged=function(e){i.prototype.notifyStateChanged.call(this,e),this.isCollapsed&&this.questions.forEach(function(r){return r.onHidingContent()})},Object.defineProperty(t.prototype,"isVisible",{get:function(){return this.areInvisibleElementsShowing||this.getIsPageVisible(null)},enumerable:!1,configurable:!0}),t.prototype.getIsContentVisible=function(e){if(this.areInvisibleElementsShowing)return!0;for(var r=0;r<this.elements.length;r++)if(this.elements[r]!=e&&this.elements[r].isVisible)return!0;return!1},t.prototype.getIsPageVisible=function(e){return this.visible&&this.getIsContentVisible(e)},t.prototype.setVisibleIndex=function(e){if(!this.isVisible||e<0)return this.resetVisibleIndexes(),0;this.lastVisibleIndex=e;var r=e;e+=this.beforeSetVisibleIndex(e);for(var n=this.getPanelStartIndex(e),o=n,s=0;s<this.elements.length;s++)o+=this.elements[s].setVisibleIndex(o);return this.isContinueNumbering()&&(e+=o-n),e-r},t.prototype.updateVisibleIndexes=function(){this.lastVisibleIndex!==void 0&&(this.resetVisibleIndexes(),this.setVisibleIndex(this.lastVisibleIndex))},t.prototype.resetVisibleIndexes=function(){for(var e=0;e<this.elements.length;e++)this.elements[e].setVisibleIndex(-1)},t.prototype.beforeSetVisibleIndex=function(e){return 0},t.prototype.getPanelStartIndex=function(e){return e},t.prototype.isContinueNumbering=function(){return!0},Object.defineProperty(t.prototype,"isReadOnly",{get:function(){var e=!!this.parent&&this.parent.isReadOnly,r=!!this.survey&&this.survey.isDisplayMode;return this.readOnly||e||r},enumerable:!1,configurable:!0}),t.prototype.onReadOnlyChanged=function(){for(var e=0;e<this.elements.length;e++){var r=this.elements[e];r.setPropertyValue("isReadOnly",r.isReadOnly)}i.prototype.onReadOnlyChanged.call(this)},t.prototype.updateElementCss=function(e){i.prototype.updateElementCss.call(this,e);for(var r=0;r<this.elements.length;r++){var n=this.elements[r];n.updateElementCss(e)}},Object.defineProperty(t.prototype,"enableIf",{get:function(){return this.getPropertyValue("enableIf","")},set:function(e){this.setPropertyValue("enableIf",e)},enumerable:!1,configurable:!0}),t.prototype.addElement=function(e,r){return r===void 0&&(r=-1),this.canAddElement(e)?(r<0||r>=this.elements.length?this.elements.push(e):this.elements.splice(r,0,e),this.wasRendered&&e.onFirstRendering(),this.updateColumns(),!0):!1},t.prototype.insertElement=function(e,r,n){if(n===void 0&&(n="bottom"),!r){this.addElement(e);return}this.blockRowsUpdates();var o=this.elements.indexOf(r),s=this.findRowByElement(r);n=="left"||n=="right"?n=="right"?(e.startWithNewLine=!1,o++):s.elements.indexOf(r)==0?(r.startWithNewLine=!1,e.startWithNewLine=!0):e.startWithNewLine=!1:(e.startWithNewLine=!0,n=="top"?o=this.elements.indexOf(s.elements[0]):o=this.elements.indexOf(s.elements[s.elements.length-1])+1),this.releaseRowsUpdates(),this.addElement(e,o)},t.prototype.insertElementAfter=function(e,r){var n=this.elements.indexOf(r);n>=0&&this.addElement(e,n+1)},t.prototype.insertElementBefore=function(e,r){var n=this.elements.indexOf(r);n>=0&&this.addElement(e,n)},t.prototype.canAddElement=function(e){return!!e&&e.isLayoutTypeSupported(this.getChildrenLayoutType())},t.prototype.addQuestion=function(e,r){return r===void 0&&(r=-1),this.addElement(e,r)},t.prototype.addPanel=function(e,r){return r===void 0&&(r=-1),this.addElement(e,r)},t.prototype.addNewQuestion=function(e,r,n){r===void 0&&(r=null),n===void 0&&(n=-1);var o=Z.Instance.createQuestion(e,r);return this.addQuestion(o,n)?o:null},t.prototype.addNewPanel=function(e){e===void 0&&(e=null);var r=this.createNewPanel(e);return this.addPanel(r)?r:null},t.prototype.indexOf=function(e){return this.elements.indexOf(e)},t.prototype.createNewPanel=function(e){var r=x.createClass("panel");return r.name=e,r},t.prototype.removeElement=function(e){var r=this.elements.indexOf(e);if(r<0){for(var n=0;n<this.elements.length;n++)if(this.elements[n].removeElement(e))return!0;return!1}return this.elements.splice(r,1),this.updateColumns(),!0},t.prototype.removeQuestion=function(e){this.removeElement(e)},t.prototype.runCondition=function(e,r){if(!(this.isDesignMode||this.isLoadingFromJson)){for(var n=this.elements.slice(),o=0;o<n.length;o++)n[o].runCondition(e,r);this.runConditionCore(e,r)}},t.prototype.onAnyValueChanged=function(e,r){for(var n=this.elements,o=0;o<n.length;o++)n[o].onAnyValueChanged(e,r)},t.prototype.checkBindings=function(e,r){for(var n=this.elements,o=0;o<n.length;o++)n[o].checkBindings(e,r)},t.prototype.dragDropAddTarget=function(e){this.dragDropPanelHelper.dragDropAddTarget(e)},t.prototype.dragDropFindRow=function(e){return this.dragDropPanelHelper.dragDropFindRow(e)},t.prototype.dragDropMoveElement=function(e,r,n){this.dragDropPanelHelper.dragDropMoveElement(e,r,n)},t.prototype.needResponsiveWidth=function(){var e=!1;return this.elements.forEach(function(r){r.needResponsiveWidth()&&(e=!0)}),this.rows.forEach(function(r){r.elements.length>1&&(e=!0)}),e},Object.defineProperty(t.prototype,"hasDescriptionUnderTitle",{get:function(){return this.hasDescription},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssHeader",{get:function(){return this.cssClasses.panel.header},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssDescription",{get:function(){return this.cssClasses.panel.description},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questionErrorLocation",{get:function(){return this.getPropertyValue("questionErrorLocation")},set:function(e){this.setPropertyValue("questionErrorLocation",e)},enumerable:!1,configurable:!0}),t.prototype.getQuestionErrorLocation=function(){return this.questionErrorLocation!=="default"?this.questionErrorLocation:this.parent?this.parent.getQuestionErrorLocation():this.survey?this.survey.questionErrorLocation:"top"},Object.defineProperty(t.prototype,"no",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssError",{get:function(){return this.getCssError(this.cssClasses)},enumerable:!1,configurable:!0}),t.prototype.getCssError=function(e){return new O().append(e.error.root).toString()},t.prototype.getSerializableColumnsValue=function(){for(var e=-1,r=this.layoutColumns.length-1;r>=0;r--)if(!this.layoutColumns[r].isEmpty()){e=r;break}return this.layoutColumns.slice(0,e+1)},t.prototype.dispose=function(){if(i.prototype.dispose.call(this),this.rows){for(var e=0;e<this.rows.length;e++)this.rows[e].dispose();this.rows.splice(0,this.rows.length)}for(var e=0;e<this.elements.length;e++)this.elements[e].dispose();this.elements.splice(0,this.elements.length)},t.panelCounter=100,Et([ue()],t.prototype,"layoutColumns",void 0),Et([y({defaultValue:!0})],t.prototype,"showTitle",void 0),Et([y({defaultValue:!0})],t.prototype,"showDescription",void 0),Et([y()],t.prototype,"questionTitleWidth",void 0),t}(de),ar=function(i){hn(t,i);function t(e){e===void 0&&(e="");var r=i.call(this,e)||this;return r.createNewArray("footerActions"),r.registerPropertyChangedHandlers(["width"],function(){r.parent&&r.parent.elementWidthChanged(r)}),r.registerPropertyChangedHandlers(["indent","innerIndent","rightIndent"],function(){r.onIndentChanged()}),r.registerPropertyChangedHandlers(["colSpan"],function(){var n;(n=r.parent)===null||n===void 0||n.updateColumns()}),r.registerPropertyChangedHandlers(["title"],function(){r.calcHasTextInTitle()}),r}return t.prototype.getType=function(){return"panel"},Object.defineProperty(t.prototype,"contentId",{get:function(){return this.id+"_content"},enumerable:!1,configurable:!0}),t.prototype.getSurvey=function(e){return e===void 0&&(e=!1),e?this.parent?this.parent.getSurvey(e):null:i.prototype.getSurvey.call(this,e)},Object.defineProperty(t.prototype,"hasTextInTitle",{get:function(){return this.getPropertyValue("hasTextInTitle")},enumerable:!1,configurable:!0}),t.prototype.calcHasTextInTitle=function(){this.setPropertyValue("hasTextInTitle",!!this.title)},t.prototype.onSurveyLoad=function(){i.prototype.onSurveyLoad.call(this),this.onIndentChanged(),this.calcHasTextInTitle()},t.prototype.onSetData=function(){i.prototype.onSetData.call(this),this.onIndentChanged(),this.calcHasTextInTitle()},Object.defineProperty(t.prototype,"cssHeader",{get:function(){return new O().append(this.cssClasses.panel.header).append(this.cssClasses.panel.headerHidden,!this.hasTextInTitle&&!this.hasDescription&&this.isDesignMode).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPanel",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"page",{get:function(){return this.getPage(this.parent)},set:function(e){this.setPage(this.parent,e)},enumerable:!1,configurable:!0}),t.prototype.removeFromParent=function(){this.parent&&this.removeSelfFromList(this.parent.elements)},t.prototype.moveTo=function(e,r){return r===void 0&&(r=null),this.moveToBase(this.parent,e,r)},Object.defineProperty(t.prototype,"visibleIndex",{get:function(){return this.getPropertyValue("visibleIndex",-1)},enumerable:!1,configurable:!0}),t.prototype.getTitleOwner=function(){return this},Object.defineProperty(t.prototype,"showNumber",{get:function(){return this.getPropertyValue("showNumber")},set:function(e){this.setPropertyValue("showNumber",e),this.notifySurveyOnVisibilityChanged()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showQuestionNumbers",{get:function(){return this.getPropertyValue("showQuestionNumbers")},set:function(e){this.setPropertyValue("showQuestionNumbers",e),this.notifySurveyOnVisibilityChanged()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questionStartIndex",{get:function(){return this.getPropertyValue("questionStartIndex","")},set:function(e){this.setPropertyValue("questionStartIndex",e)},enumerable:!1,configurable:!0}),t.prototype.getQuestionStartIndex=function(){return this.questionStartIndex?this.questionStartIndex:i.prototype.getQuestionStartIndex.call(this)},Object.defineProperty(t.prototype,"no",{get:function(){return this.getPropertyValue("no","")},enumerable:!1,configurable:!0}),t.prototype.setNo=function(e){this.setPropertyValue("no",P.getNumberByIndex(this.visibleIndex,this.getStartIndex()))},t.prototype.notifyStateChanged=function(e){this.isLoadingFromJson||this.locTitle.strChanged(),i.prototype.notifyStateChanged.call(this,e)},t.prototype.createLocTitleProperty=function(){var e=this,r=i.prototype.createLocTitleProperty.call(this);return r.onGetTextCallback=function(n){return!n&&(e.state!=="default"||e.isDesignMode&&e.isDefaultV2Theme&&e.isInteractiveDesignElement)&&(n=e.name),n},r},t.prototype.beforeSetVisibleIndex=function(e){var r=-1;return this.showNumber&&(this.isDesignMode||!this.locTitle.isEmpty)&&(r=e),this.setPropertyValue("visibleIndex",r),this.setNo(r),r<0?0:1},t.prototype.getPanelStartIndex=function(e){return this.showQuestionNumbers=="off"?-1:this.showQuestionNumbers=="onpanel"?0:e},t.prototype.isContinueNumbering=function(){return this.showQuestionNumbers!="off"&&this.showQuestionNumbers!="onpanel"},t.prototype.notifySurveyOnVisibilityChanged=function(){this.survey!=null&&!this.isLoadingFromJson&&this.survey.panelVisibilityChanged(this,this.isVisible)},t.prototype.getRenderedTitle=function(e){if(!e){if(this.isCollapsed||this.isExpanded)return this.name;if(this.isDesignMode)return"["+this.name+"]"}return i.prototype.getRenderedTitle.call(this,e)},Object.defineProperty(t.prototype,"innerIndent",{get:function(){return this.getPropertyValue("innerIndent")},set:function(e){this.setPropertyValue("innerIndent",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"startWithNewLine",{get:function(){return this.getPropertyValue("startWithNewLine")},set:function(e){this.setPropertyValue("startWithNewLine",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowAdaptiveActions",{get:function(){return this.getPropertyValue("allowAdaptiveActions")},set:function(e){this.setPropertyValue("allowAdaptiveActions",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"innerPaddingLeft",{get:function(){return this.getPropertyValue("innerPaddingLeft","")},set:function(e){this.setPropertyValue("innerPaddingLeft",e)},enumerable:!1,configurable:!0}),t.prototype.onIndentChanged=function(){!this.getSurvey()||(this.innerPaddingLeft=this.getIndentSize(this.innerIndent),this.paddingLeft=this.getIndentSize(this.indent),this.paddingRight=this.getIndentSize(this.rightIndent))},t.prototype.getIndentSize=function(e){if(e<1)return"";var r=this.survey.css;return!r||!r.question.indent?"":e*r.question.indent+"px"},t.prototype.clearOnDeletingContainer=function(){this.elements.forEach(function(e){(e instanceof le||e instanceof t)&&e.clearOnDeletingContainer()})},Object.defineProperty(t.prototype,"footerActions",{get:function(){return this.getPropertyValue("footerActions")},enumerable:!1,configurable:!0}),t.prototype.getFooterToolbar=function(){var e=this,r,n;if(!this.footerToolbarValue){var o=this.footerActions;this.hasEditButton&&o.push({id:"cancel-preview",locTitle:this.survey.locEditText,innerCss:this.survey.cssNavigationEdit,component:"sv-nav-btn",action:function(){e.cancelPreview()}}),this.onGetFooterActionsCallback?o=this.onGetFooterActionsCallback():o=(r=this.survey)===null||r===void 0?void 0:r.getUpdatedPanelFooterActions(this,o),this.footerToolbarValue=this.createActionContainer(this.allowAdaptiveActions);var s=this.onGetFooterToolbarCssCallback?this.onGetFooterToolbarCssCallback():"";s||(s=(n=this.cssClasses.panel)===null||n===void 0?void 0:n.footer),s&&(this.footerToolbarValue.containerCss=s),this.footerToolbarValue.setItems(o)}return this.footerToolbarValue},Object.defineProperty(t.prototype,"hasEditButton",{get:function(){return this.survey&&this.survey.state==="preview"?this.parent&&this.parent instanceof Dt:!1},enumerable:!1,configurable:!0}),t.prototype.cancelPreview=function(){!this.hasEditButton||this.survey.cancelPreviewByPage(this)},Object.defineProperty(t.prototype,"cssTitle",{get:function(){return new O().append(this.getCssTitle(this.cssClasses.panel)).append(this.cssClasses.panel.titleHidden,!this.hasTextInTitle&&this.isDesignMode).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showErrorsAbovePanel",{get:function(){return this.isDefaultV2Theme&&!this.showPanelAsPage},enumerable:!1,configurable:!0}),t.prototype.getCssError=function(e){var r=new O().append(i.prototype.getCssError.call(this,e)).append(e.panel.errorsContainer);return r.append("panel-error-root",r.isEmpty()).toString()},t.prototype.onVisibleChanged=function(){i.prototype.onVisibleChanged.call(this),this.notifySurveyOnVisibilityChanged()},t.prototype.needResponsiveWidth=function(){return this.startWithNewLine?i.prototype.needResponsiveWidth.call(this):!0},t.prototype.focusIn=function(){!this.survey||this.survey.whenPanelFocusIn(this)},t.prototype.getHasFrameV2=function(){return i.prototype.getHasFrameV2.call(this)&&!this.showPanelAsPage},t.prototype.getIsNested=function(){return i.prototype.getIsNested.call(this)&&this.parent!==void 0},Object.defineProperty(t.prototype,"showPanelAsPage",{get:function(){var e=this;return e.originalPage?!0:e.survey.isShowingPreview&&e.survey.isSinglePage&&!!e.parent&&!!e.parent.originalPage},enumerable:!1,configurable:!0}),t.prototype.onElementExpanded=function(e){var r=this;if(this.survey!=null&&!this.isLoadingFromJson){var n=this.getFirstQuestionToFocus(!1);n&&setTimeout(function(){!r.isDisposed&&!!r.survey&&r.survey.scrollElementToTop(n,n,null,n.inputId,!1,{behavior:"smooth"})},e?0:15)}},t.prototype.getCssRoot=function(e){return new O().append(i.prototype.getCssRoot.call(this,e)).append(e.container).append(e.asPage,this.showPanelAsPage).append(e.invisible,!this.isDesignMode&&this.areInvisibleElementsShowing&&!this.visible).toString()},t.prototype.getContainerCss=function(){return this.getCssRoot(this.cssClasses.panel)},t}(sr);x.addClass("panelbase",["name",{name:"elements",alternativeName:"questions",baseClassName:"question",visible:!1,isLightSerializable:!1},{name:"visible:switch",default:!0,overridingProperty:"visibleIf"},{name:"readOnly:boolean",overridingProperty:"enableIf"},"visibleIf:condition","enableIf:condition","requiredIf:condition",{name:"questionTitleWidth",visibleIf:function(i){return!!i&&i.availableQuestionTitleWidth()}},{name:"questionTitleLocation",default:"default",choices:["default","top","bottom","left","hidden"]},{name:"layoutColumns:panellayoutcolumns",className:"panellayoutcolumn",isArray:!0,onSerializeValue:function(i){return i.getSerializableColumnsValue()},visibleIf:function(i){return!!i&&!!i.survey&&i.survey.gridLayoutEnabled}},{name:"title:text",serializationProperty:"locTitle"},{name:"description:text",serializationProperty:"locDescription"},{name:"questionsOrder",default:"default",choices:["default","initial","random"]},{name:"questionErrorLocation",default:"default",choices:["default","top","bottom"]}],function(){return new sr}),x.addClass("panel",[{name:"state",default:"default",choices:["default","collapsed","expanded"]},{name:"isRequired:switch",overridingProperty:"requiredIf"},{name:"requiredErrorText:text",serializationProperty:"locRequiredErrorText"},{name:"startWithNewLine:boolean",default:!0},"width",{name:"minWidth",defaultFunc:function(){return"auto"}},{name:"maxWidth",defaultFunc:function(){return b.maxWidth}},{name:"colSpan:number",visible:!1,onSerializeValue:function(i){return i.getPropertyValue("colSpan")}},{name:"effectiveColSpan:number",minValue:1,isSerializable:!1,visibleIf:function(i){return!!i&&!!i.survey&&i.survey.gridLayoutEnabled}},{name:"innerIndent:number",default:0,choices:[0,1,2,3]},{name:"indent:number",default:0,choices:[0,1,2,3],visible:!1},{name:"page",isSerializable:!1,visibleIf:function(i){var t=i?i.survey:null;return!t||!t.pages||t.pages.length>1},choices:function(i){var t=i?i.survey:null;return t?t.pages.map(function(e){return{value:e.name,text:e.title}}):[]}},"showNumber:boolean",{name:"showQuestionNumbers",default:"default",choices:["default","onpanel","off"]},"questionStartIndex",{name:"allowAdaptiveActions:boolean",default:!0,visible:!1}],function(){return new ar},"panelbase"),Ne.Instance.registerElement("panel",function(i){return new ar(i)});var Nu=function(){function i(t){this.page=t}return i.prototype.getDragDropInfo=function(){return this.dragDropInfo},i.prototype.dragDropStart=function(t,e,r){r===void 0&&(r=-1),this.dragDropInfo=new To(t,e,r)},i.prototype.dragDropMoveTo=function(t,e,r){if(e===void 0&&(e=!1),r===void 0&&(r=!1),!this.dragDropInfo||(this.dragDropInfo.destination=t,this.dragDropInfo.isBottom=e,this.dragDropInfo.isEdge=r,this.correctDragDropInfo(this.dragDropInfo),!this.dragDropCanDropTagert()))return!1;if(!this.dragDropCanDropSource()||!this.dragDropAllowFromSurvey()){if(this.dragDropInfo.source){var n=this.page.dragDropFindRow(this.dragDropInfo.target);this.page.updateRowsRemoveElementFromRow(this.dragDropInfo.target,n)}return!1}return this.page.dragDropAddTarget(this.dragDropInfo),!0},i.prototype.correctDragDropInfo=function(t){if(!!t.destination){var e=t.destination.isPanel?t.destination:null;!e||t.target.isLayoutTypeSupported(e.getChildrenLayoutType())||(t.isEdge=!0)}},i.prototype.dragDropAllowFromSurvey=function(){var t=this.dragDropInfo.destination;if(!t||!this.page.survey)return!0;var e=null,r=null,n=t.isPage||!this.dragDropInfo.isEdge&&t.isPanel?t:t.parent;if(!t.isPage){var o=t.parent;if(o){var s=o.elements,a=s.indexOf(t);a>-1&&(e=t,r=t,this.dragDropInfo.isBottom?e=a<s.length-1?s[a+1]:null:r=a>0?s[a-1]:null)}}var l={allow:!0,target:this.dragDropInfo.target,source:this.dragDropInfo.source,toElement:this.dragDropInfo.target,draggedElement:this.dragDropInfo.source,parent:n,fromElement:this.dragDropInfo.source?this.dragDropInfo.source.parent:null,insertAfter:r,insertBefore:e};return this.page.survey.dragAndDropAllow(l)},i.prototype.dragDropFinish=function(t){if(t===void 0&&(t=!1),!!this.dragDropInfo){var e=this.dragDropInfo.target,r=this.dragDropInfo.source,n=this.dragDropInfo.destination,o=this.page.dragDropFindRow(e),s=this.dragDropGetElementIndex(e,o);this.page.updateRowsRemoveElementFromRow(e,o);var a=[],l=[];if(!t&&!!o){var u=!1;if(this.page.isDesignModeV2){var d=r&&r.parent&&r.parent.dragDropFindRow(r);o.panel.elements[s]&&o.panel.elements[s].startWithNewLine&&o.elements.length>1&&o.panel.elements[s]===n&&(a.push(e),l.push(o.panel.elements[s])),e.startWithNewLine&&o.elements.length>1&&(!o.panel.elements[s]||!o.panel.elements[s].startWithNewLine)&&l.push(e),d&&d.elements[0]===r&&d.elements[1]&&a.push(d.elements[1]),o.elements.length<=1&&a.push(e),e.startWithNewLine&&o.elements.length>1&&o.elements[0]!==n&&l.push(e)}this.page.survey.startMovingQuestion(),!!r&&!!r.parent&&(u=o.panel==r.parent,u?(o.panel.dragDropMoveElement(r,e,s),s=-1):r.parent.removeElement(r)),s>-1&&o.panel.addElement(e,s),this.page.survey.stopMovingQuestion()}return a.map(function(v){v.startWithNewLine=!0}),l.map(function(v){v.startWithNewLine=!1}),this.dragDropInfo=null,t?null:e}},i.prototype.dragDropGetElementIndex=function(t,e){if(!e)return-1;var r=e.elements.indexOf(t);if(e.index==0)return r;var n=e.panel.rows[e.index-1],o=n.elements[n.elements.length-1];return r+e.panel.elements.indexOf(o)+1},i.prototype.dragDropCanDropTagert=function(){var t=this.dragDropInfo.destination;return!t||t.isPage?!0:this.dragDropCanDropCore(this.dragDropInfo.target,t)},i.prototype.dragDropCanDropSource=function(){var t=this.dragDropInfo.source;if(!t)return!0;var e=this.dragDropInfo.destination;if(!this.dragDropCanDropCore(t,e))return!1;if(this.page.isDesignModeV2){var r=this.page.dragDropFindRow(t),n=this.page.dragDropFindRow(e);if(r!==n&&(!t.startWithNewLine&&e.startWithNewLine||t.startWithNewLine&&!e.startWithNewLine))return!0;var o=this.page.dragDropFindRow(e);if(o&&o.elements.length==1)return!0}return this.dragDropCanDropNotNext(t,e,this.dragDropInfo.isEdge,this.dragDropInfo.isBottom)},i.prototype.dragDropCanDropCore=function(t,e){if(!e)return!0;if(this.dragDropIsSameElement(e,t))return!1;if(t.isPanel){var r=t;if(r.containsElement(e)||!!r.getElementByName(e.name))return!1}return!0},i.prototype.dragDropCanDropNotNext=function(t,e,r,n){if(!e||e.isPanel&&!r||typeof t.parent=="undefined"||t.parent!==e.parent)return!0;var o=t.parent,s=o.elements.indexOf(t),a=o.elements.indexOf(e);return a<s&&!n&&a--,n&&a++,s<a?a-s>1:s-a>0},i.prototype.dragDropIsSameElement=function(t,e){return t==e||t.name==e.name},i}(),_u=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ku=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Dt=function(i){_u(t,i);function t(e){e===void 0&&(e="");var r=i.call(this,e)||this;return r.hasShownValue=!1,r.timeSpent=0,r.locTitle.onGetTextCallback=function(n){return r.canShowPageNumber()&&n?r.num+". "+n:n},r.createLocalizableString("navigationDescription",r,!0),r.dragDropPageHelper=new Nu(r),r}return t.prototype.getType=function(){return"page"},t.prototype.toString=function(){return this.name},Object.defineProperty(t.prototype,"isPage",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.canShowPageNumber=function(){return this.survey&&this.survey.showPageNumbers},t.prototype.canShowTitle=function(){return this.survey&&this.survey.showPageTitles},Object.defineProperty(t.prototype,"navigationTitle",{get:function(){return this.getLocalizableStringText("navigationTitle")},set:function(e){this.setLocalizableStringText("navigationTitle",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"navigationDescription",{get:function(){return this.getLocalizableStringText("navigationDescription")},set:function(e){this.setLocalizableStringText("navigationDescription",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locNavigationDescription",{get:function(){return this.getLocalizableString("navigationDescription")},enumerable:!1,configurable:!0}),t.prototype.navigationLocStrChanged=function(){this.locNavigationTitle.isEmpty&&this.locTitle.strChanged(),this.locNavigationTitle.strChanged(),this.locNavigationDescription.strChanged()},Object.defineProperty(t.prototype,"passed",{get:function(){return this.getPropertyValue("passed",!1)},set:function(e){this.setPropertyValue("passed",e)},enumerable:!1,configurable:!0}),t.prototype.removeFromParent=function(){this.survey&&this.removeSelfFromList(this.survey.pages)},t.prototype.onFirstRendering=function(){this.wasShown||i.prototype.onFirstRendering.call(this)},Object.defineProperty(t.prototype,"visibleIndex",{get:function(){return this.getPropertyValue("visibleIndex",-1)},set:function(e){this.setPropertyValue("visibleIndex",e)},enumerable:!1,configurable:!0}),t.prototype.canRenderFirstRows=function(){return!this.isDesignMode||this.visibleIndex==0},Object.defineProperty(t.prototype,"isStartPage",{get:function(){return this.survey&&this.survey.isPageStarted(this)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isStarted",{get:function(){return this.isStartPage},enumerable:!1,configurable:!0}),t.prototype.calcCssClasses=function(e){var r={page:{},error:{},pageTitle:"",pageDescription:"",row:"",rowMultiple:"",pageRow:"",rowCompact:"",rowFadeIn:"",rowFadeOut:"",rowDelayedFadeIn:""};return this.copyCssClasses(r.page,e.page),this.copyCssClasses(r.error,e.error),e.pageTitle&&(r.pageTitle=e.pageTitle),e.pageDescription&&(r.pageDescription=e.pageDescription),e.row&&(r.row=e.row),e.pageRow&&(r.pageRow=e.pageRow),e.rowMultiple&&(r.rowMultiple=e.rowMultiple),e.rowCompact&&(r.rowCompact=e.rowCompact),e.rowFadeIn&&(r.rowFadeIn=e.rowFadeIn),e.rowDelayedFadeIn&&(r.rowDelayedFadeIn=e.rowDelayedFadeIn),e.rowFadeOut&&(r.rowFadeOut=e.rowFadeOut),this.survey&&this.survey.updatePageCssClasses(this,r),r},Object.defineProperty(t.prototype,"cssTitle",{get:function(){return this.cssClasses.page?new O().append(this.cssClasses.page.title).toString():""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssRoot",{get:function(){return!this.cssClasses.page||!this.survey?"":new O().append(this.cssClasses.page.root).append(this.cssClasses.page.emptyHeaderRoot,!this.survey.renderedHasHeader&&!(this.survey.isShowProgressBarOnTop&&!this.survey.isStaring)).toString()},enumerable:!1,configurable:!0}),t.prototype.getCssError=function(e){return new O().append(i.prototype.getCssError.call(this,e)).append(e.page.errorsContainer).toString()},Object.defineProperty(t.prototype,"navigationButtonsVisibility",{get:function(){return this.getPropertyValue("navigationButtonsVisibility")},set:function(e){this.setPropertyValue("navigationButtonsVisibility",e.toLowerCase())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isActive",{get:function(){return!!this.survey&&this.survey.currentPage===this},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wasShown",{get:function(){return this.hasShownValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasShown",{get:function(){return this.wasShown},enumerable:!1,configurable:!0}),t.prototype.setWasShown=function(e){if(e!=this.hasShownValue&&(this.hasShownValue=e,!(this.isDesignMode||e!==!0))){for(var r=this.elements,n=0;n<r.length;n++)r[n].isPanel&&r[n].randomizeElements(this.areQuestionsRandomized);this.randomizeElements(this.areQuestionsRandomized)}},t.prototype.scrollToTop=function(){this.survey&&this.survey.scrollElementToTop(this,null,this,this.id)},t.prototype.getAllPanels=function(e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var n=new Array;return this.addPanelsIntoList(n,e,r),n},t.prototype.getPanels=function(e,r){return e===void 0&&(e=!1),r===void 0&&(r=!1),this.getAllPanels(e,r)},Object.defineProperty(t.prototype,"maxTimeToFinish",{get:function(){return this.getPropertyValue("maxTimeToFinish",0)},set:function(e){this.setPropertyValue("maxTimeToFinish",e)},enumerable:!1,configurable:!0}),t.prototype.getMaxTimeToFinish=function(){if(this.maxTimeToFinish!==0)return this.maxTimeToFinish;var e=this.survey?this.survey.maxTimeToFinishPage:0;return e>0?e:0},t.prototype.onNumChanged=function(e){},t.prototype.onVisibleChanged=function(){this.isRandomizing||(i.prototype.onVisibleChanged.call(this),this.survey!=null&&this.survey.pageVisibilityChanged(this,this.isVisible))},t.prototype.getDragDropInfo=function(){return this.dragDropPageHelper.getDragDropInfo()},t.prototype.dragDropStart=function(e,r,n){n===void 0&&(n=-1),this.dragDropPageHelper.dragDropStart(e,r,n)},t.prototype.dragDropMoveTo=function(e,r,n){return r===void 0&&(r=!1),n===void 0&&(n=!1),this.dragDropPageHelper.dragDropMoveTo(e,r,n)},t.prototype.dragDropFinish=function(e){return e===void 0&&(e=!1),this.dragDropPageHelper.dragDropFinish(e)},t.prototype.ensureRowsVisibility=function(){i.prototype.ensureRowsVisibility.call(this),this.getPanels().forEach(function(e){return e.ensureRowsVisibility()})},ku([y({defaultValue:-1,onSet:function(e,r){return r.onNumChanged(e)}})],t.prototype,"num",void 0),t}(sr);x.addClass("page",[{name:"navigationButtonsVisibility",default:"inherit",choices:["inherit","show","hide"]},{name:"maxTimeToFinish:number",default:0,minValue:0},{name:"navigationTitle",visibleIf:function(i){return!!i.survey&&(i.survey.progressBarType==="buttons"||i.survey.showTOC)},serializationProperty:"locNavigationTitle"},{name:"navigationDescription",visibleIf:function(i){return!!i.survey&&i.survey.progressBarType==="buttons"},serializationProperty:"locNavigationDescription"},{name:"title:text",serializationProperty:"locTitle"},{name:"description:text",serializationProperty:"locDescription"}],function(){return new Dt},"panelbase");var Bu=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Do=function(i){Bu(t,i);function t(e){var r=i.call(this)||this;return r.survey=e,r.onResize=r.addEvent(),r}return t.prototype.isListElementClickable=function(e){return!this.survey.onServerValidateQuestions||this.survey.onServerValidateQuestions.isEmpty||this.survey.checkErrorsMode==="onComplete"?!0:e<=this.survey.currentPageNo+1},t.prototype.getRootCss=function(e){e===void 0&&(e="center");var r=this.survey.css.progressButtonsContainerCenter;return this.survey.css.progressButtonsRoot&&(r+=" "+this.survey.css.progressButtonsRoot+" "+this.survey.css.progressButtonsRoot+"--"+(["footer","contentBottom"].indexOf(e)!==-1?"bottom":"top"),r+=" "+this.survey.css.progressButtonsRoot+"--"+(this.showItemTitles?"with-titles":"no-titles")),this.showItemNumbers&&this.survey.css.progressButtonsNumbered&&(r+=" "+this.survey.css.progressButtonsNumbered),this.isFitToSurveyWidth&&(r+=" "+this.survey.css.progressButtonsFitSurveyWidth),r},t.prototype.getListElementCss=function(e){if(!(e>=this.survey.visiblePages.length))return new O().append(this.survey.css.progressButtonsListElementPassed,this.survey.visiblePages[e].passed).append(this.survey.css.progressButtonsListElementCurrent,this.survey.currentPageNo===e).append(this.survey.css.progressButtonsListElementNonClickable,!this.isListElementClickable(e)).toString()},t.prototype.getScrollButtonCss=function(e,r){return new O().append(this.survey.css.progressButtonsImageButtonLeft,r).append(this.survey.css.progressButtonsImageButtonRight,!r).append(this.survey.css.progressButtonsImageButtonHidden,!e).toString()},t.prototype.clickListElement=function(e){e instanceof Dt||(e=this.survey.visiblePages[e]),this.survey.tryNavigateToPage(e)},t.prototype.isListContainerHasScroller=function(e){var r=e.querySelector("."+this.survey.css.progressButtonsListContainer);return r?r.scrollWidth>r.offsetWidth:!1},t.prototype.isCanShowItemTitles=function(e){var r=e.querySelector("ul");if(!r||r.children.length<2)return!0;if(r.clientWidth>r.parentElement.clientWidth)return!1;for(var n=r.children[0].clientWidth,o=0;o<r.children.length;o++)if(Math.abs(r.children[o].clientWidth-n)>5)return!1;return!0},t.prototype.clearConnectorsWidth=function(e){for(var r=e.querySelectorAll(".sd-progress-buttons__connector"),n=0;n<r.length;n++)r[n].style.width=""},t.prototype.adjustConnectors=function(e){var r=e.querySelector("ul");if(!!r)for(var n=e.querySelectorAll(".sd-progress-buttons__connector"),o=this.showItemNumbers?36:20,s=(r.clientWidth-o)/(r.children.length-1)-o,a=0;a<n.length;a++)n[a].style.width=s+"px"},Object.defineProperty(t.prototype,"isFitToSurveyWidth",{get:function(){return oe.currentType!=="defaultV2"?!1:this.survey.progressBarInheritWidthFrom==="survey"&&this.survey.widthMode=="static"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progressWidth",{get:function(){return this.isFitToSurveyWidth?this.survey.renderedWidth:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showItemNumbers",{get:function(){return oe.currentType!=="defaultV2"?!1:this.survey.progressBarShowPageNumbers},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showItemTitles",{get:function(){return oe.currentType!=="defaultV2"?!0:this.survey.progressBarShowPageTitles},enumerable:!1,configurable:!0}),t.prototype.getItemNumber=function(e){var r="";return this.showItemNumbers&&(r+=this.survey.visiblePages.indexOf(e)+1),r},Object.defineProperty(t.prototype,"headerText",{get:function(){return this.survey.currentPage?this.survey.currentPage.renderedNavigationTitle:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"footerText",{get:function(){return this.survey.progressText},enumerable:!1,configurable:!0}),t.prototype.processResponsiveness=function(e){this.onResize.fire(this,{width:e})},t}(W),qu=function(){function i(t,e,r){var n=this;this.model=t,this.element=e,this.viewModel=r,this.criticalProperties=["progressBarType","progressBarShowPageTitles"],this.canShowItemTitles=!0,this.processResponsiveness=function(o,s){if(n.viewModel.onUpdateScroller(o.isListContainerHasScroller(n.element)),n.model.clearConnectorsWidth(n.element),!o.showItemTitles){n.model.adjustConnectors(n.element);return}if(o.survey.isMobile){n.prevWidth=s.width,n.canShowItemTitles=!1,n.model.adjustConnectors(n.element),n.viewModel.onResize(n.canShowItemTitles);return}n.timer!==void 0&&clearTimeout(n.timer),n.timer=setTimeout(function(){(n.prevWidth===void 0||n.prevWidth<s.width&&!n.canShowItemTitles||n.prevWidth>s.width&&n.canShowItemTitles)&&(n.prevWidth=s.width,n.canShowItemTitles=o.isCanShowItemTitles(n.element),n.viewModel.onResize(n.canShowItemTitles),n.timer=void 0)},10)},this.model.survey.registerFunctionOnPropertiesValueChanged(this.criticalProperties,function(){return n.forceUpdate()},"ProgressButtonsResponsivityManager"+this.viewModel.container),this.model.onResize.add(this.processResponsiveness),this.forceUpdate()}return i.prototype.forceUpdate=function(){this.viewModel.onUpdateSettings(),this.processResponsiveness(this.model,{})},i.prototype.dispose=function(){clearTimeout(this.timer),this.model.onResize.remove(this.processResponsiveness),this.model.survey.unRegisterFunctionOnPropertiesValueChanged(this.criticalProperties,"ProgressButtonsResponsivityManager"+this.viewModel.container),this.element=void 0,this.model=void 0},i}();function Ao(i,t){return i.isDesignMode||t.focusFirstQuestion(),!0}function Lo(i,t){var e,r=i.questionsOnPageMode==="singlePage"?(e=i.pages[0])===null||e===void 0?void 0:e.elements:i.pages,n=(r||[]).map(function(l){return new G({id:l.name,locTitle:l.locNavigationTitle,action:function(){return D.activeElementBlur(),t&&t(),l instanceof Dt?i.tryNavigateToPage(l):Ao(i,l)},visible:new ne(function(){return l.isVisible&&!l.isStartPage})})}),o=n.filter(function(l){return!!i.currentPage&&l.id===i.currentPage.name})[0]||n.filter(function(l){return l.id===r[0].name})[0],s={items:n,onSelectionChanged:function(l){l.action()&&(a.selectedItem=l)},allowSelection:!0,searchEnabled:!1,locOwner:i,selectedItem:o},a=new Pt(s);return a.allowSelection=!1,i.onCurrentPageChanged.add(function(l,u){a.selectedItem=n.filter(function(d){return!!i.currentPage&&d.id===i.currentPage.name})[0]}),a}function Mo(i,t){t===void 0&&(t=!1);var e=rt.RootStyle;return t?e+" "+rt.RootStyle+"--mobile":(e+=" "+rt.RootStyle+"--"+(i.tocLocation||"").toLowerCase(),rt.StickyPosition&&(e+=" "+rt.RootStyle+"--sticky"),e)}var rt=function(){function i(t){var e=this;this.survey=t,this.icon="icon-navmenu_24x24",this.togglePopup=function(){e.popupModel.toggleVisibility()},this.listModel=Lo(t,function(){e.popupModel.isVisible=!1}),this.popupModel=new wt("sv-list",{model:this.listModel}),this.popupModel.overlayDisplayMode="plain",this.popupModel.displayMode=new ne(function(){return e.isMobile?"overlay":"popup"}),i.StickyPosition&&(t.onAfterRenderSurvey.add(function(r,n){return e.initStickyTOCSubscriptions(n.htmlElement)}),this.initStickyTOCSubscriptions(t.rootElement))}return i.prototype.initStickyTOCSubscriptions=function(t){var e=this;i.StickyPosition&&!!t&&(t.addEventListener("scroll",function(r){e.updateStickyTOCSize(t)}),this.updateStickyTOCSize(t))},i.prototype.updateStickyTOCSize=function(t){if(!!t){var e=t.querySelector("."+i.RootStyle);if(e&&(e.style.height="",!this.isMobile&&i.StickyPosition&&!!t)){var r=t.getBoundingClientRect().height,n=this.survey.headerView==="advanced"?".sv-header":".sv_custom_header+div div."+(this.survey.css.title||"sd-title"),o=t.querySelector(n),s=o?o.getBoundingClientRect().height:0,a=t.scrollTop>s?0:s-t.scrollTop;e.style.height=r-a-1+"px"}}},Object.defineProperty(i.prototype,"isMobile",{get:function(){return this.survey.isMobile},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"containerCss",{get:function(){return Mo(this.survey,this.isMobile)},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){this.popupModel.dispose(),this.listModel.dispose()},i.RootStyle="sv_progress-toc",i.StickyPosition=!0,i}(),Qu=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ee=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},_e=function(i){Qu(t,i);function t(e,r){e===void 0&&(e=null),r===void 0&&(r=null);var n=i.call(this)||this;n.valuesHash={},n.variablesHash={},n.onTriggerExecuted=n.addEvent(),n.onCompleting=n.addEvent(),n.onComplete=n.addEvent(),n.onShowingPreview=n.addEvent(),n.onNavigateToUrl=n.addEvent(),n.onStarted=n.addEvent(),n.onPartialSend=n.addEvent(),n.onCurrentPageChanging=n.addEvent(),n.onCurrentPageChanged=n.addEvent(),n.onValueChanging=n.addEvent(),n.onValueChanged=n.addEvent(),n.onVariableChanged=n.addEvent(),n.onQuestionVisibleChanged=n.addEvent(),n.onVisibleChanged=n.onQuestionVisibleChanged,n.onPageVisibleChanged=n.addEvent(),n.onPanelVisibleChanged=n.addEvent(),n.onQuestionCreated=n.addEvent(),n.onQuestionAdded=n.addEvent(),n.onQuestionRemoved=n.addEvent(),n.onPanelAdded=n.addEvent(),n.onPanelRemoved=n.addEvent(),n.onPageAdded=n.addEvent(),n.onValidateQuestion=n.addEvent(),n.onSettingQuestionErrors=n.addEvent(),n.onServerValidateQuestions=n.addEvent(),n.onValidatePanel=n.addEvent(),n.onErrorCustomText=n.addEvent(),n.onValidatedErrorsOnCurrentPage=n.addEvent(),n.onProcessHtml=n.addEvent(),n.onGetQuestionDisplayValue=n.addEvent(),n.onGetQuestionTitle=n.addEvent(),n.onGetTitleTagName=n.addEvent(),n.onGetQuestionNo=n.addEvent(),n.onProgressText=n.addEvent(),n.onTextMarkdown=n.addEvent(),n.onTextRenderAs=n.addEvent(),n.onSendResult=n.addEvent(),n.onGetResult=n.addEvent(),n.onOpenFileChooser=n.addEvent(),n.onUploadFiles=n.addEvent(),n.onDownloadFile=n.addEvent(),n.onClearFiles=n.addEvent(),n.onLoadChoicesFromServer=n.addEvent(),n.onLoadedSurveyFromService=n.addEvent(),n.onProcessTextValue=n.addEvent(),n.onUpdateQuestionCssClasses=n.addEvent(),n.onUpdatePanelCssClasses=n.addEvent(),n.onUpdatePageCssClasses=n.addEvent(),n.onUpdateChoiceItemCss=n.addEvent(),n.onAfterRenderSurvey=n.addEvent(),n.onAfterRenderHeader=n.addEvent(),n.onAfterRenderPage=n.addEvent(),n.onAfterRenderQuestion=n.addEvent(),n.onAfterRenderQuestionInput=n.addEvent(),n.onAfterRenderPanel=n.addEvent(),n.onFocusInQuestion=n.addEvent(),n.onFocusInPanel=n.addEvent(),n.onShowingChoiceItem=n.addEvent(),n.onChoicesLazyLoad=n.addEvent(),n.onChoicesSearch=n.addEvent(),n.onGetChoiceDisplayValue=n.addEvent(),n.onMatrixRowAdded=n.addEvent(),n.onMatrixRowAdding=n.addEvent(),n.onMatrixBeforeRowAdded=n.onMatrixRowAdding,n.onMatrixRowRemoving=n.addEvent(),n.onMatrixRowRemoved=n.addEvent(),n.onMatrixRenderRemoveButton=n.addEvent(),n.onMatrixAllowRemoveRow=n.onMatrixRenderRemoveButton,n.onMatrixDetailPanelVisibleChanged=n.addEvent(),n.onMatrixCellCreating=n.addEvent(),n.onMatrixCellCreated=n.addEvent(),n.onAfterRenderMatrixCell=n.addEvent(),n.onMatrixAfterCellRender=n.onAfterRenderMatrixCell,n.onMatrixCellValueChanged=n.addEvent(),n.onMatrixCellValueChanging=n.addEvent(),n.onMatrixCellValidate=n.addEvent(),n.onMatrixColumnAdded=n.addEvent(),n.onMultipleTextItemAdded=n.addEvent(),n.onDynamicPanelAdded=n.addEvent(),n.onDynamicPanelRemoved=n.addEvent(),n.onDynamicPanelRemoving=n.addEvent(),n.onTimer=n.addEvent(),n.onTimerPanelInfoText=n.addEvent(),n.onDynamicPanelItemValueChanged=n.addEvent(),n.onGetDynamicPanelTabTitle=n.addEvent(),n.onDynamicPanelCurrentIndexChanged=n.addEvent(),n.onIsAnswerCorrect=n.addEvent(),n.onDragDropAllow=n.addEvent(),n.onScrollingElementToTop=n.addEvent(),n.onLocaleChangedEvent=n.addEvent(),n.onGetQuestionTitleActions=n.addEvent(),n.onGetPanelTitleActions=n.addEvent(),n.onGetPageTitleActions=n.addEvent(),n.onGetPanelFooterActions=n.addEvent(),n.onGetMatrixRowActions=n.addEvent(),n.onElementContentVisibilityChanged=n.addEvent(),n.onGetExpressionDisplayValue=n.addEvent(),n.onPopupVisibleChanged=n.addEvent(),n.onOpenDropdownMenu=n.addEvent(),n.onElementWrapperComponentName=n.addEvent(),n.onElementWrapperComponentData=n.addEvent(),n.jsonErrors=null,n.cssValue=null,n.hideRequiredErrors=!1,n.cssVariables={},n._isMobile=!1,n._isCompact=!1,n._isDesignMode=!1,n.validationEnabled=!0,n.validationAllowSwitchPages=!1,n.validationAllowComplete=!1,n.isNavigationButtonPressed=!1,n.mouseDownPage=null,n.isCalculatingProgressText=!1,n.isCurrentPageRendering=!0,n.isCurrentPageRendered=void 0,n.isTriggerIsRunning=!1,n.triggerValues=null,n.triggerKeys=null,n.conditionValues=null,n.isValueChangedOnRunningCondition=!1,n.conditionRunnerCounter=0,n.conditionUpdateVisibleIndexes=!1,n.conditionNotifyElementsOnAnyValueOrVariableChanged=!1,n.isEndLoadingFromJson=null,n.questionHashes={names:{},namesInsensitive:{},valueNames:{},valueNamesInsensitive:{}},n.needRenderIcons=!0,n.skippedPages=[],n.skeletonComponentName="sv-skeleton",n.taskManager=new Mu,n.questionErrorComponent="sv-question-error",n.onBeforeRunConstructor();var o=function(a){return"<h3>"+a+"</h3>"};n.createHtmlLocString("completedHtml","completingSurvey",o),n.createHtmlLocString("completedBeforeHtml","completingSurveyBefore",o,"completed-before"),n.createHtmlLocString("loadingHtml","loadingSurvey",o,"loading"),n.createLocalizableString("emptySurveyText",n,!0,"emptySurvey"),n.createLocalizableString("logo",n,!1),n.createLocalizableString("startSurveyText",n,!1,!0),n.createLocalizableString("pagePrevText",n,!1,!0),n.createLocalizableString("pageNextText",n,!1,!0),n.createLocalizableString("completeText",n,!1,!0),n.createLocalizableString("previewText",n,!1,!0),n.createLocalizableString("editText",n,!1,!0),n.createLocalizableString("questionTitleTemplate",n,!0),n.timerModelValue=new xo(n),n.timerModelValue.onTimer=function(a){n.doTimer(a)},n.createNewArray("pages",function(a){n.doOnPageAdded(a)},function(a){n.doOnPageRemoved(a)}),n.createNewArray("triggers",function(a){a.setOwner(n)}),n.createNewArray("calculatedValues",function(a){a.setOwner(n)}),n.createNewArray("completedHtmlOnCondition",function(a){a.locOwner=n}),n.createNewArray("navigateToUrlOnCondition",function(a){a.locOwner=n}),n.registerPropertyChangedHandlers(["locale"],function(){n.onSurveyLocaleChanged()}),n.registerPropertyChangedHandlers(["firstPageIsStarted"],function(){n.onFirstPageIsStartedChanged()}),n.registerPropertyChangedHandlers(["mode"],function(){n.onModeChanged()}),n.registerPropertyChangedHandlers(["progressBarType"],function(){n.updateProgressText()}),n.registerPropertyChangedHandlers(["questionStartIndex","requiredText","questionTitlePattern"],function(){n.resetVisibleIndexes()}),n.registerPropertyChangedHandlers(["isLoading","isCompleted","isCompletedBefore","mode","isStartedState","currentPage","isShowingPreview"],function(){n.updateState()}),n.registerPropertyChangedHandlers(["state","currentPage","showPreviewBeforeComplete"],function(){n.onStateAndCurrentPageChanged()}),n.registerPropertyChangedHandlers(["logo","logoPosition"],function(){n.updateHasLogo()}),n.registerPropertyChangedHandlers(["backgroundImage"],function(){n.updateRenderBackgroundImage()}),n.registerPropertyChangedHandlers(["renderBackgroundImage","backgroundOpacity","backgroundImageFit","fitToContainer","backgroundImageAttachment"],function(){n.updateBackgroundImageStyle()}),n.registerPropertyChangedHandlers(["showPrevButton","showCompleteButton"],function(){n.updateButtonsVisibility()}),n.onGetQuestionNo.onCallbacksChanged=function(){n.resetVisibleIndexes()},n.onProgressText.onCallbacksChanged=function(){n.updateProgressText()},n.onTextMarkdown.onCallbacksChanged=function(){n.locStrsChanged()},n.onProcessHtml.onCallbacksChanged=function(){n.locStrsChanged()},n.onGetQuestionTitle.onCallbacksChanged=function(){n.locStrsChanged()},n.onUpdatePageCssClasses.onCallbacksChanged=function(){n.currentPage&&n.currentPage.updateElementCss()},n.onUpdatePanelCssClasses.onCallbacksChanged=function(){n.currentPage&&n.currentPage.updateElementCss()},n.onUpdateQuestionCssClasses.onCallbacksChanged=function(){n.currentPage&&n.currentPage.updateElementCss()},n.onShowingChoiceItem.onCallbacksChanged=function(){n.rebuildQuestionChoices()},n.navigationBarValue=n.createNavigationBar(),n.navigationBar.locOwner=n,n.onBeforeCreating(),e&&((typeof e=="string"||e instanceof String)&&(e=JSON.parse(e)),e&&e.clientId&&(n.clientId=e.clientId),n.fromJSON(e),n.surveyId&&n.loadSurveyFromService(n.surveyId,n.clientId)),n.onCreating(),r&&n.render(r),n.updateCss(),n.setCalculatedWidthModeUpdater(),n.notifier=new Oo(n.css.saveData),n.notifier.addAction(n.createTryAgainAction(),"error"),n.onPopupVisibleChanged.add(function(a,l){l.visible?n.onScrollCallback=function(){l.popup.hide()}:n.onScrollCallback=void 0}),n.progressBarValue=new Do(n),n.layoutElements.push({id:"timerpanel",template:"survey-timerpanel",component:"sv-timerpanel",data:n.timerModel}),n.layoutElements.push({id:"progress-buttons",component:"sv-progress-buttons",data:n.progressBar,processResponsiveness:function(a){return n.progressBar.processResponsiveness&&n.progressBar.processResponsiveness(a)}}),n.layoutElements.push({id:"progress-questions",component:"sv-progress-questions",data:n}),n.layoutElements.push({id:"progress-pages",component:"sv-progress-pages",data:n}),n.layoutElements.push({id:"progress-correctquestions",component:"sv-progress-correctquestions",data:n}),n.layoutElements.push({id:"progress-requiredquestions",component:"sv-progress-requiredquestions",data:n});var s=new rt(n);return n.addLayoutElement({id:"toc-navigation",component:"sv-navigation-toc",data:s,processResponsiveness:function(a){return s.updateStickyTOCSize(n.rootElement)}}),n.layoutElements.push({id:"buttons-navigation",component:"sv-action-bar",data:n.navigationBar}),n.locTitle.onStringChanged.add(function(){return n.titleIsEmpty=n.locTitle.isEmpty}),n}return Object.defineProperty(t.prototype,"platformName",{get:function(){return t.platform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"commentSuffix",{get:function(){return b.commentSuffix},set:function(e){b.commentSuffix=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"commentPrefix",{get:function(){return this.commentSuffix},set:function(e){this.commentSuffix=e},enumerable:!1,configurable:!0}),t.prototype.processClosedPopup=function(e,r){throw new Error("Method not implemented.")},t.prototype.createTryAgainAction=function(){var e=this;return{id:"save-again",title:this.getLocalizationString("saveAgainButton"),action:function(){e.isCompleted?e.saveDataOnComplete():e.doComplete()}}},t.prototype.createHtmlLocString=function(e,r,n,o){var s=this,a=this.createLocalizableString(e,this,!1,r);a.onGetLocalizationTextCallback=n,o&&(a.onGetTextCallback=function(l){return s.processHtml(l,o)})},t.prototype.getType=function(){return"survey"},t.prototype.onPropertyValueChanged=function(e,r,n){e==="questionsOnPageMode"&&this.onQuestionsOnPageModeChanged(r)},Object.defineProperty(t.prototype,"pages",{get:function(){return this.getPropertyValue("pages")},enumerable:!1,configurable:!0}),t.prototype.render=function(e){this.renderCallback&&this.renderCallback()},t.prototype.updateSurvey=function(e,r){var n=function(){if(s=="model"||s=="children")return"continue";if(s.indexOf("on")==0&&o[s]&&o[s].add){var a=e[s],l=function(u,d){a(u,d)};o[s].add(l)}else o[s]=e[s]},o=this;for(var s in e)n();e&&e.data&&this.onValueChanged.add(function(a,l){e.data[l.name]=l.value})},t.prototype.getCss=function(){return this.css},t.prototype.updateCompletedPageCss=function(){this.containerCss=this.css.container,this.completedCss=new O().append(this.css.body).append(this.css.completedPage).toString(),this.completedBeforeCss=new O().append(this.css.body).append(this.css.completedBeforePage).toString(),this.loadingBodyCss=new O().append(this.css.body).append(this.css.bodyLoading).toString()},t.prototype.updateCss=function(){this.rootCss=this.getRootCss(),this.updateNavigationCss(),this.updateCompletedPageCss(),this.updateWrapperFormCss()},Object.defineProperty(t.prototype,"css",{get:function(){return this.cssValue||(this.cssValue={},this.copyCssClasses(this.cssValue,oe.getCss())),this.cssValue},set:function(e){this.setCss(e)},enumerable:!1,configurable:!0}),t.prototype.setCss=function(e,r){r===void 0&&(r=!0),r?this.mergeValues(e,this.css):this.cssValue=e,this.updateCss(),this.updateElementCss(!1)},Object.defineProperty(t.prototype,"cssTitle",{get:function(){return this.css.title},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssNavigationComplete",{get:function(){return this.getNavigationCss(this.cssSurveyNavigationButton,this.css.navigation.complete)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssNavigationPreview",{get:function(){return this.getNavigationCss(this.cssSurveyNavigationButton,this.css.navigation.preview)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssNavigationEdit",{get:function(){return this.getNavigationCss(this.css.navigationButton,this.css.navigation.edit)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssNavigationPrev",{get:function(){return this.getNavigationCss(this.cssSurveyNavigationButton,this.css.navigation.prev)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssNavigationStart",{get:function(){return this.getNavigationCss(this.cssSurveyNavigationButton,this.css.navigation.start)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssNavigationNext",{get:function(){return this.getNavigationCss(this.cssSurveyNavigationButton,this.css.navigation.next)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssSurveyNavigationButton",{get:function(){return new O().append(this.css.navigationButton).append(this.css.bodyNavigationButton).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bodyCss",{get:function(){return new O().append(this.css.body).append(this.css.bodyWithTimer,this.showTimerPanel!="none"&&this.state==="running").append(this.css.body+"--"+this.calculatedWidthMode).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bodyContainerCss",{get:function(){return this.css.bodyContainer},enumerable:!1,configurable:!0}),t.prototype.insertAdvancedHeader=function(e){e.survey=this,this.layoutElements.push({id:"advanced-header",container:"header",component:"sv-header",index:-100,data:e,processResponsiveness:function(r){return e.processResponsiveness(r)}})},t.prototype.getNavigationCss=function(e,r){return new O().append(e).append(r).toString()},Object.defineProperty(t.prototype,"lazyRendering",{get:function(){return this.lazyRenderingValue===!0},set:function(e){if(this.lazyRendering!==e){this.lazyRenderingValue=e;var r=this.currentPage;r&&r.updateRows()}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLazyRendering",{get:function(){return this.lazyRendering||b.lazyRender.enabled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lazyRenderingFirstBatchSize",{get:function(){return this.lazyRenderingFirstBatchSizeValue||b.lazyRender.firstBatchSize},set:function(e){this.lazyRenderingFirstBatchSizeValue=e},enumerable:!1,configurable:!0}),t.prototype.updateLazyRenderingRowsOnRemovingElements=function(){if(!!this.isLazyRendering){var e=this.currentPage;e&&jl(e.id)}},Object.defineProperty(t.prototype,"triggers",{get:function(){return this.getPropertyValue("triggers")},set:function(e){this.setPropertyValue("triggers",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"calculatedValues",{get:function(){return this.getPropertyValue("calculatedValues")},set:function(e){this.setPropertyValue("calculatedValues",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"surveyId",{get:function(){return this.getPropertyValue("surveyId","")},set:function(e){this.setPropertyValue("surveyId",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"surveyPostId",{get:function(){return this.getPropertyValue("surveyPostId","")},set:function(e){this.setPropertyValue("surveyPostId",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clientId",{get:function(){return this.getPropertyValue("clientId","")},set:function(e){this.setPropertyValue("clientId",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cookieName",{get:function(){return this.getPropertyValue("cookieName","")},set:function(e){this.setPropertyValue("cookieName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sendResultOnPageNext",{get:function(){return this.getPropertyValue("sendResultOnPageNext")},set:function(e){this.setPropertyValue("sendResultOnPageNext",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"surveyShowDataSaving",{get:function(){return this.getPropertyValue("surveyShowDataSaving")},set:function(e){this.setPropertyValue("surveyShowDataSaving",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"focusFirstQuestionAutomatic",{get:function(){return this.getPropertyValue("focusFirstQuestionAutomatic")},set:function(e){this.setPropertyValue("focusFirstQuestionAutomatic",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"focusOnFirstError",{get:function(){return this.getPropertyValue("focusOnFirstError")},set:function(e){this.setPropertyValue("focusOnFirstError",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showNavigationButtons",{get:function(){return this.getPropertyValue("showNavigationButtons")},set:function(e){(e===!0||e===void 0)&&(e="bottom"),e===!1&&(e="none"),this.setPropertyValue("showNavigationButtons",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showPrevButton",{get:function(){return this.getPropertyValue("showPrevButton")},set:function(e){this.setPropertyValue("showPrevButton",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showCompleteButton",{get:function(){return this.getPropertyValue("showCompleteButton",!0)},set:function(e){this.setPropertyValue("showCompleteButton",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showTOC",{get:function(){return this.getPropertyValue("showTOC")},set:function(e){this.setPropertyValue("showTOC",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tocLocation",{get:function(){return this.getPropertyValue("tocLocation")},set:function(e){this.setPropertyValue("tocLocation",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showTitle",{get:function(){return this.getPropertyValue("showTitle")},set:function(e){this.setPropertyValue("showTitle",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showPageTitles",{get:function(){return this.getPropertyValue("showPageTitles")},set:function(e){this.setPropertyValue("showPageTitles",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showCompletedPage",{get:function(){return this.getPropertyValue("showCompletedPage")},set:function(e){this.setPropertyValue("showCompletedPage",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"navigateToUrl",{get:function(){return this.getPropertyValue("navigateToUrl")},set:function(e){this.setPropertyValue("navigateToUrl",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"navigateToUrlOnCondition",{get:function(){return this.getPropertyValue("navigateToUrlOnCondition")},set:function(e){this.setPropertyValue("navigateToUrlOnCondition",e)},enumerable:!1,configurable:!0}),t.prototype.getNavigateToUrl=function(){var e=this.getExpressionItemOnRunCondition(this.navigateToUrlOnCondition),r=e?e.url:this.navigateToUrl;return r&&(r=this.processText(r,!1)),r},t.prototype.navigateTo=function(){var e=this.getNavigateToUrl(),r={url:e,allow:!0};this.onNavigateToUrl.fire(this,r),!(!r.url||!r.allow)&&Fl(r.url)},Object.defineProperty(t.prototype,"requiredText",{get:function(){return this.getPropertyValue("requiredText","*")},set:function(e){this.setPropertyValue("requiredText",e)},enumerable:!1,configurable:!0}),t.prototype.beforeSettingQuestionErrors=function(e,r){this.makeRequiredErrorsInvisible(r),this.onSettingQuestionErrors.fire(this,{question:e,errors:r})},t.prototype.beforeSettingPanelErrors=function(e,r){this.makeRequiredErrorsInvisible(r)},t.prototype.makeRequiredErrorsInvisible=function(e){if(!!this.hideRequiredErrors)for(var r=0;r<e.length;r++){var n=e[r].getErrorType();(n=="required"||n=="requireoneanswer")&&(e[r].visible=!1)}},Object.defineProperty(t.prototype,"questionStartIndex",{get:function(){return this.getPropertyValue("questionStartIndex","")},set:function(e){this.setPropertyValue("questionStartIndex",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storeOthersAsComment",{get:function(){return this.getPropertyValue("storeOthersAsComment")},set:function(e){this.setPropertyValue("storeOthersAsComment",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxTextLength",{get:function(){return this.getPropertyValue("maxTextLength")},set:function(e){this.setPropertyValue("maxTextLength",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOthersLength",{get:function(){return this.getPropertyValue("maxOthersLength")},set:function(e){this.setPropertyValue("maxOthersLength",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"goNextPageAutomatic",{get:function(){return this.getPropertyValue("goNextPageAutomatic")},set:function(e){this.setPropertyValue("goNextPageAutomatic",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowCompleteSurveyAutomatic",{get:function(){return this.getPropertyValue("allowCompleteSurveyAutomatic")},set:function(e){this.setPropertyValue("allowCompleteSurveyAutomatic",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"checkErrorsMode",{get:function(){return this.getPropertyValue("checkErrorsMode")},set:function(e){this.setPropertyValue("checkErrorsMode",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"validateVisitedEmptyFields",{get:function(){return this.getPropertyValue("validateVisitedEmptyFields")},set:function(e){this.setPropertyValue("validateVisitedEmptyFields",e)},enumerable:!1,configurable:!0}),t.prototype.getValidateVisitedEmptyFields=function(){return this.validateVisitedEmptyFields&&this.isValidateOnValueChange},Object.defineProperty(t.prototype,"autoGrowComment",{get:function(){return this.getPropertyValue("autoGrowComment")},set:function(e){this.setPropertyValue("autoGrowComment",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowResizeComment",{get:function(){return this.getPropertyValue("allowResizeComment")},set:function(e){this.setPropertyValue("allowResizeComment",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"commentAreaRows",{get:function(){return this.getPropertyValue("commentAreaRows")},set:function(e){this.setPropertyValue("commentAreaRows",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textUpdateMode",{get:function(){return this.getPropertyValue("textUpdateMode")},set:function(e){this.setPropertyValue("textUpdateMode",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clearInvisibleValues",{get:function(){return this.getPropertyValue("clearInvisibleValues")},set:function(e){e===!0&&(e="onComplete"),e===!1&&(e="none"),this.setPropertyValue("clearInvisibleValues",e)},enumerable:!1,configurable:!0}),t.prototype.clearIncorrectValues=function(e){e===void 0&&(e=!1);for(var r=0;r<this.pages.length;r++)this.pages[r].clearIncorrectValues();if(!!e){var n=this.data,o=!1;for(var s in n)if(!this.getQuestionByValueName(s)&&!(this.iscorrectValueWithPostPrefix(s,b.commentSuffix)||this.iscorrectValueWithPostPrefix(s,b.matrix.totalsSuffix))){var a=this.getCalculatedValueByName(s);!!a&&a.includeIntoResult||(o=!0,delete n[s])}o&&(this.data=n)}},t.prototype.iscorrectValueWithPostPrefix=function(e,r){return e.indexOf(r)!==e.length-r.length?!1:!!this.getQuestionByValueName(e.substring(0,e.indexOf(r)))},Object.defineProperty(t.prototype,"keepIncorrectValues",{get:function(){return this.getPropertyValue("keepIncorrectValues")},set:function(e){this.setPropertyValue("keepIncorrectValues",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locale",{get:function(){return this.getPropertyValueWithoutDefault("locale")||z.currentLocale},set:function(e){e===z.defaultLocale&&!z.currentLocale&&(e=""),this.setPropertyValue("locale",e)},enumerable:!1,configurable:!0}),t.prototype.onSurveyLocaleChanged=function(){this.notifyElementsOnAnyValueOrVariableChanged("locale"),this.localeChanged(),this.onLocaleChangedEvent.fire(this,this.locale)},Object.defineProperty(t.prototype,"localeDir",{get:function(){return z.localeDirections[this.locale]},enumerable:!1,configurable:!0}),t.prototype.getUsedLocales=function(){var e=new Array;this.addUsedLocales(e);var r=e.indexOf("default");if(r>-1){var n=z.defaultLocale,o=e.indexOf(n);o>-1&&e.splice(o,1),r=e.indexOf("default"),e[r]=n}return e},t.prototype.localeChanged=function(){for(var e=0;e<this.pages.length;e++)this.pages[e].localeChanged()},t.prototype.getLocale=function(){return this.locale},t.prototype.locStrsChanged=function(){if(!this.isClearingUnsedValues&&(i.prototype.locStrsChanged.call(this),!!this.currentPage)){if(this.isDesignMode)this.pages.forEach(function(o){return o.locStrsChanged()});else{var e=this.activePage;e&&e.locStrsChanged();for(var r=this.visiblePages,n=0;n<r.length;n++)r[n].navigationLocStrChanged()}this.isShowStartingPage||this.updateProgressText(),this.navigationBar.locStrsChanged()}},t.prototype.getMarkdownHtml=function(e,r){return this.getSurveyMarkdownHtml(this,e,r)},t.prototype.getRenderer=function(e){return this.getRendererForString(this,e)},t.prototype.getRendererContext=function(e){return this.getRendererContextForString(this,e)},t.prototype.getRendererForString=function(e,r){var n=this.getBuiltInRendererForString(e,r);n=this.elementWrapperComponentNameCore(n,e,"string",r);var o={element:e,name:r,renderAs:n};return this.onTextRenderAs.fire(this,o),o.renderAs},t.prototype.getRendererContextForString=function(e,r){return this.elementWrapperDataCore(r,e,"string")},t.prototype.getExpressionDisplayValue=function(e,r,n){var o={question:e,value:r,displayValue:n};return this.onGetExpressionDisplayValue.fire(this,o),o.displayValue},t.prototype.getBuiltInRendererForString=function(e,r){if(this.isDesignMode)return we.editableRenderer},t.prototype.getProcessedText=function(e){return this.processText(e,!0)},t.prototype.getLocString=function(e){return this.getLocalizationString(e)},t.prototype.getErrorCustomText=function(e,r){return this.getSurveyErrorCustomText(this,e,r)},t.prototype.getSurveyErrorCustomText=function(e,r,n){var o={text:r,name:n.getErrorType(),obj:e,error:n};return this.onErrorCustomText.fire(this,o),o.text},t.prototype.getQuestionDisplayValue=function(e,r){var n={question:e,displayValue:r};return this.onGetQuestionDisplayValue.fire(this,n),n.displayValue},Object.defineProperty(t.prototype,"emptySurveyText",{get:function(){return this.getLocalizableStringText("emptySurveyText")},set:function(e){this.setLocalizableStringText("emptySurveyText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logo",{get:function(){return this.getLocalizableStringText("logo")},set:function(e){this.setLocalizableStringText("logo",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locLogo",{get:function(){return this.getLocalizableString("logo")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logoWidth",{get:function(){return this.getPropertyValue("logoWidth")},set:function(e){this.setPropertyValue("logoWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedLogoWidth",{get:function(){return this.logoWidth?Ze(this.logoWidth):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedStyleLogoWidth",{get:function(){return this.logoWidth?$t(this.logoWidth):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logoHeight",{get:function(){return this.getPropertyValue("logoHeight")},set:function(e){this.setPropertyValue("logoHeight",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedLogoHeight",{get:function(){return this.logoHeight?Ze(this.logoHeight):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedStyleLogoHeight",{get:function(){return this.logoHeight?$t(this.logoHeight):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logoPosition",{get:function(){return this.getPropertyValue("logoPosition")},set:function(e){this.setPropertyValue("logoPosition",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasLogo",{get:function(){return this.getPropertyValue("hasLogo",!1)},enumerable:!1,configurable:!0}),t.prototype.updateHasLogo=function(){this.setPropertyValue("hasLogo",!!this.logo&&this.logoPosition!=="none")},Object.defineProperty(t.prototype,"isLogoBefore",{get:function(){return this.isDesignMode?!1:this.renderedHasLogo&&(this.logoPosition==="left"||this.logoPosition==="top")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLogoAfter",{get:function(){return this.isDesignMode?this.renderedHasLogo:this.renderedHasLogo&&(this.logoPosition==="right"||this.logoPosition==="bottom")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logoClassNames",{get:function(){var e={left:"sv-logo--left",right:"sv-logo--right",top:"sv-logo--top",bottom:"sv-logo--bottom"};return new O().append(this.css.logo).append(e[this.logoPosition]).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedHasTitle",{get:function(){return this.isDesignMode?this.isPropertyVisible("title"):!this.titleIsEmpty&&this.showTitle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedHasDescription",{get:function(){return this.isDesignMode?this.isPropertyVisible("description"):!!this.hasDescription},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitle",{get:function(){return this.renderedHasTitle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedHasLogo",{get:function(){return this.isDesignMode?this.isPropertyVisible("logo"):this.hasLogo},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedHasHeader",{get:function(){return this.renderedHasTitle||this.renderedHasLogo},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logoFit",{get:function(){return this.getPropertyValue("logoFit")},set:function(e){this.setPropertyValue("logoFit",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"themeVariables",{get:function(){return Object.assign({},this.cssVariables)},enumerable:!1,configurable:!0}),t.prototype.setIsMobile=function(e){e===void 0&&(e=!0),this._isMobile!==e&&(this._isMobile=e,this.updateCss(),this.getAllQuestions().forEach(function(r){return r.setIsMobile(e)}))},Object.defineProperty(t.prototype,"isMobile",{get:function(){return this._isMobile&&!this.isDesignMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCompact",{get:function(){return this._isCompact},set:function(e){e!==this._isCompact&&(this._isCompact=e,this.updateElementCss(),this.triggerResponsiveness(!0))},enumerable:!1,configurable:!0}),t.prototype.isLogoImageChoosen=function(){return this.locLogo.renderedHtml},Object.defineProperty(t.prototype,"titleMaxWidth",{get:function(){if(!(Ll()||this.isMobile)&&!this.isValueEmpty(this.isLogoImageChoosen())&&!b.supportCreatorV2){var e=this.logoWidth;if(this.logoPosition==="left"||this.logoPosition==="right")return"calc(100% - 5px - 2em - "+e+")"}return""},enumerable:!1,configurable:!0}),t.prototype.updateRenderBackgroundImage=function(){var e=this.backgroundImage;this.renderBackgroundImage=_r(e)},Object.defineProperty(t.prototype,"backgroundOpacity",{get:function(){return this.getPropertyValue("backgroundOpacity")},set:function(e){this.setPropertyValue("backgroundOpacity",e)},enumerable:!1,configurable:!0}),t.prototype.updateBackgroundImageStyle=function(){this.backgroundImageStyle={opacity:this.backgroundOpacity,backgroundImage:this.renderBackgroundImage,backgroundSize:this.backgroundImageFit,backgroundAttachment:this.fitToContainer?void 0:this.backgroundImageAttachment}},t.prototype.updateWrapperFormCss=function(){this.wrapperFormCss=new O().append(this.css.rootWrapper).append(this.css.rootWrapperHasImage,!!this.backgroundImage).append(this.css.rootWrapperFixed,!!this.backgroundImage&&this.backgroundImageAttachment==="fixed").toString()},Object.defineProperty(t.prototype,"completedHtml",{get:function(){return this.getLocalizableStringText("completedHtml")},set:function(e){this.setLocalizableStringText("completedHtml",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locCompletedHtml",{get:function(){return this.getLocalizableString("completedHtml")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"completedHtmlOnCondition",{get:function(){return this.getPropertyValue("completedHtmlOnCondition")},set:function(e){this.setPropertyValue("completedHtmlOnCondition",e)},enumerable:!1,configurable:!0}),t.prototype.runExpression=function(e){if(!e)return null;var r=this.getFilteredValues(),n=this.getFilteredProperties();return new $e(e).run(r,n)},t.prototype.runCondition=function(e){if(!e)return!1;var r=this.getFilteredValues(),n=this.getFilteredProperties();return new ve(e).run(r,n)},t.prototype.runTriggers=function(){this.checkTriggers(this.getFilteredValues(),!1)},Object.defineProperty(t.prototype,"renderedCompletedHtml",{get:function(){var e=this.getExpressionItemOnRunCondition(this.completedHtmlOnCondition);return e?e.html:this.completedHtml},enumerable:!1,configurable:!0}),t.prototype.getExpressionItemOnRunCondition=function(e){if(e.length==0)return null;for(var r=this.getFilteredValues(),n=this.getFilteredProperties(),o=0;o<e.length;o++)if(e[o].runCondition(r,n))return e[o];return null},Object.defineProperty(t.prototype,"completedBeforeHtml",{get:function(){return this.getLocalizableStringText("completedBeforeHtml")},set:function(e){this.setLocalizableStringText("completedBeforeHtml",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locCompletedBeforeHtml",{get:function(){return this.getLocalizableString("completedBeforeHtml")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loadingHtml",{get:function(){return this.getLocalizableStringText("loadingHtml")},set:function(e){this.setLocalizableStringText("loadingHtml",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locLoadingHtml",{get:function(){return this.getLocalizableString("loadingHtml")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultLoadingHtml",{get:function(){return"<h3>"+this.getLocalizationString("loadingSurvey")+"</h3>"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"navigationBar",{get:function(){return this.navigationBarValue},enumerable:!1,configurable:!0}),t.prototype.addNavigationItem=function(e){return e.component||(e.component="sv-nav-btn"),e.innerCss||(e.innerCss=this.cssSurveyNavigationButton),this.navigationBar.addAction(e)},Object.defineProperty(t.prototype,"startSurveyText",{get:function(){return this.getLocalizableStringText("startSurveyText")},set:function(e){this.setLocalizableStringText("startSurveyText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locStartSurveyText",{get:function(){return this.getLocalizableString("startSurveyText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pagePrevText",{get:function(){return this.getLocalizableStringText("pagePrevText")},set:function(e){this.setLocalizableStringText("pagePrevText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPagePrevText",{get:function(){return this.getLocalizableString("pagePrevText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageNextText",{get:function(){return this.getLocalizableStringText("pageNextText")},set:function(e){this.setLocalizableStringText("pageNextText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPageNextText",{get:function(){return this.getLocalizableString("pageNextText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"completeText",{get:function(){return this.getLocalizableStringText("completeText")},set:function(e){this.setLocalizableStringText("completeText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locCompleteText",{get:function(){return this.getLocalizableString("completeText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previewText",{get:function(){return this.getLocalizableStringText("previewText")},set:function(e){this.setLocalizableStringText("previewText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPreviewText",{get:function(){return this.getLocalizableString("previewText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"editText",{get:function(){return this.getLocalizableStringText("editText")},set:function(e){this.setLocalizableStringText("editText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locEditText",{get:function(){return this.getLocalizableString("editText")},enumerable:!1,configurable:!0}),t.prototype.getElementTitleTagName=function(e,r){if(this.onGetTitleTagName.isEmpty)return r;var n={element:e,tagName:r};return this.onGetTitleTagName.fire(this,n),n.tagName},Object.defineProperty(t.prototype,"questionTitlePattern",{get:function(){return this.getPropertyValue("questionTitlePattern","numTitleRequire")},set:function(e){e!=="numRequireTitle"&&e!=="requireNumTitle"&&e!="numTitle"&&(e="numTitleRequire"),this.setPropertyValue("questionTitlePattern",e)},enumerable:!1,configurable:!0}),t.prototype.getQuestionTitlePatternOptions=function(){var e=new Array,r=this.getLocalizationString("questionTitlePatternText"),n=this.questionStartIndex?this.questionStartIndex:"1.";return e.push({value:"numTitleRequire",text:n+" "+r+" "+this.requiredText}),e.push({value:"numRequireTitle",text:n+" "+this.requiredText+" "+r}),e.push({value:"numTitle",text:n+" "+r}),e},Object.defineProperty(t.prototype,"questionTitleTemplate",{get:function(){return this.getLocalizableStringText("questionTitleTemplate")},set:function(e){this.setLocalizableStringText("questionTitleTemplate",e),this.questionTitlePattern=this.getNewTitlePattern(e),this.questionStartIndex=this.getNewQuestionTitleElement(e,"no",this.questionStartIndex,"1"),this.requiredText=this.getNewQuestionTitleElement(e,"require",this.requiredText,"*")},enumerable:!1,configurable:!0}),t.prototype.getNewTitlePattern=function(e){if(e){for(var r=[];e.indexOf("{")>-1;){e=e.substring(e.indexOf("{")+1);var n=e.indexOf("}");if(n<0)break;r.push(e.substring(0,n)),e=e.substring(n+1)}if(r.length>1){if(r[0]=="require")return"requireNumTitle";if(r[1]=="require"&&r.length==3)return"numRequireTitle";if(r.indexOf("require")<0)return"numTitle"}if(r.length==1&&r[0]=="title")return"numTitle"}return"numTitleRequire"},t.prototype.getNewQuestionTitleElement=function(e,r,n,o){if(r="{"+r+"}",!e||e.indexOf(r)<0)return n;for(var s=e.indexOf(r),a="",l="",u=s-1;u>=0&&e[u]!="}";u--);for(u<s-1&&(a=e.substring(u+1,s)),s+=r.length,u=s;u<e.length&&e[u]!="{";u++);for(u>s&&(l=e.substring(s,u)),u=0;u<a.length&&a.charCodeAt(u)<33;)u++;for(a=a.substring(u),u=l.length-1;u>=0&&l.charCodeAt(u)<33;)u--;if(l=l.substring(0,u+1),!a&&!l)return n;var d=n||o;return a+d+l},Object.defineProperty(t.prototype,"locQuestionTitleTemplate",{get:function(){return this.getLocalizableString("questionTitleTemplate")},enumerable:!1,configurable:!0}),t.prototype.getUpdatedQuestionTitle=function(e,r){if(this.onGetQuestionTitle.isEmpty)return r;var n={question:e,title:r};return this.onGetQuestionTitle.fire(this,n),n.title},t.prototype.getUpdatedQuestionNo=function(e,r){if(this.onGetQuestionNo.isEmpty)return r;var n={question:e,no:r};return this.onGetQuestionNo.fire(this,n),n.no},Object.defineProperty(t.prototype,"showPageNumbers",{get:function(){return this.getPropertyValue("showPageNumbers")},set:function(e){e!==this.showPageNumbers&&(this.setPropertyValue("showPageNumbers",e),this.updateVisibleIndexes())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showQuestionNumbers",{get:function(){return this.getPropertyValue("showQuestionNumbers")},set:function(e){e===!0&&(e="on"),e===!1&&(e="off"),e=e.toLowerCase(),e=e==="onpage"?"onPage":e,e!==this.showQuestionNumbers&&(this.setPropertyValue("showQuestionNumbers",e),this.updateVisibleIndexes())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progressBar",{get:function(){return this.progressBarValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showProgressBar",{get:function(){return this.getPropertyValue("showProgressBar")},set:function(e){this.setPropertyValue("showProgressBar",e.toLowerCase())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progressBarType",{get:function(){return this.getPropertyValue("progressBarType")},set:function(e){e==="correctquestion"&&(e="correctQuestion"),e==="requiredquestion"&&(e="requiredQuestion"),this.setPropertyValue("progressBarType",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progressBarComponentName",{get:function(){var e=this.progressBarType;return!b.legacyProgressBarView&&oe.currentType==="defaultV2"&&ke(e,"pages")&&(e="buttons"),"progress-"+e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowProgressBarOnTop",{get:function(){return this.canShowProresBar()?["auto","aboveheader","belowheader","topbottom","top","both"].indexOf(this.showProgressBar)!==-1:!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowProgressBarOnBottom",{get:function(){return this.canShowProresBar()?this.showProgressBar==="bottom"||this.showProgressBar==="both"||this.showProgressBar==="topbottom":!1},enumerable:!1,configurable:!0}),t.prototype.getProgressTypeComponent=function(){return"sv-progress-"+this.progressBarType.toLowerCase()},t.prototype.getProgressCssClasses=function(e){return e===void 0&&(e=""),new O().append(this.css.progress).append(this.css.progressTop,this.isShowProgressBarOnTop&&(!e||e=="header")).append(this.css.progressBottom,this.isShowProgressBarOnBottom&&(!e||e=="footer")).toString()},t.prototype.canShowProresBar=function(){return!this.isShowingPreview||this.showPreviewBeforeComplete!="showAllQuestions"},Object.defineProperty(t.prototype,"processedTitle",{get:function(){return this.locTitle.renderedHtml},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questionTitleLocation",{get:function(){return this.getPropertyValue("questionTitleLocation")},set:function(e){this.setPropertyValue("questionTitleLocation",e.toLowerCase()),this.isLoadingFromJson||this.updateElementCss(!0)},enumerable:!1,configurable:!0}),t.prototype.updateElementCss=function(e){this.startedPage&&this.startedPage.updateElementCss(e);for(var r=this.visiblePages,n=0;n<r.length;n++)r[n].updateElementCss(e);this.updateCss()},Object.defineProperty(t.prototype,"questionErrorLocation",{get:function(){return this.getPropertyValue("questionErrorLocation")},set:function(e){this.setPropertyValue("questionErrorLocation",e.toLowerCase())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questionDescriptionLocation",{get:function(){return this.getPropertyValue("questionDescriptionLocation")},set:function(e){this.setPropertyValue("questionDescriptionLocation",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mode",{get:function(){return this.getPropertyValue("mode")},set:function(e){e=e.toLowerCase(),e!=this.mode&&(e!="edit"&&e!="display"||this.setPropertyValue("mode",e))},enumerable:!1,configurable:!0}),t.prototype.onModeChanged=function(){for(var e=0;e<this.pages.length;e++){var r=this.pages[e];r.setPropertyValue("isReadOnly",r.isReadOnly)}this.updateButtonsVisibility(),this.updateCss()},Object.defineProperty(t.prototype,"data",{get:function(){for(var e={},r=this.getValuesKeys(),n=0;n<r.length;n++){var o=r[n],s=this.getDataValueCore(this.valuesHash,o);s!==void 0&&(e[o]=s)}return this.setCalculatedValuesIntoResult(e),e},set:function(e){this.valuesHash={},this.setDataCore(e,!e)},enumerable:!1,configurable:!0}),t.prototype.mergeData=function(e){if(!!e){var r=this.data;this.mergeValues(e,r),this.setDataCore(r)}},t.prototype.setDataCore=function(e,r){if(r===void 0&&(r=!1),r&&(this.valuesHash={}),e)for(var n in e){var o=typeof n=="string"?n.trim():n;this.setDataValueCore(this.valuesHash,o,e[n])}this.updateAllQuestionsValue(r),this.notifyAllQuestionsOnValueChanged(),this.notifyElementsOnAnyValueOrVariableChanged(""),this.runConditions(),this.updateAllQuestionsValue(r)},Object.defineProperty(t.prototype,"isSurvey",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getData=function(e){var r=e||{includePages:!1,includePanels:!1};return!r.includePages&&!r.includePanels?this.data:this.getStructuredData(!!r.includePages,r.includePanels?-1:r.includePages?1:0)},t.prototype.getStructuredData=function(e,r){if(e===void 0&&(e=!0),r===void 0&&(r=-1),r===0)return this.data;var n={};return this.pages.forEach(function(o){if(e){var s={};o.collectValues(s,r-1)&&(n[o.name]=s)}else o.collectValues(n,r)}),n},t.prototype.setStructuredData=function(e,r){if(r===void 0&&(r=!1),!!e){var n={};for(var o in e){var s=this.getQuestionByValueName(o);if(s)n[o]=e[o];else{var a=this.getPageByName(o);a||(a=this.getPanelByName(o)),a&&this.collectDataFromPanel(a,n,e[o])}}r?this.mergeData(n):this.data=n}},t.prototype.collectDataFromPanel=function(e,r,n){for(var o in n){var s=e.getElementByName(o);!s||(s.isPanel?this.collectDataFromPanel(s,r,n[o]):r[o]=n[o])}},Object.defineProperty(t.prototype,"editingObj",{get:function(){return this.editingObjValue},set:function(e){var r=this;if(this.editingObj!=e&&(this.unConnectEditingObj(),this.editingObjValue=e,!this.isDisposed)){if(!e)for(var n=this.getAllQuestions(),o=0;o<n.length;o++)n[o].unbindValue();this.editingObj&&(this.setDataCore({}),this.onEditingObjPropertyChanged=function(s,a){!x.hasOriginalProperty(r.editingObj,a.name)||(a.name==="locale"&&r.setDataCore({}),r.updateOnSetValue(a.name,r.editingObj[a.name],a.oldValue))},this.editingObj.onPropertyChanged.add(this.onEditingObjPropertyChanged))}},enumerable:!1,configurable:!0}),t.prototype.unConnectEditingObj=function(){!!this.editingObj&&!this.editingObj.isDisposed&&this.editingObj.onPropertyChanged.remove(this.onEditingObjPropertyChanged)},Object.defineProperty(t.prototype,"isEditingSurveyElement",{get:function(){return!!this.editingObj},enumerable:!1,configurable:!0}),t.prototype.setCalculatedValuesIntoResult=function(e){for(var r=0;r<this.calculatedValues.length;r++){var n=this.calculatedValues[r];n.includeIntoResult&&!!n.name&&this.getVariable(n.name)!==void 0&&(e[n.name]=this.getVariable(n.name))}},t.prototype.getAllValues=function(){return this.data},t.prototype.getPlainData=function(e){e||(e={includeEmpty:!0,includeQuestionTypes:!1,includeValues:!1});var r=[],n=[];if(this.getAllQuestions().forEach(function(u){var d=u.getPlainData(e);d&&(r.push(d),n.push(u.valueName||u.name))}),e.includeValues)for(var o=this.getValuesKeys(),s=0;s<o.length;s++){var a=o[s];if(n.indexOf(a)==-1){var l=this.getDataValueCore(this.valuesHash,a);l&&r.push({name:a,title:a,value:l,displayValue:l,isNode:!1,getString:function(u){return typeof u=="object"?JSON.stringify(u):u}})}}return r},t.prototype.getFilteredValues=function(){var e={};for(var r in this.variablesHash)e[r]=this.variablesHash[r];this.addCalculatedValuesIntoFilteredValues(e);for(var n=this.getValuesKeys(),o=0;o<n.length;o++){var r=n[o];e[r]=this.getDataValueCore(this.valuesHash,r)}return this.getAllQuestions().forEach(function(s){s.hasFilteredValue&&(e[s.getFilteredName()]=s.getFilteredValue())}),e},t.prototype.addCalculatedValuesIntoFilteredValues=function(e){for(var r=this.calculatedValues,n=0;n<r.length;n++)e[r[n].name]=r[n].value},t.prototype.getFilteredProperties=function(){return{survey:this}},t.prototype.getValuesKeys=function(){if(!this.editingObj)return Object.keys(this.valuesHash);for(var e=x.getPropertiesByObj(this.editingObj),r=[],n=0;n<e.length;n++)r.push(e[n].name);return r},t.prototype.getDataValueCore=function(e,r){return this.editingObj?x.getObjPropertyValue(this.editingObj,r):this.getDataFromValueHash(e,r)},t.prototype.setDataValueCore=function(e,r,n){this.editingObj?x.setObjPropertyValue(this.editingObj,r,n):this.setDataToValueHash(e,r,n)},t.prototype.deleteDataValueCore=function(e,r){this.editingObj?this.editingObj[r]=null:this.deleteDataFromValueHash(e,r)},t.prototype.getDataFromValueHash=function(e,r){return this.valueHashGetDataCallback?this.valueHashGetDataCallback(e,r):e[r]},t.prototype.setDataToValueHash=function(e,r,n){this.valueHashSetDataCallback?this.valueHashSetDataCallback(e,r,n):e[r]=n},t.prototype.deleteDataFromValueHash=function(e,r){this.valueHashDeleteDataCallback?this.valueHashDeleteDataCallback(e,r):delete e[r]},Object.defineProperty(t.prototype,"comments",{get:function(){for(var e={},r=this.getValuesKeys(),n=0;n<r.length;n++){var o=r[n];o.indexOf(this.commentSuffix)>0&&(e[o]=this.getDataValueCore(this.valuesHash,o))}return e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visiblePages",{get:function(){if(this.isDesignMode)return this.pages;for(var e=new Array,r=0;r<this.pages.length;r++)this.isPageInVisibleList(this.pages[r])&&e.push(this.pages[r]);return e},enumerable:!1,configurable:!0}),t.prototype.isPageInVisibleList=function(e){return this.isDesignMode||e.isVisible&&!e.isStartPage},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this.pages.length==0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"PageCount",{get:function(){return this.pageCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageCount",{get:function(){return this.pages.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visiblePageCount",{get:function(){return this.visiblePages.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"startedPage",{get:function(){var e=this.firstPageIsStarted&&this.pages.length>1?this.pages[0]:null;return e&&(e.onFirstRendering(),e.setWasShown(!0)),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentPage",{get:function(){return this.getPropertyValue("currentPage",null)},set:function(e){if(!this.isLoadingFromJson){var r=this.getPageByObject(e);if(!(!!e&&!r)&&!(!r&&this.isCurrentPageAvailable)){var n=this.visiblePages;if(!(r!=null&&n.indexOf(r)<0)&&r!=this.currentPage){var o=this.currentPage;!this.isShowingPreview&&!this.currentPageChanging(r,o)||(this.setPropertyValue("currentPage",r),r&&(r.onFirstRendering(),r.updateCustomWidgets(),r.setWasShown(!0)),this.locStrsChanged(),this.isShowingPreview||this.currentPageChanged(r,o))}}}},enumerable:!1,configurable:!0}),t.prototype.tryNavigateToPage=function(e){if(this.isDesignMode)return!1;var r=this.visiblePages.indexOf(e);if(r<0||r>=this.visiblePageCount||r===this.currentPageNo)return!1;if(r<this.currentPageNo||this.isValidateOnComplete)return this.currentPageNo=r,!0;for(var n=this.currentPageNo;n<r;n++){var o=this.visiblePages[n];if(!o.validate(!0,!0))return!1;o.passed=!0}return this.currentPage=e,!0},t.prototype.updateCurrentPage=function(){this.isCurrentPageAvailable||(this.currentPage=this.firstVisiblePage)},Object.defineProperty(t.prototype,"isCurrentPageAvailable",{get:function(){var e=this.currentPage;return!!e&&this.isPageInVisibleList(e)&&this.isPageExistsInSurvey(e)},enumerable:!1,configurable:!0}),t.prototype.isPageExistsInSurvey=function(e){return this.pages.indexOf(e)>-1?!0:!!this.onContainsPageCallback&&this.onContainsPageCallback(e)},Object.defineProperty(t.prototype,"activePage",{get:function(){return this.getPropertyValue("activePage")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowStartingPage",{get:function(){return this.state==="starting"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"matrixDragHandleArea",{get:function(){return this.getPropertyValue("matrixDragHandleArea","entireItem")},set:function(e){this.setPropertyValue("matrixDragHandleArea",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowingPage",{get:function(){return this.state=="running"||this.state=="preview"||this.isShowStartingPage},enumerable:!1,configurable:!0}),t.prototype.updateActivePage=function(){var e=this.isShowStartingPage?this.startedPage:this.currentPage;e!==this.activePage&&this.setPropertyValue("activePage",e)},t.prototype.onStateAndCurrentPageChanged=function(){this.updateActivePage(),this.updateButtonsVisibility()},t.prototype.getPageByObject=function(e){if(!e)return null;if(e.getType&&e.getType()=="page")return e;if(typeof e=="string"||e instanceof String)return this.getPageByName(String(e));if(!isNaN(e)){var r=Number(e),n=this.visiblePages;return e<0||e>=n.length?null:n[r]}return e},Object.defineProperty(t.prototype,"currentPageNo",{get:function(){return this.visiblePages.indexOf(this.currentPage)},set:function(e){var r=this.visiblePages;e<0||e>=r.length||(this.currentPage=r[e])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questionsOrder",{get:function(){return this.getPropertyValue("questionsOrder")},set:function(e){this.setPropertyValue("questionsOrder",e)},enumerable:!1,configurable:!0}),t.prototype.focusFirstQuestion=function(){if(!this.focusingQuestionInfo){var e=this.activePage;e&&(e.scrollToTop(),e.focusFirstQuestion())}},t.prototype.scrollToTopOnPageChange=function(e){e===void 0&&(e=!0);var r=this.activePage;!r||(e&&r.scrollToTop(),this.isCurrentPageRendering&&this.focusFirstQuestionAutomatic&&!this.focusingQuestionInfo&&(r.focusFirstQuestion(),this.isCurrentPageRendering=!1))},Object.defineProperty(t.prototype,"state",{get:function(){return this.getPropertyValue("state","empty")},enumerable:!1,configurable:!0}),t.prototype.updateState=function(){this.setPropertyValue("state",this.calcState())},t.prototype.calcState=function(){return this.isLoading?"loading":this.isCompleted?"completed":this.isCompletedBefore?"completedbefore":!this.isDesignMode&&this.isEditMode&&this.isStartedState&&this.startedPage?"starting":this.isShowingPreview?this.currentPage?"preview":"empty":this.currentPage?"running":"empty"},Object.defineProperty(t.prototype,"isCompleted",{get:function(){return this.getPropertyValue("isCompleted",!1)},set:function(e){this.setPropertyValue("isCompleted",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowingPreview",{get:function(){return this.getPropertyValue("isShowingPreview",!1)},set:function(e){this.isShowingPreview!=e&&(this.setPropertyValue("isShowingPreview",e),this.onShowingPreviewChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isStartedState",{get:function(){return this.getPropertyValue("isStartedState",!1)},set:function(e){this.setPropertyValue("isStartedState",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCompletedBefore",{get:function(){return this.getPropertyValue("isCompletedBefore",!1)},set:function(e){this.setPropertyValue("isCompletedBefore",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLoading",{get:function(){return this.getPropertyValue("isLoading",!1)},set:function(e){this.setPropertyValue("isLoading",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"completedState",{get:function(){return this.getPropertyValue("completedState","")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"completedStateText",{get:function(){return this.getPropertyValue("completedStateText","")},enumerable:!1,configurable:!0}),t.prototype.setCompletedState=function(e,r){this.setPropertyValue("completedState",e),r||(e=="saving"&&(r=this.getLocalizationString("savingData")),e=="error"&&(r=this.getLocalizationString("savingDataError")),e=="success"&&(r=this.getLocalizationString("savingDataSuccess"))),this.setPropertyValue("completedStateText",r),this.state==="completed"&&this.showCompletedPage&&!!this.completedState&&this.notify(this.completedStateText,this.completedState,e==="error")},t.prototype.notify=function(e,r,n){n===void 0&&(n=!1),this.notifier.showActions=n,this.notifier.notify(e,r,n)},t.prototype.clear=function(e,r){e===void 0&&(e=!0),r===void 0&&(r=!0),this.isCompleted=!1,this.isCompletedBefore=!1,this.isLoading=!1,this.completedByTriggers=void 0,e&&this.setDataCore(null,!0),this.timerModel.spent=0;for(var n=0;n<this.pages.length;n++)this.pages[n].timeSpent=0,this.pages[n].setWasShown(!1),this.pages[n].passed=!1;this.onFirstPageIsStartedChanged(),r&&(this.currentPage=this.firstVisiblePage),e&&this.updateValuesWithDefaults()},t.prototype.mergeValues=function(e,r){Fe(e,r)},t.prototype.updateValuesWithDefaults=function(){if(!(this.isDesignMode||this.isLoading))for(var e=0;e<this.pages.length;e++)for(var r=this.pages[e].questions,n=0;n<r.length;n++)r[n].updateValueWithDefaults()},t.prototype.updateCustomWidgets=function(e){!e||e.updateCustomWidgets()},t.prototype.currentPageChanging=function(e,r){var n=this.createPageChangeEventOptions(e,r);n.allow=!0,n.allowChanging=!0,this.onCurrentPageChanging.fire(this,n);var o=n.allowChanging&&n.allow;return o&&(this.isCurrentPageRendering=!0),o},t.prototype.currentPageChanged=function(e,r){this.notifyQuestionsOnHidingContent(r);var n=this.createPageChangeEventOptions(e,r);r&&!r.passed&&r.validate(!1)&&(r.passed=!0),this.isCurrentPageRendered===!0&&(this.isCurrentPageRendered=!1),this.onCurrentPageChanged.fire(this,n)},t.prototype.notifyQuestionsOnHidingContent=function(e){!e||e.questions.forEach(function(r){return r.onHidingContent()})},t.prototype.createPageChangeEventOptions=function(e,r){var n=!!e&&!!r?e.visibleIndex-r.visibleIndex:0;return{oldCurrentPage:r,newCurrentPage:e,isNextPage:n===1,isPrevPage:n===-1,isGoingForward:n>0,isGoingBackward:n<0,isAfterPreview:this.changeCurrentPageFromPreview===!0}},t.prototype.getProgress=function(){if(this.currentPage==null)return 0;if(this.progressBarType!=="pages"){var e=this.getProgressInfo();return this.progressBarType==="requiredQuestions"?e.requiredQuestionCount>=1?Math.ceil(e.requiredAnsweredQuestionCount*100/e.requiredQuestionCount):100:e.questionCount>=1?Math.ceil(e.answeredQuestionCount*100/e.questionCount):100}var r=this.visiblePages,n=r.indexOf(this.currentPage);return Math.ceil(n*100/r.length)},Object.defineProperty(t.prototype,"progressValue",{get:function(){return this.getPropertyValue("progressValue",0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNavigationButtonsShowing",{get:function(){if(this.isDesignMode)return"none";var e=this.currentPage;return e?e.navigationButtonsVisibility==="show"?this.showNavigationButtons==="none"?"bottom":this.showNavigationButtons:e.navigationButtonsVisibility==="hide"?"none":this.showNavigationButtons:"none"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNavigationButtonsShowingOnTop",{get:function(){return this.getIsNavigationButtonsShowingOn("top")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNavigationButtonsShowingOnBottom",{get:function(){return this.getIsNavigationButtonsShowingOn("bottom")},enumerable:!1,configurable:!0}),t.prototype.getIsNavigationButtonsShowingOn=function(e){var r=this.isNavigationButtonsShowing;return r=="both"||r==e},Object.defineProperty(t.prototype,"isEditMode",{get:function(){return this.mode=="edit"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDisplayMode",{get:function(){return this.mode=="display"&&!this.isDesignMode||this.state=="preview"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isUpdateValueTextOnTyping",{get:function(){return this.textUpdateMode=="onTyping"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDesignMode",{get:function(){return this._isDesignMode},enumerable:!1,configurable:!0}),t.prototype.setDesignMode=function(e){!!this._isDesignMode!=!!e&&(this._isDesignMode=!!e,this.onQuestionsOnPageModeChanged("standard"))},Object.defineProperty(t.prototype,"showInvisibleElements",{get:function(){return this.getPropertyValue("showInvisibleElements",!1)},set:function(e){var r=this.visiblePages;this.setPropertyValue("showInvisibleElements",e),!this.isLoadingFromJson&&(this.runConditions(),this.updateAllElementsVisibility(r))},enumerable:!1,configurable:!0}),t.prototype.updateAllElementsVisibility=function(e){for(var r=0;r<this.pages.length;r++){var n=this.pages[r];n.updateElementVisibility(),e.indexOf(n)>-1!=n.isVisible&&this.onPageVisibleChanged.fire(this,{page:n,visible:n.isVisible})}},Object.defineProperty(t.prototype,"areInvisibleElementsShowing",{get:function(){return this.isDesignMode||this.showInvisibleElements},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"areEmptyElementsHidden",{get:function(){return this.isShowingPreview&&this.showPreviewBeforeComplete=="showAnsweredQuestions"&&this.isAnyQuestionAnswered},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAnyQuestionAnswered",{get:function(){for(var e=this.getAllQuestions(!0),r=0;r<e.length;r++)if(!e[r].isEmpty())return!0;return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCookie",{get:function(){if(!this.cookieName)return!1;var e=D.getCookie();return e&&e.indexOf(this.cookieName+"=true")>-1},enumerable:!1,configurable:!0}),t.prototype.setCookie=function(){!this.cookieName||D.setCookie(this.cookieName+"=true; expires=Fri, 31 Dec 9999 0:0:0 GMT")},t.prototype.deleteCookie=function(){!this.cookieName||D.setCookie(this.cookieName+"=;")},Object.defineProperty(t.prototype,"ignoreValidation",{get:function(){return!this.validationEnabled},set:function(e){this.validationEnabled=!e},enumerable:!1,configurable:!0}),t.prototype.nextPage=function(){return this.isLastPage?!1:this.doCurrentPageComplete(!1)},t.prototype.hasErrorsOnNavigate=function(e){var r=this;if(!this.isEditMode||this.ignoreValidation)return!1;var n=e&&this.validationAllowComplete||!e&&this.validationAllowSwitchPages,o=function(s){(!s||n)&&r.doCurrentPageCompleteCore(e)};return this.isValidateOnComplete?this.isLastPage?this.validate(!0,this.focusOnFirstError,o,!0)!==!0&&!n:!1:this.validateCurrentPage(o)!==!0&&!n},t.prototype.checkForAsyncQuestionValidation=function(e,r){var n=this;this.clearAsyncValidationQuesitons();for(var o=function(){if(e[a].isRunningValidators){var l=e[a];l.onCompletedAsyncValidators=function(u){n.onCompletedAsyncQuestionValidators(l,r,u)},s.asyncValidationQuesitons.push(e[a])}},s=this,a=0;a<e.length;a++)o();return this.asyncValidationQuesitons.length>0},t.prototype.clearAsyncValidationQuesitons=function(){if(this.asyncValidationQuesitons)for(var e=this.asyncValidationQuesitons,r=0;r<e.length;r++)e[r].onCompletedAsyncValidators=null;this.asyncValidationQuesitons=[]},t.prototype.onCompletedAsyncQuestionValidators=function(e,r,n){if(n){if(this.clearAsyncValidationQuesitons(),r(!0),this.focusOnFirstError&&!!e&&!!e.page&&e.page===this.currentPage){for(var o=this.currentPage.questions,s=0;s<o.length;s++)if(o[s]!==e&&o[s].errors.length>0)return;e.focus(!0)}return}for(var a=this.asyncValidationQuesitons,l=0;l<a.length;l++)if(a[l].isRunningValidators)return;r(!1)},Object.defineProperty(t.prototype,"isCurrentPageHasErrors",{get:function(){return this.checkIsCurrentPageHasErrors()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCurrentPageValid",{get:function(){return!this.checkIsCurrentPageHasErrors()},enumerable:!1,configurable:!0}),t.prototype.hasCurrentPageErrors=function(e){return this.hasPageErrors(void 0,e)},t.prototype.validateCurrentPage=function(e){return this.validatePage(void 0,e)},t.prototype.hasPageErrors=function(e,r){var n=this.validatePage(e,r);return n===void 0?n:!n},t.prototype.validatePage=function(e,r){return e||(e=this.activePage),e?this.checkIsPageHasErrors(e)?!1:r&&this.checkForAsyncQuestionValidation(e.questions,function(n){return r(n)})?void 0:!0:!0},t.prototype.hasErrors=function(e,r,n){e===void 0&&(e=!0),r===void 0&&(r=!1);var o=this.validate(e,r,n);return o===void 0?o:!o},t.prototype.validate=function(e,r,n,o){e===void 0&&(e=!0),r===void 0&&(r=!1),n&&(e=!0);for(var s=this.visiblePages,a=!0,l={fireCallback:e,focusOnFirstError:r,firstErrorQuestion:null,result:!1},u=0;u<s.length;u++)s[u].validate(e,r,l)||(a=!1);return!!l.firstErrorQuestion&&(r||o)&&(r?l.firstErrorQuestion.focus(!0):this.currentPage=l.firstErrorQuestion.page),!a||!n?a:this.checkForAsyncQuestionValidation(this.getAllQuestions(),function(d){return n(d)})?void 0:!0},t.prototype.ensureUniqueNames=function(e){if(e===void 0&&(e=null),e==null)for(var r=0;r<this.pages.length;r++)this.ensureUniqueName(this.pages[r]);else this.ensureUniqueName(e)},t.prototype.ensureUniqueName=function(e){if(e.isPage&&this.ensureUniquePageName(e),e.isPanel&&this.ensureUniquePanelName(e),e.isPage||e.isPanel)for(var r=e.elements,n=0;n<r.length;n++)this.ensureUniqueNames(r[n]);else this.ensureUniqueQuestionName(e)},t.prototype.ensureUniquePageName=function(e){var r=this;return this.ensureUniqueElementName(e,function(n){return r.getPageByName(n)})},t.prototype.ensureUniquePanelName=function(e){var r=this;return this.ensureUniqueElementName(e,function(n){return r.getPanelByName(n)})},t.prototype.ensureUniqueQuestionName=function(e){var r=this;return this.ensureUniqueElementName(e,function(n){return r.getQuestionByName(n)})},t.prototype.ensureUniqueElementName=function(e,r){var n=r(e.name);if(!(!n||n==e)){for(var o=this.getNewName(e.name);r(o);)var o=this.getNewName(e.name);e.name=o}},t.prototype.getNewName=function(e){for(var r=e.length;r>0&&e[r-1]>="0"&&e[r-1]<="9";)r--;var n=e.substring(0,r),o=0;return r<e.length&&(o=parseInt(e.substring(r))),o++,n+o},t.prototype.checkIsCurrentPageHasErrors=function(e){return e===void 0&&(e=void 0),this.checkIsPageHasErrors(this.activePage,e)},t.prototype.checkIsPageHasErrors=function(e,r){if(r===void 0&&(r=void 0),r===void 0&&(r=this.focusOnFirstError),!e)return!0;var n=!e.validate(!0,r);return this.fireValidatedErrorsOnPage(e),n},t.prototype.fireValidatedErrorsOnPage=function(e){if(!(this.onValidatedErrorsOnCurrentPage.isEmpty||!e)){for(var r=e.questions,n=new Array,o=new Array,s=0;s<r.length;s++){var a=r[s];if(a.errors.length>0){n.push(a);for(var l=0;l<a.errors.length;l++)o.push(a.errors[l])}}this.onValidatedErrorsOnCurrentPage.fire(this,{questions:n,errors:o,page:e})}},t.prototype.prevPage=function(){var e=this;if(this.isFirstPage||this.state==="starting")return!1;this.resetNavigationButton();var r=this.skippedPages.find(function(s){return s.to==e.currentPage});if(r)this.currentPage=r.from,this.skippedPages.splice(this.skippedPages.indexOf(r),1);else{var n=this.visiblePages,o=n.indexOf(this.currentPage);this.currentPage=n[o-1]}return!0},t.prototype.completeLastPage=function(){this.isValidateOnComplete&&this.cancelPreview();var e=this.doCurrentPageComplete(!0);return e&&this.cancelPreview(),e},t.prototype.navigationMouseDown=function(){return this.isNavigationButtonPressed=!0,!0},t.prototype.resetNavigationButton=function(){this.isNavigationButtonPressed=!1},t.prototype.nextPageUIClick=function(){if(!(!!this.mouseDownPage&&this.mouseDownPage!==this.activePage))return this.mouseDownPage=null,this.nextPage()},t.prototype.nextPageMouseDown=function(){return this.mouseDownPage=this.activePage,this.navigationMouseDown()},t.prototype.showPreview=function(){return this.resetNavigationButton(),!this.isValidateOnComplete&&(this.hasErrorsOnNavigate(!0)||this.doServerValidation(!0,!0))?!1:(this.showPreviewCore(),!0)},t.prototype.showPreviewCore=function(){var e={allowShowPreview:!0,allow:!0};this.onShowingPreview.fire(this,e),this.isShowingPreview=e.allowShowPreview&&e.allow},t.prototype.cancelPreview=function(e){e===void 0&&(e=null),this.isShowingPreview&&(this.gotoPageFromPreview=e,this.isShowingPreview=!1)},t.prototype.cancelPreviewByPage=function(e){this.cancelPreview(e.originalPage)},t.prototype.doCurrentPageComplete=function(e){return this.isValidatingOnServer||(this.resetNavigationButton(),this.hasErrorsOnNavigate(e))?!1:this.doCurrentPageCompleteCore(e)},t.prototype.doCurrentPageCompleteCore=function(e){return this.doServerValidation(e)?!1:e?(this.currentPage.passed=!0,this.doComplete(this.canBeCompletedByTrigger,this.completedTrigger)):(this.doNextPage(),!0)},Object.defineProperty(t.prototype,"isSinglePage",{get:function(){return this.questionsOnPageMode=="singlePage"},set:function(e){this.questionsOnPageMode=e?"singlePage":"standard"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questionsOnPageMode",{get:function(){return this.getPropertyValue("questionsOnPageMode")},set:function(e){this.setPropertyValue("questionsOnPageMode",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstPageIsStarted",{get:function(){return this.getPropertyValue("firstPageIsStarted")},set:function(e){this.setPropertyValue("firstPageIsStarted",e)},enumerable:!1,configurable:!0}),t.prototype.isPageStarted=function(e){return this.firstPageIsStarted&&this.pages.length>1&&this.pages[0]===e},Object.defineProperty(t.prototype,"showPreviewBeforeComplete",{get:function(){return this.getPropertyValue("showPreviewBeforeComplete")},set:function(e){this.setPropertyValue("showPreviewBeforeComplete",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowPreviewBeforeComplete",{get:function(){var e=this.showPreviewBeforeComplete;return e=="showAllQuestions"||e=="showAnsweredQuestions"},enumerable:!1,configurable:!0}),t.prototype.onFirstPageIsStartedChanged=function(){this.isStartedState=this.firstPageIsStarted&&this.pages.length>1,this.pageVisibilityChanged(this.pages[0],!this.isStartedState)},t.prototype.onShowingPreviewChanged=function(){if(!this.isDesignMode)if(this.isShowingPreview?(this.runningPages=this.pages.slice(0,this.pages.length),this.setupPagesForPageModes(!0,!1)):(this.runningPages&&this.restoreOriginalPages(this.runningPages),this.runningPages=void 0),this.runConditions(),this.updateAllElementsVisibility(this.pages),this.updateVisibleIndexes(),this.isShowingPreview)this.currentPageNo=0;else{var e=this.gotoPageFromPreview;this.gotoPageFromPreview=null,P.isValueEmpty(e)&&this.visiblePageCount>0&&(e=this.visiblePages[this.visiblePageCount-1]),e&&(this.changeCurrentPageFromPreview=!0,this.currentPage=e,this.changeCurrentPageFromPreview=!1)}},t.prototype.onQuestionsOnPageModeChanged=function(e,r){r===void 0&&(r=!1),!this.isShowingPreview&&(this.questionsOnPageMode=="standard"||this.isDesignMode?(this.originalPages&&this.restoreOriginalPages(this.originalPages),this.originalPages=void 0):((!e||e=="standard")&&(this.originalPages=this.pages.slice(0,this.pages.length)),this.setupPagesForPageModes(this.isSinglePage,r)),this.runConditions(),this.updateVisibleIndexes())},t.prototype.restoreOriginalPages=function(e){this.questionHashesClear(),this.pages.splice(0,this.pages.length);for(var r=0;r<e.length;r++){var n=e[r];n.setWasShown(!1),this.pages.push(n)}},t.prototype.getPageStartIndex=function(){return this.firstPageIsStarted&&this.pages.length>0?1:0},t.prototype.setupPagesForPageModes=function(e,r){var n=this;this.questionHashesClear(),this.firstPageIsStarted&&this.pages.length>0&&this.pages[0].questions.forEach(function(u){return n.questionHashesAdded(u)}),this.isLockingUpdateOnPageModes=!r;var o=this.getPageStartIndex();i.prototype.startLoadingFromJson.call(this);var s=this.createPagesForQuestionOnPageMode(e,o),a=this.pages.length-o;this.pages.splice(o,a);for(var l=0;l<s.length;l++)this.pages.push(s[l]);i.prototype.endLoadingFromJson.call(this);for(var l=0;l<s.length;l++)s[l].setSurveyImpl(this,!0);this.doElementsOnLoad(),this.updateCurrentPage(),this.isLockingUpdateOnPageModes=!1},t.prototype.createPagesForQuestionOnPageMode=function(e,r){return e?[this.createSinglePage(r)]:this.createPagesForEveryQuestion(r)},t.prototype.createSinglePage=function(e){var r=this.createNewPage("all");r.setSurveyImpl(this);for(var n=e;n<this.pages.length;n++){var o=this.pages[n],s=x.createClass("panel");s.originalPage=o,r.addPanel(s);var a=new ae().toJsonObject(o);new ae().toObject(a,s),this.showPageTitles||(s.title="")}return r},t.prototype.createPagesForEveryQuestion=function(e){for(var r=[],n=e;n<this.pages.length;n++){var o=this.pages[n];o.setWasShown(!0);for(var s=0;s<o.elements.length;s++){var a=o.elements[s],l=x.createClass(a.getType());if(!!l){var u=new ae;u.lightSerializing=!0;var d=u.toJsonObject(o),v=x.createClass(o.getType());v.fromJSON(d),v.name=a.name,v.setSurveyImpl(this),r.push(v);var V=new ae().toJsonObject(a);v.addElement(l),new ae().toObject(V,l);for(var E=0;E<v.questions.length;E++)this.questionHashesAdded(v.questions[E])}}}return r},Object.defineProperty(t.prototype,"isFirstPage",{get:function(){return this.getPropertyValue("isFirstPage")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLastPage",{get:function(){return this.getPropertyValue("isLastPage")},enumerable:!1,configurable:!0}),t.prototype.updateButtonsVisibility=function(){this.updateIsFirstLastPageState(),this.setPropertyValue("isShowPrevButton",this.calcIsShowPrevButton()),this.setPropertyValue("isShowNextButton",this.calcIsShowNextButton()),this.setPropertyValue("isCompleteButtonVisible",this.calcIsCompleteButtonVisible()),this.setPropertyValue("isPreviewButtonVisible",this.calcIsPreviewButtonVisible()),this.setPropertyValue("isCancelPreviewButtonVisible",this.calcIsCancelPreviewButtonVisible())},Object.defineProperty(t.prototype,"isShowPrevButton",{get:function(){return this.getPropertyValue("isShowPrevButton")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowNextButton",{get:function(){return this.getPropertyValue("isShowNextButton")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCompleteButtonVisible",{get:function(){return this.getPropertyValue("isCompleteButtonVisible")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPreviewButtonVisible",{get:function(){return this.getPropertyValue("isPreviewButtonVisible")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCancelPreviewButtonVisible",{get:function(){return this.getPropertyValue("isCancelPreviewButtonVisible")},enumerable:!1,configurable:!0}),t.prototype.updateIsFirstLastPageState=function(){var e=this.currentPage;this.setPropertyValue("isFirstPage",!!e&&e===this.firstVisiblePage),this.setPropertyValue("isLastPage",!!e&&e===this.lastVisiblePage)},t.prototype.calcIsShowPrevButton=function(){if(this.isFirstPage||!this.showPrevButton||this.state!=="running")return!1;var e=this.visiblePages[this.currentPageNo-1];return e&&e.getMaxTimeToFinish()<=0},t.prototype.calcIsShowNextButton=function(){return this.state==="running"&&!this.isLastPage&&!this.canBeCompletedByTrigger},t.prototype.calcIsCompleteButtonVisible=function(){var e=this.state;return this.isEditMode&&(this.state==="running"&&(this.isLastPage&&!this.isShowPreviewBeforeComplete||this.canBeCompletedByTrigger)||e==="preview")&&this.showCompleteButton},t.prototype.calcIsPreviewButtonVisible=function(){return this.isEditMode&&this.isShowPreviewBeforeComplete&&this.state=="running"&&this.isLastPage},t.prototype.calcIsCancelPreviewButtonVisible=function(){return this.isEditMode&&this.isShowPreviewBeforeComplete&&this.state=="preview"},Object.defineProperty(t.prototype,"firstVisiblePage",{get:function(){for(var e=this.pages,r=0;r<e.length;r++)if(this.isPageInVisibleList(e[r]))return e[r];return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastVisiblePage",{get:function(){for(var e=this.pages,r=e.length-1;r>=0;r--)if(this.isPageInVisibleList(e[r]))return e[r];return null},enumerable:!1,configurable:!0}),t.prototype.doComplete=function(e,r){if(e===void 0&&(e=!1),!this.isCompleted)return this.checkOnCompletingEvent(e,r)?(this.checkOnPageTriggers(!0),this.stopTimer(),this.notifyQuestionsOnHidingContent(this.currentPage),this.isCompleted=!0,this.clearUnusedValues(),this.saveDataOnComplete(e,r),this.setCookie(),!0):(this.isCompleted=!1,!1)},t.prototype.saveDataOnComplete=function(e,r){var n=this;e===void 0&&(e=!1);var o=this.hasCookie,s=function(V){d=!0,n.setCompletedState("saving",V)},a=function(V){n.setCompletedState("error",V)},l=function(V){n.setCompletedState("success",V),n.navigateTo()},u=function(V){n.setCompletedState("","")},d=!1,v={isCompleteOnTrigger:e,completeTrigger:r,showSaveInProgress:s,showSaveError:a,showSaveSuccess:l,clearSaveMessages:u,showDataSaving:s,showDataSavingError:a,showDataSavingSuccess:l,showDataSavingClear:u};this.onComplete.fire(this,v),!o&&this.surveyPostId&&this.sendResult(),d||this.navigateTo()},t.prototype.checkOnCompletingEvent=function(e,r){var n={allowComplete:!0,allow:!0,isCompleteOnTrigger:e,completeTrigger:r};return this.onCompleting.fire(this,n),n.allowComplete&&n.allow},t.prototype.start=function(){return!this.firstPageIsStarted||(this.isCurrentPageRendering=!0,this.checkIsPageHasErrors(this.startedPage,!0))?!1:(this.isStartedState=!1,this.notifyQuestionsOnHidingContent(this.pages[0]),this.startTimerFromUI(),this.onStarted.fire(this,{}),this.updateVisibleIndexes(),this.currentPage&&this.currentPage.locStrsChanged(),!0)},Object.defineProperty(t.prototype,"isValidatingOnServer",{get:function(){return this.getPropertyValue("isValidatingOnServer",!1)},enumerable:!1,configurable:!0}),t.prototype.setIsValidatingOnServer=function(e){e!=this.isValidatingOnServer&&(this.setPropertyValue("isValidatingOnServer",e),this.onIsValidatingOnServerChanged())},t.prototype.createServerValidationOptions=function(e,r){var n=this,o={data:{},errors:{},survey:this,complete:function(){n.completeServerValidation(o,r)}};if(e&&this.isValidateOnComplete)o.data=this.data;else for(var s=this.activePage.questions,a=0;a<s.length;a++){var l=s[a];if(!!l.visible){var u=this.getValue(l.getValueName());this.isValueEmpty(u)||(o.data[l.getValueName()]=u)}}return o},t.prototype.onIsValidatingOnServerChanged=function(){},t.prototype.doServerValidation=function(e,r){var n=this;if(r===void 0&&(r=!1),!this.onServerValidateQuestions||this.onServerValidateQuestions.isEmpty||!e&&this.isValidateOnComplete)return!1;this.setIsValidatingOnServer(!0);var o=typeof this.onServerValidateQuestions=="function";return this.serverValidationEventCount=o?1:this.onServerValidateQuestions.length,o?this.onServerValidateQuestions(this,this.createServerValidationOptions(e,r)):this.onServerValidateQuestions.fireByCreatingOptions(this,function(){return n.createServerValidationOptions(e,r)}),!0},t.prototype.completeServerValidation=function(e,r){if(!(this.serverValidationEventCount>1&&(this.serverValidationEventCount--,!!e&&!!e.errors&&Object.keys(e.errors).length===0))&&(this.serverValidationEventCount=0,this.setIsValidatingOnServer(!1),!(!e&&!e.survey))){var n=e.survey,o=!1;if(e.errors){var s=this.focusOnFirstError;for(var a in e.errors){var l=n.getQuestionByName(a);l&&l.errors&&(o=!0,l.addError(new Ce(e.errors[a],this)),s&&(s=!1,l.page&&(this.currentPage=l.page),l.focus(!0)))}this.fireValidatedErrorsOnPage(this.currentPage)}o||(r?this.showPreviewCore():n.isLastPage?n.doComplete():n.doNextPage())}},t.prototype.doNextPage=function(){var e=this.currentPage;if(this.checkOnPageTriggers(!1),this.isCompleted)this.doComplete(!0);else if(this.sendResultOnPageNext&&this.sendResult(this.surveyPostId,this.clientId,!0),e===this.currentPage){var r=this.visiblePages,n=r.indexOf(this.currentPage);this.currentPage=r[n+1]}},t.prototype.setCompleted=function(e){this.doComplete(!0,e)},t.prototype.canBeCompleted=function(e,r){var n;if(!!b.triggers.changeNavigationButtonsOnComplete){var o=this.canBeCompletedByTrigger;this.completedByTriggers||(this.completedByTriggers={}),r?this.completedByTriggers[e.id]={trigger:e,pageId:(n=this.currentPage)===null||n===void 0?void 0:n.id}:delete this.completedByTriggers[e.id],o!==this.canBeCompletedByTrigger&&this.updateButtonsVisibility()}},Object.defineProperty(t.prototype,"canBeCompletedByTrigger",{get:function(){var e;if(!this.completedByTriggers)return!1;var r=Object.keys(this.completedByTriggers);if(r.length===0)return!1;var n=(e=this.currentPage)===null||e===void 0?void 0:e.id;if(!n)return!0;for(var o=0;o<r.length;o++)if(n===this.completedByTriggers[r[o]].pageId)return!0;return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"completedTrigger",{get:function(){if(!!this.canBeCompletedByTrigger){var e=Object.keys(this.completedByTriggers)[0];return this.completedByTriggers[e].trigger}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"processedCompletedHtml",{get:function(){var e=this.renderedCompletedHtml;return e?this.processHtml(e,"completed"):""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"processedCompletedBeforeHtml",{get:function(){return this.locCompletedBeforeHtml.textOrHtml},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"processedLoadingHtml",{get:function(){return this.locLoadingHtml.textOrHtml},enumerable:!1,configurable:!0}),t.prototype.getProgressInfo=function(){var e=this.isDesignMode?this.pages:this.visiblePages;return de.getProgressInfoByElements(e,!1)},Object.defineProperty(t.prototype,"progressText",{get:function(){var e=this.getPropertyValue("progressText","");return e||(this.updateProgressText(),e=this.getPropertyValue("progressText","")),e},enumerable:!1,configurable:!0}),t.prototype.updateProgressText=function(e){e===void 0&&(e=!1),!(this.isCalculatingProgressText||this.isShowingPreview||this.isLockingUpdateOnPageModes)&&(e&&this.progressBarType=="pages"&&this.onProgressText.isEmpty||(this.isCalculatingProgressText=!0,this.setPropertyValue("progressText",this.getProgressText()),this.setPropertyValue("progressValue",this.getProgress()),this.isCalculatingProgressText=!1))},t.prototype.getProgressText=function(){if(!this.isDesignMode&&this.currentPage==null)return"";var e={questionCount:0,answeredQuestionCount:0,requiredQuestionCount:0,requiredAnsweredQuestionCount:0,text:""},r=this.progressBarType.toLowerCase();if(r==="questions"||r==="requiredquestions"||r==="correctquestions"||!this.onProgressText.isEmpty){var n=this.getProgressInfo();e.questionCount=n.questionCount,e.answeredQuestionCount=n.answeredQuestionCount,e.requiredQuestionCount=n.requiredQuestionCount,e.requiredAnsweredQuestionCount=n.requiredAnsweredQuestionCount}return e.text=this.getProgressTextCore(e),this.onProgressText.fire(this,e),e.text},t.prototype.getProgressTextCore=function(e){var r=this.progressBarType.toLowerCase();if(r==="questions")return this.getLocalizationFormatString("questionsProgressText",e.answeredQuestionCount,e.questionCount);if(r==="requiredquestions")return this.getLocalizationFormatString("questionsProgressText",e.requiredAnsweredQuestionCount,e.requiredQuestionCount);if(r==="correctquestions"){var n=this.getCorrectedAnswerCount();return this.getLocalizationFormatString("questionsProgressText",n,e.questionCount)}var o=this.isDesignMode?this.pages:this.visiblePages,s=o.indexOf(this.currentPage)+1;return this.getLocalizationFormatString("progressText",s,o.length)},t.prototype.getRootCss=function(){return new O().append(this.css.root).append(this.css.rootProgress+"--"+this.progressBarType).append(this.css.rootMobile,this.isMobile).append(this.css.rootAnimationDisabled,!b.animationEnabled).append(this.css.rootReadOnly,this.mode==="display"&&!this.isDesignMode).append(this.css.rootCompact,this.isCompact).append(this.css.rootFitToContainer,this.fitToContainer).toString()},t.prototype.afterRenderSurvey=function(e){var r=this;this.destroyResizeObserver(),Array.isArray(e)&&(e=de.GetFirstNonTextElement(e));var n=e,o=this.css.variables;if(o){var s=Number.parseFloat(D.getComputedStyle(n).getPropertyValue(o.mobileWidth));if(s){var a=!1;this.resizeObserver=new ResizeObserver(function(l){R.requestAnimationFrame(function(){a||!Qr(n)?a=!1:a=r.processResponsiveness(n.offsetWidth,s)})}),this.resizeObserver.observe(n)}}this.onAfterRenderSurvey.fire(this,{survey:this,htmlElement:e}),this.rootElement=e,this.addScrollEventListener()},t.prototype.processResponsiveness=function(e,r){var n=e<r,o=this.isMobile!==n;return o&&this.setIsMobile(n),this.layoutElements.forEach(function(s){return s.processResponsiveness&&s.processResponsiveness(e)}),o},t.prototype.triggerResponsiveness=function(e){this.getAllQuestions().forEach(function(r){r.triggerResponsiveness(e)})},t.prototype.destroyResizeObserver=function(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=void 0)},t.prototype.updateQuestionCssClasses=function(e,r){this.onUpdateQuestionCssClasses.fire(this,{question:e,cssClasses:r})},t.prototype.updatePanelCssClasses=function(e,r){this.onUpdatePanelCssClasses.fire(this,{panel:e,cssClasses:r})},t.prototype.updatePageCssClasses=function(e,r){this.onUpdatePageCssClasses.fire(this,{page:e,cssClasses:r})},t.prototype.updateChoiceItemCss=function(e,r){r.question=e,this.onUpdateChoiceItemCss.fire(this,r)},t.prototype.afterRenderPage=function(e){var r=this;if(!this.isDesignMode&&!this.focusingQuestionInfo){var n=this.isCurrentPageRendered===!1;setTimeout(function(){return r.scrollToTopOnPageChange(n)},1)}this.focusQuestionInfo(),this.isCurrentPageRendered=!0,!this.onAfterRenderPage.isEmpty&&this.onAfterRenderPage.fire(this,{page:this.activePage,htmlElement:e})},t.prototype.afterRenderHeader=function(e){this.onAfterRenderHeader.isEmpty||this.onAfterRenderHeader.fire(this,{htmlElement:e})},t.prototype.afterRenderQuestion=function(e,r){this.onAfterRenderQuestion.fire(this,{question:e,htmlElement:r})},t.prototype.afterRenderQuestionInput=function(e,r){if(!this.onAfterRenderQuestionInput.isEmpty){var n=e.inputId,o=b.environment.root;if(!!n&&r.id!==n&&typeof o!="undefined"){var s=o.getElementById(n);s&&(r=s)}this.onAfterRenderQuestionInput.fire(this,{question:e,htmlElement:r})}},t.prototype.afterRenderPanel=function(e,r){this.onAfterRenderPanel.fire(this,{panel:e,htmlElement:r})},t.prototype.whenQuestionFocusIn=function(e){this.onFocusInQuestion.fire(this,{question:e})},t.prototype.whenPanelFocusIn=function(e){this.onFocusInPanel.fire(this,{panel:e})},t.prototype.rebuildQuestionChoices=function(){this.getAllQuestions().forEach(function(e){return e.surveyChoiceItemVisibilityChange()})},t.prototype.canChangeChoiceItemsVisibility=function(){return!this.onShowingChoiceItem.isEmpty},t.prototype.getChoiceItemVisibility=function(e,r,n){var o={question:e,item:r,visible:n};return this.onShowingChoiceItem.fire(this,o),o.visible},t.prototype.loadQuestionChoices=function(e){this.onChoicesLazyLoad.fire(this,e)},t.prototype.getChoiceDisplayValue=function(e){this.onGetChoiceDisplayValue.isEmpty?e.setItems(null):this.onGetChoiceDisplayValue.fire(this,e)},t.prototype.matrixBeforeRowAdded=function(e){this.onMatrixRowAdding.fire(this,e)},t.prototype.matrixRowAdded=function(e,r){this.onMatrixRowAdded.fire(this,{question:e,row:r})},t.prototype.matrixColumnAdded=function(e,r){this.onMatrixColumnAdded.fire(this,{question:e,column:r})},t.prototype.multipleTextItemAdded=function(e,r){this.onMultipleTextItemAdded.fire(this,{question:e,item:r})},t.prototype.getQuestionByValueNameFromArray=function(e,r,n){var o=this.getQuestionsByValueName(e);if(!!o){for(var s=0;s<o.length;s++){var a=o[s].getQuestionFromArray(r,n);if(a)return a}return null}},t.prototype.matrixRowRemoved=function(e,r,n){this.onMatrixRowRemoved.fire(this,{question:e,rowIndex:r,row:n})},t.prototype.matrixRowRemoving=function(e,r,n){var o={question:e,rowIndex:r,row:n,allow:!0};return this.onMatrixRowRemoving.fire(this,o),o.allow},t.prototype.matrixAllowRemoveRow=function(e,r,n){var o={question:e,rowIndex:r,row:n,allow:!0};return this.onMatrixRenderRemoveButton.fire(this,o),o.allow},t.prototype.matrixDetailPanelVisibleChanged=function(e,r,n,o){var s={question:e,rowIndex:r,row:n,visible:o,detailPanel:n.detailPanel};this.onMatrixDetailPanelVisibleChanged.fire(this,s)},t.prototype.matrixCellCreating=function(e,r){r.question=e,this.onMatrixCellCreating.fire(this,r)},t.prototype.matrixCellCreated=function(e,r){r.question=e,this.onMatrixCellCreated.fire(this,r)},t.prototype.matrixAfterCellRender=function(e,r){r.question=e,this.onAfterRenderMatrixCell.fire(this,r)},t.prototype.matrixCellValueChanged=function(e,r){r.question=e,this.onMatrixCellValueChanged.fire(this,r)},t.prototype.matrixCellValueChanging=function(e,r){r.question=e,this.onMatrixCellValueChanging.fire(this,r)},Object.defineProperty(t.prototype,"isValidateOnValueChanging",{get:function(){return this.checkErrorsMode==="onValueChanging"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isValidateOnValueChanged",{get:function(){return this.checkErrorsMode==="onValueChanged"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isValidateOnValueChange",{get:function(){return this.isValidateOnValueChanged||this.isValidateOnValueChanging},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isValidateOnComplete",{get:function(){return this.checkErrorsMode==="onComplete"||this.validationAllowSwitchPages&&!this.validationAllowComplete},enumerable:!1,configurable:!0}),t.prototype.matrixCellValidate=function(e,r){return r.question=e,this.onMatrixCellValidate.fire(this,r),r.error?new Ce(r.error,this):null},t.prototype.dynamicPanelAdded=function(e,r,n){if(this.isLoadingFromJson||this.updateVisibleIndexes(),!this.onDynamicPanelAdded.isEmpty){var o=e.panels;r===void 0&&(r=o.length-1,n=o[r]),this.onDynamicPanelAdded.fire(this,{question:e,panel:n,panelIndex:r})}},t.prototype.dynamicPanelRemoved=function(e,r,n){for(var o=n?n.questions:[],s=0;s<o.length;s++)o[s].clearOnDeletingContainer();this.updateVisibleIndexes(),this.onDynamicPanelRemoved.fire(this,{question:e,panelIndex:r,panel:n})},t.prototype.dynamicPanelRemoving=function(e,r,n){var o={question:e,panelIndex:r,panel:n,allow:!0};return this.onDynamicPanelRemoving.fire(this,o),o.allow},t.prototype.dynamicPanelItemValueChanged=function(e,r){r.question=e,r.panelIndex=r.itemIndex,r.panelData=r.itemValue,this.onDynamicPanelItemValueChanged.fire(this,r)},t.prototype.dynamicPanelGetTabTitle=function(e,r){r.question=e,this.onGetDynamicPanelTabTitle.fire(this,r)},t.prototype.dynamicPanelCurrentIndexChanged=function(e,r){r.question=e,this.onDynamicPanelCurrentIndexChanged.fire(this,r)},t.prototype.dragAndDropAllow=function(e){return this.onDragDropAllow.fire(this,e),e.allow},t.prototype.elementContentVisibilityChanged=function(e){this.currentPage&&this.currentPage.ensureRowsVisibility(),this.onElementContentVisibilityChanged.fire(this,{element:e})},t.prototype.getUpdatedPanelFooterActions=function(e,r,n){var o={question:n,panel:e,actions:r};return this.onGetPanelFooterActions.fire(this,o),o.actions},t.prototype.getUpdatedElementTitleActions=function(e,r){return e.isPage?this.getUpdatedPageTitleActions(e,r):e.isPanel?this.getUpdatedPanelTitleActions(e,r):this.getUpdatedQuestionTitleActions(e,r)},t.prototype.getUpdatedQuestionTitleActions=function(e,r){var n={question:e,titleActions:r};return this.onGetQuestionTitleActions.fire(this,n),n.titleActions},t.prototype.getUpdatedPanelTitleActions=function(e,r){var n={panel:e,titleActions:r};return this.onGetPanelTitleActions.fire(this,n),n.titleActions},t.prototype.getUpdatedPageTitleActions=function(e,r){var n={page:e,titleActions:r};return this.onGetPageTitleActions.fire(this,n),n.titleActions},t.prototype.getUpdatedMatrixRowActions=function(e,r,n){var o={question:e,actions:n,row:r};return this.onGetMatrixRowActions.fire(this,o),o.actions},t.prototype.scrollElementToTop=function(e,r,n,o,s,a){var l={element:e,question:r,page:n,elementId:o,cancel:!1};this.onScrollingElementToTop.fire(this,l),l.cancel||de.ScrollElementToTop(l.elementId,s,a)},t.prototype.chooseFiles=function(e,r,n){this.onOpenFileChooser.isEmpty?zi(e,r):this.onOpenFileChooser.fire(this,{input:e,element:n&&n.element||this.survey,elementType:n&&n.elementType,item:n&&n.item,propertyName:n&&n.propertyName,callback:r,context:n})},t.prototype.uploadFiles=function(e,r,n,o){var s=this;this.onUploadFiles.isEmpty?o("error",this.getLocString("noUploadFilesHandler")):this.taskManager.runTask("file",function(a){s.onUploadFiles.fire(s,{question:e,name:r,files:n||[],callback:function(l,u){o(l,u),a()}})}),this.surveyPostId&&this.uploadFilesCore(r,n,o)},t.prototype.downloadFile=function(e,r,n,o){this.onDownloadFile.isEmpty&&o&&o("skipped",n.content||n),this.onDownloadFile.fire(this,{question:e,name:r,content:n.content||n,fileValue:n,callback:o})},t.prototype.clearFiles=function(e,r,n,o,s){this.onClearFiles.isEmpty&&s&&s("success",n),this.onClearFiles.fire(this,{question:e,name:r,value:n,fileName:o,callback:s})},t.prototype.updateChoicesFromServer=function(e,r,n){var o={question:e,choices:r,serverResult:n};return this.onLoadChoicesFromServer.fire(this,o),o.choices},t.prototype.loadedChoicesFromServer=function(e){this.locStrsChanged()},t.prototype.createSurveyService=function(){return new Vo},t.prototype.uploadFilesCore=function(e,r,n){var o=this,s=[];r.forEach(function(a){n&&n("uploading",a),o.createSurveyService().sendFile(o.surveyPostId,a,function(l,u){l?(s.push({content:u,file:a}),s.length===r.length&&n&&n("success",s)):n&&n("error",{response:u,file:a})})})},t.prototype.getPage=function(e){return this.pages[e]},t.prototype.addPage=function(e,r){r===void 0&&(r=-1),e!=null&&(r<0||r>=this.pages.length?this.pages.push(e):this.pages.splice(r,0,e))},t.prototype.addNewPage=function(e,r){e===void 0&&(e=null),r===void 0&&(r=-1);var n=this.createNewPage(e);return this.addPage(n,r),n},t.prototype.removePage=function(e){var r=this.pages.indexOf(e);r<0||(this.pages.splice(r,1),this.currentPage==e&&(this.currentPage=this.pages.length>0?this.pages[0]:null))},t.prototype.getQuestionByName=function(e,r){if(r===void 0&&(r=!1),!e)return null;r&&(e=e.toLowerCase());var n=r?this.questionHashes.namesInsensitive:this.questionHashes.names,o=n[e];return o?o[0]:null},t.prototype.findQuestionByName=function(e){return this.getQuestionByName(e)},t.prototype.getEditingSurveyElement=function(){return this.editingObjValue},t.prototype.getQuestionByValueName=function(e,r){r===void 0&&(r=!1);var n=this.getQuestionsByValueName(e,r);return n?n[0]:null},t.prototype.getQuestionsByValueName=function(e,r){r===void 0&&(r=!1);var n=r?this.questionHashes.valueNamesInsensitive:this.questionHashes.valueNames,o=n[e];return o||null},t.prototype.getCalculatedValueByName=function(e){for(var r=0;r<this.calculatedValues.length;r++)if(e==this.calculatedValues[r].name)return this.calculatedValues[r];return null},t.prototype.getQuestionsByNames=function(e,r){r===void 0&&(r=!1);var n=[];if(!e)return n;for(var o=0;o<e.length;o++)if(!!e[o]){var s=this.getQuestionByName(e[o],r);s&&n.push(s)}return n},t.prototype.getPageByElement=function(e){for(var r=0;r<this.pages.length;r++){var n=this.pages[r];if(n.containsElement(e))return n}return null},t.prototype.getPageByQuestion=function(e){return this.getPageByElement(e)},t.prototype.getPageByName=function(e){for(var r=0;r<this.pages.length;r++)if(this.pages[r].name==e)return this.pages[r];return null},t.prototype.getPagesByNames=function(e){var r=[];if(!e)return r;for(var n=0;n<e.length;n++)if(!!e[n]){var o=this.getPageByName(e[n]);o&&r.push(o)}return r},t.prototype.getAllQuestions=function(e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1),n===void 0&&(n=!1),n&&(r=!1);for(var o=[],s=0;s<this.pages.length;s++)this.pages[s].addQuestionsToList(o,e,r);if(!n)return o;var a=[];return o.forEach(function(l){a.push(l),l.getNestedQuestions(e).forEach(function(u){return a.push(u)})}),a},t.prototype.getQuizQuestions=function(){for(var e=new Array,r=this.getPageStartIndex(),n=r;n<this.pages.length;n++)if(!!this.pages[n].isVisible)for(var o=this.pages[n].questions,s=0;s<o.length;s++){var a=o[s];a.quizQuestionCount>0&&e.push(a)}return e},t.prototype.getPanelByName=function(e,r){r===void 0&&(r=!1);var n=this.getAllPanels();r&&(e=e.toLowerCase());for(var o=0;o<n.length;o++){var s=n[o].name;if(r&&(s=s.toLowerCase()),s==e)return n[o]}return null},t.prototype.getAllPanels=function(e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);for(var n=new Array,o=0;o<this.pages.length;o++)this.pages[o].addPanelsIntoList(n,e,r);return n},t.prototype.createNewPage=function(e){var r=x.createClass("page");return r.name=e,r},t.prototype.questionOnValueChanging=function(e,r,n){if(this.editingObj){var o=x.findProperty(this.editingObj.getType(),e);o&&(r=o.settingValue(this.editingObj,r))}if(this.onValueChanging.isEmpty)return r;var s={name:e,question:this.getQuestionByValueName(n||e),value:this.getUnbindValue(r),oldValue:this.getValue(e)};return this.onValueChanging.fire(this,s),s.value},t.prototype.updateQuestionValue=function(e,r){if(!this.isLoadingFromJson){var n=this.getQuestionsByValueName(e);if(n)for(var o=0;o<n.length;o++){var s=n[o].value;(s===r&&Array.isArray(s)&&!!this.editingObj||!this.isTwoValueEquals(s,r))&&n[o].updateValueFromSurvey(r,!1)}}},t.prototype.checkQuestionErrorOnValueChanged=function(e){!this.isNavigationButtonPressed&&(this.isValidateOnValueChanged||e.getAllErrors().length>0)&&this.checkQuestionErrorOnValueChangedCore(e)},t.prototype.checkQuestionErrorOnValueChangedCore=function(e){var r=e.getAllErrors().length,n=!e.validate(!0,{isOnValueChanged:!this.isValidateOnValueChanging});return!!e.page&&this.isValidateOnValueChange&&(r>0||e.getAllErrors().length>0)&&this.fireValidatedErrorsOnPage(e.page),n},t.prototype.checkErrorsOnValueChanging=function(e,r){if(this.isLoadingFromJson)return!1;var n=this.getQuestionsByValueName(e);if(!n)return!1;for(var o=!1,s=0;s<n.length;s++){var a=n[s];this.isTwoValueEquals(a.valueForSurvey,r)||(a.value=r),this.checkQuestionErrorOnValueChangedCore(a)&&(o=!0),o=o||a.errors.length>0}return o},t.prototype.notifyQuestionOnValueChanged=function(e,r,n){if(!this.isLoadingFromJson){var o=this.getQuestionsByValueName(e);if(o)for(var s=0;s<o.length;s++){var a=o[s];this.checkQuestionErrorOnValueChanged(a),a.onSurveyValueChanged(r),this.onValueChanged.fire(this,{name:e,question:a,value:r})}else this.onValueChanged.fire(this,{name:e,question:null,value:r});this.isDisposed||(this.checkElementsBindings(e,r),this.notifyElementsOnAnyValueOrVariableChanged(e,n))}},t.prototype.checkElementsBindings=function(e,r){this.isRunningElementsBindings=!0;for(var n=0;n<this.pages.length;n++)this.pages[n].checkBindings(e,r);this.isRunningElementsBindings=!1,this.updateVisibleIndexAfterBindings&&(this.updateVisibleIndexes(),this.updateVisibleIndexAfterBindings=!1)},t.prototype.notifyElementsOnAnyValueOrVariableChanged=function(e,r){if(this.isEndLoadingFromJson!=="processing"){if(this.isRunningConditions){this.conditionNotifyElementsOnAnyValueOrVariableChanged=!0;return}for(var n=0;n<this.pages.length;n++)this.pages[n].onAnyValueChanged(e,r);this.isEndLoadingFromJson||this.locStrsChanged()}},t.prototype.updateAllQuestionsValue=function(e){for(var r=this.getAllQuestions(),n=0;n<r.length;n++){var o=r[n],s=o.getValueName();o.updateValueFromSurvey(this.getValue(s),e),o.requireUpdateCommentValue&&o.updateCommentFromSurvey(this.getComment(s))}},t.prototype.notifyAllQuestionsOnValueChanged=function(){for(var e=this.getAllQuestions(),r=0;r<e.length;r++)e[r].onSurveyValueChanged(this.getValue(e[r].getValueName()))},t.prototype.checkOnPageTriggers=function(e){for(var r=this.getCurrentPageQuestions(!0),n={},o=0;o<r.length;o++){var s=r[o],a=s.getValueName();n[a]=this.getValue(a)}this.addCalculatedValuesIntoFilteredValues(n),this.checkTriggers(n,!0,e)},t.prototype.getCurrentPageQuestions=function(e){e===void 0&&(e=!1);var r=[],n=this.currentPage;if(!n)return r;for(var o=0;o<n.questions.length;o++){var s=n.questions[o];!e&&!s.visible||!s.name||r.push(s)}return r},t.prototype.checkTriggers=function(e,r,n,o){if(n===void 0&&(n=!1),!(this.isCompleted||this.triggers.length==0||this.isDisplayMode)){if(this.isTriggerIsRunning){this.triggerValues=this.getFilteredValues();for(var s in e)this.triggerKeys[s]=e[s];return}var a=!1;if(!n&&o&&this.hasRequiredValidQuestionTrigger){var l=this.getQuestionByValueName(o);a=l&&!l.validate(!1)}this.isTriggerIsRunning=!0,this.triggerKeys=e,this.triggerValues=this.getFilteredValues();for(var u=this.getFilteredProperties(),d=this.canBeCompletedByTrigger,v=0;v<this.triggers.length;v++){var V=this.triggers[v];a&&V.requireValidQuestion||V.checkExpression(r,n,this.triggerKeys,this.triggerValues,u)}d!==this.canBeCompletedByTrigger&&this.updateButtonsVisibility(),this.isTriggerIsRunning=!1}},t.prototype.checkTriggersAndRunConditions=function(e,r,n){var o={};o[e]={newValue:r,oldValue:n},this.runConditionOnValueChanged(e,r),this.checkTriggers(o,!1,!1,e)},Object.defineProperty(t.prototype,"hasRequiredValidQuestionTrigger",{get:function(){for(var e=0;e<this.triggers.length;e++)if(this.triggers[e].requireValidQuestion)return!0;return!1},enumerable:!1,configurable:!0}),t.prototype.doElementsOnLoad=function(){for(var e=0;e<this.pages.length;e++)this.pages[e].onSurveyLoad()},Object.defineProperty(t.prototype,"isRunningConditions",{get:function(){return!!this.conditionValues},enumerable:!1,configurable:!0}),t.prototype.runExpressions=function(){this.runConditions()},t.prototype.runConditions=function(){if(!(this.isCompleted||this.isEndLoadingFromJson==="processing"||this.isRunningConditions)){this.conditionValues=this.getFilteredValues();var e=this.getFilteredProperties(),r=this.pages.indexOf(this.currentPage);this.runConditionsCore(e),this.checkIfNewPagesBecomeVisible(r),this.conditionValues=null,this.isValueChangedOnRunningCondition&&this.conditionRunnerCounter<b.maxConditionRunCountOnValueChanged?(this.isValueChangedOnRunningCondition=!1,this.conditionRunnerCounter++,this.runConditions()):(this.isValueChangedOnRunningCondition=!1,this.conditionRunnerCounter=0,this.conditionUpdateVisibleIndexes&&(this.conditionUpdateVisibleIndexes=!1,this.updateVisibleIndexes()),this.conditionNotifyElementsOnAnyValueOrVariableChanged&&(this.conditionNotifyElementsOnAnyValueOrVariableChanged=!1,this.notifyElementsOnAnyValueOrVariableChanged("")))}},t.prototype.runConditionOnValueChanged=function(e,r){this.isRunningConditions?(this.conditionValues[e]=r,this.isValueChangedOnRunningCondition=!0):(this.runConditions(),this.runQuestionsTriggers(e,r))},t.prototype.runConditionsCore=function(e){for(var r=this.pages,n=0;n<this.calculatedValues.length;n++)this.calculatedValues[n].resetCalculation();for(var n=0;n<this.calculatedValues.length;n++)this.calculatedValues[n].doCalculation(this.calculatedValues,this.conditionValues,e);i.prototype.runConditionCore.call(this,this.conditionValues,e);for(var o=0;o<r.length;o++)r[o].runCondition(this.conditionValues,e)},t.prototype.runQuestionsTriggers=function(e,r){if(!(this.isDisplayMode||this.isDesignMode)){var n=this.getAllQuestions();n.forEach(function(o){return o.runTriggers(e,r)})}},t.prototype.checkIfNewPagesBecomeVisible=function(e){var r=this.pages.indexOf(this.currentPage);if(!(r<=e+1)){for(var n=e+1;n<r;n++)if(this.pages[n].isVisible){this.currentPage=this.pages[n];break}}},t.prototype.sendResult=function(e,r,n){var o=this;if(e===void 0&&(e=null),r===void 0&&(r=null),n===void 0&&(n=!1),!!this.isEditMode&&(n&&this.onPartialSend&&this.onPartialSend.fire(this,null),!e&&this.surveyPostId&&(e=this.surveyPostId),!!e&&(r&&(this.clientId=r),!(n&&!this.clientId)))){var s=this.createSurveyService();s.locale=this.getLocale();var a=this.surveyShowDataSaving||!n&&s.isSurveJSIOService;a&&this.setCompletedState("saving",""),s.sendResult(e,this.data,function(l,u,d){(a||s.isSurveJSIOService)&&(l?o.setCompletedState("success",""):o.setCompletedState("error",u));var v={success:l,response:u,request:d};o.onSendResult.fire(o,v)},this.clientId,n)}},t.prototype.getResult=function(e,r){var n=this;this.createSurveyService().getResult(e,r,function(o,s,a,l){n.onGetResult.fire(n,{success:o,data:s,dataList:a,response:l})})},t.prototype.loadSurveyFromService=function(e,r){e===void 0&&(e=null),r===void 0&&(r=null),e&&(this.surveyId=e),r&&(this.clientId=r);var n=this;this.isLoading=!0,this.onLoadingSurveyFromService(),r?this.createSurveyService().getSurveyJsonAndIsCompleted(this.surveyId,this.clientId,function(o,s,a,l){o&&(n.isCompletedBefore=a=="completed",n.loadSurveyFromServiceJson(s)),n.isLoading=!1}):this.createSurveyService().loadSurvey(this.surveyId,function(o,s,a){o&&n.loadSurveyFromServiceJson(s),n.isLoading=!1})},t.prototype.loadSurveyFromServiceJson=function(e){!e||(this.fromJSON(e),this.notifyAllQuestionsOnValueChanged(),this.onLoadSurveyFromService(),this.onLoadedSurveyFromService.fire(this,{}))},t.prototype.onLoadingSurveyFromService=function(){},t.prototype.onLoadSurveyFromService=function(){},t.prototype.resetVisibleIndexes=function(){for(var e=this.getAllQuestions(!0),r=0;r<e.length;r++)e[r].setVisibleIndex(-1);this.updateVisibleIndexes()},t.prototype.updateVisibleIndexes=function(){if(!(this.isLoadingFromJson||!!this.isEndLoadingFromJson||this.isLockingUpdateOnPageModes)){if(this.isRunningConditions&&this.onQuestionVisibleChanged.isEmpty&&this.onPageVisibleChanged.isEmpty){this.conditionUpdateVisibleIndexes=!0;return}if(this.isRunningElementsBindings){this.updateVisibleIndexAfterBindings=!0;return}if(this.updatePageVisibleIndexes(this.showPageNumbers),this.showQuestionNumbers=="onPage")for(var e=this.visiblePages,r=0;r<e.length;r++)e[r].setVisibleIndex(0);else for(var n=this.showQuestionNumbers=="on"?0:-1,r=0;r<this.pages.length;r++)n+=this.pages[r].setVisibleIndex(n);this.updateProgressText(!0)}},t.prototype.updatePageVisibleIndexes=function(e){this.updateButtonsVisibility();for(var r=0,n=0;n<this.pages.length;n++){var o=this.pages[n],s=o.isVisible&&(n>0||!o.isStartPage);o.visibleIndex=s?r++:-1,o.num=s?o.visibleIndex+1:-1}},t.prototype.fromJSON=function(e,r){if(!!e){this.questionHashesClear(),this.jsonErrors=null;var n=new ae;n.toObject(e,this,r),n.errors.length>0&&(this.jsonErrors=n.errors),this.onStateAndCurrentPageChanged(),this.updateState()}},t.prototype.startLoadingFromJson=function(e){i.prototype.startLoadingFromJson.call(this,e),e&&e.locale&&(this.locale=e.locale)},t.prototype.setJsonObject=function(e){this.fromJSON(e)},t.prototype.endLoadingFromJson=function(){this.isEndLoadingFromJson="processing",this.onFirstPageIsStartedChanged(),this.onQuestionsOnPageModeChanged("standard",!0),i.prototype.endLoadingFromJson.call(this),this.hasCookie&&(this.isCompletedBefore=!0),this.doElementsOnLoad(),this.isEndLoadingFromJson="conditions",this.runConditions(),this.notifyElementsOnAnyValueOrVariableChanged(""),this.isEndLoadingFromJson=null,this.updateVisibleIndexes(),this.updateHasLogo(),this.updateRenderBackgroundImage(),this.updateCurrentPage(),this.hasDescription=!!this.description,this.titleIsEmpty=this.locTitle.isEmpty,this.setCalculatedWidthModeUpdater()},t.prototype.updateNavigationCss=function(){this.navigationBar&&(this.updateNavigationBarCss(),this.updateNavigationItemCssCallback&&this.updateNavigationItemCssCallback())},t.prototype.updateNavigationBarCss=function(){var e=this.navigationBar;e.cssClasses=this.css.actionBar,e.containerCss=this.css.footer},t.prototype.createNavigationBar=function(){var e=new Se;return e.setItems(this.createNavigationActions()),e},t.prototype.createNavigationActions=function(){var e=this,r="sv-nav-btn",n=new G({id:"sv-nav-start",visible:new ne(function(){return e.isShowStartingPage}),visibleIndex:10,locTitle:this.locStartSurveyText,action:function(){return e.start()},component:r}),o=new G({id:"sv-nav-prev",visible:new ne(function(){return e.isShowPrevButton}),visibleIndex:20,data:{mouseDown:function(){return e.navigationMouseDown()}},locTitle:this.locPagePrevText,action:function(){return e.prevPage()},component:r}),s=new G({id:"sv-nav-next",visible:new ne(function(){return e.isShowNextButton}),visibleIndex:30,data:{mouseDown:function(){return e.nextPageMouseDown()}},locTitle:this.locPageNextText,action:function(){return e.nextPageUIClick()},component:r}),a=new G({id:"sv-nav-preview",visible:new ne(function(){return e.isPreviewButtonVisible}),visibleIndex:40,data:{mouseDown:function(){return e.navigationMouseDown()}},locTitle:this.locPreviewText,action:function(){return e.showPreview()},component:r}),l=new G({id:"sv-nav-complete",visible:new ne(function(){return e.isCompleteButtonVisible}),visibleIndex:50,data:{mouseDown:function(){return e.navigationMouseDown()}},locTitle:this.locCompleteText,action:function(){return e.taskManager.waitAndExecute(function(){return e.completeLastPage()})},component:r});return this.updateNavigationItemCssCallback=function(){n.innerCss=e.cssNavigationStart,o.innerCss=e.cssNavigationPrev,s.innerCss=e.cssNavigationNext,a.innerCss=e.cssNavigationPreview,l.innerCss=e.cssNavigationComplete},[n,o,s,a,l]},t.prototype.onBeforeRunConstructor=function(){},t.prototype.onBeforeCreating=function(){},t.prototype.onCreating=function(){},t.prototype.getProcessedTextValue=function(e){if(this.getProcessedTextValueCore(e),!this.onProcessTextValue.isEmpty){var r=this.isValueEmpty(e.value);this.onProcessTextValue.fire(this,e),e.isExists=e.isExists||r&&!this.isValueEmpty(e.value)}},t.prototype.getBuiltInVariableValue=function(e){if(e==="pageno"){var r=this.currentPage;return r!=null?this.visiblePages.indexOf(r)+1:0}if(e==="pagecount")return this.visiblePageCount;if(e==="correctedanswers"||e==="correctanswers"||e==="correctedanswercount")return this.getCorrectedAnswerCount();if(e==="incorrectedanswers"||e==="incorrectanswers"||e==="incorrectedanswercount")return this.getInCorrectedAnswerCount();if(e==="questioncount")return this.getQuizQuestionCount()},t.prototype.getProcessedTextValueCore=function(e){var r=e.name.toLocaleLowerCase();if(["no","require","title"].indexOf(r)===-1){var n=this.getBuiltInVariableValue(r);if(n!==void 0){e.isExists=!0,e.value=n;return}if(r==="locale"){e.isExists=!0,e.value=this.locale?this.locale:z.defaultLocale;return}var o=this.getVariable(r);if(o!==void 0){e.isExists=!0,e.value=o;return}var s=this.getFirstName(r);if(s){var a=s.useDisplayValuesInDynamicTexts;e.isExists=!0;var l=s.getValueName().toLowerCase();r=l+r.substring(l.length),r=r.toLocaleLowerCase();var u={};u[l]=e.returnDisplayValue&&a?s.getDisplayValue(!1,void 0):s.value,e.value=new ce().getValue(r,u);return}this.getProcessedValuesWithoutQuestion(e)}},t.prototype.getProcessedValuesWithoutQuestion=function(e){var r=this.getValue(e.name);if(r!==void 0){e.isExists=!0,e.value=r;return}var n=new ce,o=n.getFirstName(e.name);if(o!==e.name){var s={},a=this.getValue(o);P.isValueEmpty(a)&&(a=this.getVariable(o)),!P.isValueEmpty(a)&&(s[o]=a,e.value=n.getValue(e.name,s),e.isExists=n.hasValue(e.name,s))}},t.prototype.getFirstName=function(e){e=e.toLowerCase();var r;do r=this.getQuestionByValueName(e,!0),e=this.reduceFirstName(e);while(!r&&!!e);return r},t.prototype.reduceFirstName=function(e){var r=e.lastIndexOf("."),n=e.lastIndexOf("[");if(r<0&&n<0)return"";var o=Math.max(r,n);return e.substring(0,o)},t.prototype.clearUnusedValues=function(){this.isClearingUnsedValues=!0;for(var e=this.getAllQuestions(),r=0;r<e.length;r++)e[r].clearUnusedValues();this.clearInvisibleQuestionValues(),this.isClearingUnsedValues=!1},t.prototype.hasVisibleQuestionByValueName=function(e){var r=this.getQuestionsByValueName(e);if(!r)return!1;for(var n=0;n<r.length;n++){var o=r[n];if(o.isVisible&&o.isParentVisible&&!o.parentQuestion)return!0}return!1},t.prototype.questionsByValueName=function(e){var r=this.getQuestionsByValueName(e);return r||[]},t.prototype.clearInvisibleQuestionValues=function(){for(var e=this.clearInvisibleValues==="none"?"none":"onComplete",r=this.getAllQuestions(),n=0;n<r.length;n++)r[n].clearValueIfInvisible(e)},t.prototype.getVariable=function(e){if(!e)return null;e=e.toLowerCase();var r=this.variablesHash[e];return this.isValueEmpty(r)&&(e.indexOf(".")>-1||e.indexOf("[")>-1)&&new ce().hasValue(e,this.variablesHash)?new ce().getValue(e,this.variablesHash):r},t.prototype.setVariable=function(e,r){if(!!e){var n=this.getVariable(e);this.valuesHash&&delete this.valuesHash[e],e=e.toLowerCase(),this.variablesHash[e]=r,this.notifyElementsOnAnyValueOrVariableChanged(e),P.isTwoValueEquals(n,r)||(this.checkTriggersAndRunConditions(e,r,n),this.onVariableChanged.fire(this,{name:e,value:r}))}},t.prototype.getVariableNames=function(){var e=[];for(var r in this.variablesHash)e.push(r);return e},t.prototype.getUnbindValue=function(e){return this.editingObj?e:P.getUnbindValue(e)},t.prototype.getValue=function(e){if(!e||e.length==0)return null;var r=this.getDataValueCore(this.valuesHash,e);return this.getUnbindValue(r)},t.prototype.setValue=function(e,r,n,o,s){if(n===void 0&&(n=!1),o===void 0&&(o=!0),!this.isLockingUpdateOnPageModes){var a=r;if(o&&(a=this.questionOnValueChanging(e,r)),!(this.isValidateOnValueChanging&&this.checkErrorsOnValueChanging(e,a))&&!(!this.editingObj&&this.isValueEqual(e,a)&&this.isTwoValueEquals(a,r))){var l=this.getValue(e);this.isValueEmpyOnSetValue(e,a)?this.deleteDataValueCore(this.valuesHash,e):(a=this.getUnbindValue(a),this.setDataValueCore(this.valuesHash,e,a)),this.updateOnSetValue(e,a,l,n,o,s)}}},t.prototype.isValueEmpyOnSetValue=function(e,r){return this.isValueEmpty(r,!1)?!this.editingObj||r===null||r===void 0?!0:this.editingObj.getDefaultPropertyValue(e)===r:!1},t.prototype.updateOnSetValue=function(e,r,n,o,s,a){o===void 0&&(o=!1),s===void 0&&(s=!0),this.updateQuestionValue(e,r),!(o===!0||this.isDisposed||this.isRunningElementsBindings)&&(a=a||e,this.checkTriggersAndRunConditions(e,r,n),s&&this.notifyQuestionOnValueChanged(e,r,a),o!=="text"&&this.tryGoNextPageAutomatic(e))},t.prototype.isValueEqual=function(e,r){(r===""||r===void 0)&&(r=null);var n=this.getValue(e);return(n===""||n===void 0)&&(n=null),r===null||n===null?r===n:this.isTwoValueEquals(r,n)},t.prototype.doOnPageAdded=function(e){if(e.setSurveyImpl(this),e.name||(e.name=this.generateNewName(this.pages,"page")),this.questionHashesPanelAdded(e),this.updateVisibleIndexes(),!this.runningPages){this.isLoadingFromJson||(this.updateProgressText(),this.updateCurrentPage());var r={page:e};this.onPageAdded.fire(this,r)}},t.prototype.doOnPageRemoved=function(e){e.setSurveyImpl(null),!this.runningPages&&(e===this.currentPage&&this.updateCurrentPage(),this.updateVisibleIndexes(),this.updateProgressText(),this.updateLazyRenderingRowsOnRemovingElements())},t.prototype.generateNewName=function(e,r){for(var n={},o=0;o<e.length;o++)n[e[o].name]=!0;for(var s=1;n[r+s];)s++;return r+s},t.prototype.tryGoNextPageAutomatic=function(e){var r=this;if(!(!!this.isEndLoadingFromJson||!this.goNextPageAutomatic||!this.currentPage)){var n=this.getQuestionByValueName(e);if(!(!n||!!n&&(!n.visible||!n.supportGoNextPageAutomatic()))&&!(!n.validate(!1)&&!n.supportGoNextPageError())){var o=this.getCurrentPageQuestions();if(!(o.indexOf(n)<0)){for(var s=0;s<o.length;s++)if(o[s].hasInput&&o[s].isEmpty())return;if(!(this.isLastPage&&(this.goNextPageAutomatic!==!0||!this.allowCompleteSurveyAutomatic))&&!this.checkIsCurrentPageHasErrors(!1)){var a=this.currentPage,l=function(){a===r.currentPage&&(r.isLastPage?r.isShowPreviewBeforeComplete?r.showPreview():r.completeLastPage():r.nextPage())};tt.safeTimeOut(l,b.autoAdvanceDelay)}}}}},t.prototype.getComment=function(e){var r=this.getValue(e+this.commentSuffix);return r||""},t.prototype.setComment=function(e,r,n){if(n===void 0&&(n=!1),r||(r=""),!this.isTwoValueEquals(r,this.getComment(e))){var o=e+this.commentSuffix;r=this.questionOnValueChanging(o,r,e),this.isValueEmpty(r)?this.deleteDataValueCore(this.valuesHash,o):this.setDataValueCore(this.valuesHash,o,r);var s=this.getQuestionsByValueName(e);if(s)for(var a=0;a<s.length;a++)s[a].updateCommentFromSurvey(r),this.checkQuestionErrorOnValueChanged(s[a]);n||this.checkTriggersAndRunConditions(e,this.getValue(e),void 0),n!=="text"&&this.tryGoNextPageAutomatic(e);var l=this.getQuestionByValueName(e);l&&(this.onValueChanged.fire(this,{name:o,question:l,value:r}),l.comment=r,l.comment!=r&&(l.comment=r))}},t.prototype.clearValue=function(e){this.setValue(e,null),this.setComment(e,null)},Object.defineProperty(t.prototype,"clearValueOnDisableItems",{get:function(){return this.getPropertyValue("clearValueOnDisableItems",!1)},set:function(e){this.setPropertyValue("clearValueOnDisableItems",e)},enumerable:!1,configurable:!0}),t.prototype.getQuestionClearIfInvisible=function(e){return this.isShowingPreview||this.runningPages?"none":e!=="default"?e:this.clearInvisibleValues},t.prototype.questionVisibilityChanged=function(e,r,n){n&&this.updateVisibleIndexes(),this.onQuestionVisibleChanged.fire(this,{question:e,name:e.name,visible:r})},t.prototype.pageVisibilityChanged=function(e,r){this.isLoadingFromJson||((r&&!this.currentPage||e===this.currentPage)&&this.updateCurrentPage(),this.updateVisibleIndexes(),this.onPageVisibleChanged.fire(this,{page:e,visible:r}))},t.prototype.panelVisibilityChanged=function(e,r){this.updateVisibleIndexes(),this.onPanelVisibleChanged.fire(this,{panel:e,visible:r})},t.prototype.questionCreated=function(e){this.onQuestionCreated.fire(this,{question:e})},t.prototype.questionAdded=function(e,r,n,o){e.name||(e.name=this.generateNewName(this.getAllQuestions(!1,!0),"question")),e.page&&this.questionHashesAdded(e),this.currentPage||this.updateCurrentPage(),this.updateVisibleIndexes(),this.setCalculatedWidthModeUpdater(),this.canFireAddElement()&&this.onQuestionAdded.fire(this,{question:e,name:e.name,index:r,parent:n,page:o,parentPanel:n,rootPanel:o})},t.prototype.canFireAddElement=function(){return!this.isMovingQuestion||this.isDesignMode&&!b.supportCreatorV2},t.prototype.questionRemoved=function(e){this.questionHashesRemoved(e,e.name,e.getValueName()),this.updateVisibleIndexes(),this.onQuestionRemoved.fire(this,{question:e,name:e.name}),this.updateLazyRenderingRowsOnRemovingElements()},t.prototype.questionRenamed=function(e,r,n){this.questionHashesRemoved(e,r,n),this.questionHashesAdded(e)},t.prototype.questionHashesClear=function(){this.questionHashes.names={},this.questionHashes.namesInsensitive={},this.questionHashes.valueNames={},this.questionHashes.valueNamesInsensitive={}},t.prototype.questionHashesPanelAdded=function(e){if(!this.isLoadingFromJson)for(var r=e.questions,n=0;n<r.length;n++)this.questionHashesAdded(r[n])},t.prototype.questionHashesAdded=function(e){this.questionHashAddedCore(this.questionHashes.names,e,e.name),this.questionHashAddedCore(this.questionHashes.namesInsensitive,e,e.name.toLowerCase()),this.questionHashAddedCore(this.questionHashes.valueNames,e,e.getValueName()),this.questionHashAddedCore(this.questionHashes.valueNamesInsensitive,e,e.getValueName().toLowerCase())},t.prototype.questionHashesRemoved=function(e,r,n){r&&(this.questionHashRemovedCore(this.questionHashes.names,e,r),this.questionHashRemovedCore(this.questionHashes.namesInsensitive,e,r.toLowerCase())),n&&(this.questionHashRemovedCore(this.questionHashes.valueNames,e,n),this.questionHashRemovedCore(this.questionHashes.valueNamesInsensitive,e,n.toLowerCase()))},t.prototype.questionHashAddedCore=function(e,r,n){var o=e[n];if(o){var o=e[n];o.indexOf(r)<0&&o.push(r)}else e[n]=[r]},t.prototype.questionHashRemovedCore=function(e,r,n){var o=e[n];if(!!o){var s=o.indexOf(r);s>-1&&o.splice(s,1),o.length==0&&delete e[n]}},t.prototype.panelAdded=function(e,r,n,o){e.name||(e.name=this.generateNewName(this.getAllPanels(!1,!0),"panel")),this.questionHashesPanelAdded(e),this.updateVisibleIndexes(),this.canFireAddElement()&&this.onPanelAdded.fire(this,{panel:e,name:e.name,index:r,parent:n,page:o,parentPanel:n,rootPanel:o})},t.prototype.panelRemoved=function(e){this.updateVisibleIndexes(),this.onPanelRemoved.fire(this,{panel:e,name:e.name}),this.updateLazyRenderingRowsOnRemovingElements()},t.prototype.validateQuestion=function(e){if(this.onValidateQuestion.isEmpty)return null;var r={name:e.name,question:e,value:e.value,error:null};return this.onValidateQuestion.fire(this,r),r.error?new Ce(r.error,this):null},t.prototype.validatePanel=function(e){if(this.onValidatePanel.isEmpty)return null;var r={name:e.name,panel:e,error:null};return this.onValidatePanel.fire(this,r),r.error?new Ce(r.error,this):null},t.prototype.processHtml=function(e,r){r||(r="");var n={html:e,reason:r};return this.onProcessHtml.fire(this,n),this.processText(n.html,!0)},t.prototype.processText=function(e,r){return this.processTextEx(e,r,!1).text},t.prototype.processTextEx=function(e,r,n){var o={text:this.processTextCore(e,r,n),hasAllValuesOnLastRun:!0};return o.hasAllValuesOnLastRun=this.textPreProcessor.hasAllValuesOnLastRun,o},Object.defineProperty(t.prototype,"textPreProcessor",{get:function(){var e=this;return this.textPreProcessorValue||(this.textPreProcessorValue=new Zr,this.textPreProcessorValue.onProcess=function(r){e.getProcessedTextValue(r)}),this.textPreProcessorValue},enumerable:!1,configurable:!0}),t.prototype.processTextCore=function(e,r,n){return n===void 0&&(n=!1),this.isDesignMode?e:this.textPreProcessor.process(e,r,n)},t.prototype.getSurveyMarkdownHtml=function(e,r,n){var o={element:e,text:r,name:n,html:null};return this.onTextMarkdown.fire(this,o),o.html},t.prototype.getCorrectedAnswerCount=function(){return this.getCorrectAnswerCount()},t.prototype.getCorrectAnswerCount=function(){return this.getCorrectedAnswerCountCore(!0)},t.prototype.getQuizQuestionCount=function(){for(var e=this.getQuizQuestions(),r=0,n=0;n<e.length;n++)r+=e[n].quizQuestionCount;return r},t.prototype.getInCorrectedAnswerCount=function(){return this.getInCorrectAnswerCount()},t.prototype.getInCorrectAnswerCount=function(){return this.getCorrectedAnswerCountCore(!1)},t.prototype.onCorrectQuestionAnswer=function(e,r){this.onIsAnswerCorrect.isEmpty||(r.question=e,this.onIsAnswerCorrect.fire(this,r))},t.prototype.getCorrectedAnswerCountCore=function(e){for(var r=this.getQuizQuestions(),n=0,o=0;o<r.length;o++){var s=r[o],a=s.correctAnswerCount;e?n+=a:n+=s.quizQuestionCount-a}return n},t.prototype.getCorrectedAnswers=function(){return this.getCorrectedAnswerCount()},t.prototype.getInCorrectedAnswers=function(){return this.getInCorrectedAnswerCount()},Object.defineProperty(t.prototype,"showTimerPanel",{get:function(){return this.getPropertyValue("showTimerPanel")},set:function(e){this.setPropertyValue("showTimerPanel",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isTimerPanelShowingOnTop",{get:function(){return this.showTimerPanel=="top"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isTimerPanelShowingOnBottom",{get:function(){return this.showTimerPanel=="bottom"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showTimerPanelMode",{get:function(){return this.getPropertyValue("showTimerPanelMode")},set:function(e){this.setPropertyValue("showTimerPanelMode",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"widthMode",{get:function(){return this.getPropertyValue("widthMode")},set:function(e){this.setPropertyValue("widthMode",e)},enumerable:!1,configurable:!0}),t.prototype.setCalculatedWidthModeUpdater=function(){var e=this;this.calculatedWidthModeUpdater&&this.calculatedWidthModeUpdater.dispose(),this.calculatedWidthModeUpdater=new ne(function(){return e.calculateWidthMode()}),this.calculatedWidthMode=this.calculatedWidthModeUpdater},t.prototype.calculateWidthMode=function(){if(this.widthMode=="auto"){var e=!1;return this.pages.forEach(function(r){r.needResponsiveWidth()&&(e=!0)}),e?"responsive":"static"}return this.widthMode},Object.defineProperty(t.prototype,"width",{get:function(){return this.getPropertyValue("width")},set:function(e){this.setPropertyValue("width",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedWidth",{get:function(){var e=this.getPropertyValue("width");return e&&!isNaN(e)&&(e=e+"px"),this.getPropertyValue("calculatedWidthMode")=="static"&&e||void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timerInfo",{get:function(){return this.getTimerInfo()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timerClock",{get:function(){var e,r;if(this.currentPage){var n=this.getTimerInfo(),o=n.spent,s=n.limit,a=n.minorSpent,l=n.minorLimit;s>0?e=this.getDisplayClockTime(s-o):e=this.getDisplayClockTime(o),a!==void 0&&(l>0?r=this.getDisplayClockTime(l-a):r=this.getDisplayClockTime(a))}return{majorText:e,minorText:r}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timerInfoText",{get:function(){var e={text:this.getTimerInfoText()};this.onTimerPanelInfoText.fire(this,e);var r=new we(this,!0);return r.text=e.text,r.textOrHtml},enumerable:!1,configurable:!0}),t.prototype.getTimerInfo=function(){var e=this.currentPage;if(!e)return{spent:0,limit:0};var r=e.timeSpent,n=this.timeSpent,o=e.getMaxTimeToFinish(),s=this.maxTimeToFinish;return this.showTimerPanelMode=="page"?{spent:r,limit:o}:this.showTimerPanelMode=="survey"?{spent:n,limit:s}:o>0&&s>0?{spent:r,limit:o,minorSpent:n,minorLimit:s}:o>0?{spent:r,limit:o,minorSpent:n}:s>0?{spent:n,limit:s,minorSpent:r}:{spent:r,minorSpent:n}},t.prototype.getTimerInfoText=function(){var e=this.currentPage;if(!e)return"";var r=this.getDisplayTime(e.timeSpent),n=this.getDisplayTime(this.timeSpent),o=e.getMaxTimeToFinish(),s=this.getDisplayTime(o),a=this.getDisplayTime(this.maxTimeToFinish);if(this.showTimerPanelMode=="page")return this.getTimerInfoPageText(e,r,s);if(this.showTimerPanelMode=="survey")return this.getTimerInfoSurveyText(n,a);if(this.showTimerPanelMode=="all"){if(o<=0&&this.maxTimeToFinish<=0)return this.getLocalizationFormatString("timerSpentAll",r,n);if(o>0&&this.maxTimeToFinish>0)return this.getLocalizationFormatString("timerLimitAll",r,s,n,a);var l=this.getTimerInfoPageText(e,r,s),u=this.getTimerInfoSurveyText(n,a);return l+" "+u}return""},t.prototype.getTimerInfoPageText=function(e,r,n){return!!e&&e.getMaxTimeToFinish()>0?this.getLocalizationFormatString("timerLimitPage",r,n):this.getLocalizationFormatString("timerSpentPage",r,n)},t.prototype.getTimerInfoSurveyText=function(e,r){var n=this.maxTimeToFinish>0?"timerLimitSurvey":"timerSpentSurvey";return this.getLocalizationFormatString(n,e,r)},t.prototype.getDisplayClockTime=function(e){e<0&&(e=0);var r=Math.floor(e/60),n=e%60,o=n.toString();return n<10&&(o="0"+o),r+":"+o},t.prototype.getDisplayTime=function(e){var r=Math.floor(e/60),n=e%60,o="";return r>0&&(o+=r+" "+this.getLocalizationString("timerMin")),o&&n==0?o:(o&&(o+=" "),o+n+" "+this.getLocalizationString("timerSec"))},Object.defineProperty(t.prototype,"timerModel",{get:function(){return this.timerModelValue},enumerable:!1,configurable:!0}),t.prototype.startTimer=function(){this.isEditMode&&this.timerModel.start()},t.prototype.startTimerFromUI=function(){this.showTimerPanel!="none"&&this.state==="running"&&this.startTimer()},t.prototype.stopTimer=function(){this.timerModel.stop()},Object.defineProperty(t.prototype,"timeSpent",{get:function(){return this.timerModel.spent},set:function(e){this.timerModel.spent=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxTimeToFinish",{get:function(){return this.getPropertyValue("maxTimeToFinish",0)},set:function(e){this.setPropertyValue("maxTimeToFinish",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxTimeToFinishPage",{get:function(){return this.getPropertyValue("maxTimeToFinishPage",0)},set:function(e){this.setPropertyValue("maxTimeToFinishPage",e)},enumerable:!1,configurable:!0}),t.prototype.doTimer=function(e){if(this.onTimer.fire(this,{}),this.maxTimeToFinish>0&&this.maxTimeToFinish<=this.timeSpent&&(this.timeSpent=this.maxTimeToFinish,this.completeLastPage()),e){var r=e.getMaxTimeToFinish();r>0&&r==e.timeSpent&&(this.isLastPage?this.completeLastPage():this.nextPage())}},Object.defineProperty(t.prototype,"inSurvey",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getSurveyData=function(){return this},t.prototype.getSurvey=function(){return this},t.prototype.getTextProcessor=function(){return this},t.prototype.getObjects=function(e,r){var n=[];return Array.prototype.push.apply(n,this.getPagesByNames(e)),Array.prototype.push.apply(n,this.getQuestionsByNames(r)),n},t.prototype.setTriggerValue=function(e,r,n){if(!!e)if(n)this.setVariable(e,r);else{var o=this.getQuestionByName(e);if(o)o.value=r;else{var s=new ce,a=s.getFirstName(e);if(a==e)this.setValue(e,r);else{if(!this.getQuestionByName(a))return;var l=this.getUnbindValue(this.getFilteredValues());s.setValue(l,e,r),this.setValue(a,l[a])}}}},t.prototype.copyTriggerValue=function(e,r,n){if(!(!e||!r)){var o;if(n)o=this.processText("{"+r+"}",!0);else{var s=new ce;o=s.getValue(r,this.getFilteredValues())}this.setTriggerValue(e,o,!1)}},t.prototype.triggerExecuted=function(e){this.onTriggerExecuted.fire(this,{trigger:e})},t.prototype.startMovingQuestion=function(){this.isMovingQuestion=!0},t.prototype.stopMovingQuestion=function(){this.isMovingQuestion=!1},Object.defineProperty(t.prototype,"isQuestionDragging",{get:function(){return this.isMovingQuestion},enumerable:!1,configurable:!0}),t.prototype.focusQuestion=function(e){return this.focusQuestionByInstance(this.getQuestionByName(e,!0))},t.prototype.focusQuestionByInstance=function(e,r){var n;if(r===void 0&&(r=!1),!e||!e.isVisible||!e.page)return!1;var o=(n=this.focusingQuestionInfo)===null||n===void 0?void 0:n.question;if(o===e)return!1;this.focusingQuestionInfo={question:e,onError:r},this.skippedPages.push({from:this.currentPage,to:e.page});var s=this.activePage!==e.page&&!e.page.isStartPage;return s&&(this.currentPage=e.page),s||this.focusQuestionInfo(),!0},t.prototype.focusQuestionInfo=function(){var e,r=(e=this.focusingQuestionInfo)===null||e===void 0?void 0:e.question;!!r&&!r.isDisposed&&r.focus(this.focusingQuestionInfo.onError),this.focusingQuestionInfo=void 0},t.prototype.questionEditFinishCallback=function(e,r){var n=this.enterKeyAction||b.enterKeyAction;if(n=="loseFocus"&&r.target.blur(),n=="moveToNextEditor"){var o=this.currentPage.questions,s=o.indexOf(e);s>-1&&s<o.length-1?o[s+1].focus():r.target.blur()}},t.prototype.elementWrapperComponentNameCore=function(e,r,n,o,s){if(this.onElementWrapperComponentName.isEmpty)return e;var a={componentName:e,element:r,wrapperName:n,reason:o,item:s};return this.onElementWrapperComponentName.fire(this,a),a.componentName},t.prototype.elementWrapperDataCore=function(e,r,n,o,s){if(this.onElementWrapperComponentData.isEmpty)return e;var a={data:e,element:r,wrapperName:n,reason:o,item:s};return this.onElementWrapperComponentData.fire(this,a),a.data},t.prototype.getElementWrapperComponentName=function(e,r){var n=r==="logo-image"?"sv-logo-image":t.TemplateRendererComponentName;return this.elementWrapperComponentNameCore(n,e,"component",r)},t.prototype.getQuestionContentWrapperComponentName=function(e){return this.elementWrapperComponentNameCore(t.TemplateRendererComponentName,e,"content-component")},t.prototype.getRowWrapperComponentName=function(e){return this.elementWrapperComponentNameCore(t.TemplateRendererComponentName,e,"row")},t.prototype.getItemValueWrapperComponentName=function(e,r){return this.elementWrapperComponentNameCore(t.TemplateRendererComponentName,r,"itemvalue",void 0,e)},t.prototype.getElementWrapperComponentData=function(e,r){return this.elementWrapperDataCore(e,e,"component",r)},t.prototype.getRowWrapperComponentData=function(e){return this.elementWrapperDataCore(e,e,"row")},t.prototype.getItemValueWrapperComponentData=function(e,r){return this.elementWrapperDataCore(e,r,"itemvalue",void 0,e)},t.prototype.getMatrixCellTemplateData=function(e){var r=e.question;return this.elementWrapperDataCore(r,r,"cell")},t.prototype.searchText=function(e){e&&(e=e.toLowerCase());for(var r=[],n=0;n<this.pages.length;n++)this.pages[n].searchText(e,r);return r},t.prototype.getSkeletonComponentName=function(e){return this.skeletonComponentName},t.prototype.addLayoutElement=function(e){var r=this.removeLayoutElement(e.id);return this.layoutElements.push(e),r},t.prototype.findLayoutElement=function(e){var r=this.layoutElements.filter(function(n){return n.id===e})[0];return r},t.prototype.removeLayoutElement=function(e){var r=this.findLayoutElement(e);if(r){var n=this.layoutElements.indexOf(r);this.layoutElements.splice(n,1)}return r},t.prototype.getContainerContent=function(e){for(var r=[],n=0,o=this.layoutElements;n<o.length;n++){var s=o[n];if(this.mode!=="display"&&ke(s.id,"timerpanel"))e==="header"&&this.isTimerPanelShowingOnTop&&!this.isShowStartingPage&&r.push(s),e==="footer"&&this.isTimerPanelShowingOnBottom&&!this.isShowStartingPage&&r.push(s);else if(this.state==="running"&&ke(s.id,this.progressBarComponentName)){if(this.questionsOnPageMode!="singlePage"){var a=this.findLayoutElement("advanced-header"),l=a&&a.data,u=!l||l.hasBackground;ke(this.showProgressBar,"aboveHeader")&&(u=!1),ke(this.showProgressBar,"belowHeader")&&(u=!0),e==="header"&&!u&&(s.index=-150,this.isShowProgressBarOnTop&&!this.isShowStartingPage&&r.push(s)),e==="center"&&u&&(s.index&&delete s.index,this.isShowProgressBarOnTop&&!this.isShowStartingPage&&r.push(s)),e==="footer"&&this.isShowProgressBarOnBottom&&!this.isShowStartingPage&&r.push(s)}}else ke(s.id,"buttons-navigation")?(e==="contentTop"&&["top","both"].indexOf(this.isNavigationButtonsShowing)!==-1&&r.push(s),e==="contentBottom"&&["bottom","both"].indexOf(this.isNavigationButtonsShowing)!==-1&&r.push(s)):this.state==="running"&&ke(s.id,"toc-navigation")&&this.showTOC?(e==="left"&&["left","both"].indexOf(this.tocLocation)!==-1&&r.push(s),e==="right"&&["right","both"].indexOf(this.tocLocation)!==-1&&r.push(s)):ke(s.id,"advanced-header")?(this.state==="running"||this.state==="starting")&&s.container===e&&r.push(s):(Array.isArray(s.container)&&s.container.indexOf(e)!==-1||s.container===e)&&r.push(s)}return r.sort(function(d,v){return(d.index||0)-(v.index||0)}),r},t.prototype.processPopupVisiblityChanged=function(e,r,n){this.onPopupVisibleChanged.fire(this,{question:e,popup:r,visible:n})},t.prototype.processOpenDropdownMenu=function(e,r){var n=Object.assign({question:e},r);this.onOpenDropdownMenu.fire(this,n),r.menuType=n.menuType},t.prototype.applyTheme=function(e){var r=this;if(!!e){if(Object.keys(e).forEach(function(o){o!=="header"&&(o==="isPanelless"?r.isCompact=e[o]:r[o]=e[o])}),this.headerView==="advanced"||"header"in e){this.removeLayoutElement("advanced-header");var n=new or;n.fromTheme(e),this.insertAdvancedHeader(n)}this.themeChanged(e)}},t.prototype.themeChanged=function(e){this.getAllQuestions().forEach(function(r){return r.themeChanged(e)})},t.prototype.dispose=function(){if(this.unConnectEditingObj(),this.removeScrollEventListener(),this.destroyResizeObserver(),this.rootElement=void 0,this.layoutElements){for(var e=0;e<this.layoutElements.length;e++)!!this.layoutElements[e].data&&this.layoutElements[e].data!==this&&this.layoutElements[e].data.dispose&&this.layoutElements[e].data.dispose();this.layoutElements.splice(0,this.layoutElements.length)}if(i.prototype.dispose.call(this),this.editingObj=null,!!this.pages){this.currentPage=null;for(var e=0;e<this.pages.length;e++)this.pages[e].setSurveyImpl(void 0),this.pages[e].dispose();this.pages.splice(0,this.pages.length),this.disposeCallback&&this.disposeCallback()}},t.prototype._isElementShouldBeSticky=function(e){if(!e)return!1;var r=this.rootElement.querySelector(e);return r?this.rootElement.scrollTop>0&&r.getBoundingClientRect().y<=this.rootElement.getBoundingClientRect().y:!1},t.prototype.onScroll=function(){this.rootElement&&(this._isElementShouldBeSticky(".sv-components-container-center")?this.rootElement.classList&&this.rootElement.classList.add("sv-root--sticky-top"):this.rootElement.classList&&this.rootElement.classList.remove("sv-root--sticky-top")),this.onScrollCallback&&this.onScrollCallback()},t.prototype.addScrollEventListener=function(){var e=this,r;this.scrollHandler=function(){e.onScroll()},this.rootElement.addEventListener("scroll",this.scrollHandler),this.rootElement.getElementsByTagName("form")[0]&&this.rootElement.getElementsByTagName("form")[0].addEventListener("scroll",this.scrollHandler),this.css.rootWrapper&&((r=this.rootElement.getElementsByClassName(this.css.rootWrapper)[0])===null||r===void 0||r.addEventListener("scroll",this.scrollHandler))},t.prototype.removeScrollEventListener=function(){var e;!!this.rootElement&&!!this.scrollHandler&&(this.rootElement.removeEventListener("scroll",this.scrollHandler),this.rootElement.getElementsByTagName("form")[0]&&this.rootElement.getElementsByTagName("form")[0].removeEventListener("scroll",this.scrollHandler),this.css.rootWrapper&&((e=this.rootElement.getElementsByClassName(this.css.rootWrapper)[0])===null||e===void 0||e.removeEventListener("scroll",this.scrollHandler)))},t.TemplateRendererComponentName="sv-template-renderer",t.platform="unknown",ee([y()],t.prototype,"completedCss",void 0),ee([y()],t.prototype,"completedBeforeCss",void 0),ee([y()],t.prototype,"loadingBodyCss",void 0),ee([y()],t.prototype,"containerCss",void 0),ee([y({onSet:function(e,r){r.updateCss()}})],t.prototype,"fitToContainer",void 0),ee([y({onSet:function(e,r){if(e==="advanced"){var n=r.findLayoutElement("advanced-header");if(!n){var o=new or;o.logoPositionX=r.logoPosition==="right"?"right":"left",o.logoPositionY="middle",o.titlePositionX=r.logoPosition==="right"?"left":"right",o.titlePositionY="middle",o.descriptionPositionX=r.logoPosition==="right"?"left":"right",o.descriptionPositionY="middle",r.insertAdvancedHeader(o)}}else r.removeLayoutElement("advanced-header")}})],t.prototype,"headerView",void 0),ee([y()],t.prototype,"showBrandInfo",void 0),ee([y()],t.prototype,"enterKeyAction",void 0),ee([y()],t.prototype,"lazyRenderingFirstBatchSizeValue",void 0),ee([y({defaultValue:!0})],t.prototype,"titleIsEmpty",void 0),ee([y({defaultValue:{}})],t.prototype,"cssVariables",void 0),ee([y()],t.prototype,"_isMobile",void 0),ee([y()],t.prototype,"_isCompact",void 0),ee([y({onSet:function(e,r){r.updateCss()}})],t.prototype,"backgroundImage",void 0),ee([y()],t.prototype,"renderBackgroundImage",void 0),ee([y()],t.prototype,"backgroundImageFit",void 0),ee([y({onSet:function(e,r){r.updateCss()}})],t.prototype,"backgroundImageAttachment",void 0),ee([y()],t.prototype,"backgroundImageStyle",void 0),ee([y()],t.prototype,"wrapperFormCss",void 0),ee([y({getDefaultValue:function(e){return e.progressBarType==="buttons"}})],t.prototype,"progressBarShowPageTitles",void 0),ee([y()],t.prototype,"progressBarShowPageNumbers",void 0),ee([y()],t.prototype,"progressBarInheritWidthFrom",void 0),ee([y()],t.prototype,"rootCss",void 0),ee([y()],t.prototype,"gridLayoutEnabled",void 0),ee([y()],t.prototype,"calculatedWidthMode",void 0),ee([ue()],t.prototype,"layoutElements",void 0),t}(Ut);function ke(i,t){return!i||!t?!1:i.toUpperCase()===t.toUpperCase()}x.addClass("survey",[{name:"locale",choices:function(){return z.getLocales(!0)},onGetValue:function(i){return i.locale==z.defaultLocale?null:i.locale}},{name:"title",serializationProperty:"locTitle",dependsOn:"locale"},{name:"description:text",serializationProperty:"locDescription",dependsOn:"locale"},{name:"logo:file",serializationProperty:"locLogo"},{name:"logoWidth",default:"300px",minValue:0},{name:"logoHeight",default:"200px",minValue:0},{name:"logoFit",default:"contain",choices:["none","contain","cover","fill"]},{name:"logoPosition",default:"left",choices:["none","left","right","top","bottom"]},{name:"focusFirstQuestionAutomatic:boolean"},{name:"focusOnFirstError:boolean",default:!0},{name:"completedHtml:html",serializationProperty:"locCompletedHtml"},{name:"completedBeforeHtml:html",serializationProperty:"locCompletedBeforeHtml"},{name:"completedHtmlOnCondition:htmlconditions",className:"htmlconditionitem",isArray:!0},{name:"loadingHtml:html",serializationProperty:"locLoadingHtml"},{name:"pages:surveypages",className:"page",isArray:!0,onSerializeValue:function(i){return i.originalPages||i.pages}},{name:"elements",alternativeName:"questions",baseClassName:"question",visible:!1,isLightSerializable:!1,onGetValue:function(i){return null},onSetValue:function(i,t,e){i.pages.splice(0,i.pages.length);var r=i.addNewPage("");e.toObject({questions:t},r,e==null?void 0:e.options)}},{name:"triggers:triggers",baseClassName:"surveytrigger",classNamePart:"trigger"},{name:"calculatedValues:calculatedvalues",className:"calculatedvalue",isArray:!0},{name:"surveyId",visible:!1},{name:"surveyPostId",visible:!1},{name:"surveyShowDataSaving:boolean",visible:!1},"cookieName","sendResultOnPageNext:boolean",{name:"showNavigationButtons",default:"bottom",choices:["none","top","bottom","both"]},{name:"showPrevButton:boolean",default:!0,visibleIf:function(i){return i.showNavigationButtons!=="none"}},{name:"showTitle:boolean",default:!0},{name:"showPageTitles:boolean",default:!0},{name:"showCompletedPage:boolean",default:!0},"navigateToUrl",{name:"navigateToUrlOnCondition:urlconditions",className:"urlconditionitem",isArray:!0},{name:"questionsOrder",default:"initial",choices:["initial","random"]},{name:"matrixDragHandleArea",visible:!1,default:"entireItem",choices:["entireItem","icon"]},"showPageNumbers:boolean",{name:"showQuestionNumbers",default:"on",choices:["on","onPage","off"]},{name:"questionTitleLocation",default:"top",choices:["top","bottom","left"]},{name:"questionDescriptionLocation",default:"underTitle",choices:["underInput","underTitle"]},{name:"questionErrorLocation",default:"top",choices:["top","bottom"]},{name:"showProgressBar",default:"off",choices:["off","auto","aboveheader","belowheader","bottom","topbottom"]},{name:"progressBarType",default:"pages",choices:["pages","questions","requiredQuestions","correctQuestions"],visibleIf:function(i){return i.showProgressBar!=="off"}},{name:"progressBarShowPageTitles:switch",category:"navigation",visibleIf:function(i){return i.showProgressBar!=="off"&&i.progressBarType==="pages"}},{name:"progressBarShowPageNumbers:switch",default:!1,category:"navigation",visibleIf:function(i){return i.showProgressBar!=="off"&&i.progressBarType==="pages"}},{name:"progressBarInheritWidthFrom",default:"container",choices:["container","survey"],category:"navigation",visibleIf:function(i){return i.showProgressBar!=="off"&&i.progressBarType==="pages"}},{name:"showTOC:switch",default:!1},{name:"tocLocation",default:"left",choices:["left","right"],dependsOn:["showTOC"],visibleIf:function(i){return!!i&&i.showTOC}},{name:"mode",default:"edit",choices:["edit","display"]},{name:"storeOthersAsComment:boolean",default:!0},{name:"maxTextLength:number",default:0,minValue:0},{name:"maxOthersLength:number",default:0,minValue:0},{name:"goNextPageAutomatic:boolean",onSetValue:function(i,t){t!=="autogonext"&&(t=P.isTwoValueEquals(t,!0)),i.setPropertyValue("goNextPageAutomatic",t)}},{name:"allowCompleteSurveyAutomatic:boolean",default:!0,visibleIf:function(i){return i.goNextPageAutomatic===!0}},{name:"clearInvisibleValues",default:"onComplete",choices:["none","onComplete","onHidden","onHiddenContainer"]},{name:"checkErrorsMode",default:"onNextPage",choices:["onNextPage","onValueChanged","onComplete"]},{name:"validateVisitedEmptyFields:boolean",dependsOn:"checkErrorsMode",visibleIf:function(i){return i.checkErrorsMode==="onValueChanged"}},{name:"textUpdateMode",default:"onBlur",choices:["onBlur","onTyping"]},{name:"autoGrowComment:boolean",default:!1},{name:"allowResizeComment:boolean",default:!0},{name:"commentAreaRows:number",minValue:1},{name:"startSurveyText",serializationProperty:"locStartSurveyText",visibleIf:function(i){return i.firstPageIsStarted}},{name:"pagePrevText",serializationProperty:"locPagePrevText",visibleIf:function(i){return i.showNavigationButtons!=="none"&&i.showPrevButton}},{name:"pageNextText",serializationProperty:"locPageNextText",visibleIf:function(i){return i.showNavigationButtons!=="none"}},{name:"completeText",serializationProperty:"locCompleteText",visibleIf:function(i){return i.showNavigationButtons!=="none"}},{name:"previewText",serializationProperty:"locPreviewText",visibleIf:function(i){return i.showPreviewBeforeComplete!=="noPreview"}},{name:"editText",serializationProperty:"locEditText",visibleIf:function(i){return i.showPreviewBeforeComplete!=="noPreview"}},{name:"requiredText",default:"*"},{name:"questionStartIndex",dependsOn:["showQuestionNumbers"],visibleIf:function(i){return!i||i.showQuestionNumbers!=="off"}},{name:"questionTitlePattern",default:"numTitleRequire",dependsOn:["questionStartIndex","requiredText"],choices:function(i){return i?i.getQuestionTitlePatternOptions():[]}},{name:"questionTitleTemplate",visible:!1,isSerializable:!1,serializationProperty:"locQuestionTitleTemplate"},{name:"firstPageIsStarted:boolean",default:!1},{name:"isSinglePage:boolean",default:!1,visible:!1,isSerializable:!1},{name:"questionsOnPageMode",default:"standard",choices:["standard","singlePage","questionPerPage"]},{name:"showPreviewBeforeComplete",default:"noPreview",choices:["noPreview","showAllQuestions","showAnsweredQuestions"]},{name:"maxTimeToFinish:number",default:0,minValue:0},{name:"maxTimeToFinishPage:number",default:0,minValue:0},{name:"showTimerPanel",default:"none",choices:["none","top","bottom"]},{name:"showTimerPanelMode",default:"all",choices:["page","survey","all"]},{name:"widthMode",default:"auto",choices:["auto","static","responsive"]},{name:"gridLayoutEnabled:boolean",default:!1},{name:"width",visibleIf:function(i){return i.widthMode==="static"}},{name:"fitToContainer:boolean",default:!0,visible:!1},{name:"headerView",default:"basic",choices:["basic","advanced"],visible:!1},{name:"backgroundImage:file",visible:!1},{name:"backgroundImageFit",default:"cover",choices:["auto","contain","cover"],visible:!1},{name:"backgroundImageAttachment",default:"scroll",choices:["scroll","fixed"],visible:!1},{name:"backgroundOpacity:number",minValue:0,maxValue:1,default:1,visible:!1},{name:"showBrandInfo:boolean",default:!1,visible:!1}]);var jo=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),dn=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},gn=function(i){jo(t,i);function t(e){var r=i.call(this,e)||this;r.otherItemValue=new q("other"),r.isSettingDefaultValue=!1,r.isSettingComment=!1,r.isRunningChoices=!1,r.isFirstLoadChoicesFromUrl=!0,r.isUpdatingChoicesDependedQuestions=!1,r.headItemsCount=0,r.footItemsCount=0,r.prevIsOtherSelected=!1,r.noneItemValue=r.createDefaultItem(b.noneItemValue,"noneText","noneItemText"),r.refuseItemValue=r.createDefaultItem(b.refuseItemValue,"refuseText","refuseItemText"),r.dontKnowItemValue=r.createDefaultItem(b.dontKnowItemValue,"dontKnowText","dontKnowItemText"),r.createItemValues("choices"),r.registerPropertyChangedHandlers(["choices"],function(){r.filterItems()||r.onVisibleChoicesChanged()}),r.registerPropertyChangedHandlers(["choicesFromQuestion","choicesFromQuestionMode","choiceValuesFromQuestion","choiceTextsFromQuestion","showNoneItem","showRefuseItem","showDontKnowItem","isUsingRestful","isMessagePanelVisible"],function(){r.onVisibleChoicesChanged()}),r.registerPropertyChangedHandlers(["hideIfChoicesEmpty"],function(){r.onVisibleChanged()}),r.createNewArray("visibleChoices"),r.setNewRestfulProperty();var n=r.createLocalizableString("otherText",r.otherItemValue,!0,"otherItemText");return r.createLocalizableString("otherErrorText",r,!0,"otherRequiredError"),r.otherItemValue.locOwner=r,r.otherItemValue.setLocText(n),r.choicesByUrl.createItemValue=function(o){return r.createItemValue(o)},r.choicesByUrl.beforeSendRequestCallback=function(){r.onBeforeSendRequest()},r.choicesByUrl.getResultCallback=function(o){r.onLoadChoicesFromUrl(o)},r.choicesByUrl.updateResultCallback=function(o,s){return r.survey?r.survey.updateChoicesFromServer(r,o,s):o},r}return Object.defineProperty(t.prototype,"waitingChoicesByURL",{get:function(){return!this.isChoicesLoaded&&this.hasChoicesUrl},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"selectbase"},t.prototype.dispose=function(){i.prototype.dispose.call(this);var e=this.getQuestionWithChoices();e&&e.removeDependedQuestion(this)},t.prototype.resetDependedQuestion=function(){this.choicesFromQuestion=""},Object.defineProperty(t.prototype,"otherId",{get:function(){return this.id+"_other"},enumerable:!1,configurable:!0}),t.prototype.getCommentElementsId=function(){return[this.commentId,this.otherId]},t.prototype.getItemValueType=function(){return"itemvalue"},t.prototype.createItemValue=function(e,r){var n=x.createClass(this.getItemValueType(),{value:e});return n.locOwner=this,r&&(n.text=r),n},Object.defineProperty(t.prototype,"isUsingCarryForward",{get:function(){return!!this.carryForwardQuestionType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"carryForwardQuestionType",{get:function(){return this.getPropertyValue("carryForwardQuestionType")},enumerable:!1,configurable:!0}),t.prototype.setCarryForwardQuestionType=function(e,r){var n=e?"select":r?"array":void 0;this.setPropertyValue("carryForwardQuestionType",n)},Object.defineProperty(t.prototype,"isUsingRestful",{get:function(){return this.getPropertyValueWithoutDefault("isUsingRestful")||!1},enumerable:!1,configurable:!0}),t.prototype.updateIsUsingRestful=function(){this.setPropertyValueDirectly("isUsingRestful",this.hasChoicesUrl)},t.prototype.supportGoNextPageError=function(){return!this.isOtherSelected||!!this.otherValue},t.prototype.isLayoutTypeSupported=function(e){return!0},t.prototype.localeChanged=function(){i.prototype.localeChanged.call(this),this.choicesOrder!=="none"&&(this.updateVisibleChoices(),this.onVisibleChoicesChanged())},t.prototype.locStrsChanged=function(){i.prototype.locStrsChanged.call(this),this.choicesFromUrl&&(q.locStrsChanged(this.choicesFromUrl),q.locStrsChanged(this.visibleChoices)),this.isUsingCarryForward&&q.locStrsChanged(this.visibleChoices)},t.prototype.updatePrevOtherErrorValue=function(e){var r=this.otherValue;e!==r&&(this.prevOtherErrorValue=r)},Object.defineProperty(t.prototype,"otherValue",{get:function(){return this.showCommentArea?this.otherValueCore:this.comment},set:function(e){this.updatePrevOtherErrorValue(e),this.showCommentArea?this.setOtherValueInternally(e):this.comment=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"otherValueCore",{get:function(){return this.getPropertyValue("otherValue")},set:function(e){this.setPropertyValue("otherValue",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"otherItem",{get:function(){return this.otherItemValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isOtherSelected",{get:function(){return this.hasOther&&this.getHasOther(this.renderedValue)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNoneSelected",{get:function(){return this.showNoneItem&&this.getIsItemValue(this.renderedValue,this.noneItem)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showNoneItem",{get:function(){return this.getPropertyValue("showNoneItem")},set:function(e){this.setPropertyValue("showNoneItem",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasNone",{get:function(){return this.showNoneItem},set:function(e){this.showNoneItem=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noneItem",{get:function(){return this.noneItemValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noneText",{get:function(){return this.getLocalizableStringText("noneText")},set:function(e){this.setLocalizableStringText("noneText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locNoneText",{get:function(){return this.getLocalizableString("noneText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showRefuseItem",{get:function(){return this.getPropertyValue("showRefuseItem")},set:function(e){this.setPropertyValue("showRefuseItem",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"refuseItem",{get:function(){return this.refuseItemValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"refuseText",{get:function(){return this.getLocalizableStringText("refuseText")},set:function(e){this.setLocalizableStringText("refuseText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locRefuseText",{get:function(){return this.getLocalizableString("refuseText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showDontKnowItem",{get:function(){return this.getPropertyValue("showDontKnowItem")},set:function(e){this.setPropertyValue("showDontKnowItem",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dontKnowItem",{get:function(){return this.dontKnowItemValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dontKnowText",{get:function(){return this.getLocalizableStringText("dontKnowText")},set:function(e){this.setLocalizableStringText("dontKnowText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locDontKnowText",{get:function(){return this.getLocalizableString("dontKnowText")},enumerable:!1,configurable:!0}),t.prototype.createDefaultItem=function(e,r,n){var o=new q(e),s=this.createLocalizableString(r,o,!0,n);return o.locOwner=this,o.setLocText(s),o},Object.defineProperty(t.prototype,"choicesVisibleIf",{get:function(){return this.getPropertyValue("choicesVisibleIf","")},set:function(e){this.setPropertyValue("choicesVisibleIf",e),this.filterItems()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"choicesEnableIf",{get:function(){return this.getPropertyValue("choicesEnableIf","")},set:function(e){this.setPropertyValue("choicesEnableIf",e),this.filterItems()},enumerable:!1,configurable:!0}),t.prototype.surveyChoiceItemVisibilityChange=function(){this.filterItems()},t.prototype.runCondition=function(e,r){i.prototype.runCondition.call(this,e,r),this.runItemsEnableCondition(e,r),this.runItemsCondition(e,r),this.choices.forEach(function(n){n.runConditionCore(e,r)})},t.prototype.isTextValue=function(){return!0},t.prototype.setDefaultValue=function(){this.isSettingDefaultValue=!this.isValueEmpty(this.defaultValue)&&this.hasUnknownValue(this.defaultValue),this.prevOtherValue=void 0;var e=this.comment;i.prototype.setDefaultValue.call(this),this.isSettingDefaultValue=!1,this.comment&&this.getStoreOthersAsComment()&&e!==this.comment&&(this.setValueCore(this.setOtherValueIntoValue(this.value)),this.setCommentIntoData(this.comment))},t.prototype.getIsMultipleValue=function(){return!1},t.prototype.convertDefaultValue=function(e){if(e==null||e==null)return e;if(this.getIsMultipleValue()){if(!Array.isArray(e))return[e]}else if(Array.isArray(e)&&e.length>0)return e[0];return e},t.prototype.filterItems=function(){if(this.isLoadingFromJson||!this.data||this.areInvisibleElementsShowing)return!1;var e=this.getDataFilteredValues(),r=this.getDataFilteredProperties();return this.runItemsEnableCondition(e,r),this.runItemsCondition(e,r)},t.prototype.runItemsCondition=function(e,r){this.setConditionalChoicesRunner();var n=this.runConditionsForItems(e,r);return!!this.filteredChoicesValue&&this.filteredChoicesValue.length===this.activeChoices.length&&(this.filteredChoicesValue=void 0),n&&(this.onVisibleChoicesChanged(),this.clearIncorrectValues()),n},t.prototype.runItemsEnableCondition=function(e,r){var n=this;this.setConditionalEnableChoicesRunner();var o=q.runEnabledConditionsForItems(this.activeChoices,this.conditionChoicesEnableIfRunner,e,r,function(s,a){return a&&n.onEnableItemCallBack(s)});o&&this.clearDisabledValues(),this.onAfterRunItemsEnableCondition()},t.prototype.onAfterRunItemsEnableCondition=function(){},t.prototype.onEnableItemCallBack=function(e){return!0},t.prototype.onSelectedItemValuesChangedHandler=function(e){var r;(r=this.survey)===null||r===void 0||r.loadedChoicesFromServer(this)},t.prototype.getItemIfChoicesNotContainThisValue=function(e,r){return this.waitingChoicesByURL?this.createItemValue(e,r):null},t.prototype.getSingleSelectedItem=function(){var e=this.selectedItemValues;if(this.isEmpty())return null;var r=q.getItemByValue(this.visibleChoices,this.value);return this.onGetSingleSelectedItem(r),!r&&(!e||this.value!=e.id)&&this.updateSelectedItemValues(),r||e||(this.isOtherSelected?this.otherItem:this.getItemIfChoicesNotContainThisValue(this.value))},t.prototype.onGetSingleSelectedItem=function(e){},t.prototype.getMultipleSelectedItems=function(){return[]},t.prototype.setConditionalChoicesRunner=function(){this.choicesVisibleIf?(this.conditionChoicesVisibleIfRunner||(this.conditionChoicesVisibleIfRunner=new ve(this.choicesVisibleIf)),this.conditionChoicesVisibleIfRunner.expression=this.choicesVisibleIf):this.conditionChoicesVisibleIfRunner=null},t.prototype.setConditionalEnableChoicesRunner=function(){this.choicesEnableIf?(this.conditionChoicesEnableIfRunner||(this.conditionChoicesEnableIfRunner=new ve(this.choicesEnableIf)),this.conditionChoicesEnableIfRunner.expression=this.choicesEnableIf):this.conditionChoicesEnableIfRunner=null},t.prototype.canSurveyChangeItemVisibility=function(){return!!this.survey&&this.survey.canChangeChoiceItemsVisibility()},t.prototype.changeItemVisibility=function(){var e=this;return this.canSurveyChangeItemVisibility()?function(r,n){return e.survey.getChoiceItemVisibility(e,r,n)}:null},t.prototype.runConditionsForItems=function(e,r){this.filteredChoicesValue=[];var n=this.changeItemVisibility();return q.runConditionsForItems(this.activeChoices,this.getFilteredChoices(),this.areInvisibleElementsShowing?null:this.conditionChoicesVisibleIfRunner,e,r,!this.survey||!this.survey.areInvisibleElementsShowing,function(o,s){return n?n(o,s):s})},t.prototype.getHasOther=function(e){return this.getIsItemValue(e,this.otherItem)},t.prototype.getIsItemValue=function(e,r){return e===r.value},Object.defineProperty(t.prototype,"validatedValue",{get:function(){return this.rendredValueToDataCore(this.value)},enumerable:!1,configurable:!0}),t.prototype.createRestful=function(){return new et},t.prototype.setNewRestfulProperty=function(){this.setPropertyValue("choicesByUrl",this.createRestful()),this.choicesByUrl.owner=this,this.choicesByUrl.loadingOwner=this},Object.defineProperty(t.prototype,"autoOtherMode",{get:function(){return this.getPropertyValue("autoOtherMode")},set:function(e){this.setPropertyValue("autoOtherMode",e)},enumerable:!1,configurable:!0}),t.prototype.getQuestionComment=function(){return this.showCommentArea?i.prototype.getQuestionComment.call(this):this.otherValueCore?this.otherValueCore:this.hasComment||this.getStoreOthersAsComment()?i.prototype.getQuestionComment.call(this):this.otherValueCore},t.prototype.selectOtherValueFromComment=function(e){this.value=e?this.otherItem.value:void 0},t.prototype.setQuestionComment=function(e){if(this.updatePrevOtherErrorValue(e),this.showCommentArea){i.prototype.setQuestionComment.call(this,e);return}this.onUpdateCommentOnAutoOtherMode(e),this.getStoreOthersAsComment()?i.prototype.setQuestionComment.call(this,e):this.setOtherValueInternally(e),this.updateChoicesDependedQuestions()},t.prototype.onUpdateCommentOnAutoOtherMode=function(e){if(!!this.autoOtherMode){this.prevOtherValue=void 0;var r=this.isOtherSelected;(!r&&!!e||r&&!e)&&this.selectOtherValueFromComment(!!e)}},t.prototype.setOtherValueInternally=function(e){!this.isSettingComment&&e!=this.otherValueCore&&(this.isSettingComment=!0,this.otherValueCore=e,this.isOtherSelected&&!this.isRenderedValueSetting&&(this.value=this.rendredValueToData(this.renderedValue)),this.isSettingComment=!1)},t.prototype.clearValue=function(e){i.prototype.clearValue.call(this,e),this.prevOtherValue=void 0},t.prototype.updateCommentFromSurvey=function(e){i.prototype.updateCommentFromSurvey.call(this,e),this.prevOtherValue=void 0},Object.defineProperty(t.prototype,"renderedValue",{get:function(){return this.getPropertyValue("renderedValue",null)},set:function(r){if(!this.isReadOnlyAttr){this.setPropertyValue("renderedValue",r);var r=this.rendredValueToData(r);this.isTwoValueEquals(r,this.value)||(this.value=r)}},enumerable:!1,configurable:!0}),t.prototype.setQuestionValue=function(e,r,n){if(r===void 0&&(r=!0),n===void 0&&(n=!0),!(this.isLoadingFromJson||this.isTwoValueEquals(this.value,e))&&(i.prototype.setQuestionValue.call(this,e,r),this.setPropertyValue("renderedValue",this.rendredValueFromData(e)),this.updateChoicesDependedQuestions(),!(this.hasComment||!n))){var o=this.isOtherSelected;if(o&&!!this.prevOtherValue){var s=this.prevOtherValue;this.prevOtherValue=void 0,this.otherValue=s}!o&&!!this.otherValue&&(this.getStoreOthersAsComment()&&!this.autoOtherMode&&(this.prevOtherValue=this.otherValue),this.makeCommentEmpty=!0,this.otherValueCore="",this.setPropertyValue("comment",""))}},t.prototype.setValueCore=function(e){i.prototype.setValueCore.call(this,e),this.makeCommentEmpty&&(this.setCommentIntoData(""),this.makeCommentEmpty=!1)},t.prototype.setNewValue=function(e){e=this.valueFromData(e),(!this.choicesByUrl.isRunning&&!this.choicesByUrl.isWaitingForParameters||!this.isValueEmpty(e))&&(this.cachedValueForUrlRequests=e),i.prototype.setNewValue.call(this,e)},t.prototype.valueFromData=function(e){var r=q.getItemByValue(this.activeChoices,e);return r?r.value:i.prototype.valueFromData.call(this,e)},t.prototype.rendredValueFromData=function(e){return this.getStoreOthersAsComment()?e:this.renderedValueFromDataCore(e)},t.prototype.rendredValueToData=function(e){return this.getStoreOthersAsComment()?e:this.rendredValueToDataCore(e)},t.prototype.renderedValueFromDataCore=function(e){return this.hasUnknownValue(e,!0,!1)?(this.otherValue=e,this.otherItem.value):this.valueFromData(e)},t.prototype.rendredValueToDataCore=function(e){return e==this.otherItem.value&&this.needConvertRenderedOtherToDataValue()&&(e=this.otherValue),e},t.prototype.needConvertRenderedOtherToDataValue=function(){var e=this.otherValue;return!e||(e=e.trim(),!e)?!1:this.hasUnknownValue(e,!0,!1)},t.prototype.getIsQuestionReady=function(){return i.prototype.getIsQuestionReady.call(this)&&!this.waitingChoicesByURL&&!this.waitingGetChoiceDisplayValueResponse},t.prototype.updateSelectedItemValues=function(){var e=this;if(!(this.waitingGetChoiceDisplayValueResponse||!this.survey||this.isEmpty())){var r=this.value,n=Array.isArray(r)?r:[r],o=n.some(function(s){return!q.getItemByValue(e.choices,s)});o&&(this.choicesLazyLoadEnabled||this.hasChoicesUrl)&&(this.waitingGetChoiceDisplayValueResponse=!0,this.updateIsReady(),this.survey.getChoiceDisplayValue({question:this,values:n,setItems:function(s){for(var a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];if(e.waitingGetChoiceDisplayValueResponse=!1,!s||!s.length){e.updateIsReady();return}var u=s.map(function(d,v){return e.createItemValue(n[v],d)});e.setCustomValuesIntoItems(u,a),Array.isArray(r)?e.selectedItemValues=u:e.selectedItemValues=u[0],e.updateIsReady()}}))}},t.prototype.setCustomValuesIntoItems=function(e,r){!Array.isArray(r)||r.length===0||r.forEach(function(n){var o=n.values,s=n.propertyName;if(Array.isArray(o))for(var a=0;a<e.length&&a<o.length;a++)e[a][s]=o[a]})},t.prototype.hasUnknownValue=function(e,r,n,o){if(r===void 0&&(r=!1),n===void 0&&(n=!0),o===void 0&&(o=!1),!Array.isArray(e))return this.hasUnknownValueItem(e,r,n,o);for(var s=0;s<e.length;s++)if(this.hasUnknownValueItem(e,r,n,o))return!0;return!1},t.prototype.hasUnknownValueItem=function(e,r,n,o){if(r===void 0&&(r=!1),n===void 0&&(n=!0),o===void 0&&(o=!1),!o&&this.isValueEmpty(e)||r&&e==this.otherItem.value||this.showNoneItem&&e==this.noneItem.value||this.showRefuseItem&&e==this.refuseItem.value||this.showDontKnowItem&&e==this.dontKnowItem.value)return!1;var s=n?this.getFilteredChoices():this.activeChoices;return q.getItemByValue(s,e)==null},t.prototype.isValueDisabled=function(e){var r=q.getItemByValue(this.getFilteredChoices(),e);return!!r&&!r.isEnabled},Object.defineProperty(t.prototype,"choicesByUrl",{get:function(){return this.getPropertyValue("choicesByUrl")},set:function(e){!e||(this.setNewRestfulProperty(),this.choicesByUrl.fromJSON(e.toJSON()))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"choices",{get:function(){return this.getPropertyValue("choices")},set:function(e){this.setPropertyValue("choices",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"choicesFromQuestion",{get:function(){return this.getPropertyValue("choicesFromQuestion")},set:function(e){var r=this.getQuestionWithChoices();this.isLockVisibleChoices=!!r&&r.name===e,!!r&&r.name!==e&&(r.removeDependedQuestion(this),this.isDesignMode&&!this.isLoadingFromJson&&!!e&&this.setPropertyValue("choicesFromQuestion",void 0)),this.setPropertyValue("choicesFromQuestion",e),this.isLockVisibleChoices=!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"choicesFromQuestionMode",{get:function(){return this.getPropertyValue("choicesFromQuestionMode")},set:function(e){this.setPropertyValue("choicesFromQuestionMode",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"choiceValuesFromQuestion",{get:function(){return this.getPropertyValue("choiceValuesFromQuestion")},set:function(e){this.setPropertyValue("choiceValuesFromQuestion",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"choiceTextsFromQuestion",{get:function(){return this.getPropertyValue("choiceTextsFromQuestion")},set:function(e){this.setPropertyValue("choiceTextsFromQuestion",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hideIfChoicesEmpty",{get:function(){return this.getPropertyValue("hideIfChoicesEmpty")},set:function(e){this.setPropertyValue("hideIfChoicesEmpty",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keepIncorrectValues",{get:function(){return this.getPropertyValue("keepIncorrectValues",!1)},set:function(e){this.setPropertyValue("keepIncorrectValues",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storeOthersAsComment",{get:function(){return this.getPropertyValue("storeOthersAsComment")},set:function(e){this.setPropertyValue("storeOthersAsComment",e)},enumerable:!1,configurable:!0}),t.prototype.hasOtherChanged=function(){this.onVisibleChoicesChanged()},Object.defineProperty(t.prototype,"choicesOrder",{get:function(){return this.getPropertyValue("choicesOrder")},set:function(e){e=e.toLowerCase(),e!=this.choicesOrder&&(this.setPropertyValue("choicesOrder",e),this.onVisibleChoicesChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"otherText",{get:function(){return this.getLocalizableStringText("otherText")},set:function(e){this.setLocalizableStringText("otherText",e),this.onVisibleChoicesChanged()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locOtherText",{get:function(){return this.getLocalizableString("otherText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"otherPlaceHolder",{get:function(){return this.otherPlaceholder},set:function(e){this.otherPlaceholder=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"otherErrorText",{get:function(){return this.getLocalizableStringText("otherErrorText")},set:function(e){this.setLocalizableStringText("otherErrorText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locOtherErrorText",{get:function(){return this.getLocalizableString("otherErrorText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visibleChoices",{get:function(){return this.getPropertyValue("visibleChoices")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enabledChoices",{get:function(){for(var e=[],r=this.visibleChoices,n=0;n<r.length;n++)r[n].isEnabled&&e.push(r[n]);return e},enumerable:!1,configurable:!0}),t.prototype.updateVisibleChoices=function(){if(!(this.isLoadingFromJson||this.isDisposed)){var e=new Array,r=this.calcVisibleChoices();r||(r=[]);for(var n=0;n<r.length;n++)e.push(r[n]);var o=this.visibleChoices;(!this.isTwoValueEquals(o,e)||this.choicesLazyLoadEnabled)&&this.setArrayPropertyDirectly("visibleChoices",e)}},t.prototype.calcVisibleChoices=function(){if(this.canUseFilteredChoices())return this.getFilteredChoices();var e=this.sortVisibleChoices(this.getFilteredChoices().slice());return this.addToVisibleChoices(e,this.isAddDefaultItems),e},t.prototype.canUseFilteredChoices=function(){return!this.isAddDefaultItems&&!this.showNoneItem&&!this.showRefuseItem&&!this.showDontKnowItem&&!this.hasOther&&this.choicesOrder=="none"},t.prototype.setCanShowOptionItemCallback=function(e){this.canShowOptionItemCallback=e,e&&this.onVisibleChoicesChanged()},Object.defineProperty(t.prototype,"newItem",{get:function(){return this.newItemValue},enumerable:!1,configurable:!0}),t.prototype.addToVisibleChoices=function(e,r){this.headItemsCount=0,this.footItemsCount=0,this.isEmptyActiveChoicesInDesign||this.addNewItemToVisibleChoices(e,r);var n=new Array;this.addNonChoicesItems(n,r),n.sort(function(a,l){return a.index===l.index?0:a.index<l.index?-1:1});for(var o=0;o<n.length;o++){var s=n[o];s.index<0?(e.splice(o,0,s.item),this.headItemsCount++):(e.push(s.item),this.footItemsCount++)}},t.prototype.addNewItemToVisibleChoices=function(e,r){var n=this;!r||(this.newItemValue||(this.newItemValue=this.createItemValue("newitem"),this.newItemValue.isGhost=!0,this.newItemValue.registerFunctionOnPropertyValueChanged("isVisible",function(){n.updateVisibleChoices()})),this.newItemValue.isVisible&&!this.isUsingCarryForward&&this.canShowOptionItem(this.newItemValue,r,!1)&&(this.footItemsCount=1,e.push(this.newItemValue)))},t.prototype.addNonChoicesItems=function(e,r){this.supportNone()&&this.addNonChoiceItem(e,this.noneItem,r,this.showNoneItem,b.specialChoicesOrder.noneItem),this.supportRefuse()&&this.addNonChoiceItem(e,this.refuseItem,r,this.showRefuseItem,b.specialChoicesOrder.refuseItem),this.supportDontKnow()&&this.addNonChoiceItem(e,this.dontKnowItem,r,this.showDontKnowItem,b.specialChoicesOrder.dontKnowItem),this.supportOther()&&this.addNonChoiceItem(e,this.otherItem,r,this.hasOther,b.specialChoicesOrder.otherItem)},t.prototype.addNonChoiceItem=function(e,r,n,o,s){this.canShowOptionItem(r,n,o)&&s.forEach(function(a){return e.push({index:a,item:r})})},t.prototype.canShowOptionItem=function(e,r,n){var o=r&&(this.canShowOptionItemCallback?this.canShowOptionItemCallback(e):!0)||n;if(this.canSurveyChangeItemVisibility()){var s=this.changeItemVisibility();return s(e,o)}return o},t.prototype.isItemInList=function(e){return e===this.otherItem?this.hasOther:e===this.noneItem?this.showNoneItem:e===this.refuseItem?this.showRefuseItem:e===this.dontKnowItem?this.showDontKnowItem:e!==this.newItemValue},Object.defineProperty(t.prototype,"isAddDefaultItems",{get:function(){return b.showDefaultItemsInCreatorV2&&this.isDesignModeV2&&!this.customWidget&&!this.isContentElement},enumerable:!1,configurable:!0}),t.prototype.getPlainData=function(e){var r=this;e===void 0&&(e={includeEmpty:!0,includeQuestionTypes:!1});var n=i.prototype.getPlainData.call(this,e);if(n){var o=Array.isArray(this.value)?this.value:[this.value];n.isNode=!0,n.data=(n.data||[]).concat(o.map(function(s,a){var l=q.getItemByValue(r.visibleChoices,s),u={name:a,title:"Choice",value:s,displayValue:r.getChoicesDisplayValue(r.visibleChoices,s),getString:function(d){return typeof d=="object"?JSON.stringify(d):d},isNode:!1};return l&&(e.calculations||[]).forEach(function(d){u[d.propertyName]=l[d.propertyName]}),r.isOtherSelected&&r.otherItemValue===l&&(u.isOther=!0,u.displayValue=r.otherValue),u}))}return n},t.prototype.getDisplayValueCore=function(e,r){return this.useDisplayValuesInDynamicTexts?this.getChoicesDisplayValue(this.visibleChoices,r):r},t.prototype.getDisplayValueEmpty=function(){return q.getTextOrHtmlByValue(this.visibleChoices,void 0)},t.prototype.getChoicesDisplayValue=function(e,r){if(r==this.otherItemValue.value)return this.otherValue?this.otherValue:this.locOtherText.textOrHtml;var n=this.getSingleSelectedItem();if(!!n&&this.isTwoValueEquals(n.value,r))return n.locText.textOrHtml;var o=q.getTextOrHtmlByValue(e,r);return o==""&&r?r:o},t.prototype.getDisplayArrayValue=function(e,r,n){for(var o=this,s=this.visibleChoices,a=[],l=[],u=0;u<r.length;u++)l.push(n?n(u):r[u]);if(P.isTwoValueEquals(this.value,l)&&this.getMultipleSelectedItems().forEach(function(v,V){return a.push(o.getItemDisplayValue(v,l[V]))}),a.length===0)for(var u=0;u<l.length;u++){var d=this.getChoicesDisplayValue(s,l[u]);d&&a.push(d)}return a.join(b.choicesSeparator)},t.prototype.getItemDisplayValue=function(e,r){if(e===this.otherItem){if(this.hasOther&&this.showCommentArea&&!!r)return r;if(this.comment)return this.comment}return e.locText.textOrHtml},t.prototype.getFilteredChoices=function(){return this.filteredChoicesValue?this.filteredChoicesValue:this.activeChoices},Object.defineProperty(t.prototype,"activeChoices",{get:function(){var e=this.getCarryForwardQuestion();return this.carryForwardQuestionType==="select"?(e.addDependedQuestion(this),this.getChoicesFromSelectQuestion(e)):this.carryForwardQuestionType==="array"?(e.addDependedQuestion(this),this.getChoicesFromArrayQuestion(e)):this.isEmptyActiveChoicesInDesign?[]:this.choicesFromUrl?this.choicesFromUrl:this.getChoices()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMessagePanelVisible",{get:function(){return this.getPropertyValue("isMessagePanelVisible",!1)},set:function(e){this.setPropertyValue("isMessagePanelVisible",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmptyActiveChoicesInDesign",{get:function(){return this.isDesignModeV2&&(this.hasChoicesUrl||this.isMessagePanelVisible)},enumerable:!1,configurable:!0}),t.prototype.getCarryForwardQuestion=function(e){var r=this.findCarryForwardQuestion(e),n=this.getQuestionWithChoicesCore(r),o=n?null:this.getQuestionWithArrayValue(r);return this.setCarryForwardQuestionType(!!n,!!o),!!n||!!o?r:null},t.prototype.getIsReadyDependsOn=function(){var e=i.prototype.getIsReadyDependsOn.call(this);return this.carryForwardQuestion&&e.push(this.carryForwardQuestion),e},t.prototype.getQuestionWithChoices=function(){return this.getQuestionWithChoicesCore(this.findCarryForwardQuestion())},t.prototype.findCarryForwardQuestion=function(e){return e||(e=this.data),this.carryForwardQuestion=null,this.choicesFromQuestion&&e&&(this.carryForwardQuestion=e.findQuestionByName(this.choicesFromQuestion)),this.carryForwardQuestion},t.prototype.getQuestionWithChoicesCore=function(e){return!!e&&!!e.visibleChoices&&x.isDescendantOf(e.getType(),"selectbase")&&e!==this?e:null},t.prototype.getQuestionWithArrayValue=function(e){return!!e&&e.isValueArray?e:null},t.prototype.getChoicesFromArrayQuestion=function(e){if(this.isDesignMode)return[];var r=e.value;if(!Array.isArray(r))return[];for(var n=[],o=0;o<r.length;o++){var s=r[o];if(!!P.isValueObject(s)){var a=this.getValueKeyName(s);if(!!a&&!this.isValueEmpty(s[a])){var l=this.choiceTextsFromQuestion?s[this.choiceTextsFromQuestion]:void 0;n.push(this.createItemValue(s[a],l))}}}return n},t.prototype.getValueKeyName=function(e){if(this.choiceValuesFromQuestion)return this.choiceValuesFromQuestion;var r=Object.keys(e);return r.length>0?r[0]:void 0},t.prototype.getChoicesFromSelectQuestion=function(e){if(this.isDesignMode)return[];for(var r=[],n=this.choicesFromQuestionMode=="selected"?!0:this.choicesFromQuestionMode=="unselected"?!1:void 0,o=e.visibleChoices,s=0;s<o.length;s++)if(!e.isBuiltInChoice(o[s])){if(n===void 0){r.push(this.copyChoiceItem(o[s]));continue}var a=e.isItemSelected(o[s]);(a&&n||!a&&!n)&&r.push(this.copyChoiceItem(o[s]))}return this.choicesFromQuestionMode==="selected"&&!this.showOtherItem&&e.isOtherSelected&&!!e.comment&&r.push(this.createItemValue(e.otherItem.value,e.comment)),r},t.prototype.copyChoiceItem=function(e){var r=this.createItemValue(e.value);return r.setData(e),r},Object.defineProperty(t.prototype,"hasActiveChoices",{get:function(){var e=this.visibleChoices;(!e||e.length==0)&&(this.onVisibleChoicesChanged(),e=this.visibleChoices);for(var r=0;r<e.length;r++)if(!this.isBuiltInChoice(e[r]))return!0;return!1},enumerable:!1,configurable:!0}),t.prototype.isBuiltInChoice=function(e){return this.isNoneItem(e)||e===this.otherItem||e===this.newItemValue},t.prototype.isNoneItem=function(e){return this.getNoneItems().indexOf(e)>-1},t.prototype.getNoneItems=function(){return[this.noneItem,this.refuseItem,this.dontKnowItem]},t.prototype.getChoices=function(){return this.choices},t.prototype.supportOther=function(){return this.isSupportProperty("showOtherItem")},t.prototype.supportNone=function(){return this.isSupportProperty("showNoneItem")},t.prototype.supportRefuse=function(){return this.isSupportProperty("showRefuseItem")},t.prototype.supportDontKnow=function(){return this.isSupportProperty("showDontKnowItem")},t.prototype.isSupportProperty=function(e){return!this.isDesignMode||this.getPropertyByName(e).visible},t.prototype.onCheckForErrors=function(e,r){var n=this;if(i.prototype.onCheckForErrors.call(this,e,r),!(!this.hasOther||!this.isOtherSelected||this.otherValue||r&&!this.prevOtherErrorValue)){var o=new Xl(this.otherErrorText,this);o.onUpdateErrorTextCallback=function(s){s.text=n.otherErrorText},e.push(o)}},t.prototype.setSurveyImpl=function(e,r){this.isRunningChoices=!0,i.prototype.setSurveyImpl.call(this,e,r),this.isRunningChoices=!1,this.runChoicesByUrl(),this.isAddDefaultItems&&this.updateVisibleChoices()},t.prototype.setSurveyCore=function(e){i.prototype.setSurveyCore.call(this,e),!!e&&!!this.choicesFromQuestion&&this.onVisibleChoicesChanged()},t.prototype.getStoreOthersAsComment=function(){return this.isSettingDefaultValue||this.showCommentArea?!1:this.storeOthersAsComment===!0||this.storeOthersAsComment=="default"&&(this.survey!=null?this.survey.storeOthersAsComment:!0)||this.hasChoicesUrl&&!this.choicesFromUrl},t.prototype.onSurveyLoad=function(){this.runChoicesByUrl(),this.onVisibleChoicesChanged(),i.prototype.onSurveyLoad.call(this)},t.prototype.onAnyValueChanged=function(e,r){i.prototype.onAnyValueChanged.call(this,e,r),e!=this.getValueName()&&this.runChoicesByUrl();var n=this.choicesFromQuestion;!!e&&n&&(e===n||r===n)&&this.onVisibleChoicesChanged()},t.prototype.updateValueFromSurvey=function(e,r){var n="";this.hasOther&&!this.isRunningChoices&&!this.choicesByUrl.isRunning&&this.getStoreOthersAsComment()&&(this.hasUnknownValue(e)&&!this.getHasOther(e)?(n=this.getCommentFromValue(e),e=this.setOtherValueIntoValue(e)):this.data&&(n=this.data.getComment(this.getValueName()))),i.prototype.updateValueFromSurvey.call(this,e,r),(this.isRunningChoices||this.choicesByUrl.isRunning)&&!this.isEmpty()&&(this.cachedValueForUrlRequests=this.value),n&&this.setNewComment(n)},t.prototype.getCommentFromValue=function(e){return e},t.prototype.setOtherValueIntoValue=function(e){return this.otherItem.value},t.prototype.onOtherValueInput=function(e){this.isInputTextUpdate?e.target&&(this.otherValue=e.target.value):this.updateCommentElements()},t.prototype.onOtherValueChange=function(e){this.otherValue=e.target.value,this.otherValue!==e.target.value&&(e.target.value=this.otherValue)},t.prototype.runChoicesByUrl=function(){if(this.updateIsUsingRestful(),!(!this.choicesByUrl||this.isLoadingFromJson||this.isRunningChoices||this.isDesignModeV2)){var e=this.surveyImpl?this.surveyImpl.getTextProcessor():this.textProcessor;e||(e=this.survey),e&&(this.updateIsReady(),this.isRunningChoices=!0,this.choicesByUrl.run(e),this.isRunningChoices=!1)}},t.prototype.onBeforeSendRequest=function(){b.web.disableQuestionWhileLoadingChoices===!0&&!this.isReadOnly&&(this.enableOnLoadingChoices=!0,this.readOnly=!0)},t.prototype.onLoadChoicesFromUrl=function(e){this.enableOnLoadingChoices&&(this.readOnly=!1);var r=[];this.isReadOnly||this.choicesByUrl&&this.choicesByUrl.error&&r.push(this.choicesByUrl.error);var n=null,o=!0;this.isFirstLoadChoicesFromUrl&&!this.cachedValueForUrlRequests&&this.defaultValue&&(this.cachedValueForUrlRequests=this.defaultValue,o=!1),this.isValueEmpty(this.cachedValueForUrlRequests)&&(this.cachedValueForUrlRequests=this.value);var s=this.createCachedValueForUrlRequests(this.cachedValueForUrlRequests,o);if(e&&(e.length>0||this.choicesByUrl.allowEmptyResponse)&&(n=new Array,q.setData(n,e)),n)for(var a=0;a<n.length;a++)n[a].locOwner=this;this.setChoicesFromUrl(n,r,s)},t.prototype.canAvoidSettChoicesFromUrl=function(e){if(this.isFirstLoadChoicesFromUrl)return!1;var r=!e||Array.isArray(e)&&e.length===0;return r&&!this.isEmpty()?!1:P.isTwoValueEquals(this.choicesFromUrl,e)},t.prototype.setChoicesFromUrl=function(e,r,n){if(!this.canAvoidSettChoicesFromUrl(e)){if(this.isFirstLoadChoicesFromUrl=!1,this.choicesFromUrl=e,this.filterItems(),this.onVisibleChoicesChanged(),e){var o=this.updateCachedValueForUrlRequests(n,e);if(!!o&&!this.isReadOnly){var s=!this.isTwoValueEquals(this.value,o.value);try{this.isValueEmpty(o.value)||(this.allowNotifyValueChanged=!1,this.setQuestionValue(void 0,!0,!1)),this.allowNotifyValueChanged=s,s?this.value=o.value:this.setQuestionValue(o.value)}finally{this.allowNotifyValueChanged=!0}}}!this.isReadOnly&&!e&&!this.isFirstLoadChoicesFromUrl&&(this.value=null),this.errors=r,this.choicesLoaded()}},t.prototype.createCachedValueForUrlRequests=function(e,r){if(this.isValueEmpty(e))return null;if(Array.isArray(e)){for(var n=[],o=0;o<e.length;o++)n.push(this.createCachedValueForUrlRequests(e[o],!0));return n}var s=r?!this.hasUnknownValue(e):!0;return{value:e,isExists:s}},t.prototype.updateCachedValueForUrlRequests=function(e,r){if(this.isValueEmpty(e))return null;if(Array.isArray(e)){for(var n=[],o=0;o<e.length;o++){var s=this.updateCachedValueForUrlRequests(e[o],r);if(s&&!this.isValueEmpty(s.value)){var a=s.value,u=q.getItemByValue(r,s.value);u&&(a=u.value),n.push(a)}}return{value:n}}var l=e.isExists&&this.hasUnknownValue(e.value)?null:e.value,u=q.getItemByValue(r,l);return u&&(l=u.value),{value:l}},t.prototype.updateChoicesDependedQuestions=function(){this.isLoadingFromJson||this.isUpdatingChoicesDependedQuestions||!this.allowNotifyValueChanged||this.choicesByUrl.isRunning||(this.isUpdatingChoicesDependedQuestions=!0,this.updateDependedQuestions(),this.isUpdatingChoicesDependedQuestions=!1)},t.prototype.updateDependedQuestion=function(){this.onVisibleChoicesChanged(),this.clearIncorrectValues()},t.prototype.onSurveyValueChanged=function(e){i.prototype.onSurveyValueChanged.call(this,e),this.updateChoicesDependedQuestions()},t.prototype.onVisibleChoicesChanged=function(){this.isLoadingFromJson||this.isLockVisibleChoices||(this.updateVisibleChoices(),this.onVisibleChanged(),this.visibleChoicesChangedCallback&&this.visibleChoicesChangedCallback(),this.updateChoicesDependedQuestions())},t.prototype.isVisibleCore=function(){var e=i.prototype.isVisibleCore.call(this);if(!this.hideIfChoicesEmpty||!e)return e;var r=this.isUsingCarryForward?this.visibleChoices:this.getFilteredChoices();return!r||r.length>0},t.prototype.sortVisibleChoices=function(e){if(this.isDesignMode)return e;var r=this.choicesOrder.toLowerCase();return r=="asc"?this.sortArray(e,1):r=="desc"?this.sortArray(e,-1):r=="random"?this.randomizeArray(e):e},t.prototype.sortArray=function(e,r){return e.sort(function(n,o){return P.compareStrings(n.calculatedText,o.calculatedText)*r})},t.prototype.randomizeArray=function(e){return P.randomizeArray(e)},Object.defineProperty(t.prototype,"hasChoicesUrl",{get:function(){return this.choicesByUrl&&!!this.choicesByUrl.url},enumerable:!1,configurable:!0}),t.prototype.clearIncorrectValues=function(){!this.hasValueToClearIncorrectValues()||!this.canClearIncorrectValues()||(this.clearIncorrectValuesCallback?this.clearIncorrectValuesCallback():this.clearIncorrectValuesCore())},t.prototype.canClearIncorrectValues=function(){return!(this.carryForwardQuestion&&!this.carryForwardQuestion.isReady||!!this.survey&&this.survey.questionsByValueName(this.getValueName()).length>1||this.hasChoicesUrl&&(!this.choicesFromUrl||this.choicesFromUrl.length==0))},t.prototype.hasValueToClearIncorrectValues=function(){return!!this.survey&&this.survey.keepIncorrectValues?!1:!this.keepIncorrectValues&&!this.isEmpty()},t.prototype.clearValueIfInvisibleCore=function(e){i.prototype.clearValueIfInvisibleCore.call(this,e),this.clearIncorrectValues()},t.prototype.isItemSelected=function(e){return e===this.otherItem?this.isOtherSelected:this.isItemSelectedCore(e)},t.prototype.isItemSelectedCore=function(e){return e.value===this.value},t.prototype.clearDisabledValues=function(){!this.survey||!this.survey.clearValueOnDisableItems||this.clearDisabledValuesCore()},t.prototype.clearIncorrectValuesCore=function(){var e=this.value;this.canClearValueAnUnknown(e)&&this.clearValue(!0)},t.prototype.canClearValueAnUnknown=function(e){return!this.getStoreOthersAsComment()&&this.isOtherSelected?!1:this.hasUnknownValue(e,!0,!0,!0)},t.prototype.clearDisabledValuesCore=function(){this.isValueDisabled(this.value)&&this.clearValue(!0)},t.prototype.clearUnusedValues=function(){i.prototype.clearUnusedValues.call(this),this.isOtherSelected||(this.otherValue=""),!this.showCommentArea&&!this.getStoreOthersAsComment()&&!this.isOtherSelected&&(this.comment="")},t.prototype.getColumnClass=function(){return new O().append(this.cssClasses.column).append("sv-q-column-"+this.colCount,this.hasColumns).toString()},t.prototype.getItemIndex=function(e){return this.visibleChoices.indexOf(e)},t.prototype.getItemClass=function(e){var r={item:e},n=this.getItemClassCore(e,r);return r.css=n,this.survey&&this.survey.updateChoiceItemCss(this,r),r.css},t.prototype.getCurrentColCount=function(){return this.colCount},t.prototype.getItemClassCore=function(e,r){var n=new O().append(this.cssClasses.item).append(this.cssClasses.itemInline,!this.hasColumns&&this.colCount===0).append("sv-q-col-"+this.getCurrentColCount(),!this.hasColumns&&this.colCount!==0).append(this.cssClasses.itemOnError,this.hasCssError()),o=this.getIsDisableAndReadOnlyStyles(!e.isEnabled),s=o[0],a=o[1],l=this.isItemSelected(e)||this.isOtherSelected&&this.otherItem.value===e.value,u=!a&&!l&&!(!!this.survey&&this.survey.isDesignMode),d=e===this.noneItem;return r.isDisabled=a||s,r.isChecked=l,r.isNone=d,n.append(this.cssClasses.itemDisabled,a).append(this.cssClasses.itemReadOnly,s).append(this.cssClasses.itemPreview,this.isPreviewStyle).append(this.cssClasses.itemChecked,l).append(this.cssClasses.itemHover,u).append(this.cssClasses.itemNone,d).toString()},t.prototype.getLabelClass=function(e){return new O().append(this.cssClasses.label).append(this.cssClasses.labelChecked,this.isItemSelected(e)).toString()},t.prototype.getControlLabelClass=function(e){return new O().append(this.cssClasses.controlLabel).append(this.cssClasses.controlLabelChecked,this.isItemSelected(e)).toString()||void 0},Object.defineProperty(t.prototype,"headItems",{get:function(){for(var e=this.separateSpecialChoices||this.isDesignMode?this.headItemsCount:0,r=[],n=0;n<e;n++)r.push(this.visibleChoices[n]);return r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"footItems",{get:function(){for(var e=this.separateSpecialChoices||this.isDesignMode?this.footItemsCount:0,r=[],n=this.visibleChoices,o=0;o<e;o++)r.push(n[n.length-e+o]);return r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataChoices",{get:function(){var e=this;return this.visibleChoices.filter(function(r){return!e.isBuiltInChoice(r)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bodyItems",{get:function(){return this.hasHeadItems||this.hasFootItems?this.dataChoices:this.visibleChoices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasHeadItems",{get:function(){return this.headItems.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasFootItems",{get:function(){return this.footItems.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columns",{get:function(){var e=[],r=this.getCurrentColCount();if(this.hasColumns&&this.visibleChoices.length>0){var n=!this.separateSpecialChoices&&!this.isDesignMode?this.visibleChoices:this.dataChoices;if(b.showItemsInOrder=="column")for(var o=0,s=n.length%r,a=0;a<r;a++){for(var l=[],u=o;u<o+Math.floor(n.length/r);u++)l.push(n[u]);s>0&&(s--,l.push(n[u]),u++),o=u,e.push(l)}else for(var a=0;a<r;a++){for(var l=[],u=a;u<n.length;u+=r)l.push(n[u]);e.push(l)}}return e},enumerable:!1,configurable:!0}),t.prototype.getItemsColumnKey=function(e){return(e||[]).map(function(r){return r.value||""}).join("")},Object.defineProperty(t.prototype,"hasColumns",{get:function(){return!this.isMobile&&this.getCurrentColCount()>1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rowLayout",{get:function(){return this.getCurrentColCount()==0&&!(this.hasFootItems||this.hasHeadItems)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blockedRow",{get:function(){return this.getCurrentColCount()==0&&(this.hasFootItems||this.hasHeadItems)},enumerable:!1,configurable:!0}),t.prototype.choicesLoaded=function(){this.isChoicesLoaded=!0,this.updateIsReady(),this.survey&&this.survey.loadedChoicesFromServer(this),this.loadedChoicesFromServerCallback&&this.loadedChoicesFromServerCallback()},t.prototype.getItemValueWrapperComponentName=function(e){var r=this.survey;return r?r.getItemValueWrapperComponentName(e,this):_e.TemplateRendererComponentName},t.prototype.getItemValueWrapperComponentData=function(e){var r=this.survey;return r?r.getItemValueWrapperComponentData(e,this):e},t.prototype.ariaItemChecked=function(e){return this.renderedValue===e.value?"true":"false"},t.prototype.isOtherItem=function(e){return this.hasOther&&e.value==this.otherItem.value},Object.defineProperty(t.prototype,"itemSvgIcon",{get:function(){return this.isPreviewStyle&&this.cssClasses.itemPreviewSvgIconId?this.cssClasses.itemPreviewSvgIconId:this.cssClasses.itemSvgIconId},enumerable:!1,configurable:!0}),t.prototype.getSelectBaseRootCss=function(){return new O().append(this.getQuestionRootCss()).append(this.cssClasses.rootRow,this.rowLayout).toString()},t.prototype.allowMobileInDesignMode=function(){return!0},t.prototype.getAriaItemLabel=function(e){return e.locText.renderedHtml},t.prototype.getItemId=function(e){return this.inputId+"_"+this.getItemIndex(e)},Object.defineProperty(t.prototype,"questionName",{get:function(){return this.name+"_"+this.id},enumerable:!1,configurable:!0}),t.prototype.getItemEnabled=function(e){return!this.isDisabledAttr&&e.isEnabled},t.prototype.afterRender=function(e){i.prototype.afterRender.call(this,e),this.rootElement=e},t.prototype.beforeDestroyQuestionElement=function(e){i.prototype.beforeDestroyQuestionElement.call(this,e),this.rootElement=void 0},t.prototype.focusOtherComment=function(){var e=this;this.rootElement&&setTimeout(function(){var r=e.rootElement.querySelector("textarea");r&&r.focus()},10)},t.prototype.onValueChanged=function(){i.prototype.onValueChanged.call(this),!this.isDesignMode&&!this.prevIsOtherSelected&&this.isOtherSelected&&this.focusOtherComment(),this.prevIsOtherSelected=this.isOtherSelected},t.prototype.getDefaultItemComponent=function(){return""},Object.defineProperty(t.prototype,"itemComponent",{get:function(){return this.getPropertyValue("itemComponent",this.getDefaultItemComponent())},set:function(e){this.setPropertyValue("itemComponent",e)},enumerable:!1,configurable:!0}),t.prototype.updateCssClasses=function(e,r){if(i.prototype.updateCssClasses.call(this,e,r),this.dropdownListModel){var n={};Fe(r.list,n),Fe(e.list,n),e.list=n}},t.prototype.calcCssClasses=function(e){var r=i.prototype.calcCssClasses.call(this,e);return this.dropdownListModel&&this.dropdownListModel.updateCssClasses(r.popup,r.list),r},dn([y({onSet:function(e,r){r.onSelectedItemValuesChangedHandler(e)}})],t.prototype,"selectedItemValues",void 0),dn([y()],t.prototype,"separateSpecialChoices",void 0),dn([y({localizable:!0})],t.prototype,"otherPlaceholder",void 0),t}(le),At=function(i){jo(t,i);function t(e){return i.call(this,e)||this}return Object.defineProperty(t.prototype,"colCount",{get:function(){return this.getPropertyValue("colCount",this.isFlowLayout?0:void 0)},set:function(e){e<0||e>5||this.isFlowLayout||(this.setPropertyValue("colCount",e),this.fireCallback(this.colCountChangedCallback))},enumerable:!1,configurable:!0}),t.prototype.onParentChanged=function(){i.prototype.onParentChanged.call(this),this.isFlowLayout&&this.setPropertyValue("colCount",null)},t.prototype.onParentQuestionChanged=function(){this.onVisibleChoicesChanged()},t.prototype.getSearchableItemValueKeys=function(e){e.push("choices")},t}(gn);function yn(i,t){var e;if(!i)return!1;if(i.templateQuestion){var r=(e=i.colOwner)===null||e===void 0?void 0:e.data;if(i=i.templateQuestion,!i.getCarryForwardQuestion(r))return!1}return i.carryForwardQuestionType===t}x.addClass("selectbase",[{name:"showCommentArea:switch",layout:"row",visible:!0,category:"general"},"choicesFromQuestion:question_carryforward",{name:"choices:itemvalue[]",uniqueProperty:"value",baseValue:function(){return z.getString("choices_Item")},dependsOn:"choicesFromQuestion",visibleIf:function(i){return!i.choicesFromQuestion}},{name:"choicesFromQuestionMode",default:"all",choices:["all","selected","unselected"],dependsOn:"choicesFromQuestion",visibleIf:function(i){return yn(i,"select")}},{name:"choiceValuesFromQuestion",dependsOn:"choicesFromQuestion",visibleIf:function(i){return yn(i,"array")}},{name:"choiceTextsFromQuestion",dependsOn:"choicesFromQuestion",visibleIf:function(i){return yn(i,"array")}},{name:"choicesOrder",default:"none",choices:["none","asc","desc","random"],dependsOn:"choicesFromQuestion",visibleIf:function(i){return!i.choicesFromQuestion}},{name:"choicesByUrl:restfull",className:"choicesByUrl",onGetValue:function(i){return i.choicesByUrl.getData()},onSetValue:function(i,t){i.choicesByUrl.setData(t)}},"hideIfChoicesEmpty:boolean","choicesVisibleIf:condition",{name:"choicesEnableIf:condition",dependsOn:"choicesFromQuestion",visibleIf:function(i){return!i.choicesFromQuestion}},{name:"defaultValue:value",visibleIf:function(i){return!i.choicesFromQuestion},dependsOn:"choicesFromQuestion"},{name:"correctAnswer:value",visibleIf:function(i){return!i.choicesFromQuestion},dependsOn:"choicesFromQuestion"},{name:"separateSpecialChoices:boolean",visible:!1},{name:"showOtherItem:boolean",alternativeName:"hasOther"},{name:"showNoneItem:boolean",alternativeName:"hasNone"},{name:"showRefuseItem:boolean",visible:!1,version:"1.9.128"},{name:"showDontKnowItem:boolean",visible:!1,version:"1.9.128"},{name:"otherPlaceholder",alternativeName:"otherPlaceHolder",serializationProperty:"locOtherPlaceholder",dependsOn:"showOtherItem",visibleIf:function(i){return i.hasOther}},{name:"noneText",serializationProperty:"locNoneText",dependsOn:"showNoneItem",visibleIf:function(i){return i.showNoneItem}},{name:"refuseText",serializationProperty:"locRefuseText",dependsOn:"showRefuseItem",visibleIf:function(i){return i.showRefuseItem}},{name:"dontKnowText",serializationProperty:"locDontKnowText",dependsOn:"showDontKnowItem",visibleIf:function(i){return i.showDontKnowItem}},{name:"otherText",serializationProperty:"locOtherText",dependsOn:"showOtherItem",visibleIf:function(i){return i.hasOther}},{name:"otherErrorText",serializationProperty:"locOtherErrorText",dependsOn:"showOtherItem",visibleIf:function(i){return i.hasOther}},{name:"storeOthersAsComment",default:"default",choices:["default",!0,!1],visible:!1}],null,"question"),x.addClass("checkboxbase",[{name:"colCount:number",default:1,choices:[0,1,2,3,4,5],layout:"row"}],null,"selectbase");var mn=function(){function i(t,e,r,n){this.x=t,this.y=e,this.width=r,this.height=n}return Object.defineProperty(i.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),i}(),nt=function(){function i(){}return i.calculatePosition=function(t,e,r,n,o,s){s===void 0&&(s="flex");var a=t.left,l=t.top;return s==="flex"&&(o=="center"?a=(t.left+t.right-r)/2:o=="left"?a=t.left-r:a=t.right),n=="middle"?l=(t.top+t.bottom-e)/2:n=="top"?l=t.top-e:l=t.bottom,o!="center"&&n!="middle"&&(n=="top"?l=l+t.height:l=l-t.height),{left:Math.round(a),top:Math.round(l)}},i.getCorrectedVerticalDimensions=function(t,e,r,n,o){o===void 0&&(o=!0);var s,a=r-i.bottomIndent;if(n==="top"&&(s={height:e,top:t}),t<0)s={height:o?e+t:e,top:0};else if(e+t>r){var l=Math.min(e,a-t);s={height:o?l:e,top:o?t:t-(e-l)}}return s&&(s.height=Math.min(s.height,a),s.top=Math.max(s.top,0)),s},i.updateHorizontalDimensions=function(t,e,r,n,o,s){o===void 0&&(o="flex"),s===void 0&&(s={left:0,right:0}),e+=s.left+s.right;var a=void 0,l=t;return n==="center"&&(o==="fixed"?(t+e>r&&(a=r-t),l-=s.left):t<0?(l=s.left,a=Math.min(e,r)):e+t>r&&(l=r-e,l=Math.max(l,s.left),a=Math.min(e,r))),n==="left"&&t<0&&(l=s.left,a=Math.min(e,r)),n==="right"&&e+t>r&&(a=r-t),{width:a-s.left-s.right,left:l}},i.updateVerticalPosition=function(t,e,r,n,o){if(n==="middle")return n;var s=e-(t.top+(r!=="center"?t.height:0)),a=e+t.bottom-(r!=="center"?t.height:0)-o;return s>0&&a<=0&&n=="top"?n="bottom":a>0&&s<=0&&n=="bottom"?n="top":a>0&&s>0&&(n=s<a?"top":"bottom"),n},i.updateHorizontalPosition=function(t,e,r,n){if(r==="center")return r;var o=e-t.left,s=e+t.right-n;return o>0&&s<=0&&r=="left"?r="right":s>0&&o<=0&&r=="right"?r="left":s>0&&o>0&&(r=o<s?"left":"right"),r},i.calculatePopupDirection=function(t,e){var r;return e=="center"&&t!="middle"?r=t:e!="center"&&(r=e),r},i.calculatePointerTarget=function(t,e,r,n,o,s,a){s===void 0&&(s=0),a===void 0&&(a=0);var l={};return o!="center"?(l.top=t.top+t.height/2,l.left=t[o]):n!="middle"&&(l.top=t[n],l.left=t.left+t.width/2),l.left=Math.round(l.left-r),l.top=Math.round(l.top-e),o=="left"&&(l.left-=s+a),o==="center"&&(l.left-=s),l},i.bottomIndent=16,i}(),Hu=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),it=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Fo='input:not(:disabled):not([readonly]):not([type=hidden]),select:not(:disabled):not([readonly]),textarea:not(:disabled):not([readonly]), button:not(:disabled):not([readonly]), [tabindex]:not([tabindex^="-"])',vn=function(i){Hu(t,i);function t(e){var r=i.call(this)||this;return r.popupSelector=".sv-popup",r.fixedPopupContainer=".sv-popup",r.containerSelector=".sv-popup__container",r.scrollingContentSelector=".sv-popup__scrolling-content",r.visibilityAnimation=new jr(r,function(n){r._isVisible!==n&&(n?(r.updateBeforeShowing(),r.updateIsVisible(n)):(r.updateOnHiding(),r.updateIsVisible(n),r.updateAfterHiding(),r._isPositionSetValue=!1))},function(){return r._isVisible}),r.onVisibilityChanged=new Oe,r.onModelIsVisibleChangedCallback=function(){r.isVisible=r.model.isVisible},r._isPositionSetValue=!1,r.model=e,r.locale=r.model.locale,r}return t.prototype.updateIsVisible=function(e){this._isVisible=e,this.onVisibilityChanged.fire(this,{isVisible:e})},t.prototype.updateBeforeShowing=function(){this.model.onShow()},t.prototype.updateAfterHiding=function(){this.model.onHiding()},t.prototype.getLeaveOptions=function(){return{cssClass:"sv-popup--animate-leave",onBeforeRunAnimation:function(e){e.setAttribute("inert","")},onAfterRunAnimation:function(e){return e.removeAttribute("inert")}}},t.prototype.getEnterOptions=function(){return{cssClass:"sv-popup--animate-enter"}},t.prototype.getAnimatedElement=function(){return this.getAnimationContainer()},t.prototype.isAnimationEnabled=function(){return this.model.displayMode!=="overlay"&&b.animationEnabled},t.prototype.getRerenderEvent=function(){return this.onElementRerendered},t.prototype.getAnimationContainer=function(){var e;return(e=this.container)===null||e===void 0?void 0:e.querySelector(this.fixedPopupContainer)},Object.defineProperty(t.prototype,"isVisible",{get:function(){return this._isVisible},set:function(e){this.visibilityAnimation.sync(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"container",{get:function(){return this.containerElement||this.createdContainer},enumerable:!1,configurable:!0}),t.prototype.getLocale=function(){return this.locale?this.locale:i.prototype.getLocale.call(this)},t.prototype.hidePopup=function(){this.model.isVisible=!1},t.prototype.getStyleClass=function(){return new O().append(this.model.cssClass).append("sv-popup--"+this.model.displayMode,this.isOverlay)},t.prototype.getShowFooter=function(){return this.isOverlay},t.prototype.getShowHeader=function(){return!1},t.prototype.getPopupHeaderTemplate=function(){},t.prototype.createFooterActionBar=function(){var e=this;this.footerToolbarValue=new Se,this.footerToolbar.updateCallback=function(n){e.footerToolbarValue.actions.forEach(function(o){return o.cssClasses={item:"sv-popup__body-footer-item sv-popup__button sd-btn"}})};var r=[{id:"cancel",visibleIndex:10,title:this.cancelButtonText,innerCss:"sv-popup__button--cancel sd-btn",action:function(){e.cancel()}}];r=this.model.updateFooterActions(r),this.footerToolbarValue.setItems(r)},t.prototype.resetDimensionsAndPositionStyleProperties=function(){var e="inherit";this.top=e,this.left=e,this.height=e,this.width=e,this.minWidth=e},t.prototype.onModelChanging=function(e){},t.prototype.setupModel=function(e){this.model&&this.model.onVisibilityChanged.remove(this.onModelIsVisibleChangedCallback),this.onModelChanging(e),this._model=e,e.onVisibilityChanged.add(this.onModelIsVisibleChangedCallback),this.onModelIsVisibleChangedCallback()},Object.defineProperty(t.prototype,"model",{get:function(){return this._model},set:function(e){this.setupModel(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this.model.title},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contentComponentName",{get:function(){return this.model.contentComponentName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contentComponentData",{get:function(){return this.model.contentComponentData},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isModal",{get:function(){return this.model.isModal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFocusedContent",{get:function(){return this.model.isFocusedContent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFocusedContainer",{get:function(){return this.model.isFocusedContainer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showFooter",{get:function(){return this.getShowFooter()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showHeader",{get:function(){return this.getShowHeader()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"popupHeaderTemplate",{get:function(){return this.getPopupHeaderTemplate()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isOverlay",{get:function(){return this.model.displayMode==="overlay"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"styleClass",{get:function(){return this.getStyleClass().toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cancelButtonText",{get:function(){return this.getLocalizationString("modalCancelButtonText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"footerToolbar",{get:function(){return this.footerToolbarValue||this.createFooterActionBar(),this.footerToolbarValue},enumerable:!1,configurable:!0}),t.prototype.onKeyDown=function(e){e.key==="Tab"||e.keyCode===9?this.trapFocus(e):(e.key==="Escape"||e.keyCode===27)&&this.hidePopup()},t.prototype.trapFocus=function(e){var r=this.container.querySelectorAll(Fo),n=r[0],o=r[r.length-1];e.shiftKey?b.environment.root.activeElement===n&&(o.focus(),e.preventDefault()):b.environment.root.activeElement===o&&(n.focus(),e.preventDefault())},t.prototype.switchFocus=function(){this.isFocusedContent?this.focusFirstInput():this.isFocusedContainer&&this.focusContainer()},Object.defineProperty(t.prototype,"isPositionSet",{get:function(){return this._isPositionSetValue},enumerable:!1,configurable:!0}),t.prototype.updateOnShowing=function(){this.prevActiveElement=b.environment.root.activeElement,this.isOverlay&&this.resetDimensionsAndPositionStyleProperties(),this.switchFocus(),this._isPositionSetValue=!0},t.prototype.updateOnHiding=function(){this.isFocusedContent&&this.prevActiveElement&&this.prevActiveElement.focus()},t.prototype.focusContainer=function(){if(!!this.container){var e=this.container.querySelector(this.popupSelector);e==null||e.focus()}},t.prototype.focusFirstInput=function(){var e=this;setTimeout(function(){if(!!e.container){var r=e.container.querySelector(e.model.focusFirstInputSelector||Fo);r?r.focus():e.focusContainer()}},100)},t.prototype.clickOutside=function(e){this.hidePopup(),e==null||e.stopPropagation()},t.prototype.cancel=function(){this.model.onCancel(),this.hidePopup()},t.prototype.dispose=function(){i.prototype.dispose.call(this),this.model&&this.model.onVisibilityChanged.remove(this.onModelIsVisibleChangedCallback),this.createdContainer&&(this.createdContainer.remove(),this.createdContainer=void 0),this.footerToolbarValue&&this.footerToolbarValue.dispose(),this.resetComponentElement()},t.prototype.initializePopupContainer=function(){if(!this.container){var e=D.createElement("div");this.createdContainer=e,Nr(b.environment.popupMountContainer).appendChild(e)}},t.prototype.setComponentElement=function(e,r,n){e&&(this.containerElement=e)},t.prototype.resetComponentElement=function(){this.containerElement=void 0,this.prevActiveElement=void 0},t.prototype.preventScrollOuside=function(e,r){for(var n=e.target;n!==this.container;){if(D.getComputedStyle(n).overflowY==="auto"&&n.scrollHeight!==n.offsetHeight){var o=n.scrollHeight,s=n.scrollTop,a=n.clientHeight;if(!(r>0&&Math.abs(o-a-s)<1)&&!(r<0&&s<=0))return}n=n.parentElement}e.cancelable&&e.preventDefault()},it([y({defaultValue:"0px"})],t.prototype,"top",void 0),it([y({defaultValue:"0px"})],t.prototype,"left",void 0),it([y({defaultValue:"auto"})],t.prototype,"height",void 0),it([y({defaultValue:"auto"})],t.prototype,"width",void 0),it([y({defaultValue:"auto"})],t.prototype,"minWidth",void 0),it([y({defaultValue:!1})],t.prototype,"_isVisible",void 0),it([y()],t.prototype,"locale",void 0),t}(W),zu=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),bn=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};function No(i,t){var e=i||R.getInnerWidth(),r=t||R.getInnerHeight(),n=Math.min(e,r),o=n>=Cn.tabletSizeBreakpoint;return o}var Cn=function(i){zu(t,i);function t(e,r,n){var o=i.call(this,e)||this;return o.targetElement=r,o.areaElement=n,o.scrollEventCallBack=function(s){if(o.isOverlay&&re){s.stopPropagation(),s.preventDefault();return}o.hidePopup()},o.resizeEventCallback=function(){if(!!R.isAvailable()){var s=R.getVisualViewport(),a=D.getDocumentElement();!!a&&!!s&&a.style.setProperty("--sv-popup-overlay-height",s.height*s.scale+"px")}},o.resizeWindowCallback=function(){o.isOverlay||o.updatePosition(!0,_e.platform==="vue"||_e.platform==="vue3"||_e.platform=="react")},o.clientY=0,o.isTablet=!1,o.touchStartEventCallback=function(s){o.clientY=s.touches[0].clientY},o.touchMoveEventCallback=function(s){o.preventScrollOuside(s,o.clientY-s.changedTouches[0].clientY)},o.model.onRecalculatePosition.add(o.recalculatePositionHandler),o}return t.prototype.calculateIsTablet=function(e,r){this.isTablet=No(e,r)},t.prototype.getAvailableAreaRect=function(){if(this.areaElement){var e=this.areaElement.getBoundingClientRect();return new mn(e.x,e.y,e.width,e.height)}return new mn(0,0,R.getInnerWidth(),R.getInnerHeight())},t.prototype.getTargetElementRect=function(){var e=this.targetElement.getBoundingClientRect(),r=this.getAvailableAreaRect();return new mn(e.left-r.left,e.top-r.top,e.width,e.height)},t.prototype._updatePosition=function(){var e,r,n;if(!!this.targetElement){var o=this.getTargetElementRect(),s=this.getAvailableAreaRect(),a=(e=this.container)===null||e===void 0?void 0:e.querySelector(this.containerSelector);if(!!a){var l=(r=this.container)===null||r===void 0?void 0:r.querySelector(this.fixedPopupContainer),u=a.querySelector(this.scrollingContentSelector),d=D.getComputedStyle(a),v=parseFloat(d.marginLeft)||0,V=parseFloat(d.marginRight)||0,E=a.offsetHeight-u.offsetHeight+u.scrollHeight,I=a.getBoundingClientRect().width;this.model.setWidthByTarget&&(this.minWidth=o.width+"px");var k=this.model.verticalPosition,N=this.getActualHorizontalPosition();if(R.isAvailable()){var j=[E,R.getInnerHeight()*.9,(n=R.getVisualViewport())===null||n===void 0?void 0:n.height];E=Math.ceil(Math.min.apply(Math,j.filter(function(Ue){return typeof Ue=="number"}))),k=nt.updateVerticalPosition(o,E,this.model.horizontalPosition,this.model.verticalPosition,s.height),N=nt.updateHorizontalPosition(o,I,this.model.horizontalPosition,s.width)}this.popupDirection=nt.calculatePopupDirection(k,N);var H=nt.calculatePosition(o,E,I+v+V,k,N,this.model.positionMode);if(R.isAvailable()){var te=nt.getCorrectedVerticalDimensions(H.top,E,s.height,k,this.model.canShrink);if(te&&(this.height=te.height+"px",H.top=te.top),this.model.setWidthByTarget)this.width=o.width+"px",H.left=o.left;else{var me=nt.updateHorizontalDimensions(H.left,I,R.getInnerWidth(),N,this.model.positionMode,{left:v,right:V});me&&(this.width=me.width?me.width+"px":void 0,H.left=me.left)}}if(l){var xe=l.getBoundingClientRect();H.top-=xe.top,H.left-=xe.left}H.left+=s.left,H.top+=s.top,this.left=H.left+"px",this.top=H.top+"px",this.showHeader&&(this.pointerTarget=nt.calculatePointerTarget(o,H.top,H.left,k,N,v,V),this.pointerTarget.top+="px",this.pointerTarget.left+="px")}}},t.prototype.getActualHorizontalPosition=function(){var e=this.model.horizontalPosition;if(D.isAvailable()){var r=D.getComputedStyle(D.getBody()).direction=="rtl";r&&(this.model.horizontalPosition==="left"?e="right":this.model.horizontalPosition==="right"&&(e="left"))}return e},t.prototype.getStyleClass=function(){var e=this.model.overlayDisplayMode;return i.prototype.getStyleClass.call(this).append("sv-popup--dropdown",!this.isOverlay).append("sv-popup--dropdown-overlay",this.isOverlay&&e!=="plain").append("sv-popup--tablet",this.isOverlay&&(e=="tablet-dropdown-overlay"||e=="auto"&&this.isTablet)).append("sv-popup--show-pointer",!this.isOverlay&&this.showHeader).append("sv-popup--"+this.popupDirection,!this.isOverlay&&(this.showHeader||this.popupDirection=="top"||this.popupDirection=="bottom"))},t.prototype.getShowHeader=function(){return this.model.showPointer&&!this.isOverlay},t.prototype.getPopupHeaderTemplate=function(){return"popup-pointer"},t.prototype.setComponentElement=function(e,r,n){i.prototype.setComponentElement.call(this,e),!!e&&!!e.parentElement&&!this.isModal&&(this.targetElement=r||e.parentElement,this.areaElement=n)},t.prototype.resetComponentElement=function(){i.prototype.resetComponentElement.call(this),this.targetElement=void 0},t.prototype.updateOnShowing=function(){var e=b.environment.root;this.prevActiveElement=e.activeElement,this.isOverlay?this.resetDimensionsAndPositionStyleProperties():this.updatePosition(!0,!1),this.switchFocus(),R.addEventListener("resize",this.resizeWindowCallback),this.shouldCreateResizeCallback&&(R.getVisualViewport().addEventListener("resize",this.resizeEventCallback),this.container&&(this.container.addEventListener("touchstart",this.touchStartEventCallback),this.container.addEventListener("touchmove",this.touchMoveEventCallback)),this.calculateIsTablet(),this.resizeEventCallback()),R.addEventListener("scroll",this.scrollEventCallBack),this._isPositionSetValue=!0},Object.defineProperty(t.prototype,"shouldCreateResizeCallback",{get:function(){return!!R.getVisualViewport()&&this.isOverlay&&re},enumerable:!1,configurable:!0}),t.prototype.updatePosition=function(e,r){var n=this;r===void 0&&(r=!0),e&&(this.height="auto"),r?setTimeout(function(){n._updatePosition()},1):this._updatePosition()},t.prototype.updateOnHiding=function(){i.prototype.updateOnHiding.call(this),R.removeEventListener("resize",this.resizeWindowCallback),this.shouldCreateResizeCallback&&(R.getVisualViewport().removeEventListener("resize",this.resizeEventCallback),this.container&&(this.container.removeEventListener("touchstart",this.touchStartEventCallback),this.container.removeEventListener("touchmove",this.touchMoveEventCallback))),R.removeEventListener("scroll",this.scrollEventCallBack),this.isDisposed||(this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.minWidth=void 0)},t.prototype.onModelChanging=function(e){var r=this;this.model&&this.model.onRecalculatePosition.remove(this.recalculatePositionHandler),this.recalculatePositionHandler||(this.recalculatePositionHandler=function(n,o){r.isOverlay||r.updatePosition(o.isResetHeight)}),i.prototype.onModelChanging.call(this,e),e.onRecalculatePosition.add(this.recalculatePositionHandler)},t.prototype.dispose=function(){i.prototype.dispose.call(this),this.updateOnHiding(),this.model&&(this.model.onRecalculatePosition.remove(this.recalculatePositionHandler),this.recalculatePositionHandler=void 0),this.resetComponentElement()},t.tabletSizeBreakpoint=600,bn([y()],t.prototype,"isTablet",void 0),bn([y({defaultValue:"left"})],t.prototype,"popupDirection",void 0),bn([y({defaultValue:{left:"0px",top:"0px"}})],t.prototype,"pointerTarget",void 0),t}(vn),Uu=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Be=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},lr=function(i){Uu(t,i);function t(e,r){var n=i.call(this)||this;return n.question=e,n.onSelectionChanged=r,n.minPageSize=25,n.loadingItemHeight=40,n.timer=void 0,n._markdownMode=!1,n.filteredItems=void 0,n.selectedItemSelector=".sv-list__item--selected",n.itemSelector=".sv-list__item",n.itemsSettings={skip:0,take:0,totalCount:0,items:[]},n.popupCssClasses="sv-single-select-list",n.listModelFilterStringChanged=function(o){n.filterString!==o&&(n.filterString=o)},n.questionPropertyChangedHandler=function(o,s){n.onPropertyChangedHandler(o,s)},n.htmlCleanerElement=D.createElement("div"),n.question.ariaExpanded="false",e.onPropertyChanged.add(n.questionPropertyChangedHandler),n.showInputFieldComponent=n.question.showInputFieldComponent,n.listModel=n.createListModel(),n.updateAfterListModelCreated(n.listModel),n.setChoicesLazyLoadEnabled(n.question.choicesLazyLoadEnabled),n.setSearchEnabled(n.question.searchEnabled),n.setTextWrapEnabled(n.question.textWrapEnabled),n.createPopup(),n.resetItemsSettings(),n}return Object.defineProperty(t.prototype,"focusFirstInputSelector",{get:function(){return this.getFocusFirstInputSelector()},enumerable:!1,configurable:!0}),t.prototype.getFocusFirstInputSelector=function(){return re?this.isValueEmpty(this.question.value)?this.itemSelector:this.selectedItemSelector:!this.listModel.showFilter&&!!this.question.value?this.selectedItemSelector:""},t.prototype.resetItemsSettings=function(){this.itemsSettings.skip=0,this.itemsSettings.take=Math.max(this.minPageSize,this.question.choicesLazyLoadPageSize),this.itemsSettings.totalCount=0,this.itemsSettings.items=[]},t.prototype.setItems=function(e,r){this.itemsSettings.items=[].concat(this.itemsSettings.items,e),this.itemsSettings.totalCount=r,this.listModel.isAllDataLoaded=this.question.choicesLazyLoadEnabled&&this.itemsSettings.items.length==this.itemsSettings.totalCount,this.question.choices=this.itemsSettings.items},t.prototype.loadQuestionChoices=function(e){var r=this;this.question.survey.loadQuestionChoices({question:this.question,filter:this.filterString,skip:this.itemsSettings.skip,take:this.itemsSettings.take,setItems:function(n,o){r.setItems(n||[],o||0),r.popupRecalculatePosition(r.itemsSettings.skip===r.itemsSettings.take),e&&e()}}),this.itemsSettings.skip+=this.itemsSettings.take},t.prototype.updateQuestionChoices=function(e){var r=this,n=this.itemsSettings.skip+1<this.itemsSettings.totalCount;(!this.itemsSettings.skip||n)&&(!!this.filterString&&b.dropdownSearchDelay>0?(this.timer&&(clearTimeout(this.timer),this.timer=void 0),this.timer=setTimeout(function(){r.loadQuestionChoices(e)},b.dropdownSearchDelay)):this.loadQuestionChoices(e))},t.prototype.updatePopupFocusFirstInputSelector=function(){this._popupModel.focusFirstInputSelector=this.focusFirstInputSelector},t.prototype.getDropdownMenuOptions=function(){var e=R.getInnerWidth(),r=R.getInnerHeight(),n=No(e,r),o="dropdown",s="desktop";return re&&(o=n?"popup":"overlay",s=n?"tablet":"mobile"),{menuType:o,deviceType:s,hasTouchScreen:re,screenHeight:r,screenWidth:e}},t.prototype.createPopup=function(){var e=this,r={verticalPosition:"bottom",horizontalPosition:"center",showPointer:!1};this._popupModel=new wt("sv-list",{model:this.listModel},r),this._popupModel.displayMode=re?"overlay":"popup",this._popupModel.positionMode="fixed",this._popupModel.isFocusedContainer=!1,this._popupModel.isFocusedContent=re,this._popupModel.setWidthByTarget=!re,this._popupModel.locale=this.question.getLocale(),this.updatePopupFocusFirstInputSelector(),this.listModel.registerPropertyChangedHandlers(["showFilter"],function(){e.updatePopupFocusFirstInputSelector()}),this._popupModel.cssClass=this.popupCssClasses,this._popupModel.onVisibilityChanged.add(function(n,o){if(o.isVisible&&(e.listModel.renderElements=!0),o.isVisible&&e.question.choicesLazyLoadEnabled&&(e.listModel.actions=[],e.resetItemsSettings(),e.updateQuestionChoices()),o.isVisible){e.updatePopupFocusFirstInputSelector();var s=e.getDropdownMenuOptions();e.question.processOpenDropdownMenu(s),e._popupModel.updateDisplayMode(s.menuType),e.question.onOpenedCallBack&&e.question.onOpenedCallBack()}o.isVisible||(e.onHidePopup(),e.question.choicesLazyLoadEnabled&&e.resetItemsSettings()),e.question.ariaExpanded=o.isVisible?"true":"false",e.question.processPopupVisiblilityChanged(e.popupModel,o.isVisible)})},t.prototype.setFilterStringToListModel=function(e){var r=this;if(this.listModel.filterString=e,this.listModel.resetFocusedItem(),this.question.selectedItem&&this.question.selectedItem.text.indexOf(e)>=0){this.listModel.focusedItem=this.getAvailableItems().filter(function(n){return n.id==r.question.selectedItem.value})[0],this.listModel.filterString&&this.listModel.actions.map(function(n){return n.selectedValue=!1});return}(!this.listModel.focusedItem||!this.listModel.isItemVisible(this.listModel.focusedItem))&&this.listModel.focusFirstVisibleItem()},t.prototype.setTextWrapEnabled=function(e){this.listModel.textWrapEnabled=e},t.prototype.popupRecalculatePosition=function(e){var r=this;setTimeout(function(){r.popupModel.recalculatePosition(e)},1)},t.prototype.onHidePopup=function(){this.resetFilterString(),this.question.suggestedItem=null},t.prototype.getAvailableItems=function(){return this.question.visibleChoices},t.prototype.setOnTextSearchCallbackForListModel=function(e){var r=this;e.setOnTextSearchCallback(function(n,o){if(r.filteredItems)return r.filteredItems.indexOf(n)>=0;var s=n.text.toLocaleLowerCase();s=b.comparator.normalizeTextCallback(s,"filter");var a=s.indexOf(o.toLocaleLowerCase());return r.question.searchMode=="startsWith"?a==0:a>-1})},t.prototype.createListModel=function(){var e=this,r=this.getAvailableItems(),n=this.onSelectionChanged;n||(n=function(a){e.question.value=a.id,e.question.searchEnabled&&e.applyInputString(a),e.popupModel.hide()});var o={items:r,onSelectionChanged:n,allowSelection:!1,locOwner:this.question,elementId:this.listElementId},s=new Pt(o);return this.setOnTextSearchCallbackForListModel(s),s.renderElements=!1,s.forceShowFilter=!0,s.areSameItemsCallback=function(a,l){return a===l},s},t.prototype.updateAfterListModelCreated=function(e){var r=this;e.isItemSelected=function(n){return!!n.selected},e.onPropertyChanged.add(function(n,o){o.name=="hasVerticalScroller"&&(r.hasScroll=o.newValue)}),e.isAllDataLoaded=!this.question.choicesLazyLoadEnabled,e.actions.forEach(function(n){return n.disableTabStop=!0})},t.prototype.updateCssClasses=function(e,r){this.popupModel.cssClass=new O().append(e).append(this.popupCssClasses).toString(),this.listModel.cssClasses=r},t.prototype.resetFilterString=function(){this.filterString&&(this.filterString=void 0)},t.prototype.clear=function(){this.inputString=null,this.hintString="",this.resetFilterString()},t.prototype.onSetFilterString=function(){var e=this;if(this.filteredItems=void 0,!(!this.filterString&&!this.popupModel.isVisible)){var r={question:this.question,choices:this.getAvailableItems(),filter:this.filterString,filteredChoices:void 0};this.question.survey.onChoicesSearch.fire(this.question.survey,r),this.filteredItems=r.filteredChoices,!!this.filterString&&!this.popupModel.isVisible&&this.popupModel.show();var n=function(){e.setFilterStringToListModel(e.filterString),e.popupRecalculatePosition(!0)};this.question.choicesLazyLoadEnabled?(this.resetItemsSettings(),this.updateQuestionChoices(n)):n()}},Object.defineProperty(t.prototype,"isAllDataLoaded",{get:function(){return!!this.itemsSettings.totalCount&&this.itemsSettings.items.length==this.itemsSettings.totalCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canShowSelectedItem",{get:function(){return!this.focused||this._markdownMode||!this.searchEnabled},enumerable:!1,configurable:!0}),t.prototype.applyInputString=function(e){var r=e==null?void 0:e.locText.hasHtml;r||this.question.inputFieldComponentName?(this._markdownMode=!0,this.inputString=this.cleanHtml(e==null?void 0:e.locText.getHtmlValue()),this.hintString=""):(this.inputString=e==null?void 0:e.title,this.hintString=e==null?void 0:e.title)},t.prototype.cleanHtml=function(e){return this.htmlCleanerElement?(this.htmlCleanerElement.innerHTML=e,this.htmlCleanerElement.textContent):""},t.prototype.fixInputCase=function(){var e=this.hintStringMiddle;e&&this.inputString!=e&&(this.inputString=e)},t.prototype.applyHintString=function(e){var r=e==null?void 0:e.locText.hasHtml;r||this.question.inputFieldComponentName?(this._markdownMode=!0,this.hintString=""):this.hintString=e==null?void 0:e.title},Object.defineProperty(t.prototype,"inputStringRendered",{get:function(){return this.inputString||""},set:function(e){this.inputString=e,this.filterString=e,e?this.applyHintString(this.listModel.focusedItem||this.question.selectedItem):this.hintString=""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"placeholderRendered",{get:function(){return this.hintString?"":this.question.readOnlyText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"listElementId",{get:function(){return this.question.inputId+"_list"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hintStringLC",{get:function(){var e;return((e=this.hintString)===null||e===void 0?void 0:e.toLowerCase())||""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputStringLC",{get:function(){var e;return((e=this.inputString)===null||e===void 0?void 0:e.toLowerCase())||""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showHintPrefix",{get:function(){return!!this.inputString&&this.hintStringLC.indexOf(this.inputStringLC)>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hintStringPrefix",{get:function(){return this.inputString?this.hintString.substring(0,this.hintStringLC.indexOf(this.inputStringLC)):null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showHintString",{get:function(){return!!this.question.searchEnabled&&this.hintStringLC&&this.hintStringLC.indexOf(this.inputStringLC)>=0||!this.question.searchEnabled&&this.hintStringLC&&this.question.isEmpty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hintStringSuffix",{get:function(){return this.hintString.substring(this.hintStringLC.indexOf(this.inputStringLC)+this.inputStringLC.length)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hintStringMiddle",{get:function(){var e=this.hintStringLC.indexOf(this.inputStringLC);return e==-1?null:this.hintString.substring(e,e+this.inputStringLC.length)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"popupModel",{get:function(){return this._popupModel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noTabIndex",{get:function(){return this.question.isInputReadOnly||this.searchEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"filterReadOnly",{get:function(){return this.question.isInputReadOnly||!this.searchEnabled||!this.focused},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"filterStringEnabled",{get:function(){return!this.question.isInputReadOnly&&this.searchEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputMode",{get:function(){return re?"none":"text"},enumerable:!1,configurable:!0}),t.prototype.setSearchEnabled=function(e){this.listModel.searchEnabled=re,this.listModel.showSearchClearButton=re,this.searchEnabled=e},t.prototype.setChoicesLazyLoadEnabled=function(e){this.listModel.setOnFilterStringChangedCallback(e?this.listModelFilterStringChanged:void 0)},t.prototype.updateItems=function(){this.listModel.setItems(this.getAvailableItems())},t.prototype.onClick=function(e){this.question.readOnly||this.question.isDesignMode||this.question.isPreviewStyle||this.question.isReadOnlyAttr||(this._popupModel.toggleVisibility(),this.focusItemOnClickAndPopup(),this.question.focusInputElement(!1))},t.prototype.chevronPointerDown=function(e){this._popupModel.isVisible&&e.preventDefault()},t.prototype.onPropertyChangedHandler=function(e,r){r.name=="value"&&(this.showInputFieldComponent=this.question.showInputFieldComponent),r.name=="textWrapEnabled"&&this.setTextWrapEnabled(r.newValue)},t.prototype.focusItemOnClickAndPopup=function(){this._popupModel.isVisible&&this.question.value&&this.changeSelectionWithKeyboard(!1)},t.prototype.onClear=function(e){this.question.clearValue(!0),this._popupModel.hide(),e&&(e.preventDefault(),e.stopPropagation())},t.prototype.getSelectedAction=function(){return this.question.selectedItem||null},t.prototype.changeSelectionWithKeyboard=function(e){var r,n=this.listModel.focusedItem;!n&&this.question.selectedItem?q.getItemByValue(this.question.visibleChoices,this.question.value)&&(this.listModel.focusedItem=this.question.selectedItem):e?this.listModel.focusPrevVisibleItem():this.listModel.focusNextVisibleItem(),this.beforeScrollToFocusedItem(n),this.scrollToFocusedItem(),this.afterScrollToFocusedItem(),this.ariaActivedescendant=(r=this.listModel.focusedItem)===null||r===void 0?void 0:r.elementId},t.prototype.beforeScrollToFocusedItem=function(e){this.question.value&&e&&(e.selectedValue=!1,this.listModel.focusedItem.selectedValue=!this.listModel.filterString,this.question.suggestedItem=this.listModel.focusedItem)},t.prototype.afterScrollToFocusedItem=function(){var e;this.question.value&&!this.listModel.filterString&&this.question.searchEnabled?this.applyInputString(this.listModel.focusedItem||this.question.selectedItem):this.applyHintString(this.listModel.focusedItem||this.question.selectedItem),this.fixInputCase(),this.ariaActivedescendant=(e=this.listModel.focusedItem)===null||e===void 0?void 0:e.elementId},t.prototype.keyHandler=function(e){var r=e.which||e.keyCode;if(this.popupModel.isVisible&&e.keyCode===38?(this.changeSelectionWithKeyboard(!0),e.preventDefault(),e.stopPropagation()):e.keyCode===40&&(this.popupModel.show(),this.changeSelectionWithKeyboard(!1),e.preventDefault(),e.stopPropagation()),e.keyCode===9)this.popupModel.hide();else if(!this.popupModel.isVisible&&(e.keyCode===13||e.keyCode===32))e.keyCode===32&&(this.popupModel.show(),this.changeSelectionWithKeyboard(!1)),e.keyCode===13&&this.question.survey.questionEditFinishCallback(this.question,e),e.preventDefault(),e.stopPropagation();else if(this.popupModel.isVisible&&(e.keyCode===13||e.keyCode===32&&(!this.question.searchEnabled||!this.inputString)))e.keyCode===13&&this.question.searchEnabled&&!this.inputString&&this.question instanceof Lt&&!this._markdownMode&&this.question.value?(this._popupModel.hide(),this.onClear(e)):(this.listModel.selectFocusedItem(),this.onFocus(e)),e.preventDefault(),e.stopPropagation();else if(r===46||r===8)this.searchEnabled||this.onClear(e);else if(e.keyCode===27)this._popupModel.hide(),this.hintString="",this.onEscape();else{if((e.keyCode===38||e.keyCode===40||e.keyCode===32&&!this.question.searchEnabled)&&(e.preventDefault(),e.stopPropagation()),e.keyCode===32&&this.question.searchEnabled)return;Qi(e,{processEsc:!1,disableTabStop:this.question.isInputReadOnly})}},t.prototype.onEscape=function(){this.question.searchEnabled&&this.applyInputString(this.question.selectedItem)},t.prototype.onScroll=function(e){var r=e.target;r.scrollHeight-(r.scrollTop+r.offsetHeight)<=this.loadingItemHeight&&this.updateQuestionChoices()},t.prototype.onBlur=function(e){if(this.focused=!1,this.popupModel.isVisible&&re){this._popupModel.show();return}qi(e),this._popupModel.hide(),this.resetFilterString(),this.inputString=null,this.hintString="",e.stopPropagation()},t.prototype.onFocus=function(e){this.focused=!0,this.setInputStringFromSelectedItem(this.question.selectedItem)},t.prototype.setInputStringFromSelectedItem=function(e){!this.focused||(this.question.searchEnabled&&!!e?this.applyInputString(e):this.inputString=null)},t.prototype.dispose=function(){i.prototype.dispose.call(this),this.question&&this.question.onPropertyChanged.remove(this.questionPropertyChangedHandler),this.questionPropertyChangedHandler=void 0,this.listModel&&this.listModel.dispose(),this.popupModel&&this.popupModel.dispose()},t.prototype.scrollToFocusedItem=function(){this.listModel.scrollToFocusedItem()},Be([y({defaultValue:!1})],t.prototype,"focused",void 0),Be([y({defaultValue:!0})],t.prototype,"searchEnabled",void 0),Be([y({defaultValue:"",onSet:function(e,r){r.onSetFilterString()}})],t.prototype,"filterString",void 0),Be([y({defaultValue:"",onSet:function(e,r){r.question.inputHasValue=!!e}})],t.prototype,"inputString",void 0),Be([y({})],t.prototype,"showInputFieldComponent",void 0),Be([y()],t.prototype,"ariaActivedescendant",void 0),Be([y({defaultValue:!1,onSet:function(e,r){e?r.listModel.addScrollEventListener(function(n){r.onScroll(n)}):r.listModel.removeScrollEventListener()}})],t.prototype,"hasScroll",void 0),Be([y({defaultValue:""})],t.prototype,"hintString",void 0),t}(W),Wu=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Le=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Lt=function(i){Wu(t,i);function t(e){var r=i.call(this,e)||this;return r.lastSelectedItemValue=null,r.minMaxChoices=[],r.onOpened=r.addEvent(),r.createLocalizableString("placeholder",r,!1,!0),r.createLocalizableString("clearCaption",r,!1,!0),r.registerPropertyChangedHandlers(["choicesMin","choicesMax","choicesStep"],function(){r.onVisibleChoicesChanged()}),r.registerPropertyChangedHandlers(["value","renderAs","showOtherItem","otherText","placeholder","choices","visibleChoices"],function(){r.updateReadOnlyText()}),r.updateReadOnlyText(),r}return t.prototype.updateReadOnlyText=function(){var e=this.selectedItem?"":this.placeholder;this.renderAs=="select"&&(this.isOtherSelected?e=this.otherText:this.isNoneSelected?e=this.noneText:this.selectedItem&&(e=this.selectedItemText)),this.readOnlyText=e},t.prototype.locStrsChanged=function(){i.prototype.locStrsChanged.call(this),this.updateReadOnlyText()},Object.defineProperty(t.prototype,"showOptionsCaption",{get:function(){return this.allowClear},set:function(e){this.allowClear=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showClearButton",{get:function(){return this.allowClear&&!this.isEmpty()&&(!this.isDesignMode||b.supportCreatorV2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"optionsCaption",{get:function(){return this.placeholder},set:function(e){this.placeholder=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"placeholder",{get:function(){return this.getLocalizableStringText("placeholder")},set:function(e){this.setLocalizableStringText("placeholder",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPlaceholder",{get:function(){return this.getLocalizableString("placeholder")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clearCaption",{get:function(){return this.getLocalizableStringText("clearCaption")},set:function(e){this.setLocalizableStringText("clearCaption",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locClearCaption",{get:function(){return this.getLocalizableString("clearCaption")},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"dropdown"},Object.defineProperty(t.prototype,"ariaRole",{get:function(){return"combobox"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedItem",{get:function(){return this.getSingleSelectedItem()},enumerable:!1,configurable:!0}),t.prototype.onGetSingleSelectedItem=function(e){e&&(this.lastSelectedItemValue=e)},t.prototype.supportGoNextPageAutomatic=function(){return!this.isOtherSelected},t.prototype.getChoices=function(){var e=i.prototype.getChoices.call(this);if(this.choicesMax<=this.choicesMin)return e;for(var r=[],n=0;n<e.length;n++)r.push(e[n]);if(this.minMaxChoices.length===0||this.minMaxChoices.length!==(this.choicesMax-this.choicesMin)/this.choicesStep+1){this.minMaxChoices=[];for(var n=this.choicesMin;n<=this.choicesMax;n+=this.choicesStep)this.minMaxChoices.push(this.createItemValue(n))}return r=r.concat(this.minMaxChoices),r},Object.defineProperty(t.prototype,"choicesMin",{get:function(){return this.getPropertyValue("choicesMin")},set:function(e){this.setPropertyValue("choicesMin",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"choicesMax",{get:function(){return this.getPropertyValue("choicesMax")},set:function(e){this.setPropertyValue("choicesMax",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"choicesStep",{get:function(){return this.getPropertyValue("choicesStep")},set:function(e){e<1&&(e=1),this.setPropertyValue("choicesStep",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autocomplete",{get:function(){return this.getPropertyValue("autocomplete","")},set:function(e){this.setPropertyValue("autocomplete",e)},enumerable:!1,configurable:!0}),t.prototype.getControlClass=function(){return new O().append(this.cssClasses.control).append(this.cssClasses.controlEmpty,this.isEmpty()).append(this.cssClasses.onError,this.hasCssError()).append(this.cssClasses.controlDisabled,this.isDisabledStyle).append(this.cssClasses.controlReadOnly,this.isReadOnlyStyle).append(this.cssClasses.controlPreview,this.isPreviewStyle).append(this.cssClasses.controlInputFieldComponent,!!this.inputFieldComponentName).toString()},Object.defineProperty(t.prototype,"selectedItemLocText",{get:function(){var e=this.suggestedItem||this.selectedItem;return e==null?void 0:e.locText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputFieldComponentName",{get:function(){return this.inputFieldComponent||this.itemComponent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showSelectedItemLocText",{get:function(){return!this.inputHasValue&&!this.inputFieldComponentName&&!!this.selectedItemLocText&&this.dropdownListModel.canShowSelectedItem},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showInputFieldComponent",{get:function(){return!this.inputHasValue&&!!this.inputFieldComponentName&&!this.isEmpty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedItemText",{get:function(){var e=this.selectedItem;return e?e.text:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropdownListModel",{get:function(){return this.renderAs!=="select"&&!this.dropdownListModelValue&&(this.dropdownListModelValue=new lr(this)),this.dropdownListModelValue},set:function(e){this.dropdownListModelValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"popupModel",{get:function(){var e;return(e=this.dropdownListModel)===null||e===void 0?void 0:e.popupModel},enumerable:!1,configurable:!0}),t.prototype.onOpenedCallBack=function(){this.onOpened.fire(this,{question:this,choices:this.choices})},t.prototype.onSelectedItemValuesChangedHandler=function(e){var r;(r=this.dropdownListModel)===null||r===void 0||r.setInputStringFromSelectedItem(e),i.prototype.onSelectedItemValuesChangedHandler.call(this,e)},t.prototype.hasUnknownValue=function(e,r,n,o){return this.choicesLazyLoadEnabled?!1:i.prototype.hasUnknownValue.call(this,e,r,n,o)},t.prototype.needConvertRenderedOtherToDataValue=function(){var e,r=(e=this.otherValue)===null||e===void 0?void 0:e.trim();return r?i.prototype.hasUnknownValue.call(this,r,!0,!1):!1},t.prototype.getItemIfChoicesNotContainThisValue=function(e,r){return this.choicesLazyLoadEnabled?this.createItemValue(e,r):i.prototype.getItemIfChoicesNotContainThisValue.call(this,e,r)},t.prototype.onVisibleChoicesChanged=function(){i.prototype.onVisibleChoicesChanged.call(this),!this.isLoadingFromJson&&this.popupModel&&this.dropdownListModel.updateItems()},t.prototype.getFirstInputElementId=function(){return this.inputId+(this.searchEnabled?"_0":"")},t.prototype.getInputId=function(){return this.inputId+"_0"},t.prototype.clearValue=function(e){var r;i.prototype.clearValue.call(this,e),this.lastSelectedItemValue=null,(r=this.dropdownListModel)===null||r===void 0||r.clear()},t.prototype.afterRenderCore=function(e){i.prototype.afterRenderCore.call(this,e),this.dropdownListModelValue&&this.dropdownListModelValue.clear()},t.prototype.onClick=function(e){this.onOpenedCallBack&&this.onOpenedCallBack()},t.prototype.onKeyUp=function(e){var r=e.which||e.keyCode;r===46&&(this.clearValue(!0),e.preventDefault(),e.stopPropagation())},t.prototype.supportEmptyValidation=function(){return!0},t.prototype.onBlurCore=function(e){var r;(r=this.dropdownListModel)===null||r===void 0||r.onBlur(e),i.prototype.onBlurCore.call(this,e)},t.prototype.onFocusCore=function(e){var r;(r=this.dropdownListModel)===null||r===void 0||r.onFocus(e),i.prototype.onFocusCore.call(this,e)},t.prototype.dispose=function(){i.prototype.dispose.call(this),this.dropdownListModelValue&&this.dropdownListModelValue.dispose()},Le([y()],t.prototype,"allowClear",void 0),Le([y({onSet:function(e,r){r.dropdownListModel&&r.dropdownListModel.setSearchEnabled(e)}})],t.prototype,"searchEnabled",void 0),Le([y()],t.prototype,"searchMode",void 0),Le([y()],t.prototype,"textWrapEnabled",void 0),Le([y({defaultValue:!1})],t.prototype,"inputHasValue",void 0),Le([y({defaultValue:""})],t.prototype,"readOnlyText",void 0),Le([y({onSet:function(e,r){r.dropdownListModel&&r.dropdownListModel.setChoicesLazyLoadEnabled(e)}})],t.prototype,"choicesLazyLoadEnabled",void 0),Le([y()],t.prototype,"choicesLazyLoadPageSize",void 0),Le([y()],t.prototype,"suggestedItem",void 0),t}(gn);x.addClass("dropdown",[{name:"placeholder",alternativeName:"optionsCaption",serializationProperty:"locPlaceholder"},{name:"allowClear:boolean",alternativeName:"showOptionsCaption",default:!0},{name:"choicesMin:number",default:0},{name:"choicesMax:number",default:0},{name:"choicesStep:number",default:1,minValue:1},{name:"autocomplete",alternativeName:"autoComplete",choices:b.questions.dataList},{name:"textWrapEnabled:boolean",default:!0},{name:"renderAs",default:"default",visible:!1},{name:"searchEnabled:boolean",default:!0,visible:!1},{name:"searchMode",default:"contains",choices:["contains","startsWith"]},{name:"choicesLazyLoadEnabled:boolean",default:!1,visible:!1},{name:"choicesLazyLoadPageSize:number",default:25,visible:!1},{name:"inputFieldComponent",visible:!1},{name:"itemComponent",visible:!1,default:""}],function(){return new Lt("")},"selectbase"),Z.Instance.registerQuestion("dropdown",function(i){var t=new Lt(i);return t.choices=Z.DefaultChoices,t});var _o=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ko=function(i){_o(t,i);function t(e,r,n,o){var s=i.call(this)||this;return s.item=e,s.fullName=r,s.data=n,s.setValueDirectly(o),s.cellClick=function(a){s.value=a.value},s.registerPropertyChangedHandlers(["value"],function(){s.data&&s.data.onMatrixRowChanged(s)}),s.data&&s.data.hasErrorInRow(s)&&(s.hasError=!0),s}return Object.defineProperty(t.prototype,"name",{get:function(){return this.item.value},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this.item.text},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locText",{get:function(){return this.item.locText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.getPropertyValue("value")},set:function(e){this.isReadOnly||this.setValueDirectly(this.data.getCorrectedRowValue(e))},enumerable:!1,configurable:!0}),t.prototype.setValueDirectly=function(e){this.setPropertyValue("value",e)},Object.defineProperty(t.prototype,"isReadOnly",{get:function(){return!this.item.enabled||this.data.isInputReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnlyAttr",{get:function(){return this.data.isReadOnlyAttr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDisabledAttr",{get:function(){return!this.item.enabled||this.data.isDisabledAttr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rowTextClasses",{get:function(){return new O().append(this.data.cssClasses.rowTextCell).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasError",{get:function(){return this.getPropertyValue("hasError",!1)},set:function(e){this.setPropertyValue("hasError",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rowClasses",{get:function(){var e=this.data.cssClasses;return new O().append(e.row).append(e.rowError,this.hasError).append(e.rowReadOnly,this.isReadOnly).append(e.rowDisabled,this.data.isDisabledStyle).toString()},enumerable:!1,configurable:!0}),t}(W),Bo=function(){function i(t){this.cellsOwner=t,this.values={}}return Object.defineProperty(i.prototype,"isEmpty",{get:function(){return Object.keys(this.values).length==0},enumerable:!1,configurable:!0}),i.prototype.valuesChanged=function(){this.onValuesChanged&&this.onValuesChanged()},i.prototype.setCellText=function(t,e,r){if(t=this.getCellRowColumnValue(t,this.rows),e=this.getCellRowColumnValue(e,this.columns),!(!t||!e)){if(r)this.values[t]||(this.values[t]={}),this.values[t][e]||(this.values[t][e]=this.createString()),this.values[t][e].text=r;else if(this.values[t]&&this.values[t][e]){var n=this.values[t][e];n.text="",n.isEmpty&&(delete this.values[t][e],Object.keys(this.values[t]).length==0&&delete this.values[t])}this.valuesChanged()}},i.prototype.setDefaultCellText=function(t,e){this.setCellText(b.matrix.defaultRowName,t,e)},i.prototype.getCellLocText=function(t,e){return t=this.getCellRowColumnValue(t,this.rows),e=this.getCellRowColumnValue(e,this.columns),!t||!e||!this.values[t]||!this.values[t][e]?null:this.values[t][e]},i.prototype.getDefaultCellLocText=function(t,e){return this.getCellLocText(b.matrix.defaultRowName,t)},i.prototype.getCellDisplayLocText=function(t,e){var r=this.getCellLocText(t,e);return r&&!r.isEmpty||(r=this.getCellLocText(b.matrix.defaultRowName,e),r&&!r.isEmpty)?r:(typeof e=="number"&&(e=e>=0&&e<this.columns.length?this.columns[e]:null),e&&e.locText?e.locText:null)},i.prototype.getCellText=function(t,e){var r=this.getCellLocText(t,e);return r?r.calculatedText:null},i.prototype.getDefaultCellText=function(t){var e=this.getCellLocText(b.matrix.defaultRowName,t);return e?e.calculatedText:null},i.prototype.getCellDisplayText=function(t,e){var r=this.getCellDisplayLocText(t,e);return r?r.calculatedText:null},Object.defineProperty(i.prototype,"rows",{get:function(){return this.cellsOwner?this.cellsOwner.getRows():[]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"columns",{get:function(){return this.cellsOwner?this.cellsOwner.getColumns():[]},enumerable:!1,configurable:!0}),i.prototype.getCellRowColumnValue=function(t,e){if(t==null)return null;if(typeof t=="number"){if(t<0||t>=e.length)return null;t=e[t].value}return t.value?t.value:t},i.prototype.getJson=function(){if(this.isEmpty)return null;var t={};for(var e in this.values){var r={},n=this.values[e];for(var o in n)r[o]=n[o].getJson();t[e]=r}return t},i.prototype.setJson=function(t){if(this.values={},t){for(var e in t)if(e!="pos"){var r=t[e];this.values[e]={};for(var n in r)if(n!="pos"){var o=this.createString();o.setJson(r[n]),this.values[e][n]=o}}}this.valuesChanged()},i.prototype.locStrsChanged=function(){if(!this.isEmpty)for(var t in this.values){var e=this.values[t];for(var r in e)e[r].strChanged()}},i.prototype.createString=function(){return new we(this.cellsOwner,!0)},i}(),Pn=function(i){_o(t,i);function t(e){var r=i.call(this,e)||this;return r.isRowChanging=!1,r.emptyLocalizableString=new we(r),r.cellsValue=new Bo(r),r.cellsValue.onValuesChanged=function(){r.updateHasCellText(),r.propertyValueChanged("cells",r.cells,r.cells)},r.registerPropertyChangedHandlers(["columns"],function(){r.onColumnsChanged()}),r.registerPropertyChangedHandlers(["rows"],function(){r.filterItems()||r.onRowsChanged()}),r.registerPropertyChangedHandlers(["hideIfRowsEmpty"],function(){r.updateVisibilityBasedOnRows()}),r}return t.prototype.getType=function(){return"matrix"},Object.defineProperty(t.prototype,"cellComponent",{get:function(){return this.getPropertyValue("cellComponent")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemComponent",{set:function(e){this.setPropertyValue("cellComponent",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasSingleInput",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAllRowRequired",{get:function(){return this.getPropertyValue("isAllRowRequired")},set:function(e){this.setPropertyValue("isAllRowRequired",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"eachRowUnique",{get:function(){return this.getPropertyValue("eachRowUnique")},set:function(e){this.setPropertyValue("eachRowUnique",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasRows",{get:function(){return this.rows.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rowsOrder",{get:function(){return this.getPropertyValue("rowsOrder")},set:function(e){e=e.toLowerCase(),e!=this.rowsOrder&&(this.setPropertyValue("rowsOrder",e),this.onRowsChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hideIfRowsEmpty",{get:function(){return this.getPropertyValue("hideIfRowsEmpty")},set:function(e){this.setPropertyValue("hideIfRowsEmpty",e)},enumerable:!1,configurable:!0}),t.prototype.getRows=function(){return this.rows},t.prototype.getColumns=function(){return this.visibleColumns},t.prototype.addColumn=function(e,r){var n=new q(e,r);return this.columns.push(n),n},t.prototype.getItemClass=function(e,r){var n=e.value==r.value,o=this.isReadOnly,s=!n&&!o,a=this.hasCellText,l=this.cssClasses;return new O().append(l.cell,a).append(a?l.cellText:l.label).append(l.itemOnError,!a&&(this.isAllRowRequired||this.eachRowUnique?e.hasError:this.hasCssError())).append(a?l.cellTextSelected:l.itemChecked,n).append(a?l.cellTextDisabled:l.itemDisabled,this.isDisabledStyle).append(a?l.cellTextReadOnly:l.itemReadOnly,this.isReadOnlyStyle).append(a?l.cellTextPreview:l.itemPreview,this.isPreviewStyle).append(l.itemHover,s&&!a).toString()},Object.defineProperty(t.prototype,"itemSvgIcon",{get:function(){return this.isPreviewStyle&&this.cssClasses.itemPreviewSvgIconId?this.cssClasses.itemPreviewSvgIconId:this.cssClasses.itemSvgIconId},enumerable:!1,configurable:!0}),t.prototype.locStrsChanged=function(){i.prototype.locStrsChanged.call(this),this.cells.locStrsChanged()},t.prototype.getQuizQuestionCount=function(){for(var e=0,r=0;r<this.rows.length;r++)this.isValueEmpty(this.correctAnswer[this.rows[r].value])||e++;return e},t.prototype.getCorrectAnswerCount=function(){for(var e=0,r=this.value,n=0;n<this.rows.length;n++){var o=this.rows[n].value;!this.isValueEmpty(r[o])&&this.isTwoValueEquals(this.correctAnswer[o],r[o])&&e++}return e},t.prototype.runItemsCondition=function(e,r){return q.runEnabledConditionsForItems(this.rows,void 0,e,r),i.prototype.runItemsCondition.call(this,e,r)},t.prototype.getVisibleRows=function(){var e=new Array,r=this.value;r||(r={});for(var n=this.filteredRows?this.filteredRows:this.rows,o=0;o<n.length;o++){var s=n[o];this.isValueEmpty(s.value)||e.push(this.createMatrixRow(s,this.id+"_"+s.value.toString().replace(/\s/g,"_"),r[s.value]))}return this.generatedVisibleRows=e,e},t.prototype.sortVisibleRows=function(e){if(!!this.survey&&this.survey.isDesignMode)return e;var r=this.rowsOrder.toLowerCase();return r==="random"?P.randomizeArray(e):e},t.prototype.endLoadingFromJson=function(){i.prototype.endLoadingFromJson.call(this),this.rows=this.sortVisibleRows(this.rows)},t.prototype.isNewValueCorrect=function(e){return P.isValueObject(e,!0)},t.prototype.processRowsOnSet=function(e){return this.sortVisibleRows(e)},Object.defineProperty(t.prototype,"visibleRows",{get:function(){return this.getVisibleRows()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cells",{get:function(){return this.cellsValue},set:function(e){this.cells.setJson(e&&e.getJson?e.getJson():null)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCellText",{get:function(){return this.getPropertyValue("hasCellText",!1)},enumerable:!1,configurable:!0}),t.prototype.updateHasCellText=function(){this.setPropertyValue("hasCellText",!this.cells.isEmpty)},t.prototype.setCellText=function(e,r,n){this.cells.setCellText(e,r,n)},t.prototype.getCellText=function(e,r){return this.cells.getCellText(e,r)},t.prototype.setDefaultCellText=function(e,r){this.cells.setDefaultCellText(e,r)},t.prototype.getDefaultCellText=function(e){return this.cells.getDefaultCellText(e)},t.prototype.getCellDisplayText=function(e,r){return this.cells.getCellDisplayText(e,r)},t.prototype.getCellDisplayLocText=function(e,r){var n=this.cells.getCellDisplayLocText(e,r);return n||this.emptyLocalizableString},t.prototype.supportGoNextPageAutomatic=function(){return this.isMouseDown===!0&&this.hasValuesInAllRows()},t.prototype.onCheckForErrors=function(e,r){if(i.prototype.onCheckForErrors.call(this,e,r),!r||this.hasCssError()){var n={noValue:!1,isNotUnique:!1};this.checkErrorsAllRows(!0,n),n.noValue&&e.push(new eu(null,this)),n.isNotUnique&&e.push(new tu(null,this))}},t.prototype.hasValuesInAllRows=function(){var e={noValue:!1,isNotUnique:!1};return this.checkErrorsAllRows(!1,e,!0),!e.noValue},t.prototype.checkErrorsAllRows=function(e,r,n){var o=this,s=this.generatedVisibleRows;if(s||(s=this.visibleRows),!!s){var a=this.isAllRowRequired||n,l=this.eachRowUnique;if(r.noValue=!1,r.isNotUnique=!1,e&&(this.errorsInRow=void 0),!(!a&&!l)){for(var u={},d=0;d<s.length;d++){var v=s[d].value,V=this.isValueEmpty(v),E=l&&!V&&u[v]===!0;V=V&&a,e&&(V||E)&&this.addErrorIntoRow(s[d]),V||(u[v]=!0),r.noValue=r.noValue||V,r.isNotUnique=r.isNotUnique||E}e&&s.forEach(function(I){I.hasError=o.hasErrorInRow(I)})}}},t.prototype.addErrorIntoRow=function(e){this.errorsInRow||(this.errorsInRow={}),this.errorsInRow[e.name]=!0,e.hasError=!0},t.prototype.refreshRowsErrors=function(){!this.errorsInRow||this.checkErrorsAllRows(!0,{noValue:!1,isNotUnique:!1})},t.prototype.getIsAnswered=function(){return i.prototype.getIsAnswered.call(this)&&this.hasValuesInAllRows()},t.prototype.createMatrixRow=function(e,r,n){var o=new ko(e,r,this,n);return this.onMatrixRowCreated(o),o},t.prototype.onMatrixRowCreated=function(e){},t.prototype.setQuestionValue=function(e,r){if(r===void 0&&(r=!0),i.prototype.setQuestionValue.call(this,e,this.isRowChanging||r),!(!this.generatedVisibleRows||this.generatedVisibleRows.length==0)){this.isRowChanging=!0;var n=this.value;if(n||(n={}),this.rows.length==0)this.generatedVisibleRows[0].setValueDirectly(n);else for(var o=0;o<this.generatedVisibleRows.length;o++){var s=this.generatedVisibleRows[o],a=n[s.name];this.isValueEmpty(a)&&(a=null),this.generatedVisibleRows[o].setValueDirectly(a)}this.refreshRowsErrors(),this.updateIsAnswered(),this.isRowChanging=!1}},t.prototype.getDisplayValueCore=function(e,r){var n={};for(var o in r){var s=e?q.getTextOrHtmlByValue(this.rows,o):o;s||(s=o);var a=q.getTextOrHtmlByValue(this.columns,r[o]);a||(a=r[o]),n[s]=a}return n},t.prototype.getPlainData=function(e){var r=this;e===void 0&&(e={includeEmpty:!0});var n=i.prototype.getPlainData.call(this,e);if(n){var o=this.createValueCopy();n.isNode=!0,n.data=Object.keys(o||{}).map(function(s){var a=r.rows.filter(function(d){return d.value===s})[0],l={name:s,title:a?a.text:"row",value:o[s],displayValue:q.getTextOrHtmlByValue(r.visibleColumns,o[s]),getString:function(d){return typeof d=="object"?JSON.stringify(d):d},isNode:!1},u=q.getItemByValue(r.visibleColumns,o[s]);return u&&(e.calculations||[]).forEach(function(d){l[d.propertyName]=u[d.propertyName]}),l})}return n},t.prototype.addConditionObjectsByContext=function(e,r){for(var n=0;n<this.rows.length;n++){var o=this.rows[n];o.value&&e.push({name:this.getValueName()+"."+o.value,text:this.processedTitle+"."+o.calculatedText,question:this})}},t.prototype.getConditionJson=function(e,r){if(e===void 0&&(e=null),r===void 0&&(r=null),!r)return i.prototype.getConditionJson.call(this,e);var n=new Lt(r);n.choices=this.columns;var o=new ae().toJsonObject(n);return o.type=n.getType(),o},t.prototype.clearValueIfInvisibleCore=function(e){i.prototype.clearValueIfInvisibleCore.call(this,e),this.hasRows&&this.clearInvisibleValuesInRows()},t.prototype.getFirstInputElementId=function(){var e=this.generatedVisibleRows;return e||(e=this.visibleRows),e.length>0&&this.visibleColumns.length>0?this.inputId+"_"+e[0].name+"_"+0:i.prototype.getFirstInputElementId.call(this)},t.prototype.onMatrixRowChanged=function(e){if(!this.isRowChanging){if(this.isRowChanging=!0,!this.hasRows)this.setNewValue(e.value);else{var r=this.value;r||(r={}),r[e.name]=e.value,this.setNewValue(r)}this.isRowChanging=!1}},t.prototype.getCorrectedRowValue=function(e){for(var r=0;r<this.columns.length;r++)if(e===this.columns[r].value)return e;for(var r=0;r<this.columns.length;r++)if(this.isTwoValueEquals(e,this.columns[r].value))return this.columns[r].value;return e},t.prototype.hasErrorInRow=function(e){return!!this.errorsInRow&&!!this.errorsInRow[e.name]},t.prototype.getSearchableItemValueKeys=function(e){e.push("columns"),e.push("rows")},Object.defineProperty(t.prototype,"SurveyModel",{get:function(){return this.survey},enumerable:!1,configurable:!0}),t.prototype.getColumnHeaderWrapperComponentName=function(e){return this.SurveyModel.getElementWrapperComponentName({column:e},"column-header")},t.prototype.getColumnHeaderWrapperComponentData=function(e){return this.SurveyModel.getElementWrapperComponentData({column:e},"column-header")},t.prototype.getRowHeaderWrapperComponentName=function(e){return this.SurveyModel.getElementWrapperComponentName({row:e},"row-header")},t.prototype.getRowHeaderWrapperComponentData=function(e){return this.SurveyModel.getElementWrapperComponentData({row:e},"row-header")},t}(Gr);x.addClass("matrix",["rowTitleWidth",{name:"columns:itemvalue[]",uniqueProperty:"value",baseValue:function(){return z.getString("matrix_column")}},{name:"rows:itemvalue[]",uniqueProperty:"value",baseValue:function(){return z.getString("matrix_row")}},{name:"cells:cells",serializationProperty:"cells"},{name:"rowsOrder",default:"initial",choices:["initial","random"]},"isAllRowRequired:boolean",{name:"eachRowUnique:boolean",category:"validation"},"hideIfRowsEmpty:boolean",{name:"cellComponent",visible:!1,default:"survey-matrix-cell"}],function(){return new Pn("")},"matrixbase"),Z.Instance.registerQuestion("matrix",function(i){var t=new Pn(i);return t.rows=Z.DefaultRows,t.columns=Z.DefaultColums,t});var qo=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Qo=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Ho=function(i){qo(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.updateRemainingCharacterCounter=function(e,r){this.remainingCharacterCounter=P.getRemainingCharacterCounterText(e,r)},Qo([y()],t.prototype,"remainingCharacterCounter",void 0),t}(W),ur=function(i){qo(t,i);function t(e){var r=i.call(this,e)||this;return r.characterCounter=new Ho,r}return t.prototype.isTextValue=function(){return!0},Object.defineProperty(t.prototype,"maxLength",{get:function(){return this.getPropertyValue("maxLength")},set:function(e){this.setPropertyValue("maxLength",e),this.updateRemainingCharacterCounter(this.value)},enumerable:!1,configurable:!0}),t.prototype.getMaxLength=function(){return P.getMaxLength(this.maxLength,this.survey?this.survey.maxTextLength:-1)},t.prototype.updateRemainingCharacterCounter=function(e){this.characterCounter.updateRemainingCharacterCounter(e,this.getMaxLength())},Object.defineProperty(t.prototype,"placeHolder",{get:function(){return this.placeholder},set:function(e){this.placeholder=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPlaceHolder",{get:function(){return this.locPlaceholder},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"textbase"},t.prototype.isEmpty=function(){return i.prototype.isEmpty.call(this)||this.value===""},Object.defineProperty(t.prototype,"textUpdateMode",{get:function(){return this.getPropertyValue("textUpdateMode")},set:function(e){this.setPropertyValue("textUpdateMode",e)},enumerable:!1,configurable:!0}),t.prototype.getIsInputTextUpdate=function(){return this.textUpdateMode=="default"?i.prototype.getIsInputTextUpdate.call(this):this.textUpdateMode=="onTyping"},Object.defineProperty(t.prototype,"renderedPlaceholder",{get:function(){return this.getPropertyValue("renderedPlaceholder")},enumerable:!1,configurable:!0}),t.prototype.setRenderedPlaceholder=function(e){this.setPropertyValue("renderedPlaceholder",e)},t.prototype.onReadOnlyChanged=function(){i.prototype.onReadOnlyChanged.call(this),this.calcRenderedPlaceholder()},t.prototype.onSurveyLoad=function(){this.calcRenderedPlaceholder(),i.prototype.onSurveyLoad.call(this)},t.prototype.localeChanged=function(){i.prototype.localeChanged.call(this),this.calcRenderedPlaceholder()},t.prototype.setSurveyImpl=function(e,r){i.prototype.setSurveyImpl.call(this,e,r),this.calcRenderedPlaceholder()},t.prototype.supportEmptyValidation=function(){return!0},t.prototype.calcRenderedPlaceholder=function(){var e=this.placeHolder;!!e&&!this.hasPlaceholder()&&(e=void 0),this.setRenderedPlaceholder(e)},t.prototype.hasPlaceholder=function(){return!this.isReadOnly},t.prototype.setNewValue=function(e){i.prototype.setNewValue.call(this,e),this.updateRemainingCharacterCounter(e)},t.prototype.setQuestionValue=function(e,r){r===void 0&&(r=!0),i.prototype.setQuestionValue.call(this,e,r),this.updateRemainingCharacterCounter(e)},t.prototype.convertToCorrectValue=function(e){return Array.isArray(e)?e.join(this.getValueSeparator()):e},t.prototype.getValueSeparator=function(){return", "},t.prototype.getControlCssClassBuilder=function(){return new O().append(this.cssClasses.root).append(this.cssClasses.onError,this.hasCssError()).append(this.cssClasses.controlDisabled,this.isDisabledStyle).append(this.cssClasses.controlReadOnly,this.isReadOnlyStyle).append(this.cssClasses.controlPreview,this.isPreviewStyle)},t.prototype.getControlClass=function(){return this.getControlCssClassBuilder().toString()},Object.defineProperty(t.prototype,"isNewA11yStructure",{get:function(){return!0},enumerable:!1,configurable:!0}),Qo([y({localizable:!0,onSet:function(e,r){return r.calcRenderedPlaceholder()}})],t.prototype,"placeholder",void 0),t}(le);x.addClass("textbase",[],function(){return new ur("")},"question");var $u=function(){function i(t,e,r){var n=this;this.inputMaskInstance=t,this.inputElement=e,this.prevUnmaskedValue=void 0,this.inputMaskInstancePropertyChangedHandler=function(s,a){if(a.name!=="saveMaskedValue"){var l=n.inputMaskInstance.getMaskedValue(n.prevUnmaskedValue);n.inputElement.value=l}},this.clickHandler=function(s){n.inputElement.value==n.inputMaskInstance.getMaskedValue("")&&n.inputElement.setSelectionRange(0,0)},this.beforeInputHandler=function(s){var a=n.createArgs(s),l=n.inputMaskInstance.processInput(a);n.inputElement.value=l.value,n.inputElement.setSelectionRange(l.caretPosition,l.caretPosition),l.cancelPreventDefault||s.preventDefault()},this.changeHandler=function(s){var a=n.inputMaskInstance.processInput({prevValue:"",insertedChars:s.target.value,selectionStart:0,selectionEnd:0});n.inputElement.value=a.value};var o=r;o==null&&(o=""),this.inputElement.value=t.getMaskedValue(o),this.prevUnmaskedValue=o,t.onPropertyChanged.add(this.inputMaskInstancePropertyChangedHandler),this.addInputEventListener()}return i.prototype.createArgs=function(t){var e={insertedChars:t.data,selectionStart:t.target.selectionStart,selectionEnd:t.target.selectionEnd,prevValue:t.target.value,inputDirection:"forward"};return t.inputType==="deleteContentBackward"&&(e.inputDirection="backward",e.selectionStart===e.selectionEnd&&(e.selectionStart=Math.max(e.selectionStart-1,0))),t.inputType==="deleteContentForward"&&e.selectionStart===e.selectionEnd&&(e.selectionEnd+=1),e},i.prototype.addInputEventListener=function(){this.inputElement&&(this.inputElement.addEventListener("beforeinput",this.beforeInputHandler),this.inputElement.addEventListener("click",this.clickHandler),this.inputElement.addEventListener("focus",this.clickHandler),this.inputElement.addEventListener("change",this.changeHandler))},i.prototype.removeInputEventListener=function(){this.inputElement&&(this.inputElement.removeEventListener("beforeinput",this.beforeInputHandler),this.inputElement.removeEventListener("click",this.clickHandler),this.inputElement.removeEventListener("focus",this.clickHandler),this.inputElement.removeEventListener("change",this.changeHandler))},i.prototype.dispose=function(){this.removeInputEventListener(),this.inputMaskInstance.onPropertyChanged.remove(this.inputMaskInstancePropertyChangedHandler)},i}(),wn=/[0-9]/;function zo(){var i=x.getChildrenClasses("masksettings")||[],t=i.map(function(e){var r=e.name;return e.name.indexOf("mask")!==-1&&(r=r.slice(0,r.indexOf("mask"))),r});return t.unshift("none"),t}var Ju=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Vn=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},cr=function(i){Ju(t,i);function t(e){var r=i.call(this,e)||this;return r._isWaitingForEnter=!1,r.onCompositionUpdate=function(n){r.isInputTextUpdate&&setTimeout(function(){r.updateValueOnEvent(n)},1),r.updateRemainingCharacterCounter(n.target.value)},r.onKeyUp=function(n){r.isInputTextUpdate?(!r._isWaitingForEnter||n.keyCode===13)&&(r.updateValueOnEvent(n),r._isWaitingForEnter=!1):n.keyCode===13&&r.updateValueOnEvent(n),r.updateRemainingCharacterCounter(n.target.value)},r.onKeyDown=function(n){r.updateDateValidationMessage(n),r.onKeyDownPreprocess&&r.onKeyDownPreprocess(n),r.isInputTextUpdate&&(r._isWaitingForEnter=n.keyCode===229),r.onTextKeyDownHandler(n)},r.onChange=function(n){r.updateDateValidationMessage(n);var o=n.target===b.environment.root.activeElement;o?r.isInputTextUpdate&&r.updateValueOnEvent(n):r.updateValueOnEvent(n),r.updateRemainingCharacterCounter(n.target.value)},r.createLocalizableString("minErrorText",r,!0,"minError"),r.createLocalizableString("maxErrorText",r,!0,"maxError"),r.setNewMaskSettingsProperty(),r.locDataListValue=new _i(r),r.locDataListValue.onValueChanged=function(n,o){r.propertyValueChanged("dataList",n,o)},r.registerPropertyChangedHandlers(["min","max","inputType","minValueExpression","maxValueExpression"],function(){r.setRenderedMinMax()}),r.registerPropertyChangedHandlers(["inputType","size"],function(){r.updateInputSize(),r.calcRenderedPlaceholder()}),r}return t.prototype.createMaskAdapter=function(){!!this.input&&!this.maskTypeIsEmpty&&(this.maskInputAdapter=new $u(this.maskInstance,this.input,this.value))},t.prototype.deleteMaskAdapter=function(){this.maskInputAdapter&&(this.maskInputAdapter.dispose(),this.maskInputAdapter=void 0)},t.prototype.updateMaskAdapter=function(){this.deleteMaskAdapter(),this.createMaskAdapter()},t.prototype.onSetMaskType=function(e){this.setNewMaskSettingsProperty(),this.updateMaskAdapter()},Object.defineProperty(t.prototype,"maskTypeIsEmpty",{get:function(){switch(this.inputType){case"tel":case"text":return this.maskType==="none";default:return!0}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maskSettings",{get:function(){return this.getPropertyValue("maskSettings")},set:function(e){!e||(this.setNewMaskSettingsProperty(),this.maskSettings.fromJSON(e.toJSON()),this.updateMaskAdapter())},enumerable:!1,configurable:!0}),t.prototype.setNewMaskSettingsProperty=function(){this.setPropertyValue("maskSettings",this.createMaskSettings())},t.prototype.createMaskSettings=function(){var e=!this.maskType||this.maskType==="none"?"masksettings":this.maskType+"mask";x.findClass(e)||(e="masksettings");var r=x.createClass(e);return r.owner=this.survey,r},t.prototype.isTextValue=function(){return["text","number","password"].indexOf(this.inputType)>-1},t.prototype.getType=function(){return"text"},t.prototype.onSurveyLoad=function(){i.prototype.onSurveyLoad.call(this),this.setRenderedMinMax(),this.updateInputSize()},Object.defineProperty(t.prototype,"inputType",{get:function(){return this.getPropertyValue("inputType")},set:function(e){e=e.toLowerCase(),(e==="datetime_local"||e==="datetime")&&(e="datetime-local"),this.setPropertyValue("inputType",e.toLowerCase()),this.isLoadingFromJson||(this.min=void 0,this.max=void 0,this.step=void 0),this.updateMaskAdapter()},enumerable:!1,configurable:!0}),t.prototype.getMaxLength=function(){return this.isTextInput?i.prototype.getMaxLength.call(this):null},t.prototype.runCondition=function(e,r){i.prototype.runCondition.call(this,e,r),(!!this.minValueExpression||!!this.maxValueExpression)&&this.setRenderedMinMax(e,r)},t.prototype.isLayoutTypeSupported=function(e){return!0},Object.defineProperty(t.prototype,"size",{get:function(){return this.getPropertyValue("size")},set:function(e){this.setPropertyValue("size",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isTextInput",{get:function(){return["text","search","tel","url","email","password"].indexOf(this.inputType)>-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputSize",{get:function(){return this.getPropertyValue("inputSize",0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedInputSize",{get:function(){return this.getPropertyValue("inputSize")||null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputWidth",{get:function(){return this.getPropertyValue("inputWidth")},enumerable:!1,configurable:!0}),t.prototype.updateInputSize=function(){var e=this.isTextInput&&this.size>0?this.size:0;this.isTextInput&&e<1&&this.parent&&!!this.parent.itemSize&&(e=this.parent.itemSize),this.setPropertyValue("inputSize",e),this.setPropertyValue("inputWidth",e>0?"auto":"")},Object.defineProperty(t.prototype,"autocomplete",{get:function(){return this.getPropertyValue("autocomplete",null)},set:function(e){this.setPropertyValue("autocomplete",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this.getPropertyValue("min")},set:function(e){if(this.isValueExpression(e)){this.minValueExpression=e.substring(1);return}this.setPropertyValue("min",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this.getPropertyValue("max")},set:function(e){if(this.isValueExpression(e)){this.maxValueExpression=e.substring(1);return}this.setPropertyValue("max",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minValueExpression",{get:function(){return this.getPropertyValue("minValueExpression","")},set:function(e){this.setPropertyValue("minValueExpression",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxValueExpression",{get:function(){return this.getPropertyValue("maxValueExpression","")},set:function(e){this.setPropertyValue("maxValueExpression",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedMin",{get:function(){return this.getPropertyValue("renderedMin")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedMax",{get:function(){return this.getPropertyValue("renderedMax")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minErrorText",{get:function(){return this.getLocalizableStringText("minErrorText")},set:function(e){this.setLocalizableStringText("minErrorText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locMinErrorText",{get:function(){return this.getLocalizableString("minErrorText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxErrorText",{get:function(){return this.getLocalizableStringText("maxErrorText")},set:function(e){this.setLocalizableStringText("maxErrorText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locMaxErrorText",{get:function(){return this.getLocalizableString("maxErrorText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMinMaxType",{get:function(){return Re(this)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maskInstance",{get:function(){return this.maskSettings},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputValue",{get:function(){return this._inputValue},set:function(e){var r=e;this._inputValue=e,this.maskTypeIsEmpty||(r=this.maskInstance.getUnmaskedValue(e),this._inputValue=this.maskInstance.getMaskedValue(r),!!r&&this.maskSettings.saveMaskedValue&&(r=this.maskInstance.getMaskedValue(r))),this.value=r},enumerable:!1,configurable:!0}),t.prototype.onChangeQuestionValue=function(e){i.prototype.onChangeQuestionValue.call(this,e),this.updateInputValue()},t.prototype.updateInputValue=function(){this.maskTypeIsEmpty?this._inputValue=this.value:this.maskSettings.saveMaskedValue?this._inputValue=this.value?this.value:this.maskInstance.getMaskedValue(""):this._inputValue=this.maskInstance.getMaskedValue(this.value)},t.prototype.hasToConvertToUTC=function(e){return b.storeUtcDates&&this.isDateTimeLocaleType()&&!!e},t.prototype.valueForSurveyCore=function(e){return this.hasToConvertToUTC(e)&&(e=new Date(e).toISOString()),i.prototype.valueForSurveyCore.call(this,e)},t.prototype.valueFromDataCore=function(e){if(this.hasToConvertToUTC(e)){var r=new Date(e),n=new Date(r.getTime()-r.getTimezoneOffset()*60*1e3),o=n.toISOString();e=o.substring(0,o.length-2)}return i.prototype.valueFromDataCore.call(this,e)},t.prototype.onCheckForErrors=function(e,r){var n=this;if(i.prototype.onCheckForErrors.call(this,e,r),!r){if(this.isValueLessMin){var o=new Ce(this.getMinMaxErrorText(this.minErrorText,this.getCalculatedMinMax(this.renderedMin)),this);o.onUpdateErrorTextCallback=function(d){d.text=n.getMinMaxErrorText(n.minErrorText,n.getCalculatedMinMax(n.renderedMin))},e.push(o)}if(this.isValueGreaterMax){var s=new Ce(this.getMinMaxErrorText(this.maxErrorText,this.getCalculatedMinMax(this.renderedMax)),this);s.onUpdateErrorTextCallback=function(d){d.text=n.getMinMaxErrorText(n.maxErrorText,n.getCalculatedMinMax(n.renderedMax))},e.push(s)}this.dateValidationMessage&&e.push(new Ce(this.dateValidationMessage,this));var a=this.getValidatorTitle(),l=new Hr;if(this.inputType==="email"&&!this.validators.some(function(d){return d.getType()==="emailvalidator"})){var u=l.validate(this.value,a);!!u&&!!u.error&&e.push(u.error)}}},t.prototype.canSetValueToSurvey=function(){if(!this.isMinMaxType)return!0;var e=!this.isValueLessMin&&!this.isValueGreaterMax;return this.inputType==="number"&&!!this.survey&&(this.survey.isValidateOnValueChanging||this.survey.isValidateOnValueChanged)&&this.hasErrors(),e},t.prototype.convertFuncValuetoQuestionValue=function(e){return P.convertValToQuestionVal(e,this.inputType)},t.prototype.getMinMaxErrorText=function(e,r){if(P.isValueEmpty(r))return e;var n=r.toString();return this.inputType==="date"&&!!r.toDateString&&(n=r.toDateString()),e.replace("{0}",n)},Object.defineProperty(t.prototype,"isValueLessMin",{get:function(){return!this.isValueEmpty(this.renderedMin)&&!this.isEmpty()&&this.getCalculatedMinMax(this.value)<this.getCalculatedMinMax(this.renderedMin)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isValueGreaterMax",{get:function(){return!this.isValueEmpty(this.renderedMax)&&!this.isEmpty()&&this.getCalculatedMinMax(this.value)>this.getCalculatedMinMax(this.renderedMax)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDateInputType",{get:function(){return this.inputType==="date"||this.isDateTimeLocaleType()},enumerable:!1,configurable:!0}),t.prototype.isDateTimeLocaleType=function(){return this.inputType==="datetime-local"},t.prototype.getCalculatedMinMax=function(e){return this.isValueEmpty(e)?e:this.isDateInputType?new Date(e):e},t.prototype.setRenderedMinMax=function(e,r){var n=this;e===void 0&&(e=null),r===void 0&&(r=null),this.minValueRunner=this.getDefaultRunner(this.minValueRunner,this.minValueExpression),this.setValueAndRunExpression(this.minValueRunner,this.min,function(o){!o&&n.isDateInputType&&!!b.minDate&&(o=b.minDate),n.setPropertyValue("renderedMin",o)},e,r),this.maxValueRunner=this.getDefaultRunner(this.maxValueRunner,this.maxValueExpression),this.setValueAndRunExpression(this.maxValueRunner,this.max,function(o){!o&&n.isDateInputType&&(o=b.maxDate?b.maxDate:"2999-12-31"),n.setPropertyValue("renderedMax",o)},e,r)},Object.defineProperty(t.prototype,"step",{get:function(){return this.getPropertyValue("step")},set:function(e){this.setPropertyValue("step",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedStep",{get:function(){return this.isValueEmpty(this.step)?this.inputType!=="number"?void 0:"any":this.step},enumerable:!1,configurable:!0}),t.prototype.getIsInputTextUpdate=function(){return this.maskTypeIsEmpty?i.prototype.getIsInputTextUpdate.call(this):!1},t.prototype.supportGoNextPageAutomatic=function(){return!this.getIsInputTextUpdate()&&!this.isDateInputType},t.prototype.supportGoNextPageError=function(){return!this.isDateInputType},Object.defineProperty(t.prototype,"dataList",{get:function(){return this.locDataList.value},set:function(e){this.locDataList.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locDataList",{get:function(){return this.locDataListValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataListId",{get:function(){return this.locDataList.hasValue()?this.id+"_datalist":void 0},enumerable:!1,configurable:!0}),t.prototype.canRunValidators=function(e){return this.errors.length>0||!e||this.supportGoNextPageError()},t.prototype.setNewValue=function(e){e=this.correctValueType(e),e&&(this.dateValidationMessage=void 0),i.prototype.setNewValue.call(this,e)},t.prototype.correctValueType=function(e){if(!e)return e;if(this.inputType==="number"||this.inputType==="range")return P.isNumber(e)?P.getNumber(e):"";if(this.inputType==="month"){var r=new Date(e),n=r.getMonth()+1;return r.getFullYear()+"-"+(n<10?"0":"")+n}return e},t.prototype.hasPlaceholder=function(){return!this.isReadOnly&&this.inputType!=="range"},t.prototype.getControlCssClassBuilder=function(){var e=this.getMaxLength();return i.prototype.getControlCssClassBuilder.call(this).append(this.cssClasses.constrolWithCharacterCounter,!!e).append(this.cssClasses.characterCounterBig,e>99)},t.prototype.isReadOnlyRenderDiv=function(){return this.isReadOnly&&b.readOnly.textRenderMode==="div"},Object.defineProperty(t.prototype,"inputStyle",{get:function(){var e={};return e.width=this.inputWidth,this.updateTextAlign(e),e},enumerable:!1,configurable:!0}),t.prototype.updateTextAlign=function(e){this.inputTextAlignment!=="auto"?e.textAlign=this.inputTextAlignment:!this.maskTypeIsEmpty&&this.maskSettings.getTextAlignment()!=="auto"&&(e.textAlign=this.maskSettings.getTextAlignment())},t.prototype.updateValueOnEvent=function(e){var r=e.target.value;this.isTwoValueEquals(this.value,r)||(this.inputValue=r)},t.prototype.updateDateValidationMessage=function(e){this.dateValidationMessage=this.isDateInputType&&!!e.target?e.target.validationMessage:void 0},t.prototype.onBlurCore=function(e){this.updateValueOnEvent(e),this.updateRemainingCharacterCounter(e.target.value),i.prototype.onBlurCore.call(this,e)},t.prototype.onFocusCore=function(e){this.updateRemainingCharacterCounter(e.target.value),i.prototype.onFocusCore.call(this,e)},t.prototype.afterRenderQuestionElement=function(e){e&&(this.input=e instanceof HTMLInputElement?e:e.querySelector("input"),this.createMaskAdapter()),i.prototype.afterRenderQuestionElement.call(this,e)},t.prototype.beforeDestroyQuestionElement=function(e){this.deleteMaskAdapter()},Vn([y({onSet:function(e,r){r.onSetMaskType(e)}})],t.prototype,"maskType",void 0),Vn([y()],t.prototype,"inputTextAlignment",void 0),Vn([y()],t.prototype,"_inputValue",void 0),t}(ur),Gu=["number","range","date","datetime-local","month","time","week"];function Re(i){var t=i?i.inputType:"";return t?Gu.indexOf(t)>-1:!1}function Uo(i,t){var e=i.split(t);return e.length!==2||!P.isNumber(e[0])||!P.isNumber(e[1])?-1:parseFloat(e[0])*60+parseFloat(e[1])}function Zu(i,t,e){var r=Uo(i,e),n=Uo(t,e);return r<0||n<0?!1:r>n}function Wo(i,t,e,r){var n=r?e:t;if(!Re(i)||P.isValueEmpty(t)||P.isValueEmpty(e))return n;if(i.inputType.indexOf("date")===0||i.inputType==="month"){var o=i.inputType==="month",s=new Date(o?t+"-01":t),a=new Date(o?e+"-01":e);if(!s||!a)return n;if(s>a)return r?t:e}if(i.inputType==="week"||i.inputType==="time"){var l=i.inputType==="week"?"-W":":";return Zu(t,e,l)?r?t:e:n}if(i.inputType==="number"){if(!P.isNumber(t)||!P.isNumber(e))return n;if(P.getNumber(t)>P.getNumber(e))return r?t:e}return typeof t=="string"||typeof e=="string"?n:t>e?r?t:e:n}function $o(i,t){!!i&&!!i.inputType&&(t.inputType=i.inputType!=="range"?i.inputType:"number",t.textUpdateMode="onBlur")}x.addClass("text",[{name:"inputType",default:"text",choices:b.questions.inputTypes},{name:"size:number",minValue:0,dependsOn:"inputType",visibleIf:function(i){return i?i.isTextInput:!1}},{name:"textUpdateMode",default:"default",choices:["default","onBlur","onTyping"],dependsOn:"inputType",visibleIf:function(i){return i?i.isTextInput:!1}},{name:"autocomplete",alternativeName:"autoComplete",choices:b.questions.dataList},{name:"min",dependsOn:"inputType",visibleIf:function(i){return Re(i)},onPropertyEditorUpdate:function(i,t){$o(i,t)},onSettingValue:function(i,t){return Wo(i,t,i.max,!1)}},{name:"max",dependsOn:"inputType",nextToProperty:"*min",visibleIf:function(i){return Re(i)},onSettingValue:function(i,t){return Wo(i,i.min,t,!0)},onPropertyEditorUpdate:function(i,t){$o(i,t)}},{name:"minValueExpression:expression",category:"logic",dependsOn:"inputType",visibleIf:function(i){return Re(i)}},{name:"maxValueExpression:expression",category:"logic",dependsOn:"inputType",visibleIf:function(i){return Re(i)}},{name:"minErrorText",serializationProperty:"locMinErrorText",dependsOn:"inputType",visibleIf:function(i){return Re(i)}},{name:"maxErrorText",serializationProperty:"locMaxErrorText",dependsOn:"inputType",visibleIf:function(i){return Re(i)}},{name:"inputTextAlignment",default:"auto",choices:["left","right","auto"],visible:!1},{name:"maskType",default:"none",visibleIndex:0,dependsOn:"inputType",visibleIf:function(i){return i.inputType==="text"||i.inputType==="tel"},choices:function(i){var t=zo();return t}},{name:"maskSettings:masksettings",className:"masksettings",visibleIndex:1,dependsOn:["inputType","maskType"],visibleIf:function(i){return i.inputType==="text"||i.inputType==="tel"},onGetValue:function(i){return i.maskSettings.getData()},onSetValue:function(i,t){i.maskSettings.setData(t)}},{name:"step:number",dependsOn:"inputType",visibleIf:function(i){return i?i.inputType==="number"||i.inputType==="range":!1}},{name:"maxLength:number",default:-1,dependsOn:"inputType",visibleIf:function(i){return i?i.isTextInput:!1}},{name:"placeholder",alternativeName:"placeHolder",serializationProperty:"locPlaceholder",dependsOn:"inputType",visibleIf:function(i){return i?i.isTextInput:!1}},{name:"dataList:string[]",serializationProperty:"locDataList",dependsOn:"inputType",visibleIf:function(i){return i?i.inputType==="text":!1}}],function(){return new cr("")},"textbase"),Z.Instance.registerQuestion("text",function(i){return new cr(i)});var gt=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),xn=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Jo=function(i){gt(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"a11y_input_ariaLabel",{get:function(){return this.locTitle.renderedHtml},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaLabelledBy",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaDescribedBy",{get:function(){return null},enumerable:!1,configurable:!0}),t}(cr),On=function(i){gt(t,i);function t(e,r){e===void 0&&(e=null),r===void 0&&(r=null);var n=i.call(this)||this;return n.focusIn=function(){n.editor.focusIn()},n.editorValue=n.createEditor(e),n.maskSettings=n.editorValue.maskSettings,n.editor.questionTitleTemplateCallback=function(){return""},n.editor.titleLocation="left",r&&(n.title=r),n}return t.prototype.getType=function(){return"multipletextitem"},Object.defineProperty(t.prototype,"id",{get:function(){return this.editor.id},enumerable:!1,configurable:!0}),t.prototype.getOriginalObj=function(){return this.editor},Object.defineProperty(t.prototype,"name",{get:function(){return this.editor.name},set:function(e){this.editor.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"question",{get:function(){return this.data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"editor",{get:function(){return this.editorValue},enumerable:!1,configurable:!0}),t.prototype.createEditor=function(e){return new Jo(e)},t.prototype.addUsedLocales=function(e){i.prototype.addUsedLocales.call(this,e),this.editor.addUsedLocales(e)},t.prototype.localeChanged=function(){i.prototype.localeChanged.call(this),this.editor.localeChanged()},t.prototype.locStrsChanged=function(){i.prototype.locStrsChanged.call(this),this.editor.locStrsChanged()},t.prototype.setData=function(e){this.data=e,e&&(this.editor.defaultValue=e.getItemDefaultValue(this.name),this.editor.setSurveyImpl(this),this.editor.parent=e,this.editor.setParentQuestion(e))},Object.defineProperty(t.prototype,"isRequired",{get:function(){return this.editor.isRequired},set:function(e){this.editor.isRequired=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputType",{get:function(){return this.editor.inputType},set:function(e){this.editor.inputType=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this.editor.title},set:function(e){this.editor.title=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTitle",{get:function(){return this.editor.locTitle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullTitle",{get:function(){return this.editor.fullTitle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLength",{get:function(){return this.editor.maxLength},set:function(e){this.editor.maxLength=e},enumerable:!1,configurable:!0}),t.prototype.getMaxLength=function(){var e=this.getSurvey();return P.getMaxLength(this.maxLength,e?e.maxTextLength:-1)},Object.defineProperty(t.prototype,"placeholder",{get:function(){return this.editor.placeholder},set:function(e){this.editor.placeholder=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPlaceholder",{get:function(){return this.editor.locPlaceholder},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"placeHolder",{get:function(){return this.placeholder},set:function(e){this.placeholder=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPlaceHolder",{get:function(){return this.locPlaceholder},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredErrorText",{get:function(){return this.editor.requiredErrorText},set:function(e){this.editor.requiredErrorText=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locRequiredErrorText",{get:function(){return this.editor.locRequiredErrorText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.editor.size},set:function(e){this.editor.size=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultValueExpression",{get:function(){return this.editor.defaultValueExpression},set:function(e){this.editor.defaultValueExpression=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minValueExpression",{get:function(){return this.editor.minValueExpression},set:function(e){this.editor.minValueExpression=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxValueExpression",{get:function(){return this.editor.maxValueExpression},set:function(e){this.editor.maxValueExpression=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"validators",{get:function(){return this.editor.validators},set:function(e){this.editor.validators=e},enumerable:!1,configurable:!0}),t.prototype.getValidators=function(){return this.validators},Object.defineProperty(t.prototype,"maskType",{get:function(){return this.editor.maskType},set:function(e){this.editor.maskType=e,this.maskSettings=this.editor.maskSettings},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maskSettings",{get:function(){return this.getPropertyValue("maskSettings")},set:function(e){this.setPropertyValue("maskSettings",e),this.editor.maskSettings!==e&&(this.editor.maskSettings=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputTextAlignment",{get:function(){return this.editor.inputTextAlignment},set:function(e){this.editor.inputTextAlignment=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.data?this.data.getMultipleTextValue(this.name):null},set:function(e){this.data!=null&&this.data.setMultipleTextValue(this.name,e)},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return this.editor.isEmpty()},t.prototype.onValueChanged=function(e){this.valueChangedCallback&&this.valueChangedCallback(e)},t.prototype.getSurveyData=function(){return this},t.prototype.getSurvey=function(){return this.data?this.data.getSurvey():null},t.prototype.getTextProcessor=function(){return this.data?this.data.getTextProcessor():null},t.prototype.getValue=function(e){return this.data?this.data.getMultipleTextValue(e):null},t.prototype.setValue=function(e,r){this.data&&this.data.setMultipleTextValue(e,r)},t.prototype.getVariable=function(e){},t.prototype.setVariable=function(e,r){},t.prototype.getComment=function(e){return null},t.prototype.setComment=function(e,r){},t.prototype.getAllValues=function(){return this.data?this.data.getAllValues():this.value},t.prototype.getFilteredValues=function(){return this.getAllValues()},t.prototype.getFilteredProperties=function(){return{survey:this.getSurvey()}},t.prototype.findQuestionByName=function(e){var r=this.getSurvey();return r?r.getQuestionByName(e):null},t.prototype.getEditingSurveyElement=function(){},t.prototype.getValidatorTitle=function(){return this.title},Object.defineProperty(t.prototype,"validatedValue",{get:function(){return this.value},set:function(e){this.value=e},enumerable:!1,configurable:!0}),t.prototype.getDataFilteredValues=function(){return this.getFilteredValues()},t.prototype.getDataFilteredProperties=function(){return this.getFilteredProperties()},t}(W),pr=function(i){gt(t,i);function t(e){var r=i.call(this,e)||this;return r.isMultipleItemValueChanging=!1,r.createNewArray("items",function(n){n.setData(r),r.survey&&r.survey.multipleTextItemAdded(r,n)}),r.registerPropertyChangedHandlers(["items","colCount","itemErrorLocation"],function(){r.calcVisibleRows()}),r.registerPropertyChangedHandlers(["itemSize"],function(){r.updateItemsSize()}),r}return t.addDefaultItems=function(e){for(var r=Z.DefaultMutlipleTextItems,n=0;n<r.length;n++)e.addItem(r[n])},t.prototype.getType=function(){return"multipletext"},t.prototype.setSurveyImpl=function(e,r){i.prototype.setSurveyImpl.call(this,e,r);for(var n=0;n<this.items.length;n++)this.items[n].setData(this)},Object.defineProperty(t.prototype,"isAllowTitleLeft",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasSingleInput",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isContainer",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.getPropertyValue("id")},set:function(e){var r;(r=this.items)===null||r===void 0||r.map(function(n,o){return n.editor.id=e+"_"+o}),this.setPropertyValue("id",e)},enumerable:!1,configurable:!0}),t.prototype.onSurveyLoad=function(){this.editorsOnSurveyLoad(),i.prototype.onSurveyLoad.call(this)},t.prototype.setQuestionValue=function(e,r){r===void 0&&(r=!0),i.prototype.setQuestionValue.call(this,e,r),this.performForEveryEditor(function(n){n.editor.updateValueFromSurvey(n.value)}),this.updateIsAnswered()},t.prototype.onSurveyValueChanged=function(e){i.prototype.onSurveyValueChanged.call(this,e),this.performForEveryEditor(function(r){r.editor.onSurveyValueChanged(r.value)})},t.prototype.updateItemsSize=function(){this.performForEveryEditor(function(e){e.editor.updateInputSize()})},t.prototype.editorsOnSurveyLoad=function(){this.performForEveryEditor(function(e){e.editor.onSurveyLoad()})},t.prototype.performForEveryEditor=function(e){for(var r=0;r<this.items.length;r++){var n=this.items[r];n.editor&&e(n)}},Object.defineProperty(t.prototype,"items",{get:function(){return this.getPropertyValue("items")},set:function(e){this.setPropertyValue("items",e)},enumerable:!1,configurable:!0}),t.prototype.addItem=function(e,r){r===void 0&&(r=null);var n=this.createTextItem(e,r);return this.items.push(n),n},t.prototype.getItemByName=function(e){for(var r=0;r<this.items.length;r++)if(this.items[r].name==e)return this.items[r];return null},t.prototype.getElementsInDesign=function(e){e===void 0&&(e=!1);var r;return r=i.prototype.getElementsInDesign.call(this,e),r.concat(this.items)},t.prototype.addConditionObjectsByContext=function(e,r){for(var n=0;n<this.items.length;n++){var o=this.items[n];e.push({name:this.getValueName()+"."+o.name,text:this.processedTitle+"."+o.fullTitle,question:this})}},t.prototype.collectNestedQuestionsCore=function(e,r){this.items.forEach(function(n){return n.editor.collectNestedQuestions(e,r)})},t.prototype.getConditionJson=function(e,r){if(e===void 0&&(e=null),r===void 0&&(r=null),!r)return i.prototype.getConditionJson.call(this,e);var n=this.getItemByName(r);if(!n)return null;var o=new ae().toJsonObject(n);return o.type="text",o},t.prototype.locStrsChanged=function(){i.prototype.locStrsChanged.call(this);for(var e=0;e<this.items.length;e++)this.items[e].locStrsChanged()},t.prototype.localeChanged=function(){i.prototype.localeChanged.call(this);for(var e=0;e<this.items.length;e++)this.items[e].localeChanged()},Object.defineProperty(t.prototype,"itemErrorLocation",{get:function(){return this.getPropertyValue("itemErrorLocation")},set:function(e){this.setPropertyValue("itemErrorLocation",e)},enumerable:!1,configurable:!0}),t.prototype.getQuestionErrorLocation=function(){return this.itemErrorLocation!=="default"?this.itemErrorLocation:this.getErrorLocation()},Object.defineProperty(t.prototype,"showItemErrorOnTop",{get:function(){return this.getQuestionErrorLocation()=="top"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showItemErrorOnBottom",{get:function(){return this.getQuestionErrorLocation()=="bottom"},enumerable:!1,configurable:!0}),t.prototype.getChildErrorLocation=function(e){return this.getQuestionErrorLocation()},t.prototype.isNewValueCorrect=function(e){return P.isValueObject(e,!0)},t.prototype.supportGoNextPageAutomatic=function(){for(var e=0;e<this.items.length;e++)if(this.items[e].isEmpty())return!1;return!0},Object.defineProperty(t.prototype,"colCount",{get:function(){return this.getPropertyValue("colCount")},set:function(e){e<1||e>5||this.setPropertyValue("colCount",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemSize",{get:function(){return this.getPropertyValue("itemSize")},set:function(e){this.setPropertyValue("itemSize",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemTitleWidth",{get:function(){return this.getPropertyValue("itemTitleWidth")||""},set:function(e){this.setPropertyValue("itemTitleWidth",e)},enumerable:!1,configurable:!0}),t.prototype.onRowCreated=function(e){return e},t.prototype.calcVisibleRows=function(){for(var e=this.colCount,r=this.items,n=0,o,s,a=[],l=0;l<r.length;l++)n==0&&(o=this.onRowCreated(new Sn),s=this.onRowCreated(new Go),this.showItemErrorOnTop?(a.push(s),a.push(o)):(a.push(o),a.push(s))),o.cells.push(new Tn(r[l],this)),s.cells.push(new Zo(r[l],this)),n++,(n>=e||l==r.length-1)&&(n=0,s.onAfterCreated());this.rows=a},t.prototype.getRows=function(){return P.isValueEmpty(this.rows)&&this.calcVisibleRows(),this.rows},t.prototype.onValueChanged=function(){i.prototype.onValueChanged.call(this),this.onItemValueChanged()},t.prototype.createTextItem=function(e,r){return new On(e,r)},t.prototype.onItemValueChanged=function(){if(!this.isMultipleItemValueChanging)for(var e=0;e<this.items.length;e++){var r=null;this.value&&this.items[e].name in this.value&&(r=this.value[this.items[e].name]),this.items[e].onValueChanged(r)}},t.prototype.runCondition=function(e,r){i.prototype.runCondition.call(this,e,r),this.items.forEach(function(n){return n.editor.runCondition(e,r)})},t.prototype.getIsRunningValidators=function(){if(i.prototype.getIsRunningValidators.call(this))return!0;for(var e=0;e<this.items.length;e++)if(this.items[e].editor.isRunningValidators)return!0;return!1},t.prototype.hasErrors=function(e,r){var n=this;e===void 0&&(e=!0),r===void 0&&(r=null);for(var o=!1,s=0;s<this.items.length;s++)this.items[s].editor.onCompletedAsyncValidators=function(a){n.raiseOnCompletedAsyncValidators()},!(!!r&&r.isOnValueChanged===!0&&this.items[s].editor.isEmpty())&&(o=this.items[s].editor.hasErrors(e,r)||o);return i.prototype.hasErrors.call(this,e)||o},t.prototype.getAllErrors=function(){for(var e=i.prototype.getAllErrors.call(this),r=0;r<this.items.length;r++){var n=this.items[r].editor.getAllErrors();n&&n.length>0&&(e=e.concat(n))}return e},t.prototype.clearErrors=function(){i.prototype.clearErrors.call(this);for(var e=0;e<this.items.length;e++)this.items[e].editor.clearErrors()},t.prototype.getContainsErrors=function(){var e=i.prototype.getContainsErrors.call(this);if(e)return e;for(var r=this.items,n=0;n<r.length;n++)if(r[n].editor.containsErrors)return!0;return!1},t.prototype.getIsAnswered=function(){if(!i.prototype.getIsAnswered.call(this))return!1;for(var e=0;e<this.items.length;e++){var r=this.items[e].editor;if(r.isVisible&&!r.isAnswered)return!1}return!0},t.prototype.getProgressInfo=function(){for(var e=[],r=0;r<this.items.length;r++)e.push(this.items[r].editor);return de.getProgressInfoByElements(e,this.isRequired)},t.prototype.getDisplayValueCore=function(e,r){if(!r)return r;for(var n={},o=0;o<this.items.length;o++){var s=this.items[o],a=r[s.name];if(!P.isValueEmpty(a)){var l=s.name;e&&!!s.title&&(l=s.title),n[l]=s.editor.getDisplayValue(e,a)}}return n},t.prototype.allowMobileInDesignMode=function(){return!0},t.prototype.getMultipleTextValue=function(e){return this.value?this.value[e]:null},t.prototype.setMultipleTextValue=function(e,r){this.isMultipleItemValueChanging=!0,this.isValueEmpty(r)&&(r=void 0);var n=this.value;n||(n={}),n[e]=r,this.setNewValue(n),this.isMultipleItemValueChanging=!1},t.prototype.getItemDefaultValue=function(e){return this.defaultValue?this.defaultValue[e]:null},t.prototype.getTextProcessor=function(){return this.textProcessor},t.prototype.getAllValues=function(){return this.data?this.data.getAllValues():null},t.prototype.getIsRequiredText=function(){return this.survey?this.survey.requiredText:""},t.prototype.addElement=function(e,r){},t.prototype.removeElement=function(e){return!1},t.prototype.getQuestionTitleLocation=function(){return"left"},t.prototype.getQuestionTitleWidth=function(){},t.prototype.getColumsForElement=function(e){return[]},t.prototype.updateColumns=function(){},t.prototype.getQuestionStartIndex=function(){return this.getStartIndex()},t.prototype.getChildrenLayoutType=function(){return"row"},t.prototype.elementWidthChanged=function(e){},Object.defineProperty(t.prototype,"elements",{get:function(){return[]},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(e){return-1},t.prototype.ensureRowsVisibility=function(){},t.prototype.validateContainerOnly=function(){},t.prototype.onQuestionValueChanged=function(e){},t.prototype.getItemLabelCss=function(e){return new O().append(this.cssClasses.itemLabel).append(this.cssClasses.itemLabelDisabled,this.isDisabledStyle).append(this.cssClasses.itemLabelReadOnly,this.isReadOnlyStyle).append(this.cssClasses.itemLabelPreview,this.isPreviewStyle).append(this.cssClasses.itemLabelAnswered,e.editor.isAnswered).append(this.cssClasses.itemLabelAllowFocus,!this.isDesignMode).append(this.cssClasses.itemLabelOnError,e.editor.errors.length>0).append(this.cssClasses.itemWithCharacterCounter,!!e.getMaxLength()).toString()},t.prototype.getItemCss=function(){return new O().append(this.cssClasses.item).toString()},t.prototype.getItemTitleCss=function(){return new O().append(this.cssClasses.itemTitle).toString()},xn([ue()],t.prototype,"rows",void 0),t}(le),Sn=function(i){gt(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.isVisible=!0,e.cells=[],e}return xn([y()],t.prototype,"isVisible",void 0),xn([ue()],t.prototype,"cells",void 0),t}(W),Go=function(i){gt(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.onAfterCreated=function(){var e=this,r=function(){e.isVisible=e.cells.some(function(n){var o,s;return((o=n.item)===null||o===void 0?void 0:o.editor)&&((s=n.item)===null||s===void 0?void 0:s.editor.hasVisibleErrors)})};this.cells.forEach(function(n){var o,s;!((o=n.item)===null||o===void 0)&&o.editor&&((s=n.item)===null||s===void 0||s.editor.registerFunctionOnPropertyValueChanged("hasVisibleErrors",r))}),r()},t}(Sn),Tn=function(){function i(t,e){this.item=t,this.question=e,this.isErrorsCell=!1}return i.prototype.getClassName=function(){return new O().append(this.question.cssClasses.cell).toString()},Object.defineProperty(i.prototype,"className",{get:function(){return this.getClassName()},enumerable:!1,configurable:!0}),i}(),Zo=function(i){gt(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.isErrorsCell=!0,e}return t.prototype.getClassName=function(){return new O().append(i.prototype.getClassName.call(this)).append(this.question.cssClasses.cellError).append(this.question.cssClasses.cellErrorTop,this.question.showItemErrorOnTop).append(this.question.cssClasses.cellErrorBottom,this.question.showItemErrorOnBottom).toString()},t}(Tn);x.addClass("multipletextitem",[{name:"!name",isUnique:!0},"isRequired:boolean",{name:"placeholder",alternativeName:"placeHolder",serializationProperty:"locPlaceholder"},{name:"inputType",default:"text",choices:b.questions.inputTypes},{name:"maskType",default:"none",visibleIndex:0,dependsOn:"inputType",visibleIf:function(i){return i.inputType==="text"},choices:function(i){var t=zo();return t}},{name:"maskSettings:masksettings",className:"masksettings",visibleIndex:1,dependsOn:"inputType",visibleIf:function(i){return i.inputType==="text"},onGetValue:function(i){return i.maskSettings.getData()},onSetValue:function(i,t){i.maskSettings.setData(t)}},{name:"inputTextAlignment",default:"auto",choices:["left","right","auto"],visible:!1},{name:"title",serializationProperty:"locTitle"},{name:"maxLength:number",default:-1},{name:"size:number",minValue:0},{name:"requiredErrorText:text",serializationProperty:"locRequiredErrorText"},{name:"defaultValueExpression:expression",visible:!1},{name:"minValueExpression:expression",category:"logic",dependsOn:"inputType",visibleIf:function(i){return Re(i)}},{name:"maxValueExpression:expression",category:"logic",dependsOn:"inputType",visibleIf:function(i){return Re(i)}},{name:"validators:validators",baseClassName:"surveyvalidator",classNamePart:"validator"}],function(){return new On("")}),x.addClass("multipletext",[{name:"!items:textitems",className:"multipletextitem",isArray:!0},{name:"itemSize:number",minValue:0,visible:!1},{name:"colCount:number",default:1,choices:[1,2,3,4,5]},{name:"itemErrorLocation",default:"default",choices:["default","top","bottom"],visible:!1},{name:"itemTitleWidth",category:"layout"}],function(){return new pr("")},"question"),Z.Instance.registerQuestion("multipletext",function(i){var t=new pr(i);return pr.addDefaultItems(t),t});var Ku=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ko=function(i){Ku(t,i);function t(e){e===void 0&&(e="");var r=i.call(this,e)||this;return r.createLocalizableString("content",r,!0),r.registerPropertyChangedHandlers(["content"],function(){r.onContentChanged()}),r}return t.prototype.getType=function(){return"flowpanel"},t.prototype.getChildrenLayoutType=function(){return"flow"},t.prototype.onSurveyLoad=function(){i.prototype.onSurveyLoad.call(this),this.onContentChanged()},Object.defineProperty(t.prototype,"content",{get:function(){return this.getLocalizableStringText("content")},set:function(e){this.setLocalizableStringText("content",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locContent",{get:function(){return this.getLocalizableString("content")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"html",{get:function(){return this.getPropertyValue("html","")},set:function(e){this.setPropertyValue("html",e)},enumerable:!1,configurable:!0}),t.prototype.onContentChanged=function(){var e="";this.onCustomHtmlProducing?e=this.onCustomHtmlProducing():e=this.produceHtml(),this.html=e,this.contentChangedCallback&&this.contentChangedCallback()},t.prototype.produceHtml=function(){for(var e=[],r=/{(.*?(element:)[^$].*?)}/g,n=this.content,o=0,s=null;(s=r.exec(n))!==null;){s.index>o&&(e.push(n.substring(o,s.index)),o=s.index);var a=this.getQuestionFromText(s[0]);a?e.push(this.getHtmlForQuestion(a)):e.push(n.substring(o,s.index+s[0].length)),o=s.index+s[0].length}return o<n.length&&e.push(n.substring(o,n.length)),e.join("").replace(new RegExp("<br>","g"),"<br/>")},t.prototype.getQuestionFromText=function(e){return e=e.substring(1,e.length-1),e=e.replace(t.contentElementNamePrefix,"").trim(),this.getQuestionByName(e)},t.prototype.getHtmlForQuestion=function(e){return this.onGetHtmlForQuestion?this.onGetHtmlForQuestion(e):""},t.prototype.getQuestionHtmlId=function(e){return this.name+"_"+e.id},t.prototype.onAddElement=function(e,r){i.prototype.onAddElement.call(this,e,r),this.addElementToContent(e),e.renderWidth=""},t.prototype.onRemoveElement=function(e){var r=this.getElementContentText(e);this.content=this.content.replace(r,""),i.prototype.onRemoveElement.call(this,e)},t.prototype.dragDropMoveElement=function(e,r,n){},t.prototype.addElementToContent=function(e){if(!this.isLoadingFromJson){var r=this.getElementContentText(e);this.insertTextAtCursor(r)||(this.content=this.content+r)}},t.prototype.insertTextAtCursor=function(e,r){if(r===void 0&&(r=null),!this.isDesignMode||!R.isAvailable())return!1;var n=R.getSelection();if(n.getRangeAt&&n.rangeCount){var o=n.getRangeAt(0);o.deleteContents();var s=new Text(e);o.insertNode(s);var a=this;if(a.getContent){var l=a.getContent(r);this.content=l}return!0}return!1},t.prototype.getElementContentText=function(e){return"{"+t.contentElementNamePrefix+e.name+"}"},t.contentElementNamePrefix="element:",t}(ar);x.addClass("flowpanel",[{name:"content:html",serializationProperty:"locContent"}],function(){return new Ko},"panel");var Yu=function(){function i(){}return i.getIconCss=function(t,e){return new O().append(t.icon).append(t.iconExpanded,!e).toString()},i}(),Xu=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),fr=function(i){Xu(t,i);function t(e){return i.call(this,e)||this}return t.prototype.getType=function(){return"nonvalue"},Object.defineProperty(t.prototype,"hasInput",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitle",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.getTitleLocation=function(){return""},Object.defineProperty(t.prototype,"hasComment",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.hasErrors=function(e,r){return!1},t.prototype.getAllErrors=function(){return[]},t.prototype.supportGoNextPageAutomatic=function(){return!1},t.prototype.addConditionObjectsByContext=function(e,r){},t.prototype.getConditionJson=function(e,r){return null},Object.defineProperty(t.prototype,"ariaRole",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaRequired",{get:function(){return null},enumerable:!1,configurable:!0}),t}(le);x.addClass("nonvalue",[{name:"title",visible:!1},{name:"description",visible:!1},{name:"valueName",visible:!1},{name:"enableIf",visible:!1},{name:"defaultValue",visible:!1},{name:"correctAnswer",visible:!1},{name:"clearIfInvisible",visible:!1},{name:"isRequired",visible:!1,isSerializable:!1},{name:"requiredErrorText",visible:!1},{name:"readOnly",visible:!1},{name:"requiredIf",visible:!1},{name:"validators",visible:!1},{name:"titleLocation",visible:!1},{name:"showCommentArea",visible:!1},{name:"useDisplayValuesInDynamicTexts",alternativeName:"useDisplayValuesInTitle",visible:!1}],function(){return new fr("")},"question");var ec=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Yo=function(i){ec(t,i);function t(e){return i.call(this,e)||this}return t.prototype.getType=function(){return"empty"},t}(le);x.addClass("empty",[],function(){return new Yo("")},"question");var tc=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Mt=function(i){tc(t,i);function t(e){var r=i.call(this,e)||this;r.invisibleOldValues={},r.isChangingValueOnClearIncorrect=!1,r.selectAllItemValue=new q(""),r.selectAllItemValue.id="selectall";var n=r.createLocalizableString("selectAllText",r.selectAllItem,!0,"selectAllItemText");return r.selectAllItem.locOwner=r,r.selectAllItem.setLocText(n),r.registerPropertyChangedHandlers(["showSelectAllItem","selectAllText"],function(){r.onVisibleChoicesChanged()}),r}return t.prototype.getDefaultItemComponent=function(){return"survey-checkbox-item"},t.prototype.getType=function(){return"checkbox"},t.prototype.onCreating=function(){i.prototype.onCreating.call(this),this.createNewArray("renderedValue"),this.createNewArray("value")},t.prototype.getFirstInputElementId=function(){return this.inputId+"_0"},Object.defineProperty(t.prototype,"valuePropertyName",{get:function(){return this.getPropertyValue("valuePropertyName")},set:function(e){this.setPropertyValue("valuePropertyName",e)},enumerable:!1,configurable:!0}),t.prototype.getQuestionFromArray=function(e,r){if(!!e&&e===this.valuePropertyName){var n=this.value;if(Array.isArray(n)&&r<n.length)return this}return null},Object.defineProperty(t.prototype,"selectAllItem",{get:function(){return this.selectAllItemValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectAllText",{get:function(){return this.getLocalizableStringText("selectAllText")},set:function(e){this.setLocalizableStringText("selectAllText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locSelectAllText",{get:function(){return this.getLocalizableString("selectAllText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showSelectAllItem",{get:function(){return this.getPropertyValue("showSelectAllItem")},set:function(e){this.setPropertyValue("showSelectAllItem",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasSelectAll",{get:function(){return this.showSelectAllItem},set:function(e){this.showSelectAllItem=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAllSelected",{get:function(){for(var e=this.getNoneItems(),r=0;r<e.length;r++)if(this.isItemSelected(e[r]))return!1;var n=this.getVisibleEnableItems();if(n.length===0)return!1;var o=this.value;if(!o||!Array.isArray(o)||o.length===0||o.length<n.length)return!1;for(var s=[],r=0;r<o.length;r++)s.push(this.getRealValue(o[r]));for(var r=0;r<n.length;r++)if(s.indexOf(n[r].value)<0)return!1;return!0},set:function(e){e?this.selectAll():this.clearValue(!0)},enumerable:!1,configurable:!0}),t.prototype.toggleSelectAll=function(){this.isAllSelected=!this.isAllSelected},t.prototype.selectAll=function(){for(var e=[],r=this.getVisibleEnableItems(),n=0;n<r.length;n++)e.push(r[n].value);this.renderedValue=e},t.prototype.clickItemHandler=function(e,r){if(!this.isReadOnlyAttr)if(e===this.selectAllItem)r===!0||r===!1?this.isAllSelected=r:this.toggleSelectAll();else if(this.isNoneItem(e))this.renderedValue=r?[e.value]:[];else{var n=[].concat(this.renderedValue||[]),o=n.indexOf(e.value);r?o<0&&n.push(e.value):o>-1&&n.splice(o,1),this.renderedValue=n}},t.prototype.isItemSelectedCore=function(e){if(e===this.selectAllItem)return this.isAllSelected;var r=this.renderedValue;if(!r||!Array.isArray(r))return!1;for(var n=0;n<r.length;n++)if(this.isTwoValueEquals(r[n],e.value))return!0;return!1},t.prototype.getRealValue=function(e){return e&&(this.valuePropertyName?e[this.valuePropertyName]:e)},Object.defineProperty(t.prototype,"isValueArray",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxSelectedChoices",{get:function(){return this.getPropertyValue("maxSelectedChoices")},set:function(e){e<0&&(e=0),this.setPropertyValue("maxSelectedChoices",e),this.filterItems()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minSelectedChoices",{get:function(){return this.getPropertyValue("minSelectedChoices")},set:function(e){e<0&&(e=0),this.setPropertyValue("minSelectedChoices",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedChoices",{get:function(){var e=this.renderedValue,r=this.visibleChoices,n=this.selectedItemValues;if(this.isEmpty())return[];var o=this.defaultSelectedItemValues?[].concat(this.defaultSelectedItemValues,r):r,s=e.map(function(l){return q.getItemByValue(o,l)}).filter(function(l){return!!l});!s.length&&!n&&this.updateSelectedItemValues();var a=this.validateItemValues(s);return a},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedItems",{get:function(){return this.selectedChoices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasFilteredValue",{get:function(){return!!this.valuePropertyName},enumerable:!1,configurable:!0}),t.prototype.getFilteredName=function(){var e=i.prototype.getFilteredName.call(this);return this.hasFilteredValue&&(e+="-unwrapped"),e},t.prototype.getFilteredValue=function(){return this.hasFilteredValue?this.renderedValue:i.prototype.getFilteredValue.call(this)},t.prototype.getMultipleSelectedItems=function(){return this.selectedChoices},t.prototype.validateItemValues=function(e){var r=this;if(e.length)return e;var n=this.selectedItemValues;if(!!n&&!!n.length)return this.defaultSelectedItemValues=[].concat(n),n;var o=this.renderedValue;return o.map(function(s){return r.createItemValue(s)})},t.prototype.getAnswerCorrectIgnoreOrder=function(){return!0},t.prototype.onCheckForErrors=function(e,r){if(i.prototype.onCheckForErrors.call(this,e,r),!r&&this.minSelectedChoices>0&&this.checkMinSelectedChoicesUnreached()){var n=new Ce(this.getLocalizationFormatString("minSelectError",this.minSelectedChoices),this);e.push(n)}},t.prototype.onVisibleChoicesChanged=function(){i.prototype.onVisibleChoicesChanged.call(this),this.updateSelectAllItemProps()},t.prototype.onEnableItemCallBack=function(e){return this.shouldCheckMaxSelectedChoices()?this.isItemSelected(e):!0},t.prototype.onAfterRunItemsEnableCondition=function(){if(this.updateSelectAllItemProps(),this.maxSelectedChoices<1){this.otherItem.setIsEnabled(!0);return}this.hasOther&&this.otherItem.setIsEnabled(!this.shouldCheckMaxSelectedChoices()||this.isOtherSelected)},t.prototype.updateSelectAllItemProps=function(){!this.hasSelectAll||this.selectAllItem.setIsEnabled(this.getSelectAllEnabled())},t.prototype.getSelectAllEnabled=function(){if(!this.hasSelectAll)return!0;this.activeChoices;var e=this.getVisibleEnableItems().length,r=this.maxSelectedChoices;return r>0&&r<e?!1:e>0},t.prototype.getVisibleEnableItems=function(){for(var e=new Array,r=this.activeChoices,n=0;n<r.length;n++){var o=r[n];o.isEnabled&&o.isVisible&&e.push(o)}return e},t.prototype.shouldCheckMaxSelectedChoices=function(){if(this.maxSelectedChoices<1)return!1;var e=this.value,r=Array.isArray(e)?e.length:0;return r>=this.maxSelectedChoices},t.prototype.checkMinSelectedChoicesUnreached=function(){if(this.minSelectedChoices<1)return!1;var e=this.value,r=Array.isArray(e)?e.length:0;return r<this.minSelectedChoices},t.prototype.getItemClassCore=function(e,r){return this.value,r.isSelectAllItem=e===this.selectAllItem,new O().append(i.prototype.getItemClassCore.call(this,e,r)).append(this.cssClasses.itemSelectAll,r.isSelectAllItem).toString()},t.prototype.updateValueFromSurvey=function(e,r){i.prototype.updateValueFromSurvey.call(this,e,r),this.invisibleOldValues={}},t.prototype.setDefaultValue=function(){i.prototype.setDefaultValue.call(this);var e=this.defaultValue;if(Array.isArray(e))for(var r=0;r<e.length;r++){var n=this.getRealValue(e[r]);this.canClearValueAnUnknown(n)&&this.addIntoInvisibleOldValues(n)}},t.prototype.addIntoInvisibleOldValues=function(e){this.invisibleOldValues[e]=e},t.prototype.hasValueToClearIncorrectValues=function(){return i.prototype.hasValueToClearIncorrectValues.call(this)||!P.isValueEmpty(this.invisibleOldValues)},t.prototype.setNewValue=function(e){this.isChangingValueOnClearIncorrect||(this.invisibleOldValues={}),e=this.valueFromData(e);var r=this.value;e||(e=[]),r||(r=[]),!this.isTwoValueEquals(r,e)&&(this.removeNoneItemsValues(r,e),i.prototype.setNewValue.call(this,e))},t.prototype.getIsMultipleValue=function(){return!0},t.prototype.getCommentFromValue=function(e){var r=this.getFirstUnknownIndex(e);return r<0?"":e[r]},t.prototype.setOtherValueIntoValue=function(e){var r=this.getFirstUnknownIndex(e);return r<0||e.splice(r,1,this.otherItem.value),e},t.prototype.getFirstUnknownIndex=function(e){if(!Array.isArray(e))return-1;for(var r=0;r<e.length;r++)if(this.hasUnknownValueItem(e[r],!1,!1))return r;return-1},t.prototype.removeNoneItemsValues=function(e,r){var n=[];if(this.showNoneItem&&n.push(this.noneItem.value),this.showRefuseItem&&n.push(this.refuseItem.value),this.showDontKnowItem&&n.push(this.dontKnowItem.value),n.length>0){var o=this.noneIndexInArray(e,n),s=this.noneIndexInArray(r,n);if(o.index>-1)if(o.val===s.val)r.length>0&&r.splice(s.index,1);else{var a=this.noneIndexInArray(r,[o.val]);a.index>-1&&a.index<r.length-1&&r.splice(a.index,1)}else if(s.index>-1&&r.length>1){var l=this.convertValueToObject([s.val])[0];r.splice(0,r.length,l)}}},t.prototype.noneIndexInArray=function(e,r){if(!Array.isArray(e))return{index:-1,val:void 0};for(var n=e.length-1;n>=0;n--){var o=r.indexOf(this.getRealValue(e[n]));if(o>-1)return{index:n,val:r[o]}}return{index:-1,val:void 0}},t.prototype.canUseFilteredChoices=function(){return!this.hasSelectAll&&i.prototype.canUseFilteredChoices.call(this)},t.prototype.supportSelectAll=function(){return this.isSupportProperty("showSelectAllItem")},t.prototype.addNonChoicesItems=function(e,r){i.prototype.addNonChoicesItems.call(this,e,r),this.supportSelectAll()&&this.addNonChoiceItem(e,this.selectAllItem,r,this.hasSelectAll,b.specialChoicesOrder.selectAllItem)},t.prototype.isBuiltInChoice=function(e){return e===this.selectAllItem||i.prototype.isBuiltInChoice.call(this,e)},t.prototype.isItemInList=function(e){return e==this.selectAllItem?this.hasSelectAll:i.prototype.isItemInList.call(this,e)},t.prototype.getDisplayValueEmpty=function(){var e=this;return q.getTextOrHtmlByValue(this.visibleChoices.filter(function(r){return r!=e.selectAllItemValue}),void 0)},t.prototype.getDisplayValueCore=function(e,r){if(!Array.isArray(r))return i.prototype.getDisplayValueCore.call(this,e,r);var n=this.valuePropertyName,o=function(s){var a=r[s];return!!n&&!!a[n]&&(a=a[n]),a};return this.getDisplayArrayValue(e,r,o)},t.prototype.clearIncorrectValuesCore=function(){this.clearIncorrectAndDisabledValues(!1)},t.prototype.clearDisabledValuesCore=function(){this.clearIncorrectAndDisabledValues(!0)},t.prototype.clearIncorrectAndDisabledValues=function(e){var r=this.value,n=!1,o=this.restoreValuesFromInvisible();if(!(!r&&o.length==0)){if(!Array.isArray(r)||r.length==0){if(this.isChangingValueOnClearIncorrect=!0,e||(this.hasComment?this.value=null:this.clearValue(!0)),this.isChangingValueOnClearIncorrect=!1,o.length==0)return;r=[]}for(var s=[],a=0;a<r.length;a++){var l=this.getRealValue(r[a]),u=this.canClearValueAnUnknown(l);!e&&!u||e&&!this.isValueDisabled(l)?s.push(r[a]):(n=!0,u&&this.addIntoInvisibleOldValues(r[a]))}for(var a=0;a<o.length;a++)s.push(o[a]),n=!0;!n||(this.isChangingValueOnClearIncorrect=!0,s.length==0?this.clearValue(!0):this.value=s,this.isChangingValueOnClearIncorrect=!1)}},t.prototype.restoreValuesFromInvisible=function(){for(var e=[],r=this.visibleChoices,n=0;n<r.length;n++){var o=r[n];if(o!==this.selectAllItem){var s=r[n].value;P.isTwoValueEquals(s,this.invisibleOldValues[s])&&(this.isItemSelected(o)||e.push(s),delete this.invisibleOldValues[s])}}return e},t.prototype.getConditionJson=function(e,r){e===void 0&&(e=null),r===void 0&&(r=null);var n=i.prototype.getConditionJson.call(this,e,r);return(e=="contains"||e=="notcontains")&&(n.type="radiogroup"),n.maxSelectedChoices=0,n.minSelectedChoices=0,n},t.prototype.isAnswerCorrect=function(){return P.isArrayContainsEqual(this.value,this.correctAnswer)},t.prototype.setDefaultValueWithOthers=function(){this.value=this.renderedValueFromDataCore(this.defaultValue)},t.prototype.getIsItemValue=function(e,r){return!e||!Array.isArray(e)?!1:e.indexOf(r.value)>=0},t.prototype.valueFromData=function(e){if(!e)return e;if(!Array.isArray(e))return[i.prototype.valueFromData.call(this,e)];for(var r=[],n=0;n<e.length;n++){var o=q.getItemByValue(this.activeChoices,e[n]);o?r.push(o.value):r.push(e[n])}return r},t.prototype.rendredValueFromData=function(e){return e=this.convertValueFromObject(e),i.prototype.rendredValueFromData.call(this,e)},t.prototype.rendredValueToData=function(e){return e=i.prototype.rendredValueToData.call(this,e),this.convertValueToObject(e)},t.prototype.convertValueFromObject=function(e){return this.valuePropertyName?P.convertArrayObjectToValue(e,this.valuePropertyName):e},t.prototype.convertValueToObject=function(e){if(!this.valuePropertyName)return e;var r=void 0;return!!this.survey&&this.survey.questionsByValueName(this.getValueName()).length>1&&(r=this.data.getValue(this.getValueName())),P.convertArrayValueToObject(e,this.valuePropertyName,r)},t.prototype.renderedValueFromDataCore=function(e){if((!e||!Array.isArray(e))&&(e=[]),!this.hasActiveChoices)return e;for(var r=0;r<e.length;r++){if(e[r]==this.otherItem.value)return e;if(this.hasUnknownValueItem(e[r],!0,!1)){this.otherValue=e[r];var n=e.slice();return n[r]=this.otherItem.value,n}}return e},t.prototype.rendredValueToDataCore=function(e){if(!e||!e.length)return e;for(var r=0;r<e.length;r++)if(e[r]==this.otherItem.value&&this.needConvertRenderedOtherToDataValue()){var n=e.slice();return n[r]=this.otherValue,n}return e},t.prototype.selectOtherValueFromComment=function(e){var r=[],n=this.renderedValue;if(Array.isArray(n))for(var o=0;o<n.length;o++)n[o]!==this.otherItem.value&&r.push(n[o]);e&&r.push(this.otherItem.value),this.value=r},Object.defineProperty(t.prototype,"checkBoxSvgPath",{get:function(){return"M5,13l2-2l3,3l7-7l2,2l-9,9L5,13z"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNewA11yStructure",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaRole",{get:function(){return"group"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaRequired",{get:function(){return null},enumerable:!1,configurable:!0}),t}(At);x.addClass("checkbox",[{name:"showSelectAllItem:boolean",alternativeName:"hasSelectAll"},{name:"separateSpecialChoices",visible:!0},{name:"maxSelectedChoices:number",default:0,onSettingValue:function(i,t){if(t<=0)return 0;var e=i.minSelectedChoices;return e>0&&t<e?e:t}},{name:"minSelectedChoices:number",default:0,onSettingValue:function(i,t){if(t<=0)return 0;var e=i.maxSelectedChoices;return e>0&&t>e?e:t}},{name:"selectAllText",serializationProperty:"locSelectAllText",dependsOn:"showSelectAllItem",visibleIf:function(i){return i.hasSelectAll}},{name:"valuePropertyName",category:"data"},{name:"itemComponent",visible:!1,default:"survey-checkbox-item"}],function(){return new Mt("")},"checkboxbase"),Z.Instance.registerQuestion("checkbox",function(i){var t=new Mt(i);return t.choices=Z.DefaultChoices,t});var rc=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),nc=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Xo=function(i){rc(t,i);function t(e){var r=i.call(this,e)||this;return r.onItemClick=function(n){r.isItemDisabled(n)||(r.isExpanded=!1,r.isItemSelected(n)?(r.selectedItems.splice(r.selectedItems.indexOf(n),1)[0],r.onSelectionChanged&&r.onSelectionChanged(n,"removed")):(r.selectedItems.push(n),r.onSelectionChanged&&r.onSelectionChanged(n,"added")))},r.isItemDisabled=function(n){return n.enabled!==void 0&&!n.enabled},r.isItemSelected=function(n){return!!r.allowSelection&&r.selectedItems.filter(function(o){return r.areSameItems(o,n)}).length>0},r.setSelectedItems(e.selectedItems||[]),r}return t.prototype.updateItemState=function(){var e=this;this.actions.forEach(function(r){var n=e.isItemSelected(r);r.visible=e.hideSelectedItems?!n:!0})},t.prototype.updateState=function(){var e=this;this.updateItemState(),this.isEmpty=this.renderedActions.filter(function(r){return e.isItemVisible(r)}).length===0},t.prototype.setSelectedItems=function(e){this.selectedItems=e,this.updateState()},t.prototype.selectFocusedItem=function(){i.prototype.selectFocusedItem.call(this),this.hideSelectedItems&&this.focusNextVisibleItem()},nc([y()],t.prototype,"hideSelectedItems",void 0),t}(Pt),ic=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),hr=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},es=function(i){ic(t,i);function t(e,r){var n=i.call(this,e,r)||this;return n.popupCssClasses="sv-multi-select-list",n.setHideSelectedItems(e.hideSelectedItems),n.syncFilterStringPlaceholder(),n.closeOnSelect=e.closeOnSelect,n}return t.prototype.locStrsChanged=function(){i.prototype.locStrsChanged.call(this),this.syncFilterStringPlaceholder()},t.prototype.updateListState=function(){this.listModel.updateState(),this.syncFilterStringPlaceholder()},t.prototype.syncFilterStringPlaceholder=function(){var e=this.getSelectedActions();e.length||this.question.selectedItems.length||this.listModel.focusedItem?this.filterStringPlaceholder=void 0:this.filterStringPlaceholder=this.question.placeholder},t.prototype.getSelectedActions=function(){return this.listModel.actions.filter(function(e){return e.selected})},t.prototype.getFocusFirstInputSelector=function(){return this.listModel.hideSelectedItems&&re&&!this.isValueEmpty(this.question.value)?this.itemSelector:i.prototype.getFocusFirstInputSelector.call(this)},t.prototype.createListModel=function(){var e=this,r=this.getAvailableItems(),n=this.onSelectionChanged;n||(n=function(a,l){e.resetFilterString(),a.id==="selectall"?e.selectAllItems():l==="added"&&a.value===b.noneItemValue?e.selectNoneItem():l==="added"?e.selectItem(a.value):l==="removed"&&e.deselectItem(a.value),e.popupRecalculatePosition(!1),e.closeOnSelect&&(e.popupModel.isVisible=!1)});var o={items:r,onSelectionChanged:n,allowSelection:!1,locOwner:this.question,elementId:this.listElementId},s=new Xo(o);return s.actions.forEach(function(a){return a.disableTabStop=!0}),this.setOnTextSearchCallbackForListModel(s),s.forceShowFilter=!0,s},t.prototype.resetFilterString=function(){i.prototype.resetFilterString.call(this),this.inputString=null,this.hintString=""},Object.defineProperty(t.prototype,"shouldResetAfterCancel",{get:function(){return re&&!this.closeOnSelect},enumerable:!1,configurable:!0}),t.prototype.createPopup=function(){var e=this;i.prototype.createPopup.call(this),this.popupModel.onFooterActionsCreated.add(function(r,n){e.shouldResetAfterCancel&&n.actions.push({id:"sv-dropdown-done-button",title:e.doneButtonCaption,innerCss:"sv-popup__button--done",needSpace:!0,action:function(){e.popupModel.isVisible=!1},enabled:new ne(function(){return!e.isTwoValueEquals(e.question.renderedValue,e.previousValue)})})}),this.popupModel.onVisibilityChanged.add(function(r,n){e.shouldResetAfterCancel&&n.isVisible&&(e.previousValue=[].concat(e.question.renderedValue||[]))}),this.popupModel.onCancel=function(){e.shouldResetAfterCancel&&(e.question.renderedValue=e.previousValue,e.updateListState())}},t.prototype.selectAllItems=function(){this.question.toggleSelectAll(),this.updateListState()},t.prototype.selectNoneItem=function(){this.question.renderedValue=[b.noneItemValue],this.updateListState()},t.prototype.selectItem=function(e){var r=[].concat(this.question.renderedValue||[]);r.push(e),this.question.renderedValue=r,this.updateListState()},t.prototype.deselectItem=function(e){var r=[].concat(this.question.renderedValue||[]);r.splice(r.indexOf(e),1),this.question.renderedValue=r,this.applyHintString(this.listModel.focusedItem),this.updateListState()},t.prototype.clear=function(){i.prototype.clear.call(this),this.syncFilterStringPlaceholder()},t.prototype.onClear=function(e){i.prototype.onClear.call(this,e),this.updateListState()},t.prototype.setHideSelectedItems=function(e){this.listModel.hideSelectedItems=e,this.updateListState()},t.prototype.removeLastSelectedItem=function(){this.deselectItem(this.question.renderedValue[this.question.renderedValue.length-1]),this.popupRecalculatePosition(!1)},t.prototype.inputKeyHandler=function(e){e.keyCode===8&&!this.filterString&&(this.removeLastSelectedItem(),e.preventDefault(),e.stopPropagation())},t.prototype.setInputStringFromSelectedItem=function(e){this.question.searchEnabled&&(this.inputString=null)},t.prototype.focusItemOnClickAndPopup=function(){},t.prototype.onEscape=function(){},t.prototype.beforeScrollToFocusedItem=function(e){},t.prototype.afterScrollToFocusedItem=function(){var e;!((e=this.listModel.focusedItem)===null||e===void 0)&&e.selected?this.hintString="":this.applyHintString(this.listModel.focusedItem||this.question.selectedItem),this.syncFilterStringPlaceholder()},t.prototype.onPropertyChangedHandler=function(e,r){i.prototype.onPropertyChangedHandler.call(this,e,r),(r.name==="value"||r.name==="renderedValue"||r.name==="placeholder")&&this.syncFilterStringPlaceholder()},hr([y({defaultValue:""})],t.prototype,"filterStringPlaceholder",void 0),hr([y({defaultValue:!0})],t.prototype,"closeOnSelect",void 0),hr([y()],t.prototype,"previousValue",void 0),hr([y({localizable:{defaultStr:"tagboxDoneButtonCaption"}})],t.prototype,"doneButtonCaption",void 0),t}(lr),oc=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),qe=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},In=function(i){oc(t,i);function t(e){var r=i.call(this,e)||this;return r.itemDisplayNameMap={},r.onOpened=r.addEvent(),r.createLocalizableString("placeholder",r,!1,!0),r.createLocalizableString("clearCaption",r,!1,!0),r.createLocalizableString("readOnlyText",r,!0),r.registerPropertyChangedHandlers(["value","renderAs","showOtherItem","otherText","placeholder","choices","visibleChoices"],function(){r.updateReadOnlyText()}),r.updateReadOnlyText(),r}return t.prototype.locStrsChanged=function(){var e;i.prototype.locStrsChanged.call(this),this.updateReadOnlyText(),(e=this.dropdownListModel)===null||e===void 0||e.locStrsChanged()},t.prototype.updateReadOnlyText=function(){this.readOnlyText=this.displayValue||this.placeholder},t.prototype.getDefaultItemComponent=function(){return""},t.prototype.onSurveyLoad=function(){i.prototype.onSurveyLoad.call(this),this.createDropdownListModel()},t.prototype.onSetData=function(){i.prototype.onSetData.call(this),this.createDropdownListModel()},t.prototype.createDropdownListModel=function(){!this.dropdownListModel&&!this.isLoadingFromJson&&(this.dropdownListModel=new es(this))},Object.defineProperty(t.prototype,"placeholder",{get:function(){return this.getLocalizableStringText("placeholder")},set:function(e){this.setLocalizableStringText("placeholder",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPlaceholder",{get:function(){return this.getLocalizableString("placeholder")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clearCaption",{get:function(){return this.getLocalizableStringText("clearCaption")},set:function(e){this.setLocalizableStringText("clearCaption",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locClearCaption",{get:function(){return this.getLocalizableString("clearCaption")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"readOnlyText",{get:function(){return this.getLocalizableStringText("readOnlyText")},set:function(e){this.setLocalizableStringText("readOnlyText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locReadOnlyText",{get:function(){return this.getLocalizableString("readOnlyText")},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"tagbox"},Object.defineProperty(t.prototype,"ariaRole",{get:function(){return"combobox"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"popupModel",{get:function(){var e;return(e=this.dropdownListModel)===null||e===void 0?void 0:e.popupModel},enumerable:!1,configurable:!0}),t.prototype.getControlClass=function(){return new O().append(this.cssClasses.control).append(this.cssClasses.controlEmpty,this.isEmpty()).append(this.cssClasses.onError,this.hasCssError()).append(this.cssClasses.controlEditable,!this.isDisabledStyle&&!this.isReadOnlyStyle&&!this.isPreviewStyle).append(this.cssClasses.controlDisabled,this.isDisabledStyle).append(this.cssClasses.controlReadOnly,this.isReadOnlyStyle).append(this.cssClasses.controlPreview,this.isPreviewStyle).toString()},t.prototype.onOpenedCallBack=function(){this.onOpened.fire(this,{question:this,choices:this.choices})},t.prototype.hasUnknownValue=function(e,r,n,o){return this.choicesLazyLoadEnabled?!1:i.prototype.hasUnknownValue.call(this,e,r,n,o)},t.prototype.needConvertRenderedOtherToDataValue=function(){var e,r=(e=this.otherValue)===null||e===void 0?void 0:e.trim();return r?i.prototype.hasUnknownValue.call(this,r,!0,!1):!1},t.prototype.onVisibleChoicesChanged=function(){i.prototype.onVisibleChoicesChanged.call(this),this.popupModel&&this.dropdownListModel.updateItems()},t.prototype.getItemIfChoicesNotContainThisValue=function(e,r){return this.choicesLazyLoadEnabled?this.createItemValue(e,r):i.prototype.getItemIfChoicesNotContainThisValue.call(this,e,r)},t.prototype.validateItemValues=function(e){var r=this;this.updateItemDisplayNameMap();var n=this.renderedValue;if(!!e.length&&e.length===n.length)return e;var o=this.selectedItemValues;if(!e.length&&!!o&&!!o.length)return this.defaultSelectedItemValues=[].concat(o),o;var s=e.map(function(a){return a.value});return n.filter(function(a){return s.indexOf(a)===-1}).forEach(function(a){var l=r.getItemIfChoicesNotContainThisValue(a,r.itemDisplayNameMap[a]);l&&e.push(l)}),e.sort(function(a,l){return n.indexOf(a.value)-n.indexOf(l.value)}),e},t.prototype.updateItemDisplayNameMap=function(){var e=this,r=function(n){e.itemDisplayNameMap[n.value]=n.text};(this.defaultSelectedItemValues||[]).forEach(r),(this.selectedItemValues||[]).forEach(r),this.visibleChoices.forEach(r)},t.prototype.getFirstInputElementId=function(){return this.inputId+(this.searchEnabled?"_0":"")},t.prototype.getInputId=function(){return this.inputId+"_0"},t.prototype.supportEmptyValidation=function(){return!0},t.prototype.onBlurCore=function(e){var r;(r=this.dropdownListModel)===null||r===void 0||r.onBlur(e),i.prototype.onBlurCore.call(this,e)},t.prototype.onFocusCore=function(e){var r;(r=this.dropdownListModel)===null||r===void 0||r.onFocus(e),i.prototype.onFocusCore.call(this,e)},t.prototype.dispose=function(){i.prototype.dispose.call(this),this.dropdownListModel&&this.dropdownListModel.dispose()},t.prototype.clearValue=function(e){var r;i.prototype.clearValue.call(this,e),(r=this.dropdownListModel)===null||r===void 0||r.clear()},Object.defineProperty(t.prototype,"showClearButton",{get:function(){return this.allowClear&&!this.isEmpty()&&(!this.isDesignMode||b.supportCreatorV2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNewA11yStructure",{get:function(){return!1},enumerable:!1,configurable:!0}),qe([y()],t.prototype,"searchMode",void 0),qe([y()],t.prototype,"allowClear",void 0),qe([y({onSet:function(e,r){r.dropdownListModel&&r.dropdownListModel.setSearchEnabled(e)}})],t.prototype,"searchEnabled",void 0),qe([y({onSet:function(e,r){r.dropdownListModel&&r.dropdownListModel.setHideSelectedItems(e)}})],t.prototype,"hideSelectedItems",void 0),qe([y({onSet:function(e,r){r.dropdownListModel&&r.dropdownListModel.setChoicesLazyLoadEnabled(e)}})],t.prototype,"choicesLazyLoadEnabled",void 0),qe([y()],t.prototype,"choicesLazyLoadPageSize",void 0),qe([y({getDefaultValue:function(){return b.tagboxCloseOnSelect}})],t.prototype,"closeOnSelect",void 0),qe([y()],t.prototype,"textWrapEnabled",void 0),t}(Mt);x.addClass("tagbox",[{name:"placeholder",serializationProperty:"locPlaceholder"},{name:"allowClear:boolean",default:!0},{name:"searchEnabled:boolean",default:!0},{name:"textWrapEnabled:boolean",default:!0},{name:"choicesLazyLoadEnabled:boolean",default:!1,visible:!1},{name:"choicesLazyLoadPageSize:number",default:25,visible:!1},{name:"hideSelectedItems:boolean",default:!1},{name:"closeOnSelect:boolean"},{name:"itemComponent",visible:!1,default:""},{name:"searchMode",default:"contains",choices:["contains","startsWith"]}],function(){return new In("")},"checkbox"),Z.Instance.registerQuestion("tagbox",function(i){var t=new In(i);return t.choices=Z.DefaultChoices,t});var sc=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ts=function(i){sc(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.doDragOver=function(){if(e.parentElement.getType()!=="imagepicker"){var r=e.domAdapter.draggedElementShortcut.querySelector(".svc-item-value-controls__button");r.style.cursor="grabbing"}},e.doBanDropHere=function(){if(e.parentElement.getType()!=="imagepicker"){var r=e.domAdapter.draggedElementShortcut.querySelector(".svc-item-value-controls__button");r.style.cursor="not-allowed"}},e}return Object.defineProperty(t.prototype,"draggedElementType",{get:function(){return"item-value"},enumerable:!1,configurable:!0}),t.prototype.createDraggedElementShortcut=function(e,r,n){if(this.parentElement.getType()==="imagepicker")return this.createImagePickerShortcut(this.draggedElement,e,r,n);var o=D.createElement("div");if(!!o){o.className="sv-drag-drop-choices-shortcut";var s=!0,a=r.closest("[data-sv-drop-target-item-value]").cloneNode(s);a.classList.add("sv-drag-drop-choices-shortcut__content");var l=a.querySelector(".svc-item-value-controls__drag-icon");l.style.visibility="visible";var u=a.querySelector(".svc-item-value-controls__remove");u.style.backgroundColor="transparent",a.classList.remove("svc-item-value--moveup"),a.classList.remove("svc-item-value--movedown"),this.draggedElement.isDragDropMoveDown=!1,this.draggedElement.isDragDropMoveUp=!1,o.appendChild(a);var d=r.getBoundingClientRect();return o.shortcutXOffset=n.clientX-d.x,o.shortcutYOffset=n.clientY-d.y,this.isBottom=null,typeof this.onShortcutCreated=="function"&&this.onShortcutCreated(o),o}},t.prototype.createImagePickerShortcut=function(e,r,n,o){var s=D.createElement("div");if(!!s){s.style.cssText=` 
      cursor: grabbing;
      position: absolute;
      z-index: 10000;
      box-shadow: var(--sjs-shadow-large, 0px 8px 16px 0px rgba(0, 0, 0, 0.1)), var(--sjs-shadow-medium, 0px 2px 6px 0px rgba(0, 0, 0, 0.1));
      background-color: var(--sjs-general-backcolor, var(--background, #fff));
      padding: calc(0.5 * var(--sjs-base-unit, var(--base-unit, 8px)));
      border-radius: calc(0.5 * var(--sjs-base-unit, var(--base-unit, 8px)));
    `;var a=n.closest("[data-sv-drop-target-item-value]");this.imagepickerControlsNode=a.querySelector(".svc-image-item-value-controls");var l=a.querySelector(".sd-imagepicker__image-container"),u=a.querySelector(e.imageLink?"img":".sd-imagepicker__no-image").cloneNode(!0);return this.imagepickerControlsNode&&(this.imagepickerControlsNode.style.display="none"),l.style.width=u.width+"px",l.style.height=u.height+"px",u.style.objectFit="cover",u.style.borderRadius="4px",s.appendChild(u),s}},t.prototype.getDropTargetByDataAttributeValue=function(e){var r;return r=this.parentElement.choices.filter(function(n){return""+n.value==e})[0],r},t.prototype.getVisibleChoices=function(){var e=this.parentElement;return e.getType()==="ranking"?e.selectToRankEnabled?e.visibleChoices:e.rankingChoices:e.visibleChoices},t.prototype.isDropTargetValid=function(e,r){var n=this.getVisibleChoices();if(this.parentElement.getType()!=="imagepicker"){var o=n.indexOf(this.dropTarget),s=n.indexOf(this.draggedElement);if(s>o&&this.dropTarget.isDragDropMoveUp)return this.dropTarget.isDragDropMoveUp=!1,!1;if(s<o&&this.dropTarget.isDragDropMoveDown)return this.dropTarget.isDragDropMoveDown=!1,!1}return n.indexOf(e)!==-1},t.prototype.calculateIsBottom=function(e){var r=this.getVisibleChoices();return r.indexOf(this.dropTarget)-r.indexOf(this.draggedElement)>0},t.prototype.afterDragOver=function(e){if(!this.isDropTargetDoesntChanged(this.isBottom)){var r=this.getVisibleChoices(),n=r.indexOf(this.dropTarget),o=r.indexOf(this.draggedElement);r.splice(o,1),r.splice(n,0,this.draggedElement),this.parentElement.getType()!=="imagepicker"&&(o!==n&&(e.classList.remove("svc-item-value--moveup"),e.classList.remove("svc-item-value--movedown"),this.dropTarget.isDragDropMoveDown=!1,this.dropTarget.isDragDropMoveUp=!1),o>n&&(this.dropTarget.isDragDropMoveDown=!0),o<n&&(this.dropTarget.isDragDropMoveUp=!0),i.prototype.ghostPositionChanged.call(this))}},t.prototype.doDrop=function(){var e=this.parentElement.choices,r=this.getVisibleChoices().filter(function(s){return e.indexOf(s)!==-1}),n=e.indexOf(this.draggedElement),o=r.indexOf(this.draggedElement);return e.splice(n,1),e.splice(o,0,this.draggedElement),this.parentElement},t.prototype.clear=function(){this.parentElement&&this.updateVisibleChoices(this.parentElement),this.imagepickerControlsNode&&(this.imagepickerControlsNode.style.display="flex",this.imagepickerControlsNode=null),i.prototype.clear.call(this)},t.prototype.updateVisibleChoices=function(e){e.getType()==="ranking"?e.updateRankingChoices():e.updateVisibleChoices()},t}(an),ac=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),rs=function(i){ac(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.isDragOverRootNode=!1,e.doDragOver=function(){var r=e.domAdapter.draggedElementShortcut.querySelector(".sv-ranking-item");r.style.cursor="grabbing"},e.reorderRankedItem=function(r,n,o){if(n!=o){var s=r.rankingChoices,a=s[n];r.isValueSetByUser=!0,s.splice(n,1),s.splice(o,0,a),e.updateDraggedElementShortcut(o+1)}},e.doBanDropHere=function(){if(e.isDragOverRootNode){e.allowDropHere=!0;return}var r=e.domAdapter.draggedElementShortcut.querySelector(".sv-ranking-item");r.style.cursor="not-allowed"},e}return Object.defineProperty(t.prototype,"draggedElementType",{get:function(){return"ranking-item"},enumerable:!1,configurable:!0}),t.prototype.createDraggedElementShortcut=function(e,r,n){var o=D.createElement("div");if(!!o){o.className=this.shortcutClass+" sv-ranking-shortcut";var s=!0,a=r.cloneNode(s);o.appendChild(a);var l=r.getBoundingClientRect();o.style.left=l.x,o.style.top=l.y,this.domAdapter.rootElement.append(o);var u=o.offsetHeight,d=n.clientY;return d>l.y+u&&(d=l.y+u-10),o.shortcutXOffset=n.clientX-l.x,o.shortcutYOffset=d-l.y,this.parentElement&&this.parentElement.useFullItemSizeForShortcut&&(o.style.width=r.offsetWidth+"px",o.style.height=r.offsetHeight+"px"),o}},Object.defineProperty(t.prototype,"shortcutClass",{get:function(){return new O().append(this.parentElement.cssClasses.root).append(this.parentElement.cssClasses.rootMobileMod,rr).toString()},enumerable:!1,configurable:!0}),t.prototype.getDropTargetByDataAttributeValue=function(e){return this.parentElement.rankingChoices[e]},t.prototype.findDropTargetNodeByDragOverNode=function(e){return this.isDragOverRootNode=this.getIsDragOverRootNode(e),i.prototype.findDropTargetNodeByDragOverNode.call(this,e)},t.prototype.getIsDragOverRootNode=function(e){return typeof e.className=="string"&&e.className.indexOf("sv-ranking")!==-1},t.prototype.isDropTargetValid=function(e,r){var n=this.parentElement.rankingChoices;return n.indexOf(e)!==-1},t.prototype.calculateIsBottom=function(e,r){if(this.dropTarget instanceof q&&this.draggedElement!==this.dropTarget){var n=r.getBoundingClientRect();return e>=n.y+n.height/2}return i.prototype.calculateIsBottom.call(this,e)},t.prototype.getIndices=function(e,r,n){var o=r.indexOf(this.draggedElement),s=n.indexOf(this.dropTarget);if(o<0&&!!this.draggedElement&&(this.draggedElement=q.getItemByValue(r,this.draggedElement.value)||this.draggedElement,o=r.indexOf(this.draggedElement)),s===-1){var a=e.value.length;s=a}else r==n?(!this.isBottom&&o<s&&s--,this.isBottom&&o>s&&s++):r!=n&&this.isBottom&&s++;return{fromIndex:o,toIndex:s}},t.prototype.afterDragOver=function(e){var r=this.getIndices(this.parentElement,this.parentElement.rankingChoices,this.parentElement.rankingChoices),n=r.fromIndex,o=r.toIndex;this.reorderRankedItem(this.parentElement,n,o)},t.prototype.updateDraggedElementShortcut=function(e){var r;if(!((r=this.domAdapter)===null||r===void 0)&&r.draggedElementShortcut){var n=e!==null?e+"":"",o=this.domAdapter.draggedElementShortcut.querySelector(".sv-ranking-item__index");o.innerText=n}},t.prototype.ghostPositionChanged=function(){this.parentElement.currentDropTarget=this.draggedElement,i.prototype.ghostPositionChanged.call(this)},t.prototype.doDrop=function(){return this.parentElement.setValue(),this.parentElement},t.prototype.clear=function(){this.parentElement&&(this.parentElement.dropTargetNodeMove=null,this.parentElement.updateRankingChoices(!0)),i.prototype.clear.call(this)},t}(ts),lc=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ns=function(i){lc(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.selectToRank=function(r,n,o){var s=[].concat(r.rankingChoices),a=r.unRankingChoices,l=a[n];s.splice(o,0,l),e.updateChoices(r,s)},e.unselectFromRank=function(r,n,o){var s=[].concat(r.rankingChoices);s.splice(n,1),e.updateChoices(r,s)},e}return t.prototype.findDropTargetNodeByDragOverNode=function(e){if(e.dataset.ranking==="from-container"||e.dataset.ranking==="to-container")return e;var r=e.closest("[data-ranking='to-container']"),n=e.closest("[data-ranking='from-container']");return this.parentElement.unRankingChoices.length===0&&n?n:this.parentElement.rankingChoices.length===0&&r?r:i.prototype.findDropTargetNodeByDragOverNode.call(this,e)},t.prototype.getDropTargetByDataAttributeValue=function(e){return this.parentElement.rankingChoices[e]||this.parentElement.unRankingChoices[e]},t.prototype.getDropTargetByNode=function(e,r){return e.dataset.ranking==="to-container"?"to-container":e.dataset.ranking==="from-container"||e.closest("[data-ranking='from-container']")?"from-container":i.prototype.getDropTargetByNode.call(this,e,r)},t.prototype.isDropTargetValid=function(e,r){return e==="to-container"||e==="from-container"?!0:i.prototype.isDropTargetValid.call(this,e,r)},t.prototype.afterDragOver=function(e){var r=this.parentElement,n=r.rankingChoices,o=r.unRankingChoices;if(this.isDraggedElementUnranked&&this.isDropTargetRanked){this.doRankBetween(e,o,n,this.selectToRank);return}if(this.isDraggedElementRanked&&this.isDropTargetRanked){this.doRankBetween(e,n,n,this.reorderRankedItem);return}if(this.isDraggedElementRanked&&!this.isDropTargetRanked){this.doRankBetween(e,n,o,this.unselectFromRank);return}},t.prototype.doRankBetween=function(e,r,n,o){var s=this.parentElement,a=this.getIndices(s,r,n),l=a.fromIndex,u=a.toIndex;o(s,l,u,e)},Object.defineProperty(t.prototype,"isDraggedElementRanked",{get:function(){return this.parentElement.rankingChoices.indexOf(this.draggedElement)!==-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDropTargetRanked",{get:function(){return this.dropTarget==="to-container"?!0:this.parentElement.rankingChoices.indexOf(this.dropTarget)!==-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDraggedElementUnranked",{get:function(){return!this.isDraggedElementRanked},enumerable:!1,configurable:!0}),t.prototype.updateChoices=function(e,r){e.isValueSetByUser=!0,e.rankingChoices=r,e.updateUnRankingChoices(r)},t}(rs),uc=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Qe=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Rn=function(i){uc(t,i);function t(e){var r=i.call(this,e)||this;return r.domNode=null,r.onVisibleChoicesChanged=function(){if(i.prototype.onVisibleChoicesChanged.call(r),r.carryForwardStartUnranked&&!r.isValueSetByUser&&!r.selectToRankEnabled&&!r.defaultValue&&(r.value=[]),r.visibleChoices.length===1&&!r.selectToRankEnabled){r.value=[],r.value.push(r.visibleChoices[0].value),r.updateRankingChoices();return}if(r.isEmpty()){r.updateRankingChoices();return}if(r.selectToRankEnabled){r.updateRankingChoices();return}r.visibleChoices.length>r.value.length&&r.addToValueByVisibleChoices(),r.visibleChoices.length<r.value.length&&r.removeFromValueByVisibleChoices(),r.updateRankingChoices()},r.localeChanged=function(){i.prototype.localeChanged.call(r),r.updateRankingChoicesSync()},r._rankingChoicesAnimation=new Ge(r.getChoicesAnimationOptions(!0),function(n){r._renderedRankingChoices=n},function(){return r.renderedRankingChoices}),r._unRankingChoicesAnimation=new Ge(r.getChoicesAnimationOptions(!1),function(n){r._renderedUnRankingChoices=n},function(){return r.renderedUnRankingChoices}),r.rankingChoices=[],r.unRankingChoices=[],r._renderedRankingChoices=[],r._renderedUnRankingChoices=[],r.handlePointerDown=function(n,o,s){var a=n.target;!r.isDragStartNodeValid(a)||r.isAllowStartDrag(a,o)&&(r.draggedChoiceValue=o.value,r.draggedTargetNode=s,r.dragOrClickHelper.onPointerDown(n))},r.startDrag=function(n){var o=q.getItemByValue(r.activeChoices,r.draggedChoiceValue);r.dragDropRankingChoices.startDrag(n,o,r,r.draggedTargetNode)},r.handlePointerUp=function(n,o,s){if(!!r.selectToRankEnabled){var a=n.target;r.isAllowStartDrag(a,o)&&r.handleKeydownSelectToRank(n,o," ",!1)}},r.handleKeydown=function(n,o){if(!r.isReadOnlyAttr&&!r.isDesignMode){var s=n.key,a=r.rankingChoices.indexOf(o);if(r.selectToRankEnabled){r.handleKeydownSelectToRank(n,o);return}if(s==="ArrowUp"&&a||s==="ArrowDown"&&a!==r.rankingChoices.length-1){var l=s=="ArrowUp"?a-1:a+1;r.dragDropRankingChoices.reorderRankedItem(r,a,l),r.setValueAfterKeydown(l,"",!0,n)}}},r.focusItem=function(n,o){if(!!r.domNode)if(r.selectToRankEnabled&&o){var s="[data-ranking='"+o+"']",a=r.domNode.querySelectorAll(s+" ."+r.cssClasses.item);a[n].focus()}else{var a=r.domNode.querySelectorAll("."+r.cssClasses.item);a[n].focus()}},r.isValueSetByUser=!1,r.setValue=function(){var n=[];r.rankingChoices.forEach(function(o){n.push(o.value)}),r.value=n,r.isValueSetByUser=!0},r.registerFunctionOnPropertyValueChanged("selectToRankEnabled",function(){r.clearValue(!0),r.setDragDropRankingChoices(),r.updateRankingChoicesSync()}),r.dragOrClickHelper=new ln(r.startDrag),r}return t.prototype.getType=function(){return"ranking"},t.prototype.getItemTabIndex=function(e){if(!(this.isDesignMode||e.disabled))return 0},t.prototype.supportContainerQueries=function(){return this.selectToRankEnabled},Object.defineProperty(t.prototype,"rootClass",{get:function(){return new O().append(this.cssClasses.root).append(this.cssClasses.rootMobileMod,this.isMobileMode()).append(this.cssClasses.rootDisabled,this.isDisabledStyle).append(this.cssClasses.rootReadOnly,this.isReadOnlyStyle).append(this.cssClasses.rootPreview,this.isPreviewStyle).append(this.cssClasses.rootDesignMode,!!this.isDesignMode).append(this.cssClasses.itemOnError,this.hasCssError()).append(this.cssClasses.rootDragHandleAreaIcon,b.rankingDragHandleArea==="icon").append(this.cssClasses.rootSelectToRankMod,this.selectToRankEnabled).append(this.cssClasses.rootSelectToRankEmptyValueMod,this.isEmpty()).append(this.cssClasses.rootSelectToRankAlignHorizontal,this.selectToRankEnabled&&this.renderedSelectToRankAreasLayout==="horizontal").append(this.cssClasses.rootSelectToRankAlignVertical,this.selectToRankEnabled&&this.renderedSelectToRankAreasLayout==="vertical").toString()},enumerable:!1,configurable:!0}),t.prototype.isItemSelectedCore=function(e){return this.selectToRankEnabled?i.prototype.isItemSelectedCore.call(this,e):!0},t.prototype.getItemClassCore=function(e,r){return new O().append(i.prototype.getItemClassCore.call(this,e,r)).append(this.cssClasses.itemGhostMod,this.currentDropTarget===e).toString()},t.prototype.getContainerClasses=function(e){var r=!1,n=e==="to",o=e==="from";return n?r=this.renderedRankingChoices.length===0:o&&(r=this.renderedUnRankingChoices.length===0),new O().append(this.cssClasses.container).append(this.cssClasses.containerToMode,n).append(this.cssClasses.containerFromMode,o).append(this.cssClasses.containerEmptyMode,r).toString()},t.prototype.isItemCurrentDropTarget=function(e){return this.dragDropRankingChoices.dropTarget===e},Object.defineProperty(t.prototype,"ghostPositionCssClass",{get:function(){return this.ghostPosition==="top"?this.cssClasses.dragDropGhostPositionTop:this.ghostPosition==="bottom"?this.cssClasses.dragDropGhostPositionBottom:""},enumerable:!1,configurable:!0}),t.prototype.getItemIndexClasses=function(e){var r;return this.selectToRankEnabled?r=this.unRankingChoices.indexOf(e)!==-1:r=this.isEmpty(),new O().append(this.cssClasses.itemIndex).append(this.cssClasses.itemIndexEmptyMode,r).toString()},t.prototype.getNumberByIndex=function(e){return this.isEmpty()?"":e+1+""},t.prototype.updateRankingChoicesSync=function(){this.blockAnimations(),this.updateRankingChoices(),this.releaseAnimations()},t.prototype.setSurveyImpl=function(e,r){i.prototype.setSurveyImpl.call(this,e,r),this.setDragDropRankingChoices(),this.updateRankingChoicesSync()},t.prototype.isAnswerCorrect=function(){return P.isArraysEqual(this.value,this.correctAnswer,!1)},Object.defineProperty(t.prototype,"requireStrictCompare",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.onSurveyValueChanged=function(e){i.prototype.onSurveyValueChanged.call(this,e),!this.isLoadingFromJson&&this.updateRankingChoices()},t.prototype.onSurveyLoad=function(){this.blockAnimations(),i.prototype.onSurveyLoad.call(this),this.updateRankingChoices(),this.releaseAnimations()},t.prototype.addToValueByVisibleChoices=function(){var e=this.value.slice();this.visibleChoices.forEach(function(r){e.indexOf(r.value)===-1&&e.push(r.value)}),this.value=e},t.prototype.removeFromValueByVisibleChoices=function(){for(var e=this.value.slice(),r=this.visibleChoices,n=this.value.length-1;n>=0;n--)q.getItemByValue(r,this.value[n])||e.splice(n,1);this.value=e},t.prototype.getChoicesAnimationOptions=function(e){var r=this;return{getKey:function(n){return n.value},getRerenderEvent:function(){return r.onElementRerendered},isAnimationEnabled:function(){return r.animationAllowed&&!r.isDesignMode&&r.isVisible&&!!r.domNode},getReorderOptions:function(n,o){var s="";return n!==r.currentDropTarget&&(s=o?"sv-dragdrop-movedown":"sv-dragdrop-moveup"),{cssClass:s}},getLeaveOptions:function(n){var o=e?r.renderedRankingChoices:r.renderedUnRankingChoices;return r.renderedSelectToRankAreasLayout=="vertical"&&o.length==1&&o.indexOf(n)>=0?{cssClass:"sv-ranking-item--animate-item-removing-empty"}:{cssClass:"sv-ranking-item--animate-item-removing",onBeforeRunAnimation:function(s){s.style.setProperty("--animation-height",s.offsetHeight+"px")}}},getEnterOptions:function(n){var o=e?r.renderedRankingChoices:r.renderedUnRankingChoices;return r.renderedSelectToRankAreasLayout=="vertical"&&o.length==1&&o.indexOf(n)>=0?{cssClass:"sv-ranking-item--animate-item-adding-empty"}:{cssClass:"sv-ranking-item--animate-item-adding",onBeforeRunAnimation:function(s){s.style.setProperty("--animation-height",s.offsetHeight+"px")}}},getAnimatedElement:function(n){var o,s=r.cssClasses,a="";r.selectToRankEnabled&&(!e&&s.containerFromMode?a=Ke(s.containerFromMode):e&&s.containerToMode&&(a=Ke(s.containerToMode)));var l=e?r.renderedRankingChoices.indexOf(n):r.renderedUnRankingChoices.indexOf(n);return(o=r.domNode)===null||o===void 0?void 0:o.querySelector(a+" [data-sv-drop-target-ranking-item='"+l+"']")},allowSyncRemovalAddition:!0}},Object.defineProperty(t.prototype,"rankingChoicesAnimation",{get:function(){return this._rankingChoicesAnimation},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"unRankingChoicesAnimation",{get:function(){return this._unRankingChoicesAnimation},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedRankingChoices",{get:function(){return this._renderedRankingChoices},set:function(e){this.rankingChoicesAnimation.sync(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedUnRankingChoices",{get:function(){return this._renderedUnRankingChoices},set:function(e){this.unRankingChoicesAnimation.sync(e)},enumerable:!1,configurable:!0}),t.prototype.updateRenderedRankingChoices=function(){this.renderedRankingChoices=this.rankingChoices},t.prototype.updateRenderedUnRankingChoices=function(){this.renderedUnRankingChoices=this.unRankingChoices},t.prototype.updateRankingChoices=function(e){var r=this;if(e===void 0&&(e=!1),this.selectToRankEnabled){this.updateRankingChoicesSelectToRankMode(e);return}var n=[];if(e&&(this.rankingChoices=[]),this.isEmpty()){this.rankingChoices=this.visibleChoices;return}this.value.forEach(function(o){r.visibleChoices.forEach(function(s){s.value===o&&n.push(s)})}),this.rankingChoices=n},t.prototype.updateUnRankingChoices=function(e){var r=[];this.visibleChoices.forEach(function(n){r.push(n)}),e.forEach(function(n){r.forEach(function(o,s){o.value===n.value&&r.splice(s,1)})}),this.unRankingChoices=r},t.prototype.updateRankingChoicesSelectToRankMode=function(e){var r=this,n=[];this.isEmpty()||this.value.forEach(function(o){r.visibleChoices.forEach(function(s){s.value===o&&n.push(s)})}),this.updateUnRankingChoices(n),this.rankingChoices=n},t.prototype.endLoadingFromJson=function(){i.prototype.endLoadingFromJson.call(this),this.setDragDropRankingChoices()},t.prototype.setDragDropRankingChoices=function(){this.dragDropRankingChoices=this.createDragDropRankingChoices()},t.prototype.createDragDropRankingChoices=function(){return this.selectToRankEnabled?new ns(this.survey,null,this.longTap):new rs(this.survey,null,this.longTap)},t.prototype.isDragStartNodeValid=function(e){return b.rankingDragHandleArea==="icon"?e.classList.contains(this.cssClasses.itemIconHoverMod):!0},t.prototype.isAllowStartDrag=function(e,r){return!this.isReadOnly&&!this.isDesignMode&&this.canStartDragDueMaxSelectedChoices(e)&&this.canStartDragDueItemEnabled(r)},t.prototype.canStartDragDueMaxSelectedChoices=function(e){if(!this.selectToRankEnabled)return!0;var r=e.closest("[data-ranking='from-container']");return r?this.checkMaxSelectedChoicesUnreached():!0},t.prototype.canStartDragDueItemEnabled=function(e){return e.enabled},t.prototype.checkMaxSelectedChoicesUnreached=function(){if(this.maxSelectedChoices<1)return!0;var e=this.value,r=Array.isArray(e)?e.length:0;return r<this.maxSelectedChoices},t.prototype.afterRenderQuestionElement=function(e){this.domNode=e,i.prototype.afterRenderQuestionElement.call(this,e)},t.prototype.beforeDestroyQuestionElement=function(e){this.domNode=void 0,i.prototype.beforeDestroyQuestionElement.call(this,e)},t.prototype.supportSelectAll=function(){return!1},t.prototype.supportOther=function(){return!1},t.prototype.supportNone=function(){return!1},t.prototype.supportRefuse=function(){return!1},t.prototype.supportDontKnow=function(){return!1},t.prototype.handleKeydownSelectToRank=function(e,r,n,o){if(o===void 0&&(o=!0),!this.isDesignMode){var s=e.key;if(n&&(s=n),!(s!==" "&&s!=="ArrowUp"&&s!=="ArrowDown")){var a=this.dragDropRankingChoices,l=this.rankingChoices,u=l.indexOf(r)!==-1,d=u?l:this.unRankingChoices,v=d.indexOf(r);if(!(v<0)){var V;if(s===" "&&!u){if(!this.checkMaxSelectedChoicesUnreached()||!this.canStartDragDueItemEnabled(r))return;V=this.value.length,a.selectToRank(this,v,V),this.setValueAfterKeydown(V,"to-container",o,e);return}if(!!u){if(s===" "){a.unselectFromRank(this,v),V=this.unRankingChoices.indexOf(r),this.setValueAfterKeydown(V,"from-container",o,e);return}var E=s==="ArrowUp"?-1:s==="ArrowDown"?1:0;E!==0&&(V=v+E,!(V<0||V>=l.length)&&(a.reorderRankedItem(this,v,V),this.setValueAfterKeydown(V,"to-container",o,e)))}}}}},t.prototype.setValueAfterKeydown=function(e,r,n,o){var s=this;n===void 0&&(n=!0),this.setValue(),n&&setTimeout(function(){s.focusItem(e,r)},1),o&&o.preventDefault()},t.prototype.getIconHoverCss=function(){return new O().append(this.cssClasses.itemIcon).append(this.cssClasses.itemIconHoverMod).toString()},t.prototype.getIconFocusCss=function(){return new O().append(this.cssClasses.itemIcon).append(this.cssClasses.itemIconFocusMod).toString()},Object.defineProperty(t.prototype,"longTap",{get:function(){return this.getPropertyValue("longTap")},set:function(e){this.setPropertyValue("longTap",e)},enumerable:!1,configurable:!0}),t.prototype.getDefaultItemComponent=function(){return"sv-ranking-item"},Object.defineProperty(t.prototype,"selectToRankEnabled",{get:function(){return this.getPropertyValue("selectToRankEnabled",!1)},set:function(e){this.setPropertyValue("selectToRankEnabled",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectToRankAreasLayout",{get:function(){return this.getPropertyValue("selectToRankAreasLayout")},set:function(e){this.setPropertyValue("selectToRankAreasLayout",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedSelectToRankAreasLayout",{get:function(){return this.isMobileMode()?"vertical":this.selectToRankAreasLayout},enumerable:!1,configurable:!0}),t.prototype.isMobileMode=function(){return rr},Object.defineProperty(t.prototype,"useFullItemSizeForShortcut",{get:function(){return this.getPropertyValue("useFullItemSizeForShortcut")},set:function(e){this.setPropertyValue("useFullItemSizeForShortcut",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dragDropSvgIcon",{get:function(){return this.cssClasses.dragDropSvgIconId||"#icon-drag-n-drop"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"arrowsSvgIcon",{get:function(){return this.cssClasses.arrowsSvgIconId||"#icon-ranking-arrows"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dashSvgIcon",{get:function(){return this.cssClasses.dashSvgIconId||"#icon-ranking-dash"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNewA11yStructure",{get:function(){return!1},enumerable:!1,configurable:!0}),Qe([ue({onSet:function(e,r){return r.updateRenderedRankingChoices()},onRemove:function(e,r,n){return n.updateRenderedRankingChoices()},onPush:function(e,r,n){return n.updateRenderedRankingChoices()}})],t.prototype,"rankingChoices",void 0),Qe([ue({onSet:function(e,r){return r.updateRenderedUnRankingChoices()},onRemove:function(e,r,n){return n.updateRenderedUnRankingChoices()},onPush:function(e,r,n){return n.updateRenderedUnRankingChoices()}})],t.prototype,"unRankingChoices",void 0),Qe([ue()],t.prototype,"_renderedRankingChoices",void 0),Qe([ue()],t.prototype,"_renderedUnRankingChoices",void 0),Qe([y({defaultValue:null})],t.prototype,"currentDropTarget",void 0),Qe([y({defaultValue:!0})],t.prototype,"carryForwardStartUnranked",void 0),Qe([y({localizable:{defaultStr:"selectToRankEmptyRankedAreaText"}})],t.prototype,"selectToRankEmptyRankedAreaText",void 0),Qe([y({localizable:{defaultStr:"selectToRankEmptyUnrankedAreaText"}})],t.prototype,"selectToRankEmptyUnrankedAreaText",void 0),t}(Mt);x.addClass("ranking",[{name:"showOtherItem",visible:!1,isSerializable:!1},{name:"otherText",visible:!1,isSerializable:!1},{name:"otherErrorText",visible:!1,isSerializable:!1},{name:"storeOthersAsComment",visible:!1,isSerializable:!1},{name:"showNoneItem",visible:!1,isSerializable:!1},{name:"showRefuseItem",visible:!1,isSerializable:!1},{name:"showDontKnowItem",visible:!1,isSerializable:!1},{name:"noneText",visible:!1,isSerializable:!1},{name:"showSelectAllItem",visible:!1,isSerializable:!1},{name:"selectAllText",visible:!1,isSerializable:!1},{name:"colCount:number",visible:!1,isSerializable:!1},{name:"separateSpecialChoices",visible:!1,isSerializable:!1},{name:"longTap",default:!0,visible:!1,isSerializable:!1},{name:"selectToRankEnabled:switch",default:!1,visible:!0,isSerializable:!0},{name:"selectToRankAreasLayout",default:"horizontal",choices:["horizontal","vertical"],dependsOn:"selectToRankEnabled",visibleIf:function(i){return!!i.selectToRankEnabled},visible:!0,isSerializable:!0},{name:"selectToRankEmptyRankedAreaText:text",serializationProperty:"locSelectToRankEmptyRankedAreaText",category:"general",dependsOn:"selectToRankEnabled",visibleIf:function(i){return!!i.selectToRankEnabled}},{name:"selectToRankEmptyUnrankedAreaText:text",serializationProperty:"locSelectToRankEmptyUnrankedAreaText",category:"general",dependsOn:"selectToRankEnabled",visibleIf:function(i){return!!i.selectToRankEnabled}},{name:"maxSelectedChoices:number",visible:!0,default:0,dependsOn:"selectToRankEnabled",visibleIf:function(i){return!!i.selectToRankEnabled},isSerializable:!0},{name:"minSelectedChoices:number",visible:!0,default:0,dependsOn:"selectToRankEnabled",visibleIf:function(i){return!!i.selectToRankEnabled},isSerializable:!0},{name:"itemComponent",visible:!1,default:"sv-ranking-item"}],function(){return new Rn("")},"checkbox"),Z.Instance.registerQuestion("ranking",function(i){var t=new Rn(i);return t.choices=Z.DefaultChoices,t});var cc=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),En=function(i){cc(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"rows",{get:function(){return this.getPropertyValue("rows")},set:function(e){this.setPropertyValue("rows",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cols",{get:function(){return this.getPropertyValue("cols")},set:function(e){this.setPropertyValue("cols",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"acceptCarriageReturn",{get:function(){return this.getPropertyValue("acceptCarriageReturn")},set:function(e){this.setPropertyValue("acceptCarriageReturn",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoGrow",{get:function(){return this.getPropertyValue("autoGrow")},set:function(e){this.setPropertyValue("autoGrow",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedAutoGrow",{get:function(){var e=this.autoGrow;return e===void 0&&this.survey?this.survey.autoGrowComment:!!e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowResize",{get:function(){return this.getPropertyValue("allowResize")},set:function(e){this.setPropertyValue("allowResize",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedAllowResize",{get:function(){var e=this.allowResize,r=e===void 0&&this.survey?this.survey.allowResizeComment:!!e;return r&&!this.isPreviewStyle&&!this.isReadOnlyStyle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resizeStyle",{get:function(){return this.renderedAllowResize?"both":"none"},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"comment"},t.prototype.afterRenderQuestionElement=function(e){var r=b.environment.root;this.element=r.getElementById(this.inputId)||e,this.updateElement(),i.prototype.afterRenderQuestionElement.call(this,e)},t.prototype.updateElement=function(){var e=this;this.element&&this.renderedAutoGrow&&setTimeout(function(){return Br(e.element)},1)},t.prototype.beforeDestroyQuestionElement=function(e){i.prototype.beforeDestroyQuestionElement.call(this,e),this.element=void 0},t.prototype.onInput=function(e){this.isInputTextUpdate?this.value=e.target.value:this.updateElement(),this.updateRemainingCharacterCounter(e.target.value)},t.prototype.onBlurCore=function(e){i.prototype.onBlurCore.call(this,e)},t.prototype.onKeyDown=function(e){this.onKeyDownPreprocess&&this.onKeyDownPreprocess(e),!this.acceptCarriageReturn&&(e.key==="Enter"||e.keyCode===13)&&(e.preventDefault(),e.stopPropagation())},t.prototype.setQuestionValue=function(e,r){r===void 0&&(r=!0),i.prototype.setQuestionValue.call(this,e,r),this.updateElement()},t.prototype.onValueChanged=function(){i.prototype.onValueChanged.call(this),this.updateElement()},t.prototype.setNewValue=function(e){!this.acceptCarriageReturn&&!!e&&(e=e.replace(new RegExp(`(\r
|
|\r)`,"gm"),"")),i.prototype.setNewValue.call(this,e)},t.prototype.getValueSeparator=function(){return`
`},Object.defineProperty(t.prototype,"className",{get:function(){return(this.cssClasses?this.getControlClass():"panel-comment-root")||void 0},enumerable:!1,configurable:!0}),t}(ur);x.addClass("comment",[{name:"maxLength:number",default:-1},{name:"cols:number",default:50,visible:!1,isSerializable:!1},{name:"rows:number",default:4},{name:"placeholder",alternativeName:"placeHolder",serializationProperty:"locPlaceholder"},{name:"textUpdateMode",default:"default",choices:["default","onBlur","onTyping"]},{name:"autoGrow:boolean",defaultFunc:function(){}},{name:"allowResize:boolean",defaultFunc:function(){}},{name:"acceptCarriageReturn:boolean",default:!0,visible:!1}],function(){return new En("")},"textbase"),Z.Instance.registerQuestion("comment",function(i){return new En(i)});var pc=function(){function i(){this.canFlipValue=void 0}return i.clear=function(){i.cameraList=void 0,i.cameraIndex=-1},i.setCameraList=function(t){var e=function(r){var n=r.label.toLocaleLowerCase();return n.indexOf("user")>-1?"user":n.indexOf("enviroment")>-1?"enviroment":""};i.clear(),Array.isArray(t)&&t.length>0&&(i.cameraIndex=-1,t.sort(function(r,n){if(r===n)return 0;if(r.label!==n.label){var o=e(r),s=e(n);if(o!==s){if(o==="user")return-1;if(s==="user")return 1;if(o==="enviroment")return-1;if(s==="enviroment")return 1}}var a=t.indexOf(r),l=t.indexOf(n);return a<l?-1:1})),i.cameraList=t},i.prototype.hasCamera=function(t){var e=this;if(i.cameraList!==void 0){this.hasCameraCallback(t);return}if(i.mediaDevicesCallback){var r=function(n){e.setVideoInputs(n),e.hasCameraCallback(t)};i.mediaDevicesCallback(r);return}typeof navigator!="undefined"&&navigator.mediaDevices?navigator.mediaDevices.enumerateDevices().then(function(n){e.setVideoInputs(n),e.hasCameraCallback(t),e.updateCanFlipValue()}).catch(function(n){i.cameraList=null,e.hasCameraCallback(t)}):(i.cameraList=null,this.hasCameraCallback(t))},i.prototype.getMediaConstraints=function(t){var e=i.cameraList;if(!(!Array.isArray(e)||e.length<1)){i.cameraIndex<0&&(i.cameraIndex=0);var r=e[i.cameraIndex],n={};return r&&r.deviceId?n.deviceId={exact:r.deviceId}:n.facingMode=i.cameraFacingMode,t&&(t!=null&&t.height&&(n.height={ideal:t.height}),t!=null&&t.width&&(n.width={ideal:t.width})),{video:n,audio:!1}}},i.prototype.startVideo=function(t,e,r,n){var o=this,s,a=(s=b.environment.root)===null||s===void 0?void 0:s.getElementById(t);if(!a){e(void 0);return}a.style.width="100%",a.style.height="auto",a.style.height="100%",a.style.objectFit="contain";var l=this.getMediaConstraints({width:r,height:n});navigator.mediaDevices.getUserMedia(l).then(function(u){var d;a.srcObject=u,!(!((d=i.cameraList[i.cameraIndex])===null||d===void 0)&&d.deviceId)&&!!u.getTracks()[0].getCapabilities().facingMode&&(i.canSwitchFacingMode=!0,o.updateCanFlipValue()),a.play(),e(u)}).catch(function(u){e(void 0)})},i.prototype.getImageSize=function(t){return{width:t.videoWidth,height:t.videoHeight}},i.prototype.snap=function(t,e){if(!D.isAvailable())return!1;var r=D.getDocument(),n=r==null?void 0:r.getElementById(t);if(!n)return!1;var o=r.createElement("canvas"),s=this.getImageSize(n);o.height=s.height,o.width=s.width;var a=o.getContext("2d");return a.clearRect(0,0,o.width,o.height),a.drawImage(n,0,0,o.width,o.height),o.toBlob(e,"image/png"),!0},i.prototype.updateCanFlipValue=function(){var t=i.cameraList;this.canFlipValue=Array.isArray(t)&&t.length>1||i.canSwitchFacingMode,this.onCanFlipChangedCallback&&this.onCanFlipChangedCallback(this.canFlipValue)},i.prototype.canFlip=function(t){return this.canFlipValue===void 0&&this.updateCanFlipValue(),t&&(this.onCanFlipChangedCallback=t),this.canFlipValue},i.prototype.flip=function(){!this.canFlip()||(i.canSwitchFacingMode?i.cameraFacingMode=i.cameraFacingMode==="user"?"environment":"user":i.cameraIndex>=i.cameraList.length-1?i.cameraIndex=0:i.cameraIndex++)},i.prototype.hasCameraCallback=function(t){t(Array.isArray(i.cameraList))},i.prototype.setVideoInputs=function(t){var e=[];t.forEach(function(r){r.kind==="videoinput"&&e.push(r)}),i.setCameraList(e.length>0?e:null)},i.cameraIndex=-1,i.cameraFacingMode="user",i.canSwitchFacingMode=!1,i}(),is=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ie=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};function fc(i,t,e){var r=atob(i.split(",")[1]),n=new Uint8Array(r.split("").map(function(o){return o.charCodeAt(0)})).buffer;return new File([n],t,{type:e})}var os=function(i){is(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.isUploading=!1,e.onUploadStateChanged=e.addEvent(),e.onStateChanged=e.addEvent(),e}return t.prototype.stateChanged=function(e){this.currentState!=e&&(e==="loading"&&(this.isUploading=!0),e==="loaded"&&(this.isUploading=!1),e==="error"&&(this.isUploading=!1),this.currentState=e,this.onStateChanged.fire(this,{state:e}),this.onUploadStateChanged.fire(this,{state:e}))},Object.defineProperty(t.prototype,"showLoadingIndicator",{get:function(){return this.isUploading&&this.isDefaultV2Theme},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storeDataAsText",{get:function(){return this.getPropertyValue("storeDataAsText")},set:function(e){this.setPropertyValue("storeDataAsText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"waitForUpload",{get:function(){return this.getPropertyValue("waitForUpload")},set:function(e){this.setPropertyValue("waitForUpload",e)},enumerable:!1,configurable:!0}),t.prototype.clearValue=function(e){this.clearOnDeletingContainer(),i.prototype.clearValue.call(this,e)},t.prototype.clearOnDeletingContainer=function(){!this.survey||this.survey.clearFiles(this,this.name,this.value,null,function(){})},t.prototype.onCheckForErrors=function(e,r){i.prototype.onCheckForErrors.call(this,e,r),this.isUploading&&this.waitForUpload&&e.push(new Gt(this.getLocalizationString("uploadingFile"),this))},t.prototype.uploadFiles=function(e){var r=this;this.survey&&(this.stateChanged("loading"),this.survey.uploadFiles(this,this.name,e,function(n,o){Array.isArray(n)&&(r.setValueFromResult(n),Array.isArray(o)&&(o.forEach(function(s){return r.errors.push(new Gt(s,r))}),r.stateChanged("error"))),n==="success"&&Array.isArray(o)&&r.setValueFromResult(o),n==="error"&&(typeof o=="string"&&r.errors.push(new Gt(o,r)),Array.isArray(o)&&o.length>0&&o.forEach(function(s){return r.errors.push(new Gt(s,r))}),r.stateChanged("error")),r.stateChanged("loaded")}))},t.prototype.loadPreview=function(e){},t.prototype.onChangeQuestionValue=function(e){i.prototype.onChangeQuestionValue.call(this,e),this.stateChanged(this.isEmpty()?"empty":"loaded"),this.isLoadingFromJson||this.loadPreview(e)},ie([y()],t.prototype,"isUploading",void 0),ie([y({defaultValue:"empty"})],t.prototype,"currentState",void 0),t}(le),Dn=function(i){is(t,i);function t(e){var r=i.call(this,e)||this;return r.isDragging=!1,r.fileNavigator=new Se,r.canFlipCameraValue=void 0,r.prevPreviewLength=0,r.calcAvailableItemsCount=function(n,o,s){var a=Math.floor(n/(o+s));return(a+1)*(o+s)-s<=n&&a++,a},r.dragCounter=0,r.onDragEnter=function(n){r.canDragDrop()&&(n.preventDefault(),r.isDragging=!0,r.dragCounter++)},r.onDragOver=function(n){if(!r.canDragDrop())return n.returnValue=!1,!1;n.dataTransfer.dropEffect="copy",n.preventDefault()},r.onDrop=function(n){if(r.canDragDrop()){r.isDragging=!1,r.dragCounter=0,n.preventDefault();var o=n.dataTransfer;r.onChange(o)}},r.onDragLeave=function(n){r.canDragDrop()&&(r.dragCounter--,r.dragCounter===0&&(r.isDragging=!1))},r.doChange=function(n){var o=n.target||n.srcElement;r.onChange(o)},r.doClean=function(){if(r.needConfirmRemoveFile){xt(r.confirmRemoveAllMessage,function(){r.clearFilesCore()},void 0,r.getLocale(),r.survey.rootElement);return}r.clearFilesCore()},r.doDownloadFileFromContainer=function(n){n.stopPropagation();var o=n.currentTarget;if(o&&o.getElementsByTagName){var s=o.getElementsByTagName("a")[0];s==null||s.click()}},r.doDownloadFile=function(n,o){n.stopPropagation(),Ot()&&(n.preventDefault(),Bi(o.content,o.name))},r.createLocalizableString("takePhotoCaption",r,!1,!0),r.createLocalizableString("clearCaption",r,!1,!0),r.actionsContainer=new Se,r.actionsContainer.locOwner=r,r.fileIndexAction=new G({id:"fileIndex",title:r.getFileIndexCaption(),enabled:!1}),r.prevFileAction=new G({id:"prevPage",iconSize:16,action:function(){r.indexToShow=r.previewValue.length&&(r.indexToShow-1+r.pagesCount)%r.pagesCount||0,r.fileIndexAction.title=r.getFileIndexCaption()}}),r.nextFileAction=new G({id:"nextPage",iconSize:16,action:function(){r.indexToShow=r.previewValue.length&&(r.indexToShow+1)%r.pagesCount||0,r.fileIndexAction.title=r.getFileIndexCaption()}}),r.takePictureAction=new G({iconName:"icon-takepicture",id:"sv-file-take-picture",iconSize:"auto",innerCss:new ne(function(){return new O().append(r.cssClasses.contextButton).append(r.cssClasses.takePictureButton).toString()}),locTitle:r.locTakePhotoCaption,showTitle:!1,action:function(){r.snapPicture()}}),r.closeCameraAction=new G({iconName:"icon-closecamera",id:"sv-file-close-camera",iconSize:"auto",innerCss:new ne(function(){return new O().append(r.cssClasses.contextButton).append(r.cssClasses.closeCameraButton).toString()}),action:function(){r.stopVideo()}}),r.changeCameraAction=new G({iconName:"icon-changecamera",id:"sv-file-change-camera",iconSize:"auto",innerCss:new ne(function(){return new O().append(r.cssClasses.contextButton).append(r.cssClasses.changeCameraButton).toString()}),visible:new ne(function(){return r.canFlipCamera()}),action:function(){r.flipCamera()}}),r.chooseFileAction=new G({iconName:"icon-choosefile",id:"sv-file-choose-file",iconSize:"auto",data:{question:r},enabledIf:function(){return!r.isInputReadOnly},component:"sv-file-choose-btn"}),r.startCameraAction=new G({iconName:"icon-takepicture_24x24",id:"sv-file-start-camera",iconSize:"auto",locTitle:r.locTakePhotoCaption,showTitle:new ne(function(){return!r.isAnswered}),enabledIf:function(){return!r.isInputReadOnly},action:function(){r.startVideo()}}),r.cleanAction=new G({iconName:"icon-clear",id:"sv-file-clean",iconSize:"auto",locTitle:r.locClearButtonCaption,showTitle:!1,enabledIf:function(){return!r.isInputReadOnly},innerCss:new ne(function(){return r.cssClasses.removeButton}),action:function(){r.doClean()}}),[r.closeCameraAction,r.changeCameraAction,r.takePictureAction].forEach(function(n){n.cssClasses={}}),r.registerFunctionOnPropertiesValueChanged(["sourceType","currentMode","isAnswered"],function(){r.updateActionsVisibility()}),r.actionsContainer.actions=[r.chooseFileAction,r.startCameraAction,r.cleanAction],r.fileNavigator.actions=[r.prevFileAction,r.fileIndexAction,r.nextFileAction],r}return Object.defineProperty(t.prototype,"isFileLoading",{get:function(){return this.isFileLoadingValue},set:function(e){this.isFileLoadingValue=e,this.updateIsReady()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fileNavigatorVisible",{get:function(){var e=this.isUploading,r=this.isPlayingVideo,n=this.containsMultiplyFiles,o=this.pageSize<this.previewValue.length;return!e&&!r&&n&&o&&this.isDefaultV2Theme},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pagesCount",{get:function(){return Math.ceil(this.previewValue.length/this.pageSize)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"actionsContainerVisible",{get:function(){var e=this.isUploading,r=this.isPlayingVideo,n=this.isDefaultV2Theme;return!e&&!r&&n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"videoId",{get:function(){return this.id+"_video"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasVideoUI",{get:function(){return this.currentMode!=="file"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasFileUI",{get:function(){return this.currentMode!=="camera"},enumerable:!1,configurable:!0}),t.prototype.startVideo=function(){var e=this;this.currentMode==="file"||this.isDesignMode||this.isPlayingVideo||(this.setIsPlayingVideo(!0),setTimeout(function(){e.startVideoInCamera()},0))},t.prototype.startVideoInCamera=function(){var e=this;this.camera.startVideo(this.videoId,function(r){e.videoStream=r,r||e.stopVideo()},Ze(this.imageWidth),Ze(this.imageHeight))},t.prototype.stopVideo=function(){this.setIsPlayingVideo(!1),this.closeVideoStream()},t.prototype.snapPicture=function(){var e=this;if(!!this.isPlayingVideo){var r=function(n){if(n){var o=new File([n],"snap_picture.png",{type:"image/png"});e.loadFiles([o])}};this.camera.snap(this.videoId,r),this.stopVideo()}},t.prototype.canFlipCamera=function(){var e=this;return this.canFlipCameraValue===void 0&&(this.canFlipCameraValue=this.camera.canFlip(function(r){e.canFlipCameraValue=r})),this.canFlipCameraValue},t.prototype.flipCamera=function(){!this.canFlipCamera()||(this.closeVideoStream(),this.camera.flip(),this.startVideoInCamera())},t.prototype.closeVideoStream=function(){this.videoStream&&(this.videoStream.getTracks().forEach(function(e){e.stop()}),this.videoStream=void 0)},t.prototype.onHidingContent=function(){i.prototype.onHidingContent.call(this),this.stopVideo()},t.prototype.updateElementCssCore=function(e){i.prototype.updateElementCssCore.call(this,e),this.prevFileAction.iconName=this.cssClasses.leftIconId,this.nextFileAction.iconName=this.cssClasses.rightIconId,this.updateCurrentMode()},t.prototype.getFileIndexCaption=function(){return this.getLocalizationFormatString("indexText",this.indexToShow+1,this.pagesCount)},t.prototype.updateFileNavigator=function(){this.indexToShow=this.previewValue.length&&(this.indexToShow+this.pagesCount)%this.pagesCount||0,this.fileIndexAction.title=this.getFileIndexCaption()},t.prototype.previewValueChanged=function(){var e=this;this.previewValue.length!==this.prevPreviewLength&&(this.previewValue.length>0?this.prevPreviewLength>this.previewValue.length?this.indexToShow=this.indexToShow>=this.pagesCount&&this.indexToShow>0?this.pagesCount-1:this.indexToShow:this.indexToShow=Math.floor(this.prevPreviewLength/this.pageSize):this.indexToShow=0),this.fileIndexAction.title=this.getFileIndexCaption(),this.containsMultiplyFiles=this.previewValue.length>1,this.previewValue.length>0&&!this.calculatedGapBetweenItems&&!this.calculatedItemWidth&&setTimeout(function(){e.processResponsiveness(0,e._width)}),this.prevPreviewLength=this.previewValue.length},t.prototype.isPreviewVisible=function(e){var r=this.fileNavigatorVisible,n=this.indexToShow*this.pageSize<=e&&e<(this.indexToShow+1)*this.pageSize;return!r||n},t.prototype.getType=function(){return"file"},Object.defineProperty(t.prototype,"showPreview",{get:function(){return this.getPropertyValue("showPreview")},set:function(e){this.setPropertyValue("showPreview",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowMultiple",{get:function(){return this.getPropertyValue("allowMultiple")},set:function(e){this.setPropertyValue("allowMultiple",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this.getPropertyValue("imageHeight")},set:function(e){this.setPropertyValue("imageHeight",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this.getPropertyValue("imageWidth")},set:function(e){this.setPropertyValue("imageWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"acceptedTypes",{get:function(){return this.getPropertyValue("acceptedTypes")},set:function(e){this.setPropertyValue("acceptedTypes",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowImagesPreview",{get:function(){return this.getPropertyValue("allowImagesPreview")},set:function(e){this.setPropertyValue("allowImagesPreview",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxSize",{get:function(){return this.getPropertyValue("maxSize")},set:function(e){this.setPropertyValue("maxSize",e)},enumerable:!1,configurable:!0}),t.prototype.chooseFile=function(e){var r=this;if(!!this.rootElement){var n=this.rootElement.querySelector("#"+this.inputId);!n||(e.preventDefault(),e.stopImmediatePropagation(),n&&(this.survey?this.survey.chooseFiles(n,function(o){return r.loadFiles(o)},{element:this,elementType:this.getType(),propertyName:this.name}):n.click()))}},Object.defineProperty(t.prototype,"needConfirmRemoveFile",{get:function(){return this.getPropertyValue("needConfirmRemoveFile")},set:function(e){this.setPropertyValue("needConfirmRemoveFile",e)},enumerable:!1,configurable:!0}),t.prototype.getConfirmRemoveMessage=function(e){return this.confirmRemoveMessage.format(e)},Object.defineProperty(t.prototype,"takePhotoCaption",{get:function(){return this.getLocalizableStringText("takePhotoCaption")},set:function(e){this.setLocalizableStringText("takePhotoCaption",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTakePhotoCaption",{get:function(){return this.getLocalizableString("takePhotoCaption")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clearButtonCaption",{get:function(){return this.getLocalizableStringText("clearCaption")},set:function(e){this.setLocalizableStringText("clearCaption",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locClearButtonCaption",{get:function(){return this.getLocalizableString("clearCaption")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locRenderedPlaceholder",{get:function(){var e=this;return this.locRenderedPlaceholderValue===void 0&&(this.locRenderedPlaceholderValue=new ne(function(){var r=e.isReadOnly,n=!e.isDesignMode&&e.hasFileUI||e.isDesignMode&&e.sourceType!="camera",o=!e.isDesignMode&&e.hasVideoUI||e.isDesignMode&&e.sourceType!="file",s;return r?s=e.locNoFileChosenCaption:n&&o?s=e.locFileOrPhotoPlaceholder:n?s=e.locFilePlaceholder:s=e.locPhotoPlaceholder,s})),this.locRenderedPlaceholderValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentMode",{get:function(){return this.getPropertyValue("currentMode",this.sourceType)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPlayingVideo",{get:function(){return this.getPropertyValue("isPlayingVideo",!1)},enumerable:!1,configurable:!0}),t.prototype.setIsPlayingVideo=function(e){this.setPropertyValue("isPlayingVideo",e)},t.prototype.updateCurrentMode=function(){var e=this;this.isDesignMode||(this.sourceType!=="file"?this.camera.hasCamera(function(r){e.setPropertyValue("currentMode",r&&e.isDefaultV2Theme?e.sourceType:"file")}):this.setPropertyValue("currentMode",this.sourceType))},t.prototype.updateActionsVisibility=function(){var e=this.isDesignMode;this.chooseFileAction.visible=!e&&this.hasFileUI||e&&this.sourceType!=="camera",this.startCameraAction.visible=!e&&this.hasVideoUI||e&&this.sourceType!=="file",this.cleanAction.visible=!!this.isAnswered},Object.defineProperty(t.prototype,"inputTitle",{get:function(){return this.isUploading?this.loadingFileTitle:this.isEmpty()?this.chooseFileTitle:" "},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"chooseButtonText",{get:function(){return this.isEmpty()||this.allowMultiple?this.chooseButtonCaption:this.replaceButtonCaption},enumerable:!1,configurable:!0}),t.prototype.clear=function(e){var r=this;!this.survey||(this.containsMultiplyFiles=!1,this.survey.clearFiles(this,this.name,this.value,null,function(n,o){n==="success"&&(r.value=void 0,r.errors=[],e&&e(),r.indexToShow=0,r.fileIndexAction.title=r.getFileIndexCaption())}))},Object.defineProperty(t.prototype,"renderCapture",{get:function(){return this.allowCameraAccess?"user":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"multipleRendered",{get:function(){return this.allowMultiple?"multiple":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showChooseButton",{get:function(){return!this.isReadOnly&&!this.isDefaultV2Theme},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showFileDecorator",{get:function(){var e=this.isPlayingVideo,r=this.showLoadingIndicator;return!e&&!r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowShowPreview",{get:function(){var e=this.showLoadingIndicator,r=this.isPlayingVideo;return!e&&!r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showPreviewContainer",{get:function(){return this.previewValue&&this.previewValue.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showRemoveButtonCore",{get:function(){var e=this.showLoadingIndicator,r=this.isReadOnly,n=this.isEmpty();return!r&&!n&&!e&&!this.isDefaultV2Theme},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showRemoveButton",{get:function(){return this.showRemoveButtonCore&&this.cssClasses.removeButton},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showRemoveButtonBottom",{get:function(){var e=new O().append(this.cssClasses.removeButtonBottom).append(this.cssClasses.contextButton).toString();return this.showRemoveButtonCore&&e},enumerable:!1,configurable:!0}),t.prototype.defaultImage=function(e){return!this.canPreviewImage(e)&&!!this.cssClasses.defaultImage},t.prototype.removeFile=function(e){this.removeFileByContent(this.value.filter(function(r){return r.name===e})[0])},t.prototype.removeFileByContent=function(e){var r=this;!this.survey||this.survey.clearFiles(this,this.name,this.value,e.name,function(n,o){if(n==="success"){var s=r.value;Array.isArray(s)?r.value=s.filter(function(a){return!P.isTwoValueEquals(a,e,!0,!1,!1)}):r.value=void 0}})},t.prototype.setValueFromResult=function(e){this.value=(this.value||[]).concat(e.map(function(r){return{name:r.file.name,type:r.file.type,content:r.content}}))},t.prototype.loadFiles=function(e){var r=this;if(!!this.survey&&(this.errors=[],!!this.allFilesOk(e))){var n=function(){r.stateChanged("loading");var o=[];r.storeDataAsText?e.forEach(function(s){var a=new FileReader;a.onload=function(l){o=o.concat([{name:s.name,type:s.type,content:a.result}]),o.length===e.length&&(r.value=(r.value||[]).concat(o))},a.readAsDataURL(s)}):r.uploadFiles(e)};this.allowMultiple?n():this.clear(n)}},Object.defineProperty(t.prototype,"camera",{get:function(){return this.cameraValue||(this.cameraValue=new pc),this.cameraValue},enumerable:!1,configurable:!0}),t.prototype.canPreviewImage=function(e){return this.allowImagesPreview&&!!e&&this.isFileImage(e)},t.prototype.loadPreview=function(e){var r=this;if(this.previewValue.splice(0,this.previewValue.length),!(!this.showPreview||!e)){var n=Array.isArray(e)?e:e?[e]:[];this.storeDataAsText?n.forEach(function(o){var s=o.content||o;r.previewValue.push({name:o.name,type:o.type,content:s})}):(this._previewLoader&&this._previewLoader.dispose(),this.isFileLoading=!0,this._previewLoader=new ss(this,function(o,s){o!=="error"&&(s.forEach(function(a){r.previewValue.push(a)}),r.previewValueChanged()),r.isFileLoading=!1,r._previewLoader.dispose(),r._previewLoader=void 0}),this._previewLoader.load(n)),this.previewValueChanged()}},t.prototype.getIsQuestionReady=function(){return i.prototype.getIsQuestionReady.call(this)&&!this.isFileLoading},t.prototype.allFilesOk=function(e){var r=this,n=this.errors?this.errors.length:0;return(e||[]).forEach(function(o){r.maxSize>0&&o.size>r.maxSize&&r.errors.push(new Ji(r.maxSize,r))}),n===this.errors.length},t.prototype.isFileImage=function(e){if(!e||!e.content||!e.content.substring)return!1;var r="data:image",n=e.content&&e.content.substring(0,r.length);n=n&&n.toLowerCase();var o=n===r||!!e.type&&e.type.toLowerCase().indexOf("image/")===0;return o},t.prototype.getPlainData=function(e){e===void 0&&(e={includeEmpty:!0});var r=i.prototype.getPlainData.call(this,e);if(!!r&&!this.isEmpty()){r.isNode=!1;var n=Array.isArray(this.value)?this.value:[this.value];r.data=n.map(function(o,s){return{name:s,title:"File",value:o.content&&o.content||o,displayValue:o.name&&o.name||o,getString:function(a){return typeof a=="object"?JSON.stringify(a):a},isNode:!1}})}return r},t.prototype.getImageWrapperCss=function(e){return new O().append(this.cssClasses.imageWrapper).append(this.cssClasses.imageWrapperDefaultImage,this.defaultImage(e)).toString()},t.prototype.getActionsContainerCss=function(e){return new O().append(e.actionsContainer).append(e.actionsContainerAnswered,this.isAnswered).toString()},t.prototype.getRemoveButtonCss=function(){return new O().append(this.cssClasses.removeFileButton).append(this.cssClasses.contextButton).toString()},t.prototype.getChooseFileCss=function(){var e=this.isAnswered;return new O().append(this.cssClasses.chooseFile).append(this.cssClasses.controlDisabled,this.isReadOnly).append(this.cssClasses.chooseFileAsText,!e).append(this.cssClasses.chooseFileAsTextDisabled,!e&&this.isInputReadOnly).append(this.cssClasses.contextButton,e).append(this.cssClasses.chooseFileAsIcon,e).toString()},t.prototype.getReadOnlyFileCss=function(){return new O().append("form-control").append(this.cssClasses.placeholderInput).toString()},Object.defineProperty(t.prototype,"fileRootCss",{get:function(){return new O().append(this.cssClasses.root).append(this.cssClasses.rootDisabled,this.isDisabledStyle).append(this.cssClasses.rootReadOnly,this.isReadOnlyStyle).append(this.cssClasses.rootPreview,this.isPreviewStyle).append(this.cssClasses.rootDragging,this.isDragging).append(this.cssClasses.rootAnswered,this.isAnswered).append(this.cssClasses.single,!this.allowMultiple).append(this.cssClasses.singleImage,!this.allowMultiple&&this.isAnswered&&this.canPreviewImage(this.value[0])).append(this.cssClasses.mobile,this.isMobile).toString()},enumerable:!1,configurable:!0}),t.prototype.getFileDecoratorCss=function(){return new O().append(this.cssClasses.fileDecorator).append(this.cssClasses.onError,this.hasCssError()).append(this.cssClasses.fileDecoratorDrag,this.isDragging).toString()},t.prototype.onChange=function(e){if(!!R.isFileReaderAvailable()&&!(!e||!e.files||e.files.length<1)){for(var r=[],n=this.allowMultiple?e.files.length:1,o=0;o<n;o++)r.push(e.files[o]);e.value="",this.loadFiles(r)}},t.prototype.calcCssClasses=function(e){var r=i.prototype.calcCssClasses.call(this,e);return this.actionsContainer.cssClasses=e.actionBar,this.actionsContainer.cssClasses.itemWithTitle=this.actionsContainer.cssClasses.item,this.actionsContainer.cssClasses.item="",this.actionsContainer.cssClasses.itemAsIcon=r.contextButton,this.actionsContainer.containerCss=r.actionsContainer,r},t.prototype.onSurveyLoad=function(){i.prototype.onSurveyLoad.call(this),this.updateCurrentMode(),this.updateActionsVisibility(),this.loadPreview(this.value)},t.prototype.needResponsiveness=function(){return this.supportResponsiveness()&&this.isDefaultV2Theme},t.prototype.supportResponsiveness=function(){return!0},t.prototype.getObservedElementSelector=function(){return Ke(this.cssClasses.dragArea)},t.prototype.getFileListSelector=function(){return Ke(this.cssClasses.fileList)},t.prototype.triggerResponsiveness=function(e){e&&(this.calculatedGapBetweenItems=void 0,this.calculatedItemWidth=void 0),i.prototype.triggerResponsiveness.call(this)},t.prototype.processResponsiveness=function(e,r){var n=this;if(this._width=r,this.rootElement&&(!this.calculatedGapBetweenItems||!this.calculatedItemWidth)&&this.allowMultiple){var o=this.getFileListSelector(),s=o?this.rootElement.querySelector(this.getFileListSelector()):void 0;if(s){this.calculatedGapBetweenItems=Math.ceil(Number.parseFloat(D.getComputedStyle(s).gap));var a=Array.from(s.children).filter(function(l,u){return n.isPreviewVisible(u)})[0];a&&(this.calculatedItemWidth=Math.ceil(Number.parseFloat(D.getComputedStyle(a).width)))}}return this.calculatedGapBetweenItems&&this.calculatedItemWidth?(this.pageSize=this.calcAvailableItemsCount(r,this.calculatedItemWidth,this.calculatedGapBetweenItems),!0):!1},t.prototype.canDragDrop=function(){return!this.isInputReadOnly&&this.currentMode!=="camera"&&!this.isPlayingVideo},t.prototype.afterRenderQuestionElement=function(e){this.rootElement=e},t.prototype.beforeDestroyQuestionElement=function(e){this.rootElement=void 0},t.prototype.clearFilesCore=function(){if(this.rootElement){var e=this.rootElement.querySelectorAll("input")[0];e&&(e.value="")}this.clear()},t.prototype.doRemoveFile=function(e,r){var n=this;if(r.stopPropagation(),this.needConfirmRemoveFile){xt(this.getConfirmRemoveMessage(e.name),function(){n.removeFileCore(e)},void 0,this.getLocale(),this.survey.rootElement);return}this.removeFileCore(e)},t.prototype.removeFileCore=function(e){var r=this.previewValue.indexOf(e);this.removeFileByContent(r===-1?e:this.value[r])},t.prototype.dispose=function(){this.cameraValue=void 0,this.closeVideoStream(),i.prototype.dispose.call(this)},ie([y()],t.prototype,"isDragging",void 0),ie([ue({})],t.prototype,"previewValue",void 0),ie([y({defaultValue:0})],t.prototype,"indexToShow",void 0),ie([y({defaultValue:1,onSet:function(e,r){r.updateFileNavigator()}})],t.prototype,"pageSize",void 0),ie([y({defaultValue:!1})],t.prototype,"containsMultiplyFiles",void 0),ie([y()],t.prototype,"allowCameraAccess",void 0),ie([y({onSet:function(e,r){r.isLoadingFromJson||r.updateCurrentMode()}})],t.prototype,"sourceType",void 0),ie([y()],t.prototype,"canFlipCameraValue",void 0),ie([y({localizable:{defaultStr:"confirmRemoveFile"}})],t.prototype,"confirmRemoveMessage",void 0),ie([y({localizable:{defaultStr:"confirmRemoveAllFiles"}})],t.prototype,"confirmRemoveAllMessage",void 0),ie([y({localizable:{defaultStr:"noFileChosen"}})],t.prototype,"noFileChosenCaption",void 0),ie([y({localizable:{defaultStr:"chooseFileCaption"}})],t.prototype,"chooseButtonCaption",void 0),ie([y({localizable:{defaultStr:"replaceFileCaption"}})],t.prototype,"replaceButtonCaption",void 0),ie([y({localizable:{defaultStr:"removeFileCaption"}})],t.prototype,"removeFileCaption",void 0),ie([y({localizable:{defaultStr:"loadingFile"}})],t.prototype,"loadingFileTitle",void 0),ie([y({localizable:{defaultStr:"chooseFile"}})],t.prototype,"chooseFileTitle",void 0),ie([y({localizable:{defaultStr:"fileOrPhotoPlaceholder"}})],t.prototype,"fileOrPhotoPlaceholder",void 0),ie([y({localizable:{defaultStr:"photoPlaceholder"}})],t.prototype,"photoPlaceholder",void 0),ie([y({localizable:{defaultStr:"filePlaceholder"}})],t.prototype,"filePlaceholder",void 0),ie([y()],t.prototype,"locRenderedPlaceholderValue",void 0),t}(os);x.addClass("file",[{name:"showCommentArea:switch",layout:"row",visible:!0,category:"general"},{name:"showPreview:boolean",default:!0,visible:!1},"allowMultiple:boolean",{name:"allowImagesPreview:boolean",default:!0,dependsOn:"showPreview",visibleIf:function(i){return!!i.showPreview}},"imageHeight","imageWidth","acceptedTypes",{name:"storeDataAsText:boolean",default:!0},{name:"waitForUpload:boolean",default:!1},{name:"maxSize:number",default:0},{name:"defaultValue",visible:!1},{name:"correctAnswer",visible:!1},{name:"validators",visible:!1},{name:"needConfirmRemoveFile:boolean"},{name:"sourceType",choices:["file","camera","file-camera"],default:"file",category:"general",visible:!0,visibleIf:function(){return b.supportCreatorV2}},{name:"fileOrPhotoPlaceholder:text",serializationProperty:"locFileOrPhotoPlaceholder",category:"general",visibleIf:function(){return b.supportCreatorV2}},{name:"photoPlaceholder:text",serializationProperty:"locPhotoPlaceholder",category:"general",visibleIf:function(){return b.supportCreatorV2}},{name:"filePlaceholder:text",serializationProperty:"locFilePlaceholder",category:"general",visibleIf:function(){return b.supportCreatorV2}},{name:"allowCameraAccess:switch",category:"general",visible:!1}],function(){return new Dn("")},"question"),Z.Instance.registerQuestion("file",function(i){return new Dn(i)});var ss=function(){function i(t,e){this.fileQuestion=t,this.callback=e,this.loaded=[]}return i.prototype.load=function(t){var e=this,r=0;this.loaded=new Array(t.length),t.forEach(function(n,o){e.fileQuestion.survey&&e.fileQuestion.survey.downloadFile(e.fileQuestion,e.fileQuestion.name,n,function(s,a){!e.fileQuestion||!e.callback||(s!=="error"?(e.loaded[o]={content:a,name:n.name,type:n.type},r++,r===t.length&&e.callback(s,e.loaded)):e.callback("error",e.loaded))})})},i.prototype.dispose=function(){this.fileQuestion=void 0,this.callback=void 0},i}(),hc=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),An=function(i){hc(t,i);function t(e){var r=i.call(this,e)||this,n=r.createLocalizableString("html",r);return n.onGetTextCallback=function(o){return!!r.survey&&!r.ignoreHtmlProgressing?r.processHtml(o):o},r}return t.prototype.getType=function(){return"html"},Object.defineProperty(t.prototype,"isCompositeQuestion",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getProcessedText=function(e){return this.ignoreHtmlProgressing?e:i.prototype.getProcessedText.call(this,e)},Object.defineProperty(t.prototype,"html",{get:function(){return this.getLocalizableStringText("html","")},set:function(e){this.setLocalizableStringText("html",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locHtml",{get:function(){return this.getLocalizableString("html")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"processedHtml",{get:function(){return this.processHtml(this.html)},enumerable:!1,configurable:!0}),t.prototype.processHtml=function(e){return this.survey?this.survey.processHtml(e,"html-question"):this.html},Object.defineProperty(t.prototype,"isNewA11yStructure",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderCssRoot",{get:function(){return new O().append(this.cssClasses.root).append(this.cssClasses.nested,this.getIsNested()).toString()||void 0},enumerable:!1,configurable:!0}),t}(fr);x.addClass("html",[{name:"html:html",serializationProperty:"locHtml"},{name:"hideNumber",visible:!1},{name:"state",visible:!1},{name:"titleLocation",visible:!1},{name:"descriptionLocation",visible:!1},{name:"errorLocation",visible:!1},{name:"indent",visible:!1},{name:"width",visible:!1}],function(){return new An("")},"nonvalue"),Z.Instance.registerQuestion("html",function(i){return new An(i)});var dc=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ln=function(i){dc(t,i);function t(e){return i.call(this,e)||this}return t.prototype.getDefaultItemComponent=function(){return"survey-radiogroup-item"},t.prototype.getType=function(){return"radiogroup"},t.prototype.getFirstInputElementId=function(){return this.inputId+"_0"},Object.defineProperty(t.prototype,"selectedItem",{get:function(){return this.getSingleSelectedItem()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showClearButton",{get:function(){return this.getPropertyValue("showClearButton")},set:function(e){this.setPropertyValue("showClearButton",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canShowClearButton",{get:function(){return this.showClearButton&&!this.isReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clearButtonCaption",{get:function(){return this.getLocalizationString("clearCaption")},enumerable:!1,configurable:!0}),t.prototype.supportGoNextPageAutomatic=function(){return this.isMouseDown===!0&&!this.isOtherSelected},t.prototype.getConditionJson=function(e,r){e===void 0&&(e=null),r===void 0&&(r=null);var n=i.prototype.getConditionJson.call(this,e,r);return delete n.showClearButton,n},t.prototype.setNewComment=function(e){this.isMouseDown=!0,i.prototype.setNewComment.call(this,e),this.isMouseDown=!1},Object.defineProperty(t.prototype,"showClearButtonInContent",{get:function(){return!this.isDefaultV2Theme&&this.canShowClearButton},enumerable:!1,configurable:!0}),t.prototype.clickItemHandler=function(e){this.isReadOnlyAttr||(this.renderedValue=e.value)},t.prototype.getDefaultTitleActions=function(){var e=this,r=[];if(this.isDefaultV2Theme&&!this.isDesignMode){var n=new G({title:this.clearButtonCaption,id:"sv-clr-btn-"+this.id,action:function(){e.clearValue(!0)},innerCss:this.cssClasses.clearButton,visible:new ne(function(){return e.canShowClearButton})});r.push(n)}return r},Object.defineProperty(t.prototype,"isNewA11yStructure",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaRole",{get:function(){return"radiogroup"},enumerable:!1,configurable:!0}),t}(At);x.addClass("radiogroup",[{name:"showClearButton:boolean",default:!1},{name:"separateSpecialChoices",visible:!0},{name:"itemComponent",visible:!1,default:"survey-radiogroup-item"}],function(){return new Ln("")},"checkboxbase"),Z.Instance.registerQuestion("radiogroup",function(i){var t=new Ln(i);return t.choices=Z.DefaultChoices,t});var Mn=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),pe=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},dr=function(i){Mn(t,i);function t(e,r){r===void 0&&(r=null);var n=i.call(this)||this;return n.itemValue=e,n.locString=r,n.locText.onStringChanged.add(n.onStringChangedCallback.bind(n)),n.onStringChangedCallback(),n}return t.prototype.onStringChangedCallback=function(){this.text=this.itemValue.text},Object.defineProperty(t.prototype,"value",{get:function(){return this.itemValue.getPropertyValue("value")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locText",{get:function(){return this.locString||this.itemValue.locText},enumerable:!1,configurable:!0}),pe([y({defaultValue:""})],t.prototype,"highlight",void 0),pe([y({defaultValue:""})],t.prototype,"text",void 0),pe([y()],t.prototype,"style",void 0),t}(W),gc=function(i){Mn(t,i);function t(e,r){var n=i.call(this,e)||this;return n.description=r,n}return t}(q),jn=function(i){Mn(t,i);function t(e){var r=i.call(this,e)||this;return r._syncPropertiesChanging=!1,r.createItemValues("rateValues"),r.createRenderedRateItems(),r.createLocalizableString("ratingOptionsCaption",r,!1,!0),r.registerFunctionOnPropertiesValueChanged(["rateMin","rateMax","minRateDescription","maxRateDescription","rateStep","displayRateDescriptionsAsExtremeItems"],function(){return r.createRenderedRateItems()}),r.registerFunctionOnPropertiesValueChanged(["rateType"],function(){r.setIconsToRateValues(),r.createRenderedRateItems(),r.updateRateCount()}),r.registerFunctionOnPropertiesValueChanged(["rateValues"],function(){r.setIconsToRateValues(),r.createRenderedRateItems()}),r.registerSychProperties(["rateValues"],function(){r.autoGenerate=r.rateValues.length==0,r.setIconsToRateValues(),r.createRenderedRateItems()}),r.registerFunctionOnPropertiesValueChanged(["rateColorMode","scaleColorMode"],function(){r.updateColors(r.survey.themeVariables)}),r.registerFunctionOnPropertiesValueChanged(["displayMode"],function(){r.updateRenderAsBasedOnDisplayMode(!0)}),r.registerSychProperties(["autoGenerate"],function(){!r.autoGenerate&&r.rateValues.length===0&&r.setPropertyValue("rateValues",r.visibleRateValues),r.autoGenerate&&(r.rateValues.splice(0,r.rateValues.length),r.updateRateMax()),r.createRenderedRateItems()}),r.createLocalizableString("minRateDescription",r,!0),r.createLocalizableString("maxRateDescription",r,!0),r.initPropertyDependencies(),r}return t.prototype.setIconsToRateValues=function(){var e=this;this.rateType=="smileys"&&this.rateValues.map(function(r){return r.icon=e.getItemSmiley(r)})},t.prototype.endLoadingFromJson=function(){i.prototype.endLoadingFromJson.call(this),this.hasMinRateDescription=!!this.minRateDescription,this.hasMaxRateDescription=!!this.maxRateDescription,this.jsonObj.rateMin!==void 0&&this.jsonObj.rateCount!==void 0&&this.jsonObj.rateMax===void 0&&this.updateRateMax(),this.jsonObj.rateMax!==void 0&&this.jsonObj.rateCount!==void 0&&this.jsonObj.rateMin===void 0&&this.updateRateMin(),this.jsonObj.autoGenerate===void 0&&this.jsonObj.rateValues!==void 0&&(this.autoGenerate=!this.jsonObj.rateValues.length),this.updateRateCount(),this.setIconsToRateValues(),this.createRenderedRateItems()},t.prototype.registerSychProperties=function(e,r){var n=this;this.registerFunctionOnPropertiesValueChanged(e,function(){n._syncPropertiesChanging||(n._syncPropertiesChanging=!0,r(),n._syncPropertiesChanging=!1)})},t.prototype.useRateValues=function(){return!!this.rateValues.length&&!this.autoGenerate},t.prototype.updateRateMax=function(){this.rateMax=this.rateMin+this.rateStep*(this.rateCount-1)},t.prototype.updateRateMin=function(){this.rateMin=this.rateMax-this.rateStep*(this.rateCount-1)},t.prototype.updateRateCount=function(){var e=0;this.useRateValues()?e=this.rateValues.length:e=Math.trunc((this.rateMax-this.rateMin)/(this.rateStep||1))+1,e>10&&this.rateDisplayMode=="smileys"&&(e=10),this.rateCount=e,this.rateValues.length>e&&this.rateValues.splice(e,this.rateValues.length-e)},t.prototype.initPropertyDependencies=function(){var e=this;this.registerSychProperties(["rateCount"],function(){if(!e.useRateValues())e.rateMax=e.rateMin+e.rateStep*(e.rateCount-1);else if(e.rateCount<e.rateValues.length){if(e.rateCount>=10&&e.rateDisplayMode=="smileys")return;e.rateValues.splice(e.rateCount,e.rateValues.length-e.rateCount)}else for(var r=e.rateValues.length;r<e.rateCount;r++)e.rateValues.push(new q(z.getString("choices_Item")+(r+1)))}),this.registerSychProperties(["rateMin","rateMax","rateStep","rateValues"],function(){e.updateRateCount()})},Object.defineProperty(t.prototype,"showSelectedItemLocText",{get:function(){return!this.readOnly&&!this.inputHasValue&&!!this.selectedItemLocText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedItemLocText",{get:function(){var e=this,r;return!this.readOnly&&((r=this.visibleRateValues.filter(function(n){return n.value==e.value})[0])===null||r===void 0?void 0:r.locText)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rateValues",{get:function(){return this.getPropertyValue("rateValues")},set:function(e){this.setPropertyValue("rateValues",e),this.createRenderedRateItems()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rateMin",{get:function(){return this.getPropertyValue("rateMin")},set:function(e){this.setPropertyValue("rateMin",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rateMax",{get:function(){return this.getPropertyValue("rateMax")},set:function(e){this.setPropertyValue("rateMax",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rateStep",{get:function(){return this.getPropertyValue("rateStep")},set:function(e){this.setPropertyValue("rateStep",e)},enumerable:!1,configurable:!0}),t.prototype.updateColors=function(e){if(this.colorMode==="monochrome"||!D.isAvailable()||t.colorsCalculated)return;function r(n,o){var s=!!e&&e[n];if(!s){var a=getComputedStyle(D.getDocumentElement());s=a.getPropertyValue&&a.getPropertyValue(o)}if(!s)return null;var l=D.createElement("canvas");if(!l)return null;var u=l.getContext("2d");u.fillStyle=s;var d=u.fillStyle;if(d.startsWith("rgba"))return d.substring(5,d.length-1).split(",").map(function(V){return+V.trim()});var v=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(d);return v?[parseInt(v[1],16),parseInt(v[2],16),parseInt(v[3],16),1]:null}t.badColor=r("--sjs-special-red","--sd-rating-bad-color"),t.normalColor=r("--sjs-special-yellow","--sd-rating-normal-color"),t.goodColor=r("--sjs-special-green","--sd-rating-good-color"),t.badColorLight=r("--sjs-special-red-light","--sd-rating-bad-color-light"),t.normalColorLight=r("--sjs-special-yellow-light","--sd-rating-normal-color-light"),t.goodColorLight=r("--sjs-special-green-light","--sd-rating-good-color-light"),this.colorsCalculated=!0},t.prototype.getDisplayValueCore=function(e,r){if(!this.useRateValues)return i.prototype.getDisplayValueCore.call(this,e,r);var n=q.getTextOrHtmlByValue(this.visibleRateValues,r);return n||r},Object.defineProperty(t.prototype,"visibleRateValues",{get:function(){return this.renderedRateItems.map(function(e){return e.itemValue})},enumerable:!1,configurable:!0}),t.prototype.supportEmptyValidation=function(){return this.renderAs==="dropdown"},t.prototype.itemValuePropertyChanged=function(e,r,n,o){!this.useRateValues()&&o!==void 0&&(this.autoGenerate=!1),i.prototype.itemValuePropertyChanged.call(this,e,r,n,o)},t.prototype.createRenderedRateItems=function(){var e=this,r=[];this.useRateValues()?r=this.rateValues:r=this.createRateValues(),this.autoGenerate&&(this.rateMax=r[r.length-1].value),this.rateType=="smileys"&&r.length>10&&(r=r.slice(0,10)),this.renderedRateItems=r.map(function(n,o){var s=null;return e.displayRateDescriptionsAsExtremeItems&&(o==0&&(s=new dr(n,e.minRateDescription&&e.locMinRateDescription||n.locText)),o==r.length-1&&(s=new dr(n,e.maxRateDescription&&e.locMaxRateDescription||n.locText))),s||(s=new dr(n)),s})},t.prototype.createRateValues=function(){for(var e=[],r=this.rateMin,n=this.rateStep;r<=this.rateMax&&e.length<b.ratingMaximumRateValueCount;){var o=void 0;r===this.rateMin&&(o=this.minRateDescription&&this.locMinRateDescription),(r===this.rateMax||e.length===b.ratingMaximumRateValueCount)&&(o=this.maxRateDescription&&this.locMaxRateDescription);var s=new gc(r,o);s.locOwner=this,s.ownerPropertyName="rateValues",e.push(s),r=this.correctValue(r+n,n)}return e},t.prototype.correctValue=function(e,r){if(!e||Math.round(e)==e)return e;for(var n=0;Math.round(r)!=r;)r*=10,n++;return parseFloat(e.toFixed(n))},t.prototype.getType=function(){return"rating"},t.prototype.getFirstInputElementId=function(){return this.inputId+"_0"},t.prototype.getInputId=function(e){return this.inputId+"_"+e},Object.defineProperty(t.prototype,"questionName",{get:function(){return this.name+"_"+this.id},enumerable:!1,configurable:!0}),t.prototype.supportGoNextPageAutomatic=function(){return this.isMouseDown===!0||this.renderAs==="dropdown"},t.prototype.supportOther=function(){return!1},t.prototype.getPlainDataCalculatedValue=function(e){var r=i.prototype.getPlainDataCalculatedValue.call(this,e);if(r!==void 0||!this.useRateValues||this.isEmpty())return r;var n=q.getItemByValue(this.visibleRateValues,this.value);return n?n[e]:void 0},Object.defineProperty(t.prototype,"minRateDescription",{get:function(){return this.getLocalizableStringText("minRateDescription")},set:function(e){this.setLocalizableStringText("minRateDescription",e),this.hasMinRateDescription=!!this.minRateDescription},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locMinRateDescription",{get:function(){return this.getLocalizableString("minRateDescription")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxRateDescription",{get:function(){return this.getLocalizableStringText("maxRateDescription")},set:function(e){this.setLocalizableStringText("maxRateDescription",e),this.hasMaxRateDescription=!!this.maxRateDescription},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locMaxRateDescription",{get:function(){return this.getLocalizableString("maxRateDescription")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasMinLabel",{get:function(){return!this.displayRateDescriptionsAsExtremeItems&&!!this.hasMinRateDescription},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasMaxLabel",{get:function(){return!this.displayRateDescriptionsAsExtremeItems&&!!this.hasMaxRateDescription},enumerable:!1,configurable:!0}),t.prototype.updateRenderAsBasedOnDisplayMode=function(e){this.isDesignMode?(e||this.renderAs==="dropdown")&&(this.renderAs="default"):(e||this.displayMode!=="auto")&&(this.renderAs=this.displayMode==="dropdown"?"dropdown":"default")},t.prototype.onSurveyLoad=function(){i.prototype.onSurveyLoad.call(this),this.renderAs==="dropdown"&&this.displayMode==="auto"?this.displayMode=this.renderAs:this.updateRenderAsBasedOnDisplayMode()},Object.defineProperty(t.prototype,"rateDisplayMode",{get:function(){return this.rateType},set:function(e){this.rateType=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isStar",{get:function(){return this.rateType=="stars"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSmiley",{get:function(){return this.rateType=="smileys"},enumerable:!1,configurable:!0}),t.prototype.getDefaultItemComponent=function(){return this.renderAs=="dropdown"?"sv-rating-dropdown-item":this.isStar?"sv-rating-item-star":this.isSmiley?"sv-rating-item-smiley":"sv-rating-item"},Object.defineProperty(t.prototype,"itemComponent",{get:function(){return this.getPropertyValue("itemComponent",this.getDefaultItemComponent())},set:function(e){this.setPropertyValue("itemComponent",e)},enumerable:!1,configurable:!0}),t.prototype.valueToData=function(e){if(this.useRateValues()){var r=q.getItemByValue(this.rateValues,e);return r?r.value:e}return isNaN(e)?e:parseFloat(e)},t.prototype.setValueFromClick=function(e){if(!this.isReadOnlyAttr){this.value===parseFloat(e)?this.clearValue(!0):this.value=e;for(var r=0;r<this.renderedRateItems.length;r++)this.renderedRateItems[r].highlight="none"}},t.prototype.onItemMouseIn=function(e){if(!re&&!(this.isReadOnly||!e.itemValue.isEnabled||this.isDesignMode)){var r=!0,n=this.value!=null;if(this.rateType!=="stars"){e.highlight="highlighted";return}for(var o=0;o<this.renderedRateItems.length;o++)this.renderedRateItems[o].highlight=r&&!n&&"highlighted"||!r&&n&&"unhighlighted"||"none",this.renderedRateItems[o]==e&&(r=!1),this.renderedRateItems[o].itemValue.value==this.value&&(n=!1)}},t.prototype.onItemMouseOut=function(e){re||this.renderedRateItems.forEach(function(r){return r.highlight="none"})},Object.defineProperty(t.prototype,"itemSmallMode",{get:function(){return this.inMatrixMode&&b.matrix.rateSize=="small"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ratingRootCss",{get:function(){var e=(this.displayMode=="buttons"||!!this.survey&&this.survey.isDesignMode)&&this.cssClasses.rootWrappable?this.cssClasses.rootWrappable:"",r="";return(this.hasMaxLabel||this.hasMinLabel)&&(this.rateDescriptionLocation=="top"&&(r=this.cssClasses.rootLabelsTop),this.rateDescriptionLocation=="bottom"&&(r=this.cssClasses.rootLabelsBottom),this.rateDescriptionLocation=="topBottom"&&(r=this.cssClasses.rootLabelsDiagonal)),new O().append(this.cssClasses.root).append(e).append(r).append(this.cssClasses.itemSmall,this.itemSmallMode&&this.rateType!="labels").toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemStarIcon",{get:function(){return this.itemSmallMode?"icon-rating-star-small":"icon-rating-star"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemStarIconAlt",{get:function(){return this.itemStarIcon+"-2"},enumerable:!1,configurable:!0}),t.prototype.getItemSmiley=function(e){var r=["terrible","very-poor","poor","not-good","average","normal","good","very-good","excellent","perfect"],n=["very-good","not-good","normal","good","average","excellent","poor","perfect","very-poor","terrible"],o=this.useRateValues()?this.rateValues.length:this.rateMax-this.rateMin+1,s=n.slice(0,o),a=r.filter(function(l){return s.indexOf(l)!=-1});return this.useRateValues()?a[this.rateValues.indexOf(e)]:a[e.value-this.rateMin]},t.prototype.getItemSmileyIconName=function(e){return"icon-"+this.getItemSmiley(e)},t.prototype.getItemClassByText=function(e,r){return this.getItemClass(e)},t.prototype.getRenderedItemColor=function(e,r){var n=r?t.badColorLight:t.badColor,o=r?t.goodColorLight:t.goodColor,s=(this.rateCount-1)/2,a=r?t.normalColorLight:t.normalColor;if(e<s?o=a:(n=a,e-=s),!n||!o)return null;for(var l=[0,0,0,0],u=0;u<4;u++)l[u]=n[u]+(o[u]-n[u])*e/s,u<3&&(l[u]=Math.trunc(l[u]));return"rgba("+l[0]+", "+l[1]+", "+l[2]+", "+l[3]+")"},t.prototype.getItemStyle=function(e,r){if(r===void 0&&(r="none"),this.scaleColorMode==="monochrome"&&this.rateColorMode=="default"||this.isPreviewStyle||this.isReadOnlyStyle)return{};var n=this.visibleRateValues.indexOf(e),o=this.getRenderedItemColor(n,!1),s=r=="highlighted"&&this.scaleColorMode==="colored"&&this.getRenderedItemColor(n,!0);return s?{"--sd-rating-item-color":o,"--sd-rating-item-color-light":s}:{"--sd-rating-item-color":o}},t.prototype.getItemClass=function(e,r){var n=this,o=this.value==e.value;this.isStar&&(this.useRateValues()?o=this.rateValues.indexOf(this.rateValues.filter(function(Ft){return Ft.value==n.value})[0])>=this.rateValues.indexOf(e):o=this.value>=e.value);var s=this.isReadOnly||!e.isEnabled,a=!s&&this.value!=e.value&&!(!!this.survey&&this.survey.isDesignMode),l=this.renderedRateItems.filter(function(Ft){return Ft.itemValue==e})[0],u=this.isStar&&(l==null?void 0:l.highlight)=="highlighted",d=this.isStar&&(l==null?void 0:l.highlight)=="unhighlighted",v=this.cssClasses.item,V=this.cssClasses.selected,E=this.cssClasses.itemDisabled,I=this.cssClasses.itemReadOnly,k=this.cssClasses.itemPreview,N=this.cssClasses.itemHover,j=this.cssClasses.itemOnError,H=null,te=null,me=null,xe=null,Ue=null;this.isStar&&(v=this.cssClasses.itemStar,V=this.cssClasses.itemStarSelected,E=this.cssClasses.itemStarDisabled,I=this.cssClasses.itemStarReadOnly,k=this.cssClasses.itemStarPreview,N=this.cssClasses.itemStarHover,j=this.cssClasses.itemStarOnError,H=this.cssClasses.itemStarHighlighted,te=this.cssClasses.itemStarUnhighlighted,Ue=this.cssClasses.itemStarSmall),this.isSmiley&&(v=this.cssClasses.itemSmiley,V=this.cssClasses.itemSmileySelected,E=this.cssClasses.itemSmileyDisabled,I=this.cssClasses.itemSmileyReadOnly,k=this.cssClasses.itemSmileyPreview,N=this.cssClasses.itemSmileyHover,j=this.cssClasses.itemSmileyOnError,H=this.cssClasses.itemSmileyHighlighted,me=this.cssClasses.itemSmileyScaleColored,xe=this.cssClasses.itemSmileyRateColored,Ue=this.cssClasses.itemSmileySmall);var Kn=!this.isStar&&!this.isSmiley&&(!this.displayRateDescriptionsAsExtremeItems||this.useRateValues()&&e!=this.rateValues[0]&&e!=this.rateValues[this.rateValues.length-1]||!this.useRateValues()&&e.value!=this.rateMin&&e.value!=this.rateMax)&&e.locText.calculatedText.length<=2&&Number.isInteger(Number(e.locText.calculatedText));return new O().append(v).append(V,o).append(E,this.isDisabledStyle).append(I,this.isReadOnlyStyle).append(k,this.isPreviewStyle).append(N,a).append(H,u).append(me,this.scaleColorMode=="colored").append(xe,this.rateColorMode=="scale"&&o).append(te,d).append(j,this.hasCssError()).append(Ue,this.itemSmallMode).append(this.cssClasses.itemFixedSize,Kn).toString()},t.prototype.getControlClass=function(){return this.isEmpty(),new O().append(this.cssClasses.control).append(this.cssClasses.controlEmpty,this.isEmpty()).append(this.cssClasses.onError,this.hasCssError()).append(this.cssClasses.controlDisabled,this.isDisabledStyle).append(this.cssClasses.controlReadOnly,this.isReadOnlyStyle).append(this.cssClasses.controlPreview,this.isPreviewStyle).toString()},Object.defineProperty(t.prototype,"placeholder",{get:function(){return this.getLocalizableStringText("ratingOptionsCaption")},set:function(e){this.setLocalizableStringText("ratingOptionsCaption",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPlaceholder",{get:function(){return this.getLocalizableString("ratingOptionsCaption")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowClear",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"searchEnabled",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedValue",{get:function(){return this.value},set:function(e){this.value=e},enumerable:!1,configurable:!0}),t.prototype.isItemSelected=function(e){return e.value==this.value},Object.defineProperty(t.prototype,"visibleChoices",{get:function(){return this.visibleRateValues},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"readOnlyText",{get:function(){return this.readOnly?this.displayValue||this.placeholder:this.isEmpty()?this.placeholder:""},enumerable:!1,configurable:!0}),t.prototype.needResponsiveWidth=function(){this.getPropertyValue("rateValues");var e=this.getPropertyValue("rateStep"),r=this.getPropertyValue("rateMax"),n=this.getPropertyValue("rateMin");return this.displayMode!="dropdown"&&!!(this.hasMinRateDescription||this.hasMaxRateDescription||e&&(r-n)/e>9)},t.prototype.supportResponsiveness=function(){return!0},t.prototype.onBeforeSetCompactRenderer=function(){this.dropdownListModelValue||(this.dropdownListModel=new lr(this))},t.prototype.getCompactRenderAs=function(){return this.displayMode=="buttons"?"default":"dropdown"},t.prototype.getDesktopRenderAs=function(){return this.displayMode=="dropdown"?"dropdown":"default"},Object.defineProperty(t.prototype,"dropdownListModel",{get:function(){return this.renderAs==="dropdown"&&this.onBeforeSetCompactRenderer(),this.dropdownListModelValue},set:function(e){this.dropdownListModelValue=e,this.updateElementCss()},enumerable:!1,configurable:!0}),t.prototype.updateCssClasses=function(e,r){if(i.prototype.updateCssClasses.call(this,e,r),this.dropdownListModel){var n={};Fe(r.list,n),Fe(e.list,n),e.list=n}},t.prototype.calcCssClasses=function(e){var r=i.prototype.calcCssClasses.call(this,e);return this.dropdownListModel&&this.dropdownListModel.updateCssClasses(r.popup,r.list),r},t.prototype.themeChanged=function(e){this.colorsCalculated=!1,this.updateColors(e.cssVariables),this.createRenderedRateItems()},t.prototype.setSurveyImpl=function(e,r){i.prototype.setSurveyImpl.call(this,e,r),this.survey&&(this.updateColors(this.survey.themeVariables),this.updateRenderAsBasedOnDisplayMode())},t.prototype.dispose=function(){i.prototype.dispose.call(this),this.dropdownListModelValue&&this.dropdownListModelValue.dispose()},t.colorsCalculated=!1,pe([y({defaultValue:!1})],t.prototype,"inputHasValue",void 0),pe([y()],t.prototype,"autoGenerate",void 0),pe([y()],t.prototype,"rateCount",void 0),pe([ue()],t.prototype,"renderedRateItems",void 0),pe([y({defaultValue:!1})],t.prototype,"hasMinRateDescription",void 0),pe([y({defaultValue:!1})],t.prototype,"hasMaxRateDescription",void 0),pe([y()],t.prototype,"displayRateDescriptionsAsExtremeItems",void 0),pe([y()],t.prototype,"displayMode",void 0),pe([y()],t.prototype,"rateDescriptionLocation",void 0),pe([y()],t.prototype,"rateType",void 0),pe([y()],t.prototype,"scaleColorMode",void 0),pe([y()],t.prototype,"rateColorMode",void 0),t}(le);x.addClass("rating",[{name:"showCommentArea:switch",layout:"row",visible:!0,category:"general"},{name:"rateType",alternativeName:"rateDisplayMode",default:"labels",category:"rateValues",choices:["labels","stars","smileys"],visibleIndex:1},{name:"scaleColorMode",category:"rateValues",default:"monochrome",choices:["monochrome","colored"],visibleIf:function(i){return i.rateDisplayMode=="smileys"},visibleIndex:2},{name:"rateColorMode",category:"rateValues",default:"scale",choices:["default","scale"],visibleIf:function(i){return i.rateDisplayMode=="smileys"&&i.scaleColorMode=="monochrome"},visibleIndex:3},{name:"autoGenerate",category:"rateValues",default:!0,choices:[!0,!1],visibleIndex:5},{name:"rateCount:number",default:5,category:"rateValues",visibleIndex:4,onSettingValue:function(i,t){return t<2?2:t>b.ratingMaximumRateValueCount&&t>i.rateValues.length?b.ratingMaximumRateValueCount:t>10&&i.rateDisplayMode=="smileys"?10:t}},{name:"rateValues:itemvalue[]",baseValue:function(){return z.getString("choices_Item")},category:"rateValues",visibleIf:function(i){return!i.autoGenerate},visibleIndex:6},{name:"rateMin:number",default:1,onSettingValue:function(i,t){return t>i.rateMax-i.rateStep?i.rateMax-i.rateStep:t},visibleIf:function(i){return!!i.autoGenerate},visibleIndex:7},{name:"rateMax:number",default:5,onSettingValue:function(i,t){return t<i.rateMin+i.rateStep?i.rateMin+i.rateStep:t},visibleIf:function(i){return!!i.autoGenerate},visibleIndex:8},{name:"rateStep:number",default:1,minValue:.1,onSettingValue:function(i,t){return t<=0&&(t=1),t>i.rateMax-i.rateMin&&(t=i.rateMax-i.rateMin),t},visibleIf:function(i){return!!i.autoGenerate},visibleIndex:9},{name:"minRateDescription",alternativeName:"mininumRateDescription",serializationProperty:"locMinRateDescription",visibleIndex:18},{name:"maxRateDescription",alternativeName:"maximumRateDescription",serializationProperty:"locMaxRateDescription",visibleIndex:19},{name:"displayRateDescriptionsAsExtremeItems:boolean",default:!1,visibleIndex:21,visibleIf:function(i){return i.rateType=="labels"}},{name:"rateDescriptionLocation",default:"leftRight",choices:["leftRight","top","bottom","topBottom"],visibleIndex:20},{name:"displayMode",default:"auto",choices:["auto","buttons","dropdown"],visibleIndex:0},{name:"itemComponent",visible:!1,defaultFunc:function(i){return i?(i.getOriginalObj&&(i=i.getOriginalObj()),i.getDefaultItemComponent()):"sv-rating-item"}}],function(){return new jn("")},"question"),Z.Instance.registerQuestion("rating",function(i){return new jn(i)});var yc=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),yt=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Fn=function(i){yc(t,i);function t(e){var r=i.call(this,e)||this;return r.createLocalizableString("labelFalse",r,!0,"booleanUncheckedLabel"),r.createLocalizableString("labelTrue",r,!0,"booleanCheckedLabel"),r}return t.prototype.getType=function(){return"boolean"},t.prototype.isLayoutTypeSupported=function(e){return!0},t.prototype.supportGoNextPageAutomatic=function(){return this.renderAs!=="checkbox"},Object.defineProperty(t.prototype,"isIndeterminate",{get:function(){return this.isEmpty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitle",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"booleanValue",{get:function(){return this.isEmpty()?null:this.value==this.getValueTrue()},set:function(e){this.isReadOnly||this.isDesignMode||this.setBooleanValue(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"checkedValue",{get:function(){return this.booleanValue},set:function(e){this.booleanValue=e},enumerable:!1,configurable:!0}),t.prototype.setBooleanValue=function(e){this.isValueEmpty(e)?(this.value=void 0,this.booleanValueRendered=void 0):(this.value=e==!0?this.getValueTrue():this.getValueFalse(),this.booleanValueRendered=e)},Object.defineProperty(t.prototype,"defaultValue",{get:function(){return this.getPropertyValue("defaultValue")},set:function(e){e===!0&&(e="true"),e===!1&&(e="false"),this.setPropertyValue("defaultValue",e),this.updateValueWithDefaults()},enumerable:!1,configurable:!0}),t.prototype.getDefaultValue=function(){var e=this.defaultValue;if(!(e==="indeterminate"||e===void 0||e===null))return e=="true"?this.getValueTrue():this.getValueFalse()},Object.defineProperty(t.prototype,"locTitle",{get:function(){var e=this.getLocalizableString("title");return!this.isValueEmpty(this.locLabel.text)&&(this.isValueEmpty(e.text)||this.isLabelRendered&&!this.showTitle)?this.locLabel:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelRenderedAriaID",{get:function(){return this.isLabelRendered?this.ariaTitleId:null},enumerable:!1,configurable:!0}),t.prototype.beforeDestroyQuestionElement=function(e){i.prototype.beforeDestroyQuestionElement.call(this,e),this.leftAnswerElement=void 0},Object.defineProperty(t.prototype,"isLabelRendered",{get:function(){return this.titleLocation==="hidden"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canRenderLabelDescription",{get:function(){return this.isLabelRendered&&this.hasDescription&&(this.hasDescriptionUnderTitle||this.hasDescriptionUnderInput)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelTrue",{get:function(){return this.getLocalizableStringText("labelTrue")},set:function(e){this.setLocalizableStringText("labelTrue",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locLabelTrue",{get:function(){return this.getLocalizableString("labelTrue")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDeterminated",{get:function(){return this.booleanValue!==null&&this.booleanValue!==void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locLabelLeft",{get:function(){return this.swapOrder?this.getLocalizableString("labelTrue"):this.getLocalizableString("labelFalse")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locLabelRight",{get:function(){return this.swapOrder?this.getLocalizableString("labelFalse"):this.getLocalizableString("labelTrue")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelFalse",{get:function(){return this.getLocalizableStringText("labelFalse")},set:function(e){this.setLocalizableStringText("labelFalse",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locLabelFalse",{get:function(){return this.getLocalizableString("labelFalse")},enumerable:!1,configurable:!0}),t.prototype.getValueTrue=function(){return this.valueTrue!==void 0?this.valueTrue:!0},t.prototype.getValueFalse=function(){return this.valueFalse!==void 0?this.valueFalse:!1},t.prototype.setDefaultValue=function(){this.isDefaultValueSet("true",this.valueTrue)&&this.setBooleanValue(!0),this.isDefaultValueSet("false",this.valueFalse)&&this.setBooleanValue(!1);var e=this.defaultValue;(e==="indeterminate"||e===null||e===void 0)&&this.setBooleanValue(void 0)},t.prototype.isDefaultValueSet=function(e,r){return this.defaultValue==e||r!==void 0&&this.defaultValue===r},t.prototype.getDisplayValueCore=function(e,r){return r==this.getValueTrue()?this.locLabelTrue.textOrHtml:this.locLabelFalse.textOrHtml},t.prototype.getItemCssValue=function(e){return new O().append(e.item).append(e.itemOnError,this.hasCssError()).append(e.itemDisabled,this.isDisabledStyle).append(e.itemReadOnly,this.isReadOnlyStyle).append(e.itemPreview,this.isPreviewStyle).append(e.itemHover,!this.isDesignMode).append(e.itemChecked,!!this.booleanValue).append(e.itemExchanged,!!this.swapOrder).append(e.itemIndeterminate,!this.isDeterminated).toString()},t.prototype.getItemCss=function(){return this.getItemCssValue(this.cssClasses)},t.prototype.getCheckboxItemCss=function(){return this.getItemCssValue({item:this.cssClasses.checkboxItem,itemOnError:this.cssClasses.checkboxItemOnError,itemDisabled:this.cssClasses.checkboxItemDisabled,itemDisable:this.cssClasses.checkboxItemDisabled,itemReadOnly:this.cssClasses.checkboxItemReadOnly,itemPreview:this.cssClasses.checkboxItemPreview,itemChecked:this.cssClasses.checkboxItemChecked,itemIndeterminate:this.cssClasses.checkboxItemIndeterminate})},t.prototype.getLabelCss=function(e){return new O().append(this.cssClasses.label).append(this.cssClasses.disabledLabel,this.booleanValue===!e||this.isDisabledStyle).append(this.cssClasses.labelReadOnly,this.isReadOnlyStyle).append(this.cssClasses.labelPreview,this.isPreviewStyle).append(this.cssClasses.labelTrue,!this.isIndeterminate&&e===!this.swapOrder).append(this.cssClasses.labelFalse,!this.isIndeterminate&&e===this.swapOrder).toString()},t.prototype.updateValueFromSurvey=function(e,r){r===void 0&&(r=!1),i.prototype.updateValueFromSurvey.call(this,e,r)},t.prototype.onValueChanged=function(){i.prototype.onValueChanged.call(this)},Object.defineProperty(t.prototype,"svgIcon",{get:function(){return this.booleanValue&&this.cssClasses.svgIconCheckedId?this.cssClasses.svgIconCheckedId:!this.isDeterminated&&this.cssClasses.svgIconIndId?this.cssClasses.svgIconIndId:!this.booleanValue&&this.cssClasses.svgIconUncheckedId?this.cssClasses.svgIconUncheckedId:this.cssClasses.svgIconId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemSvgIcon",{get:function(){return this.isPreviewStyle&&this.cssClasses.itemPreviewSvgIconId?this.cssClasses.itemPreviewSvgIconId:this.cssClasses.itemSvgIconId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowClick",{get:function(){return this.isIndeterminate&&!this.isInputReadOnly},enumerable:!1,configurable:!0}),t.prototype.getCheckedLabel=function(){if(this.booleanValue===!0)return this.locLabelTrue;if(this.booleanValue===!1)return this.locLabelFalse},t.prototype.setQuestionValue=function(e,r){r===void 0&&(r=!0),e==="true"&&this.valueTrue!=="true"&&(e=!0),e==="false"&&this.valueFalse!=="false"&&(e=!1),(e==="indeterminate"||e===null)&&(e=void 0),i.prototype.setQuestionValue.call(this,e,r)},t.prototype.onLabelClick=function(e,r){return this.allowClick&&(Hi(e),this.booleanValue=r),!0},t.prototype.calculateBooleanValueByEvent=function(e,r){var n=!1;D.isAvailable()&&(n=D.getComputedStyle(e.target).direction=="rtl"),this.booleanValue=n?!r:r},t.prototype.onSwitchClickModel=function(e){if(this.allowClick){Hi(e);var r=e.offsetX/e.target.offsetWidth>.5;this.calculateBooleanValueByEvent(e,r);return}return!0},t.prototype.onKeyDownCore=function(e){return(e.key==="ArrowLeft"||e.key==="ArrowRight")&&(e.stopPropagation(),this.calculateBooleanValueByEvent(e,e.key==="ArrowRight")),!0},t.prototype.getRadioItemClass=function(e,r){var n=void 0;return e.radioItem&&(n=e.radioItem),e.radioItemChecked&&r===this.booleanValue&&(n=(n?n+" ":"")+e.radioItemChecked),this.isDisabledStyle&&(n+=" "+e.radioItemDisabled),this.isReadOnlyStyle&&(n+=" "+e.radioItemReadOnly),this.isPreviewStyle&&(n+=" "+e.radioItemPreview),n},t.prototype.supportResponsiveness=function(){return!0},t.prototype.getCompactRenderAs=function(){return"radio"},t.prototype.createActionContainer=function(e){return i.prototype.createActionContainer.call(this,this.renderAs!=="checkbox")},Object.defineProperty(t.prototype,"isNewA11yStructure",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaRole",{get:function(){return"switch"},enumerable:!1,configurable:!0}),yt([y()],t.prototype,"booleanValueRendered",void 0),yt([y()],t.prototype,"showTitle",void 0),yt([y({localizable:!0})],t.prototype,"label",void 0),yt([y({defaultValue:!1})],t.prototype,"swapOrder",void 0),yt([y()],t.prototype,"valueTrue",void 0),yt([y()],t.prototype,"valueFalse",void 0),t}(le);x.addClass("boolean",[{name:"showCommentArea:switch",layout:"row",visible:!0,category:"general"},{name:"label:text",serializationProperty:"locLabel",isSerializable:!1,visible:!1},{name:"labelTrue:text",serializationProperty:"locLabelTrue"},{name:"labelFalse:text",serializationProperty:"locLabelFalse"},"valueTrue","valueFalse",{name:"swapOrder:boolean",category:"general"},{name:"renderAs",default:"default",visible:!1}],function(){return new Fn("")},"question"),Z.Instance.registerQuestion("boolean",function(i){return new Fn(i)});var as=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ee=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ls=function(i){as(t,i);function t(e,r,n){r===void 0&&(r=null),n===void 0&&(n="imageitemvalue");var o=i.call(this,e,r,n)||this;return o.typeName=n,o.createLocalizableString("imageLink",o,!1),o}return t.prototype.getType=function(){return this.typeName?this.typeName:"itemvalue"},Object.defineProperty(t.prototype,"imageLink",{get:function(){return this.getLocalizableStringText("imageLink")},set:function(e){this.setLocalizableStringText("imageLink",e),this.imageNotLoaded=!1,this.videoNotLoaded=!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locImageLink",{get:function(){return this.getLocalizableString("imageLink")},enumerable:!1,configurable:!0}),t.prototype.getLocale=function(){return this.locOwner?this.locOwner.getLocale():""},t.prototype.getMarkdownHtml=function(e,r){return this.locOwner?this.locOwner.getMarkdownHtml(e,r):void 0},t.prototype.getRenderer=function(e){return this.locOwner?this.locOwner.getRenderer(e):null},t.prototype.getRendererContext=function(e){return this.locOwner?this.locOwner.getRendererContext(e):e},t.prototype.getProcessedText=function(e){return this.locOwner?this.locOwner.getProcessedText(e):e},t.prototype.onErrorHandler=function(){this.contentNotLoaded=!0},Object.defineProperty(t.prototype,"contentNotLoaded",{get:function(){return this.locOwner instanceof jt&&this.locOwner.contentMode=="video"?this.videoNotLoaded:this.imageNotLoaded},set:function(e){this.locOwner instanceof jt&&this.locOwner.contentMode=="video"?this.videoNotLoaded=e:this.imageNotLoaded=e},enumerable:!1,configurable:!0}),Ee([y({defaultValue:!1})],t.prototype,"videoNotLoaded",void 0),Ee([y({defaultValue:!1})],t.prototype,"imageNotLoaded",void 0),t}(q),jt=function(i){as(t,i);function t(e){var r=i.call(this,e)||this;return r.isResponsiveValue=!1,r.onContentLoaded=function(n,o){n.contentNotLoaded=!1;var s=o.target;r.contentMode=="video"?n.aspectRatio=s.videoWidth/s.videoHeight:n.aspectRatio=s.naturalWidth/s.naturalHeight,r._width&&r.processResponsiveness(0,r._width)},r.colCount=0,r.registerPropertyChangedHandlers(["minImageWidth","maxImageWidth","minImageHeight","maxImageHeight","visibleChoices","colCount","isResponsiveValue"],function(){r._width&&r.processResponsiveness(0,r._width)}),r.registerPropertyChangedHandlers(["imageWidth","imageHeight"],function(){r.calcIsResponsive()}),r.calcIsResponsive(),r}return t.prototype.getType=function(){return"imagepicker"},t.prototype.supportGoNextPageAutomatic=function(){return!this.multiSelect},Object.defineProperty(t.prototype,"hasSingleInput",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.getItemValueType=function(){return"imageitemvalue"},Object.defineProperty(t.prototype,"isCompositeQuestion",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.supportOther=function(){return!1},t.prototype.supportNone=function(){return!1},t.prototype.supportRefuse=function(){return!1},t.prototype.supportDontKnow=function(){return!1},t.prototype.isAnswerCorrect=function(){return this.multiSelect?P.isArrayContainsEqual(this.value,this.correctAnswer):i.prototype.isAnswerCorrect.call(this)},Object.defineProperty(t.prototype,"multiSelect",{get:function(){return this.getPropertyValue("multiSelect")},set:function(e){this.setPropertyValue("multiSelect",e)},enumerable:!1,configurable:!0}),t.prototype.isItemSelected=function(e){var r=this.value,n=e;if(this.isValueEmpty(r)||!n.imageLink||n.contentNotLoaded)return!1;if(!this.multiSelect)return this.isTwoValueEquals(r,e.value);if(!Array.isArray(r))return!1;for(var o=0;o<r.length;o++)if(this.isTwoValueEquals(r[o],e.value))return!0;return!1},t.prototype.getItemEnabled=function(e){var r=e;return!r.imageLink||r.contentNotLoaded?!1:i.prototype.getItemEnabled.call(this,e)},t.prototype.clearIncorrectValues=function(){if(this.multiSelect){var e=this.value;if(!e)return;if(!Array.isArray(e)||e.length==0){this.clearValue(!0);return}for(var r=[],n=0;n<e.length;n++)this.hasUnknownValue(e[n],!0)||r.push(e[n]);if(r.length==e.length)return;r.length==0?this.clearValue(!0):this.value=r}else i.prototype.clearIncorrectValues.call(this)},t.prototype.getDisplayValueCore=function(e,r){return!this.multiSelect&&!Array.isArray(r)?i.prototype.getDisplayValueCore.call(this,e,r):this.getDisplayArrayValue(e,r)},Object.defineProperty(t.prototype,"showLabel",{get:function(){return this.getPropertyValue("showLabel")},set:function(e){this.setPropertyValue("showLabel",e)},enumerable:!1,configurable:!0}),t.prototype.endLoadingFromJson=function(){i.prototype.endLoadingFromJson.call(this),!this.isDesignMode&&this.multiSelect&&(this.createNewArray("renderedValue"),this.createNewArray("value")),this.calcIsResponsive()},t.prototype.getValueCore=function(){var e=i.prototype.getValueCore.call(this);return e!==void 0?e:this.multiSelect?[]:e},t.prototype.convertValToArrayForMultSelect=function(e){return!this.multiSelect||this.isValueEmpty(e)||Array.isArray(e)?e:[e]},t.prototype.renderedValueFromDataCore=function(e){return this.convertValToArrayForMultSelect(e)},t.prototype.rendredValueToDataCore=function(e){return this.convertValToArrayForMultSelect(e)},Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this.getPropertyValue("imageHeight")},set:function(e){this.setPropertyValue("imageHeight",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedImageHeight",{get:function(){var e=this.isResponsive?Math.floor(this.responsiveImageHeight):this.imageHeight;return e||150},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this.getPropertyValue("imageWidth")},set:function(e){this.setPropertyValue("imageWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedImageWidth",{get:function(){var e=this.isResponsive?Math.floor(this.responsiveImageWidth):this.imageWidth;return e||200},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageFit",{get:function(){return this.getPropertyValue("imageFit")},set:function(e){this.setPropertyValue("imageFit",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contentMode",{get:function(){return this.getPropertyValue("contentMode")},set:function(e){this.setPropertyValue("contentMode",e),e==="video"&&(this.showLabel=!0)},enumerable:!1,configurable:!0}),t.prototype.convertDefaultValue=function(e){return e},Object.defineProperty(t.prototype,"inputType",{get:function(){return this.multiSelect?"checkbox":"radio"},enumerable:!1,configurable:!0}),t.prototype.isBuiltInChoice=function(e){return!1},t.prototype.addToVisibleChoices=function(e,r){this.addNewItemToVisibleChoices(e,r)},t.prototype.getSelectBaseRootCss=function(){return new O().append(i.prototype.getSelectBaseRootCss.call(this)).append(this.cssClasses.rootColumn,this.getCurrentColCount()==1).toString()},Object.defineProperty(t.prototype,"isResponsive",{get:function(){return this.isResponsiveValue&&this.isDefaultV2Theme},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exactSizesAreEmpty",{get:function(){var e=this;return!["imageHeight","imageWidth"].some(function(r){return e[r]!==void 0&&e[r]!==null})},enumerable:!1,configurable:!0}),t.prototype.calcIsResponsive=function(){this.isResponsiveValue=this.exactSizesAreEmpty},t.prototype.getObservedElementSelector=function(){return Ke(this.cssClasses.root)},t.prototype.supportResponsiveness=function(){return!0},t.prototype.needResponsiveness=function(){return this.supportResponsiveness()&&this.isDefaultV2Theme},t.prototype.needResponsiveWidth=function(){return this.colCount>2},t.prototype.getCurrentColCount=function(){return this.responsiveColCount===void 0||this.colCount===0?this.colCount:this.responsiveColCount},t.prototype.processResponsiveness=function(e,r){this._width=r=Math.floor(r);var n=function(H,te,me){var xe=Math.floor(H/(te+me));return(xe+1)*(te+me)-me<=H&&xe++,xe};if(this.isResponsive){var o=this.choices.length+(this.isDesignMode?1:0),s=this.gapBetweenItems||0,a=this.minImageWidth,l=this.maxImageWidth,u=this.maxImageHeight,d=this.minImageHeight,v=this.colCount,V;if(v===0)if((s+a)*o-s>r){var E=n(r,a,s);V=Math.floor((r-s*(E-1))/E)}else V=Math.floor((r-s*(o-1))/o);else{var I=n(r,a,s);I<v?(this.responsiveColCount=I>=1?I:1,v=this.responsiveColCount):this.responsiveColCount=v,V=Math.floor((r-s*(v-1))/v)}V=Math.max(a,Math.min(V,l));var k=Number.MIN_VALUE;this.choices.forEach(function(H){var te=V/H.aspectRatio;k=te>k?te:k}),k>u?k=u:k<d&&(k=d);var N=this.responsiveImageWidth,j=this.responsiveImageHeight;return this.responsiveImageWidth=V,this.responsiveImageHeight=k,N!==this.responsiveImageWidth||j!==this.responsiveImageHeight}return!1},t.prototype.triggerResponsiveness=function(e){e===void 0&&(e=!0),e&&this.reCalcGapBetweenItemsCallback&&this.reCalcGapBetweenItemsCallback(),i.prototype.triggerResponsiveness.call(this,e)},t.prototype.afterRender=function(e){var r=this;i.prototype.afterRender.call(this,e);var n=this.getObservedElementSelector(),o=e&&n?e.querySelector(n):void 0;o&&(this.reCalcGapBetweenItemsCallback=function(){r.gapBetweenItems=Math.ceil(Number.parseFloat(D.getComputedStyle(o).gap))||16},this.reCalcGapBetweenItemsCallback())},Ee([y({})],t.prototype,"responsiveImageHeight",void 0),Ee([y({})],t.prototype,"responsiveImageWidth",void 0),Ee([y({})],t.prototype,"isResponsiveValue",void 0),Ee([y({})],t.prototype,"maxImageWidth",void 0),Ee([y({})],t.prototype,"minImageWidth",void 0),Ee([y({})],t.prototype,"maxImageHeight",void 0),Ee([y({})],t.prototype,"minImageHeight",void 0),Ee([y({})],t.prototype,"responsiveColCount",void 0),t}(At);x.addClass("imageitemvalue",[{name:"imageLink:file",serializationProperty:"locImageLink"}],function(i){return new ls(i)},"itemvalue"),x.addClass("responsiveImageSize",[],void 0,"number"),x.addClass("imagepicker",[{name:"showOtherItem",visible:!1},{name:"otherText",visible:!1},{name:"showNoneItem",visible:!1},{name:"showRefuseItem",visible:!1},{name:"showDontKnowItem",visible:!1},{name:"noneText",visible:!1},{name:"optionsCaption",visible:!1},{name:"otherErrorText",visible:!1},{name:"storeOthersAsComment",visible:!1},{name:"contentMode",default:"image",choices:["image","video"]},{name:"imageFit",default:"contain",choices:["none","contain","cover","fill"]},{name:"imageHeight:number",minValue:0},{name:"imageWidth:number",minValue:0},{name:"minImageWidth:responsiveImageSize",default:200,minValue:0,visibleIf:function(){return b.supportCreatorV2}},{name:"minImageHeight:responsiveImageSize",default:133,minValue:0,visibleIf:function(){return b.supportCreatorV2}},{name:"maxImageWidth:responsiveImageSize",default:400,minValue:0,visibleIf:function(){return b.supportCreatorV2}},{name:"maxImageHeight:responsiveImageSize",default:266,minValue:0,visibleIf:function(){return b.supportCreatorV2}}],function(){return new jt("")},"checkboxbase"),x.addProperty("imagepicker",{name:"showLabel:boolean",default:!1}),x.addProperty("imagepicker",{name:"colCount:number",default:0,choices:[0,1,2,3,4,5]}),x.addProperty("imagepicker",{name:"multiSelect:boolean",default:!1}),x.addProperty("imagepicker",{name:"choices:imageitemvalue[]"}),Z.Instance.registerQuestion("imagepicker",function(i){var t=new jt(i);return t});var mc=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),vc=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},us=["www.youtube.com","m.youtube.com","youtube.com","youtu.be"],cs=[".mp4",".mov",".wmv",".flv",".avi",".mkv"],bc="https://www.youtube.com/",ps="embed";function fs(i){if(!i)return!1;i=i.toLowerCase(),i=i.replace(/^https?:\/\//,"");for(var t=0;t<us.length;t++)if(i.indexOf(us[t]+"/")===0)return!0;return!1}var Nn=function(i){mc(t,i);function t(e){var r=i.call(this,e)||this,n=r.createLocalizableString("imageLink",r,!1);return n.onGetTextCallback=function(o){return Cc(o,r.contentMode=="youtube")},r.createLocalizableString("altText",r,!1),r.registerPropertyChangedHandlers(["contentMode","imageLink"],function(){return r.calculateRenderedMode()}),r}return t.prototype.getType=function(){return"image"},Object.defineProperty(t.prototype,"isCompositeQuestion",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.onSurveyLoad=function(){i.prototype.onSurveyLoad.call(this),this.calculateRenderedMode()},Object.defineProperty(t.prototype,"imageLink",{get:function(){return this.getLocalizableStringText("imageLink")},set:function(e){this.setLocalizableStringText("imageLink",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locImageLink",{get:function(){return this.getLocalizableString("imageLink")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"altText",{get:function(){return this.getLocalizableStringText("altText")},set:function(e){this.setLocalizableStringText("altText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locAltText",{get:function(){return this.getLocalizableString("altText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this.getPropertyValue("imageHeight")},set:function(e){this.setPropertyValue("imageHeight",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedStyleHeight",{get:function(){return this.imageHeight?$t(this.imageHeight):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedHeight",{get:function(){return this.imageHeight?Ze(this.imageHeight):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this.getPropertyValue("imageWidth")},set:function(e){this.setPropertyValue("imageWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedStyleWidth",{get:function(){return this.imageWidth?$t(this.imageWidth):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedWidth",{get:function(){return this.imageWidth?Ze(this.imageWidth):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageFit",{get:function(){return this.getPropertyValue("imageFit")},set:function(e){this.setPropertyValue("imageFit",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contentMode",{get:function(){return this.getPropertyValue("contentMode")},set:function(e){this.setPropertyValue("contentMode",e),e==="video"&&(this.showLabel=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedMode",{get:function(){return this.getPropertyValue("renderedMode","image")},enumerable:!1,configurable:!0}),t.prototype.getImageCss=function(){var e=this.getPropertyByName("imageHeight"),r=this.getPropertyByName("imageWidth"),n=e.isDefaultValue(this.imageHeight)&&r.isDefaultValue(this.imageWidth);return new O().append(this.cssClasses.image).append(this.cssClasses.adaptive,n).toString()},t.prototype.onLoadHandler=function(){this.contentNotLoaded=!1},t.prototype.onErrorHandler=function(){this.contentNotLoaded=!0},t.prototype.setRenderedMode=function(e){this.setPropertyValue("renderedMode",e)},t.prototype.calculateRenderedMode=function(){this.contentMode!=="auto"?this.setRenderedMode(this.contentMode):this.isYoutubeVideo()?this.setRenderedMode("youtube"):this.isVideo()?this.setRenderedMode("video"):this.setRenderedMode("image")},t.prototype.isYoutubeVideo=function(){return fs(this.imageLink)},t.prototype.isVideo=function(){var e=this.imageLink;if(!e)return!1;e=e.toLowerCase();for(var r=0;r<cs.length;r++)if(e.endsWith(cs[r]))return!0;return!1},vc([y({defaultValue:!1})],t.prototype,"contentNotLoaded",void 0),t}(fr);function Cc(i,t){if(!i||!fs(i))return t?"":i;var e=i.toLocaleLowerCase();if(e.indexOf(ps)>-1)return i;for(var r="",n=i.length-1;n>=0&&!(i[n]==="="||i[n]==="/");n--)r=i[n]+r;return bc+ps+"/"+r}x.addClass("image",[{name:"imageLink:file",serializationProperty:"locImageLink"},{name:"altText",serializationProperty:"locAltText",alternativeName:"text",category:"general"},{name:"contentMode",default:"auto",choices:["auto","image","video","youtube"]},{name:"imageFit",default:"contain",choices:["none","contain","cover","fill"]},{name:"imageHeight",default:"150"},{name:"imageWidth",default:"200"}],function(){return new Nn("")},"nonvalue"),Z.Instance.registerQuestion("image",function(i){return new Nn(i)});/*!
 * Signature Pad v4.2.0 | https://github.com/szimek/signature_pad
 * (c) 2024 Szymon Nowak | Released under the MIT license
 */class gr{constructor(t,e,r,n){if(isNaN(t)||isNaN(e))throw new Error(`Point is invalid: (${t}, ${e})`);this.x=+t,this.y=+e,this.pressure=r||0,this.time=n||Date.now()}distanceTo(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}equals(t){return this.x===t.x&&this.y===t.y&&this.pressure===t.pressure&&this.time===t.time}velocityFrom(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):0}}class _n{static fromPoints(t,e){const r=this.calculateControlPoints(t[0],t[1],t[2]).c2,n=this.calculateControlPoints(t[1],t[2],t[3]).c1;return new _n(t[1],r,n,t[2],e.start,e.end)}static calculateControlPoints(t,e,r){const n=t.x-e.x,o=t.y-e.y,s=e.x-r.x,a=e.y-r.y,l={x:(t.x+e.x)/2,y:(t.y+e.y)/2},u={x:(e.x+r.x)/2,y:(e.y+r.y)/2},d=Math.sqrt(n*n+o*o),v=Math.sqrt(s*s+a*a),V=l.x-u.x,E=l.y-u.y,I=v/(d+v),k={x:u.x+V*I,y:u.y+E*I},N=e.x-k.x,j=e.y-k.y;return{c1:new gr(l.x+N,l.y+j),c2:new gr(u.x+N,u.y+j)}}constructor(t,e,r,n,o,s){this.startPoint=t,this.control2=e,this.control1=r,this.endPoint=n,this.startWidth=o,this.endWidth=s}length(){let e=0,r,n;for(let o=0;o<=10;o+=1){const s=o/10,a=this.point(s,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),l=this.point(s,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(o>0){const u=a-r,d=l-n;e+=Math.sqrt(u*u+d*d)}r=a,n=l}return e}point(t,e,r,n,o){return e*(1-t)*(1-t)*(1-t)+3*r*(1-t)*(1-t)*t+3*n*(1-t)*t*t+o*t*t*t}}class Pc{constructor(){try{this._et=new EventTarget}catch{this._et=document}}addEventListener(t,e,r){this._et.addEventListener(t,e,r)}dispatchEvent(t){return this._et.dispatchEvent(t)}removeEventListener(t,e,r){this._et.removeEventListener(t,e,r)}}function wc(i,t=250){let e=0,r=null,n,o,s;const a=()=>{e=Date.now(),r=null,n=i.apply(o,s),r||(o=null,s=[])};return function(...u){const d=Date.now(),v=t-(d-e);return o=this,s=u,v<=0||v>t?(r&&(clearTimeout(r),r=null),e=d,n=i.apply(o,s),r||(o=null,s=[])):r||(r=window.setTimeout(a,v)),n}}class yr extends Pc{constructor(t,e={}){super(),this.canvas=t,this._drawingStroke=!1,this._isEmpty=!0,this._lastPoints=[],this._data=[],this._lastVelocity=0,this._lastWidth=0,this._handleMouseDown=r=>{r.buttons===1&&this._strokeBegin(r)},this._handleMouseMove=r=>{this._strokeMoveUpdate(r)},this._handleMouseUp=r=>{r.buttons===1&&this._strokeEnd(r)},this._handleTouchStart=r=>{if(r.cancelable&&r.preventDefault(),r.targetTouches.length===1){const n=r.changedTouches[0];this._strokeBegin(n)}},this._handleTouchMove=r=>{r.cancelable&&r.preventDefault();const n=r.targetTouches[0];this._strokeMoveUpdate(n)},this._handleTouchEnd=r=>{if(r.target===this.canvas){r.cancelable&&r.preventDefault();const o=r.changedTouches[0];this._strokeEnd(o)}},this._handlePointerStart=r=>{r.preventDefault(),this._strokeBegin(r)},this._handlePointerMove=r=>{this._strokeMoveUpdate(r)},this._handlePointerEnd=r=>{this._drawingStroke&&(r.preventDefault(),this._strokeEnd(r))},this.velocityFilterWeight=e.velocityFilterWeight||.7,this.minWidth=e.minWidth||.5,this.maxWidth=e.maxWidth||2.5,this.throttle="throttle"in e?e.throttle:16,this.minDistance="minDistance"in e?e.minDistance:5,this.dotSize=e.dotSize||0,this.penColor=e.penColor||"black",this.backgroundColor=e.backgroundColor||"rgba(0,0,0,0)",this.compositeOperation=e.compositeOperation||"source-over",this.canvasContextOptions="canvasContextOptions"in e?e.canvasContextOptions:{},this._strokeMoveUpdate=this.throttle?wc(yr.prototype._strokeUpdate,this.throttle):yr.prototype._strokeUpdate,this._ctx=t.getContext("2d",this.canvasContextOptions),this.clear(),this.on()}clear(){const{_ctx:t,canvas:e}=this;t.fillStyle=this.backgroundColor,t.clearRect(0,0,e.width,e.height),t.fillRect(0,0,e.width,e.height),this._data=[],this._reset(this._getPointGroupOptions()),this._isEmpty=!0}fromDataURL(t,e={}){return new Promise((r,n)=>{const o=new Image,s=e.ratio||window.devicePixelRatio||1,a=e.width||this.canvas.width/s,l=e.height||this.canvas.height/s,u=e.xOffset||0,d=e.yOffset||0;this._reset(this._getPointGroupOptions()),o.onload=()=>{this._ctx.drawImage(o,u,d,a,l),r()},o.onerror=v=>{n(v)},o.crossOrigin="anonymous",o.src=t,this._isEmpty=!1})}toDataURL(t="image/png",e){switch(t){case"image/svg+xml":return typeof e!="object"&&(e=void 0),`data:image/svg+xml;base64,${btoa(this.toSVG(e))}`;default:return typeof e!="number"&&(e=void 0),this.canvas.toDataURL(t,e)}}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",this.canvas.style.userSelect="none";const t=/Macintosh/.test(navigator.userAgent)&&"ontouchstart"in document;window.PointerEvent&&!t?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.style.userSelect="auto",this.canvas.removeEventListener("pointerdown",this._handlePointerStart),this.canvas.removeEventListener("pointermove",this._handlePointerMove),this.canvas.ownerDocument.removeEventListener("pointerup",this._handlePointerEnd),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("mousemove",this._handleMouseMove),this.canvas.ownerDocument.removeEventListener("mouseup",this._handleMouseUp),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this.canvas.removeEventListener("touchend",this._handleTouchEnd)}isEmpty(){return this._isEmpty}fromData(t,{clear:e=!0}={}){e&&this.clear(),this._fromData(t,this._drawCurve.bind(this),this._drawDot.bind(this)),this._data=this._data.concat(t)}toData(){return this._data}_getPointGroupOptions(t){return{penColor:t&&"penColor"in t?t.penColor:this.penColor,dotSize:t&&"dotSize"in t?t.dotSize:this.dotSize,minWidth:t&&"minWidth"in t?t.minWidth:this.minWidth,maxWidth:t&&"maxWidth"in t?t.maxWidth:this.maxWidth,velocityFilterWeight:t&&"velocityFilterWeight"in t?t.velocityFilterWeight:this.velocityFilterWeight,compositeOperation:t&&"compositeOperation"in t?t.compositeOperation:this.compositeOperation}}_strokeBegin(t){if(!this.dispatchEvent(new CustomEvent("beginStroke",{detail:t,cancelable:!0})))return;this._drawingStroke=!0;const r=this._getPointGroupOptions(),n=Object.assign(Object.assign({},r),{points:[]});this._data.push(n),this._reset(r),this._strokeUpdate(t)}_strokeUpdate(t){if(!this._drawingStroke)return;if(this._data.length===0){this._strokeBegin(t);return}this.dispatchEvent(new CustomEvent("beforeUpdateStroke",{detail:t}));const e=t.clientX,r=t.clientY,n=t.pressure!==void 0?t.pressure:t.force!==void 0?t.force:0,o=this._createPoint(e,r,n),s=this._data[this._data.length-1],a=s.points,l=a.length>0&&a[a.length-1],u=l?o.distanceTo(l)<=this.minDistance:!1,d=this._getPointGroupOptions(s);if(!l||!(l&&u)){const v=this._addPoint(o,d);l?v&&this._drawCurve(v,d):this._drawDot(o,d),a.push({time:o.time,x:o.x,y:o.y,pressure:o.pressure})}this.dispatchEvent(new CustomEvent("afterUpdateStroke",{detail:t}))}_strokeEnd(t){!this._drawingStroke||(this._strokeUpdate(t),this._drawingStroke=!1,this.dispatchEvent(new CustomEvent("endStroke",{detail:t})))}_handlePointerEvents(){this._drawingStroke=!1,this.canvas.addEventListener("pointerdown",this._handlePointerStart),this.canvas.addEventListener("pointermove",this._handlePointerMove),this.canvas.ownerDocument.addEventListener("pointerup",this._handlePointerEnd)}_handleMouseEvents(){this._drawingStroke=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown),this.canvas.addEventListener("mousemove",this._handleMouseMove),this.canvas.ownerDocument.addEventListener("mouseup",this._handleMouseUp)}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart),this.canvas.addEventListener("touchmove",this._handleTouchMove),this.canvas.addEventListener("touchend",this._handleTouchEnd)}_reset(t){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(t.minWidth+t.maxWidth)/2,this._ctx.fillStyle=t.penColor,this._ctx.globalCompositeOperation=t.compositeOperation}_createPoint(t,e,r){const n=this.canvas.getBoundingClientRect();return new gr(t-n.left,e-n.top,r,new Date().getTime())}_addPoint(t,e){const{_lastPoints:r}=this;if(r.push(t),r.length>2){r.length===3&&r.unshift(r[0]);const n=this._calculateCurveWidths(r[1],r[2],e),o=_n.fromPoints(r,n);return r.shift(),o}return null}_calculateCurveWidths(t,e,r){const n=r.velocityFilterWeight*e.velocityFrom(t)+(1-r.velocityFilterWeight)*this._lastVelocity,o=this._strokeWidth(n,r),s={end:o,start:this._lastWidth};return this._lastVelocity=n,this._lastWidth=o,s}_strokeWidth(t,e){return Math.max(e.maxWidth/(t+1),e.minWidth)}_drawCurveSegment(t,e,r){const n=this._ctx;n.moveTo(t,e),n.arc(t,e,r,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve(t,e){const r=this._ctx,n=t.endWidth-t.startWidth,o=Math.ceil(t.length())*2;r.beginPath(),r.fillStyle=e.penColor;for(let s=0;s<o;s+=1){const a=s/o,l=a*a,u=l*a,d=1-a,v=d*d,V=v*d;let E=V*t.startPoint.x;E+=3*v*a*t.control1.x,E+=3*d*l*t.control2.x,E+=u*t.endPoint.x;let I=V*t.startPoint.y;I+=3*v*a*t.control1.y,I+=3*d*l*t.control2.y,I+=u*t.endPoint.y;const k=Math.min(t.startWidth+u*n,e.maxWidth);this._drawCurveSegment(E,I,k)}r.closePath(),r.fill()}_drawDot(t,e){const r=this._ctx,n=e.dotSize>0?e.dotSize:(e.minWidth+e.maxWidth)/2;r.beginPath(),this._drawCurveSegment(t.x,t.y,n),r.closePath(),r.fillStyle=e.penColor,r.fill()}_fromData(t,e,r){for(const n of t){const{points:o}=n,s=this._getPointGroupOptions(n);if(o.length>1)for(let a=0;a<o.length;a+=1){const l=o[a],u=new gr(l.x,l.y,l.pressure,l.time);a===0&&this._reset(s);const d=this._addPoint(u,s);d&&e(d,s)}else this._reset(s),r(o[0],s)}}toSVG({includeBackgroundColor:t=!1}={}){const e=this._data,r=Math.max(window.devicePixelRatio||1,1),n=0,o=0,s=this.canvas.width/r,a=this.canvas.height/r,l=document.createElementNS("http://www.w3.org/2000/svg","svg");if(l.setAttribute("xmlns","http://www.w3.org/2000/svg"),l.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),l.setAttribute("viewBox",`${n} ${o} ${s} ${a}`),l.setAttribute("width",s.toString()),l.setAttribute("height",a.toString()),t&&this.backgroundColor){const u=document.createElement("rect");u.setAttribute("width","100%"),u.setAttribute("height","100%"),u.setAttribute("fill",this.backgroundColor),l.appendChild(u)}return this._fromData(e,(u,{penColor:d})=>{const v=document.createElement("path");if(!isNaN(u.control1.x)&&!isNaN(u.control1.y)&&!isNaN(u.control2.x)&&!isNaN(u.control2.y)){const V=`M ${u.startPoint.x.toFixed(3)},${u.startPoint.y.toFixed(3)} C ${u.control1.x.toFixed(3)},${u.control1.y.toFixed(3)} ${u.control2.x.toFixed(3)},${u.control2.y.toFixed(3)} ${u.endPoint.x.toFixed(3)},${u.endPoint.y.toFixed(3)}`;v.setAttribute("d",V),v.setAttribute("stroke-width",(u.endWidth*2.25).toFixed(3)),v.setAttribute("stroke",d),v.setAttribute("fill","none"),v.setAttribute("stroke-linecap","round"),l.appendChild(v)}},(u,{penColor:d,dotSize:v,minWidth:V,maxWidth:E})=>{const I=document.createElement("circle"),k=v>0?v:(V+E)/2;I.setAttribute("r",k.toString()),I.setAttribute("cx",u.x.toString()),I.setAttribute("cy",u.y.toString()),I.setAttribute("fill",d),l.appendChild(I)}),l.outerHTML}}var Vc=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Me=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},xc=300,Oc=200,kn=function(i){Vc(t,i);function t(e){var r=i.call(this,e)||this;return r.valueIsUpdatingInternally=!1,r.updateValueHandler=function(){r.scaleCanvas(!1,!0),r.refreshCanvas()},r}return t.prototype.getPenColorFromTheme=function(){var e=this.survey;return!!e&&!!e.themeVariables&&e.themeVariables["--sjs-primary-backcolor"]},t.prototype.updateColors=function(e){var r=this.getPenColorFromTheme(),n=this.getPropertyByName("penColor");e.penColor=this.penColor||r||n.defaultValue||"#1ab394";var o=this.getPropertyByName("backgroundColor"),s=r?"transparent":void 0,a=this.backgroundImage?"transparent":this.backgroundColor;e.backgroundColor=a||s||o.defaultValue||"#ffffff"},t.prototype.getCssRoot=function(e){return new O().append(i.prototype.getCssRoot.call(this,e)).append(e.small,this.signatureWidth.toString()==="300").toString()},t.prototype.getFormat=function(){return this.dataFormat==="jpeg"?"image/jpeg":this.dataFormat==="svg"?"image/svg+xml":""},t.prototype.updateValue=function(){if(this.signaturePad){var e=this.signaturePad.toDataURL(this.getFormat());this.valueIsUpdatingInternally=!0,this.value=e,this.valueIsUpdatingInternally=!1}},t.prototype.getType=function(){return"signaturepad"},t.prototype.afterRenderQuestionElement=function(e){e&&(this.initSignaturePad(e),this.element=e),i.prototype.afterRenderQuestionElement.call(this,e)},t.prototype.beforeDestroyQuestionElement=function(e){e&&this.destroySignaturePad(e)},t.prototype.themeChanged=function(e){this.signaturePad&&this.updateColors(this.signaturePad)},t.prototype.resizeCanvas=function(){this.canvas.width=this.containerWidth,this.canvas.height=this.containerHeight},t.prototype.scaleCanvas=function(e,r){e===void 0&&(e=!0),r===void 0&&(r=!1);var n=this.canvas,o=n.offsetWidth/this.containerWidth;(this.scale!=o||r)&&(this.scale=o,n.style.width=this.renderedCanvasWidth,this.resizeCanvas(),this.signaturePad.minWidth=this.penMinWidth*o,this.signaturePad.maxWidth=this.penMaxWidth*o,n.getContext("2d").scale(1/o,1/o),e&&this.refreshCanvas())},t.prototype.fromDataUrl=function(e){this.signaturePad.fromDataURL(e,{width:this.canvas.width*this.scale,height:this.canvas.height*this.scale})},t.prototype.fromUrl=function(e){var r=this,n=new Image;n.crossOrigin="anonymous",n.src=e,n.onload=function(){var o=r.canvas.getContext("2d");o.drawImage(n,0,0);var s=r.canvas.toDataURL(r.getFormat());r.fromDataUrl(s)}},t.prototype.refreshCanvas=function(){!this.canvas||(this.value?this.storeDataAsText?this.fromDataUrl(this.value):this.fromUrl(this.value):(this.canvas.getContext("2d").clearRect(0,0,this.canvas.width*this.scale,this.canvas.height*this.scale),this.signaturePad.clear(),this.valueWasChangedFromLastUpload=!1))},t.prototype.loadPreview=function(e){var r=this;if(!this.storeDataAsText){var n=e?[e]:[];this._previewLoader&&this._previewLoader.dispose(),this.isFileLoading=!0,this._previewLoader=new ss(this,function(o,s){r.isFileLoading=!1,s&&s.length>0&&s[0].content&&o==="success"&&r.fromDataUrl(s[0].content),r._previewLoader.dispose(),r._previewLoader=void 0}),this._previewLoader.load(n)}},t.prototype.onSurveyLoad=function(){i.prototype.onSurveyLoad.call(this),this.loadPreview(this.value)},t.prototype.initSignaturePad=function(e){var r=this,n=e.getElementsByTagName("canvas")[0];this.canvas=n,this.resizeCanvas();var o=new yr(n,{backgroundColor:"#ffffff"});this.signaturePad=o,this.isInputReadOnly&&o.off(),this.readOnlyChangedCallback=function(){r.isInputReadOnly?o.off():o.on()},this.updateColors(o),o.addEventListener("beginStroke",function(){r.scaleCanvas(),r.isDrawingValue=!0,n.focus()},{once:!1}),o.addEventListener("endStroke",function(){r.isDrawingValue=!1,r.storeDataAsText?r.updateValue():r.valueWasChangedFromLastUpload=!0},{once:!1}),this.updateValueHandler(),this.readOnlyChangedCallback();var s=function(a,l){(l.name==="signatureWidth"||l.name==="signatureHeight"||l.name==="value")&&(r.valueIsUpdatingInternally||r.updateValueHandler())};this.onPropertyChanged.add(s),this.signaturePad.propertyChangedHandler=s},t.prototype.destroySignaturePad=function(e){this.signaturePad&&(this.onPropertyChanged.remove(this.signaturePad.propertyChangedHandler),this.signaturePad.off()),this.readOnlyChangedCallback=null,this.signaturePad=null},Object.defineProperty(t.prototype,"dataFormat",{get:function(){return this.getPropertyValue("dataFormat")},set:function(e){this.setPropertyValue("dataFormat",Bn(e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"signatureWidth",{get:function(){return this.getPropertyValue("signatureWidth")},set:function(e){this.setPropertyValue("signatureWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"signatureHeight",{get:function(){return this.getPropertyValue("signatureHeight")},set:function(e){this.setPropertyValue("signatureHeight",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"containerHeight",{get:function(){return this.signatureHeight||Oc},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"containerWidth",{get:function(){return this.signatureWidth||xc},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedCanvasWidth",{get:function(){return this.signatureAutoScaleEnabled?"100%":this.containerWidth+"px"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.getPropertyValue("height")},set:function(e){this.setPropertyValue("height",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowClear",{get:function(){return this.getPropertyValue("allowClear")},set:function(e){this.setPropertyValue("allowClear",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canShowClearButton",{get:function(){var e=!this.nothingIsDrawn(),r=this.isUploading;return!this.isInputReadOnly&&this.allowClear&&e&&!r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"penColor",{get:function(){return this.getPropertyValue("penColor")},set:function(e){this.setPropertyValue("penColor",e),this.signaturePad&&this.updateColors(this.signaturePad)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this.getPropertyValue("backgroundColor")},set:function(e){this.setPropertyValue("backgroundColor",e),this.signaturePad&&this.updateColors(this.signaturePad)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundImage",{get:function(){return this.getPropertyValue("backgroundImage")},set:function(e){this.setPropertyValue("backgroundImage",e),this.signaturePad&&this.updateColors(this.signaturePad)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clearButtonCaption",{get:function(){return this.getLocalizationString("clearCaption")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locRenderedPlaceholder",{get:function(){return this.isReadOnly?this.locPlaceholderReadOnly:this.locPlaceholder},enumerable:!1,configurable:!0}),t.prototype.nothingIsDrawn=function(){var e=this.isDrawingValue,r=this.isEmpty(),n=this.isUploading,o=this.valueWasChangedFromLastUpload;return!e&&r&&!n&&!o},t.prototype.needShowPlaceholder=function(){return this.showPlaceholder&&this.nothingIsDrawn()},t.prototype.onBlurCore=function(e){if(i.prototype.onBlurCore.call(this,e),!this.storeDataAsText&&!this.element.contains(e.relatedTarget)){if(!this.valueWasChangedFromLastUpload)return;this.uploadFiles([fc(this.signaturePad.toDataURL(this.getFormat()),this.name+"."+Bn(this.dataFormat),this.getFormat())]),this.valueWasChangedFromLastUpload=!1}},t.prototype.uploadResultItemToValue=function(e){return e.content},t.prototype.setValueFromResult=function(e){this.valueIsUpdatingInternally=!0,this.value=e!=null&&e.length?e.map(function(r){return r.content})[0]:void 0,this.valueIsUpdatingInternally=!1},t.prototype.clearValue=function(e){this.valueWasChangedFromLastUpload=!1,i.prototype.clearValue.call(this,e),this.refreshCanvas()},t.prototype.endLoadingFromJson=function(){i.prototype.endLoadingFromJson.call(this),this.signatureWidth===300&&!!this.width&&typeof this.width=="number"&&this.width&&(je.warn("Use signatureWidth property to set width for the signature pad"),this.signatureWidth=this.width,this.width=void 0),this.signatureHeight===200&&!!this.height&&(je.warn("Use signatureHeight property to set width for the signature pad"),this.signatureHeight=this.height,this.height=void 0)},Me([y({defaultValue:!1})],t.prototype,"isDrawingValue",void 0),Me([y({defaultValue:!1})],t.prototype,"isReadyForUpload",void 0),Me([y({defaultValue:!1})],t.prototype,"valueWasChangedFromLastUpload",void 0),Me([y()],t.prototype,"signatureAutoScaleEnabled",void 0),Me([y()],t.prototype,"penMinWidth",void 0),Me([y()],t.prototype,"penMaxWidth",void 0),Me([y({})],t.prototype,"showPlaceholder",void 0),Me([y({localizable:{defaultStr:"signaturePlaceHolder"}})],t.prototype,"placeholder",void 0),Me([y({localizable:{defaultStr:"signaturePlaceHolderReadOnly"}})],t.prototype,"placeholderReadOnly",void 0),t}(os);function Bn(i){return i||(i="png"),i=i.replace("image/","").replace("+xml",""),i!=="jpeg"&&i!=="svg"&&(i="png"),i}x.addClass("signaturepad",[{name:"signatureWidth:number",category:"general",default:300},{name:"signatureHeight:number",category:"general",default:200},{name:"signatureAutoScaleEnabled:boolean",category:"general",default:!1},{name:"penMinWidth:number",category:"general",default:.5},{name:"penMaxWidth:number",category:"general",default:2.5},{name:"height:number",category:"general",visible:!1},{name:"allowClear:boolean",category:"general",default:!0},{name:"showPlaceholder:boolean",category:"general",default:!0},{name:"placeholder:text",serializationProperty:"locPlaceholder",category:"general",dependsOn:"showPlaceholder",visibleIf:function(i){return i.showPlaceholder}},{name:"placeholderReadOnly:text",serializationProperty:"locPlaceholderReadOnly",category:"general",dependsOn:"showPlaceholder",visibleIf:function(i){return i.showPlaceholder}},{name:"backgroundImage:file",category:"general"},{name:"penColor:color",category:"general"},{name:"backgroundColor:color",category:"general"},{name:"dataFormat",category:"general",default:"png",choices:[{value:"png",text:"PNG"},{value:"image/jpeg",text:"JPEG"},{value:"image/svg+xml",text:"SVG"}],onSettingValue:function(i,t){return Bn(t)}},{name:"defaultValue",visible:!1},{name:"correctAnswer",visible:!1},{name:"storeDataAsText:boolean",default:!0},{name:"waitForUpload:boolean",default:!1}],function(){return new kn("")},"question"),Z.Instance.registerQuestion("signaturepad",function(i){return new kn(i)});var hs=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ds=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Sc=function(i,t){for(var e=0,r=t.length,n=i.length;e<r;e++,n++)i[n]=t[e];return i},Tc=function(i){hs(t,i);function t(e,r,n){var o=i.call(this,n)||this;return o.data=e,o.panelItem=r,o.variableName=n,o.sharedQuestions={},o}return Object.defineProperty(t.prototype,"survey",{get:function(){return this.panelItem.getSurvey()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panel",{get:function(){return this.panelItem.panel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panelIndex",{get:function(){return this.data?this.data.getItemIndex(this.panelItem):-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visiblePanelIndex",{get:function(){return this.data?this.data.getVisibleItemIndex(this.panelItem):-1},enumerable:!1,configurable:!0}),t.prototype.getValues=function(){return this.panelItem.getAllValues()},t.prototype.getQuestionByName=function(e){var r=i.prototype.getQuestionByName.call(this,e);if(r)return r;var n=this.panelIndex;r=n>-1?this.data.getSharedQuestionFromArray(e,n):void 0;var o=r?r.name:e;return this.sharedQuestions[o]=e,r},t.prototype.getQuestionDisplayText=function(e){var r=this.sharedQuestions[e.name];if(!r)return i.prototype.getQuestionDisplayText.call(this,e);var n=this.panelItem.getValue(r);return e.getDisplayValue(!0,n)},t.prototype.onCustomProcessText=function(e){if(e.name==fe.IndexVariableName){var r=this.panelIndex;if(r>-1)return e.isExists=!0,e.value=r+1,!0}if(e.name==fe.VisibleIndexVariableName){var r=this.visiblePanelIndex;if(r>-1)return e.isExists=!0,e.value=r+1,!0}if(e.name.toLowerCase().indexOf(fe.ParentItemVariableName+".")==0){var n=this.data;if(!!n&&!!n.parentQuestion&&!!n.parent&&!!n.parent.data){var o=new t(n.parentQuestion,n.parent.data,fe.ItemVariableName),s=fe.ItemVariableName+e.name.substring(fe.ParentItemVariableName.length),a=o.processValue(s,e.returnDisplayValue);e.isExists=a.isExists,e.value=a.value}return!0}return!1},t}(Kr),fe=function(){function i(t,e){this.data=t,this.panelValue=e,this.textPreProcessor=new Tc(t,this,i.ItemVariableName),this.setSurveyImpl()}return Object.defineProperty(i.prototype,"panel",{get:function(){return this.panelValue},enumerable:!1,configurable:!0}),i.prototype.setSurveyImpl=function(){this.panel.setSurveyImpl(this)},i.prototype.getValue=function(t){var e=this.getAllValues();return e[t]},i.prototype.setValue=function(t,e){var r=this.data.getPanelItemData(this),n=r?r[t]:void 0;if(!P.isTwoValueEquals(e,n,!1,!0,!1)){this.data.setPanelItemData(this,t,P.getUnbindValue(e));for(var o=this.panel.questions,s=i.ItemVariableName+"."+t,a=0;a<o.length;a++){var l=o[a];l.getValueName()!==t&&l.checkBindings(t,e),l.runTriggers(s,e)}}},i.prototype.getVariable=function(t){},i.prototype.setVariable=function(t,e){},i.prototype.getComment=function(t){var e=this.getValue(t+b.commentSuffix);return e||""},i.prototype.setComment=function(t,e,r){this.setValue(t+b.commentSuffix,e)},i.prototype.findQuestionByName=function(t){if(!!t){var e=i.ItemVariableName+".";if(t.indexOf(e)===0)return this.panel.getQuestionByName(t.substring(e.length));var r=this.getSurvey();return r?r.getQuestionByName(t):null}},i.prototype.getEditingSurveyElement=function(){},i.prototype.getAllValues=function(){return this.data.getPanelItemData(this)},i.prototype.getFilteredValues=function(){var t={},e=!!this.data&&!!this.data.getRootData()?this.data.getRootData().getFilteredValues():{};for(var r in e)t[r]=e[r];if(t[i.ItemVariableName]=this.getAllValues(),this.data){var n=i.IndexVariableName,o=i.VisibleIndexVariableName;delete t[n],delete t[o],t[n.toLowerCase()]=this.data.getItemIndex(this),t[o.toLowerCase()]=this.data.getVisibleItemIndex(this);var s=this.data;!!s&&!!s.parentQuestion&&!!s.parent&&(t[i.ParentItemVariableName]=s.parent.getValue())}return t},i.prototype.getFilteredProperties=function(){return!!this.data&&!!this.data.getRootData()?this.data.getRootData().getFilteredProperties():{survey:this.getSurvey()}},i.prototype.getSurveyData=function(){return this},i.prototype.getSurvey=function(){return this.data?this.data.getSurvey():null},i.prototype.getTextProcessor=function(){return this.textPreProcessor},i.ItemVariableName="panel",i.ParentItemVariableName="parentpanel",i.IndexVariableName="panelIndex",i.VisibleIndexVariableName="visiblePanelIndex",i}(),Ic=function(){function i(t){this.data=t}return i.prototype.getSurveyData=function(){return null},i.prototype.getSurvey=function(){return this.data.getSurvey()},i.prototype.getTextProcessor=function(){return null},i}(),qn=function(i){hs(t,i);function t(e){var r=i.call(this,e)||this;return r._renderedPanels=[],r.isPanelsAnimationRunning=!1,r.isAddingNewPanels=!1,r.isSetPanelItemData={},r.createNewArray("panels",function(n){r.onPanelAdded(n)},function(n){r.onPanelRemoved(n)}),r.createNewArray("visiblePanels"),r.templateValue=r.createAndSetupNewPanelObject(),r.template.renderWidth="100%",r.template.selectedElementInDesign=r,r.template.addElementCallback=function(n){r.addOnPropertyChangedCallback(n),r.rebuildPanels()},r.template.removeElementCallback=function(){r.rebuildPanels()},r.createLocalizableString("confirmDeleteText",r,!1,"confirmDelete"),r.createLocalizableString("keyDuplicationError",r,!1,!0),r.createLocalizableString("panelAddText",r,!1,"addPanel"),r.createLocalizableString("panelRemoveText",r,!1,"removePanel"),r.createLocalizableString("panelPrevText",r,!1,"pagePrevText"),r.createLocalizableString("panelNextText",r,!1,"pageNextText"),r.createLocalizableString("noEntriesText",r,!1,"noEntriesText"),r.createLocalizableString("templateTabTitle",r,!0,"panelDynamicTabTextFormat"),r.createLocalizableString("tabTitlePlaceholder",r,!0,"tabTitlePlaceholder"),r.registerPropertyChangedHandlers(["panelsState"],function(){r.setPanelsState()}),r.registerPropertyChangedHandlers(["isMobile","newPanelPosition","showRangeInProgress","renderMode"],function(){r.updateFooterActions()}),r.registerPropertyChangedHandlers(["allowAddPanel"],function(){r.updateNoEntriesTextDefaultLoc()}),r}return Object.defineProperty(t.prototype,"isCompositeQuestion",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasSingleInput",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isContainer",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getFirstQuestionToFocus=function(e){for(var r=0;r<this.visiblePanelsCore.length;r++){var n=this.visiblePanelsCore[r].getFirstQuestionToFocus(e);if(n)return n}return null},t.prototype.setSurveyImpl=function(e,r){i.prototype.setSurveyImpl.call(this,e,r),this.setTemplatePanelSurveyImpl(),this.setPanelsSurveyImpl()},t.prototype.assignOnPropertyChangedToTemplate=function(){for(var e=this.template.elements,r=0;r<e.length;r++)this.addOnPropertyChangedCallback(e[r])},t.prototype.addOnPropertyChangedCallback=function(e){var r=this;e.isQuestion&&e.setParentQuestion(this),e.onPropertyChanged.add(function(n,o){r.onTemplateElementPropertyChanged(n,o)}),e.isPanel&&(e.addElementCallback=function(n){r.addOnPropertyChangedCallback(n)})},t.prototype.onTemplateElementPropertyChanged=function(e,r){if(!(this.isLoadingFromJson||this.useTemplatePanel||this.panelsCore.length==0)){var n=x.findProperty(e.getType(),r.name);if(!!n)for(var o=this.panelsCore,s=0;s<o.length;s++){var a=o[s].getQuestionByName(e.name);!!a&&a[r.name]!==r.newValue&&(a[r.name]=r.newValue)}}},Object.defineProperty(t.prototype,"useTemplatePanel",{get:function(){return this.isDesignMode&&!this.isContentElement},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"paneldynamic"},t.prototype.clearOnDeletingContainer=function(){this.panelsCore.forEach(function(e){e.clearOnDeletingContainer()})},Object.defineProperty(t.prototype,"isAllowTitleLeft",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.removeElement=function(e){return this.template.removeElement(e)},Object.defineProperty(t.prototype,"template",{get:function(){return this.templateValue},enumerable:!1,configurable:!0}),t.prototype.getPanel=function(){return this.template},Object.defineProperty(t.prototype,"templateElements",{get:function(){return this.template.elements},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"templateTitle",{get:function(){return this.template.title},set:function(e){this.template.title=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTemplateTitle",{get:function(){return this.template.locTitle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"templateTabTitle",{get:function(){return this.locTemplateTabTitle.text},set:function(e){this.locTemplateTabTitle.text=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTemplateTabTitle",{get:function(){return this.getLocalizableString("templateTabTitle")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tabTitlePlaceholder",{get:function(){return this.locTabTitlePlaceholder.text},set:function(e){this.locTabTitlePlaceholder.text=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTabTitlePlaceholder",{get:function(){return this.getLocalizableString("tabTitlePlaceholder")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"templateDescription",{get:function(){return this.template.description},set:function(e){this.template.description=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTemplateDescription",{get:function(){return this.template.locDescription},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"templateVisibleIf",{get:function(){return this.getPropertyValue("templateVisibleIf")},set:function(e){this.setPropertyValue("templateVisibleIf",e),this.template.visibleIf=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){for(var e=[],r=0;r<this.panelsCore.length;r++)e.push(this.panelsCore[r].data);return e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panels",{get:function(){return this.buildPanelsFirstTime(this.canBuildPanels),this.panelsCore},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visiblePanels",{get:function(){return this.buildPanelsFirstTime(this.canBuildPanels),this.visiblePanelsCore},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panelsCore",{get:function(){return this.getPropertyValue("panels")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visiblePanelsCore",{get:function(){return this.getPropertyValue("visiblePanels")},enumerable:!1,configurable:!0}),t.prototype.onPanelAdded=function(e){if(this.onPanelRemovedCore(e),!!e.visible){for(var r=0,n=this.panelsCore,o=0;o<n.length&&n[o]!==e;o++)n[o].visible&&r++;this.visiblePanelsCore.splice(r,0,e),this.addTabFromToolbar(e,r),this.currentPanel||(this.currentPanel=e),this.updateRenderedPanels()}},t.prototype.onPanelRemoved=function(e){var r=this.onPanelRemovedCore(e);if(this.currentPanel===e){var n=this.visiblePanelsCore;r>=n.length&&(r=n.length-1),this.currentPanel=r>=0?n[r]:null}this.updateRenderedPanels()},t.prototype.onPanelRemovedCore=function(e){var r=this.visiblePanelsCore,n=r.indexOf(e);return n>-1&&(r.splice(n,1),this.removeTabFromToolbar(e)),n},Object.defineProperty(t.prototype,"currentIndex",{get:function(){return this.isRenderModeList?-1:this.useTemplatePanel?0:this.visiblePanelsCore.indexOf(this.currentPanel)},set:function(e){e<0||this.visiblePanelCount<1||(e>=this.visiblePanelCount&&(e=this.visiblePanelCount-1),this.currentPanel=this.visiblePanelsCore[e])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentPanel",{get:function(){if(this.isDesignMode)return this.template;if(this.isRenderModeList||this.useTemplatePanel)return null;var e=this.getPropertyValue("currentPanel",null);return!e&&this.visiblePanelCount>0&&(e=this.visiblePanelsCore[0],this.currentPanel=e),e},set:function(e){if(!(this.isRenderModeList||this.useTemplatePanel)){var r=this.getPropertyValue("currentPanel"),n=e?this.visiblePanelsCore.indexOf(e):-1;if(!(!!e&&n<0||e===r)&&(r&&r.onHidingContent(),this.setPropertyValue("currentPanel",e),this.updateRenderedPanels(),this.updateFooterActions(),this.updateTabToolbarItemsPressedState(),this.fireCallback(this.currentIndexChangedCallback),n>-1&&this.survey)){var o={panel:e,visiblePanelIndex:n};this.survey.dynamicPanelCurrentIndexChanged(this,o)}}},enumerable:!1,configurable:!0}),t.prototype.updateRenderedPanels=function(){this.isRenderModeList?this.renderedPanels=[].concat(this.visiblePanels):this.currentPanel?this.renderedPanels=[this.currentPanel]:this.renderedPanels=[]},Object.defineProperty(t.prototype,"renderedPanels",{get:function(){return this._renderedPanels},set:function(e){this.renderedPanels.length==0||e.length==0?(this.blockAnimations(),this.panelsAnimation.sync(e),this.releaseAnimations()):(this.isPanelsAnimationRunning=!0,this.panelsAnimation.sync(e))},enumerable:!1,configurable:!0}),t.prototype.getPanelsAnimationOptions=function(){var e=this,r=function(){if(e.isRenderModeList)return"";var n=new O,o=!1,s=e.renderedPanels.filter(function(l){return l!==e.currentPanel})[0],a=e.visiblePanels.indexOf(s);return a<0&&(o=!0,a=e.removedPanelIndex),n.append("sv-pd-animation-adding",!!e.focusNewPanelCallback).append("sv-pd-animation-removing",o).append("sv-pd-animation-left",a<=e.currentIndex).append("sv-pd-animation-right",a>e.currentIndex).toString()};return{getRerenderEvent:function(){return e.onElementRerendered},getAnimatedElement:function(n){var o,s;if(n&&e.cssContent){var a=Ke(e.cssContent);return(s=(o=e.getWrapperElement())===null||o===void 0?void 0:o.querySelector(":scope "+a+" #"+n.id))===null||s===void 0?void 0:s.parentElement}},getEnterOptions:function(){var n=new O().append(e.cssClasses.panelWrapperFadeIn).append(r()).toString();return{onBeforeRunAnimation:function(o){var s;if(e.focusNewPanelCallback){var a=e.isRenderModeList?o:o.parentElement;de.ScrollElementToViewCore(a,!1,!1,{behavior:"smooth"})}e.isRenderModeList?o.style.setProperty("--animation-height",o.offsetHeight+"px"):(s=o.parentElement)===null||s===void 0||s.style.setProperty("--animation-height-to",o.offsetHeight+"px")},cssClass:n}},getLeaveOptions:function(){var n=new O().append(e.cssClasses.panelWrapperFadeOut).append(r()).toString();return{onBeforeRunAnimation:function(o){var s;e.isRenderModeList?o.style.setProperty("--animation-height",o.offsetHeight+"px"):(s=o.parentElement)===null||s===void 0||s.style.setProperty("--animation-height-from",o.offsetHeight+"px")},cssClass:n}},isAnimationEnabled:function(){return e.animationAllowed&&!!e.getWrapperElement()}}},t.prototype.disablePanelsAnimations=function(){this.panelsCore.forEach(function(e){e.blockAnimations()})},t.prototype.enablePanelsAnimations=function(){this.panelsCore.forEach(function(e){e.releaseAnimations()})},t.prototype.updatePanelsAnimation=function(){var e=this;this._panelsAnimations=new(this.isRenderModeList?Ge:Fi)(this.getPanelsAnimationOptions(),function(r,n){e._renderedPanels=r,n||(e.isPanelsAnimationRunning=!1,e.focusNewPanel())},function(){return e._renderedPanels})},Object.defineProperty(t.prototype,"panelsAnimation",{get:function(){return this._panelsAnimations||this.updatePanelsAnimation(),this._panelsAnimations},enumerable:!1,configurable:!0}),t.prototype.onHidingContent=function(){i.prototype.onHidingContent.call(this),this.currentPanel?this.currentPanel.onHidingContent():this.visiblePanelsCore.forEach(function(e){return e.onHidingContent()})},Object.defineProperty(t.prototype,"confirmDelete",{get:function(){return this.getPropertyValue("confirmDelete")},set:function(e){this.setPropertyValue("confirmDelete",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keyName",{get:function(){return this.getPropertyValue("keyName","")},set:function(e){this.setPropertyValue("keyName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"confirmDeleteText",{get:function(){return this.getLocalizableStringText("confirmDeleteText")},set:function(e){this.setLocalizableStringText("confirmDeleteText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locConfirmDeleteText",{get:function(){return this.getLocalizableString("confirmDeleteText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keyDuplicationError",{get:function(){return this.getLocalizableStringText("keyDuplicationError")},set:function(e){this.setLocalizableStringText("keyDuplicationError",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locKeyDuplicationError",{get:function(){return this.getLocalizableString("keyDuplicationError")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panelPrevText",{get:function(){return this.getLocalizableStringText("panelPrevText")},set:function(e){this.setLocalizableStringText("panelPrevText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPanelPrevText",{get:function(){return this.getLocalizableString("panelPrevText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panelNextText",{get:function(){return this.getLocalizableStringText("panelNextText")},set:function(e){this.setLocalizableStringText("panelNextText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPanelNextText",{get:function(){return this.getLocalizableString("panelNextText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panelAddText",{get:function(){return this.getLocalizableStringText("panelAddText")},set:function(e){this.setLocalizableStringText("panelAddText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPanelAddText",{get:function(){return this.getLocalizableString("panelAddText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panelRemoveText",{get:function(){return this.getLocalizableStringText("panelRemoveText")},set:function(e){this.setLocalizableStringText("panelRemoveText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPanelRemoveText",{get:function(){return this.getLocalizableString("panelRemoveText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isProgressTopShowing",{get:function(){return this.renderMode==="progressTop"||this.renderMode==="progressTopBottom"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isProgressBottomShowing",{get:function(){return this.renderMode==="progressBottom"||this.renderMode==="progressTopBottom"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPrevButtonVisible",{get:function(){return this.currentIndex>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPrevButtonShowing",{get:function(){return this.isPrevButtonVisible},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNextButtonVisible",{get:function(){return this.currentIndex>=0&&this.currentIndex<this.visiblePanelCount-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNextButtonShowing",{get:function(){return this.isNextButtonVisible},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRangeShowing",{get:function(){return this.showRangeInProgress&&this.currentIndex>=0&&this.visiblePanelCount>1},enumerable:!1,configurable:!0}),t.prototype.getElementsInDesign=function(e){return e===void 0&&(e=!1),e?[this.template]:this.templateElements},t.prototype.prepareValueForPanelCreating=function(){this.addingNewPanelsValue=this.value,this.isAddingNewPanels=!0,this.isNewPanelsValueChanged=!1},t.prototype.setValueAfterPanelsCreating=function(){this.isAddingNewPanels=!1,this.isNewPanelsValueChanged&&(this.isValueChangingInternally=!0,this.value=this.addingNewPanelsValue,this.isValueChangingInternally=!1)},t.prototype.getValueCore=function(){return this.isAddingNewPanels?this.addingNewPanelsValue:i.prototype.getValueCore.call(this)},t.prototype.setValueCore=function(e){this.isAddingNewPanels?(this.isNewPanelsValueChanged=!0,this.addingNewPanelsValue=e):i.prototype.setValueCore.call(this,e)},t.prototype.setIsMobile=function(e){i.prototype.setIsMobile.call(this,e),(this.panelsCore||[]).forEach(function(r){return r.getQuestions(!0).forEach(function(n){n.setIsMobile(e)})})},t.prototype.themeChanged=function(e){i.prototype.themeChanged.call(this,e),(this.panelsCore||[]).forEach(function(r){return r.getQuestions(!0).forEach(function(n){n.themeChanged(e)})})},Object.defineProperty(t.prototype,"panelCount",{get:function(){return!this.canBuildPanels||this.wasNotRenderedInSurvey?this.getPropertyValue("panelCount"):this.panelsCore.length},set:function(e){if(!(e<0)){if(!this.canBuildPanels||this.wasNotRenderedInSurvey){this.setPropertyValue("panelCount",e);return}if(!(e==this.panelsCore.length||this.useTemplatePanel)){this.updateBindings("panelCount",e),this.prepareValueForPanelCreating();for(var r=this.panelCount;r<e;r++){var n=this.createNewPanel();this.panelsCore.push(n),this.renderMode=="list"&&this.panelsState!="default"&&(this.panelsState==="expanded"?n.expand():n.title&&n.collapse())}e<this.panelCount&&this.panelsCore.splice(e,this.panelCount-e),this.disablePanelsAnimations(),this.setValueAfterPanelsCreating(),this.setValueBasedOnPanelCount(),this.reRunCondition(),this.updateFooterActions(),this.fireCallback(this.panelCountChangedCallback),this.enablePanelsAnimations()}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visiblePanelCount",{get:function(){return this.visiblePanels.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panelsState",{get:function(){return this.getPropertyValue("panelsState")},set:function(e){this.setPropertyValue("panelsState",e)},enumerable:!1,configurable:!0}),t.prototype.setTemplatePanelSurveyImpl=function(){this.template.setSurveyImpl(this.useTemplatePanel?this.surveyImpl:new Ic(this))},t.prototype.setPanelsSurveyImpl=function(){for(var e=0;e<this.panelsCore.length;e++){var r=this.panelsCore[e];r!=this.template&&r.setSurveyImpl(r.data)}},t.prototype.setPanelsState=function(){if(!(this.useTemplatePanel||this.renderMode!="list"||!this.templateTitle))for(var e=0;e<this.panelsCore.length;e++){var r=this.panelsState;r==="firstExpanded"&&(r=e===0?"expanded":"collapsed"),this.panelsCore[e].state=r}},t.prototype.setValueBasedOnPanelCount=function(){var e=this.value;if((!e||!Array.isArray(e))&&(e=[]),e.length!=this.panelCount){for(var r=e.length;r<this.panelCount;r++)e.push({});e.length>this.panelCount&&e.splice(this.panelCount,e.length-this.panelCount),this.isValueChangingInternally=!0,this.value=e,this.isValueChangingInternally=!1}},Object.defineProperty(t.prototype,"minPanelCount",{get:function(){return this.getPropertyValue("minPanelCount")},set:function(e){e<0&&(e=0),e!=this.minPanelCount&&(this.setPropertyValue("minPanelCount",e),e>this.maxPanelCount&&(this.maxPanelCount=e),this.panelCount<e&&(this.panelCount=e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxPanelCount",{get:function(){return this.getPropertyValue("maxPanelCount")},set:function(e){e<=0||(e>b.panel.maxPanelCount&&(e=b.panel.maxPanelCount),e!=this.maxPanelCount&&(this.setPropertyValue("maxPanelCount",e),e<this.minPanelCount&&(this.minPanelCount=e),this.panelCount>e&&(this.panelCount=e)))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowAddPanel",{get:function(){return this.getPropertyValue("allowAddPanel")},set:function(e){this.setPropertyValue("allowAddPanel",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newPanelPosition",{get:function(){return this.getPropertyValue("newPanelPosition")},set:function(e){this.setPropertyValue("newPanelPosition",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowRemovePanel",{get:function(){return this.getPropertyValue("allowRemovePanel")},set:function(e){this.setPropertyValue("allowRemovePanel",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"templateTitleLocation",{get:function(){return this.getPropertyValue("templateTitleLocation")},set:function(e){this.setPropertyValue("templateTitleLocation",e.toLowerCase())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"templateErrorLocation",{get:function(){return this.getPropertyValue("templateErrorLocation")},set:function(e){this.setPropertyValue("templateErrorLocation",e.toLowerCase())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showQuestionNumbers",{get:function(){return this.getPropertyValue("showQuestionNumbers")},set:function(e){this.setPropertyValue("showQuestionNumbers",e),!this.isLoadingFromJson&&this.survey&&this.survey.questionVisibilityChanged(this,this.visible,!0)},enumerable:!1,configurable:!0}),t.prototype.notifySurveyOnChildrenVisibilityChanged=function(){return this.showQuestionNumbers==="onSurvey"},Object.defineProperty(t.prototype,"panelRemoveButtonLocation",{get:function(){return this.getPropertyValue("panelRemoveButtonLocation")},set:function(e){this.setPropertyValue("panelRemoveButtonLocation",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showRangeInProgress",{get:function(){return this.getPropertyValue("showRangeInProgress")},set:function(e){this.setPropertyValue("showRangeInProgress",e),this.fireCallback(this.currentIndexChangedCallback)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderMode",{get:function(){return this.getPropertyValue("renderMode")},set:function(e){this.setPropertyValue("renderMode",e),this.fireCallback(this.renderModeChangedCallback),this.blockAnimations(),this.updateRenderedPanels(),this.releaseAnimations(),this.updatePanelsAnimation()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tabAlign",{get:function(){return this.getPropertyValue("tabAlign")},set:function(e){this.setPropertyValue("tabAlign",e),this.isRenderModeTab&&(this.additionalTitleToolbar.containerCss=this.getAdditionalTitleToolbarCss())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRenderModeList",{get:function(){return this.renderMode==="list"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRenderModeTab",{get:function(){return this.renderMode==="tab"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitleOnLeftTop",{get:function(){if(this.isRenderModeTab&&this.visiblePanelCount>0)return!0;if(!this.hasTitle)return!1;var e=this.getTitleLocation();return e==="left"||e==="top"},enumerable:!1,configurable:!0}),t.prototype.setVisibleIndex=function(e){if(!this.isVisible)return 0;for(var r=this.showQuestionNumbers==="onSurvey",n=r?e:0,o=0;o<this.visiblePanelsCore.length;o++){var s=this.setPanelVisibleIndex(this.visiblePanelsCore[o],n,this.showQuestionNumbers!="off");r&&(n+=s)}return i.prototype.setVisibleIndex.call(this,r?-1:e),r?n-e:1},t.prototype.setPanelVisibleIndex=function(e,r,n){return n?e.setVisibleIndex(r):(e.setVisibleIndex(-1),0)},Object.defineProperty(t.prototype,"canAddPanel",{get:function(){return this.isDesignMode||this.isDefaultV2Theme&&!this.legacyNavigation&&!this.isRenderModeList&&this.currentIndex<this.visiblePanelCount-1&&this.newPanelPosition!=="next"?!1:this.allowAddPanel&&!this.isReadOnly&&this.panelCount<this.maxPanelCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canRemovePanel",{get:function(){return this.isDesignMode?!1:this.allowRemovePanel&&!this.isReadOnly&&this.panelCount>this.minPanelCount},enumerable:!1,configurable:!0}),t.prototype.rebuildPanels=function(){var e;if(!this.isLoadingFromJson){this.prepareValueForPanelCreating();var r=[];if(this.useTemplatePanel)new fe(this,this.template),r.push(this.template);else for(var n=0;n<this.panelCount;n++)this.createNewPanel(),r.push(this.createNewPanel());(e=this.panelsCore).splice.apply(e,Sc([0,this.panelsCore.length],r)),this.setValueAfterPanelsCreating(),this.setPanelsState(),this.reRunCondition(),this.updateFooterActions(),this.fireCallback(this.panelCountChangedCallback),this.updateTabToolbar()}},Object.defineProperty(t.prototype,"defaultPanelValue",{get:function(){return this.getPropertyValue("defaultPanelValue")},set:function(e){this.setPropertyValue("defaultPanelValue",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultValueFromLastPanel",{get:function(){return this.getPropertyValue("defaultValueFromLastPanel")},set:function(e){this.setPropertyValue("defaultValueFromLastPanel",e)},enumerable:!1,configurable:!0}),t.prototype.isDefaultValueEmpty=function(){return i.prototype.isDefaultValueEmpty.call(this)&&this.isValueEmpty(this.defaultPanelValue)},t.prototype.setDefaultValue=function(){if(this.isValueEmpty(this.defaultPanelValue)||!this.isValueEmpty(this.defaultValue)){i.prototype.setDefaultValue.call(this);return}if(!(!this.isEmpty()||this.panelCount==0)){for(var e=[],r=0;r<this.panelCount;r++)e.push(this.defaultPanelValue);this.value=e}},Object.defineProperty(t.prototype,"isValueArray",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){var e=this.value;if(!e||!Array.isArray(e))return!0;for(var r=0;r<e.length;r++)if(!this.isRowEmpty(e[r]))return!1;return!0},t.prototype.getProgressInfo=function(){return de.getProgressInfoByElements(this.visiblePanelsCore,this.isRequired)},t.prototype.isRowEmpty=function(e){for(var r in e)if(e.hasOwnProperty(r))return!1;return!0},t.prototype.addPanelUI=function(){if(!this.canAddPanel||!this.canLeaveCurrentPanel())return null;var e=this.addPanel();return this.renderMode==="list"&&this.panelsState!=="default"&&e.expand(),this.focusNewPanelCallback=function(){e.focusFirstQuestion()},this.isPanelsAnimationRunning||this.focusNewPanel(),e},t.prototype.focusNewPanel=function(){this.focusNewPanelCallback&&(this.focusNewPanelCallback(),this.focusNewPanelCallback=void 0)},t.prototype.addPanel=function(e){var r=this.currentIndex;return e===void 0&&(e=r<0?this.panelCount:r+1),(e<0||e>this.panelCount)&&(e=this.panelCount),this.updateValueOnAddingPanel(r<0?this.panelCount-1:r,e),this.isRenderModeList||(this.currentIndex=e),this.survey&&this.survey.dynamicPanelAdded(this),this.panelsCore[e]},t.prototype.updateValueOnAddingPanel=function(e,r){this.panelCount++;var n=this.value;if(!(!Array.isArray(n)||n.length!==this.panelCount)){var o=!1,s=this.panelCount-1;if(r<s){o=!0;var a=n[s];n.splice(s,1),n.splice(r,0,a)}if(this.isValueEmpty(this.defaultPanelValue)||(o=!0,this.copyValue(n[r],this.defaultPanelValue)),this.defaultValueFromLastPanel&&n.length>1){var l=e>-1&&e<=s?e:s;o=!0,this.copyValue(n[r],n[l])}o&&(this.value=n)}},t.prototype.canLeaveCurrentPanel=function(){return!(this.renderMode!=="list"&&this.currentPanel&&this.currentPanel.hasErrors(!0,!0))},t.prototype.copyValue=function(e,r){for(var n in r)e[n]=r[n]},t.prototype.removePanelUI=function(e){var r=this;!this.canRemovePanel||(this.isRequireConfirmOnDelete(e)?xt(this.confirmDeleteText,function(){r.removePanel(e)},void 0,this.getLocale(),this.survey.rootElement):this.removePanel(e))},t.prototype.isRequireConfirmOnDelete=function(e){if(!this.confirmDelete)return!1;var r=this.getVisualPanelIndex(e);if(r<0||r>=this.visiblePanelCount)return!1;var n=this.visiblePanelsCore[r].getValue();return!this.isValueEmpty(n)&&(this.isValueEmpty(this.defaultPanelValue)||!this.isTwoValueEquals(n,this.defaultPanelValue))},t.prototype.goToNextPanel=function(){return this.currentIndex<0||!this.canLeaveCurrentPanel()?!1:(this.currentIndex++,!0)},t.prototype.goToPrevPanel=function(){this.currentIndex<0||this.currentIndex--},t.prototype.removePanel=function(s){var r=this.getVisualPanelIndex(s);if(!(r<0||r>=this.visiblePanelCount)){this.removedPanelIndex=r;var n=this.visiblePanelsCore[r],o=this.panelsCore.indexOf(n);if(!(o<0)&&!(this.survey&&!this.survey.dynamicPanelRemoving(this,o,n))){this.panelsCore.splice(o,1),this.updateBindings("panelCount",this.panelCount);var s=this.value;!s||!Array.isArray(s)||o>=s.length||(this.isValueChangingInternally=!0,s.splice(o,1),this.value=s,this.updateFooterActions(),this.fireCallback(this.panelCountChangedCallback),this.survey&&this.survey.dynamicPanelRemoved(this,o,n),this.isValueChangingInternally=!1)}}},t.prototype.getVisualPanelIndex=function(e){if(P.isNumber(e))return e;for(var r=this.visiblePanelsCore,n=0;n<r.length;n++)if(r[n]===e||r[n].data===e)return n;return-1},t.prototype.getPanelVisibleIndexById=function(e){for(var r=this.visiblePanelsCore,n=0;n<r.length;n++)if(r[n].id===e)return n;return-1},t.prototype.locStrsChanged=function(){i.prototype.locStrsChanged.call(this);for(var e=this.panelsCore,r=0;r<e.length;r++)e[r].locStrsChanged();this.additionalTitleToolbar&&this.additionalTitleToolbar.locStrsChanged()},t.prototype.clearIncorrectValues=function(){for(var e=0;e<this.panelsCore.length;e++)this.clearIncorrectValuesInPanel(e)},t.prototype.clearErrors=function(){i.prototype.clearErrors.call(this);for(var e=0;e<this.panelsCore.length;e++)this.panelsCore[e].clearErrors()},t.prototype.getQuestionFromArray=function(e,r){return r<0||r>=this.panelsCore.length?null:this.panelsCore[r].getQuestionByName(e)},t.prototype.clearIncorrectValuesInPanel=function(e){var r=this.panelsCore[e];r.clearIncorrectValues();var n=this.value,o=!!n&&e<n.length?n[e]:null;if(!!o){var s=!1;for(var a in o)if(!this.getSharedQuestionFromArray(a,e)){var l=r.getQuestionByName(a);l||this.iscorrectValueWithPostPrefix(r,a,b.commentSuffix)||this.iscorrectValueWithPostPrefix(r,a,b.matrix.totalsSuffix)||(delete o[a],s=!0)}s&&(n[e]=o,this.value=n)}},t.prototype.iscorrectValueWithPostPrefix=function(e,r,n){return r.indexOf(n)!==r.length-n.length?!1:!!e.getQuestionByName(r.substring(0,r.indexOf(n)))},t.prototype.getSharedQuestionFromArray=function(e,r){return!!this.survey&&!!this.valueName?this.survey.getQuestionByValueNameFromArray(this.valueName,e,r):null},t.prototype.addConditionObjectsByContext=function(e,r){for(var n=r?r===!0||this.template.questions.indexOf(r)>-1:!1,o=new Array,s=this.template.questions,a=0;a<s.length;a++)s[a].addConditionObjectsByContext(o,r);for(var l=0;l<b.panel.maxPanelCountInCondition;l++)for(var u="["+l+"].",d=this.getValueName()+u,v=this.processedTitle+u,a=0;a<o.length;a++)o[a].context?e.push(o[a]):e.push({name:d+o[a].name,text:v+o[a].text,question:o[a].question});if(n){for(var d=r===!0?this.getValueName()+".":"",v=r===!0?this.processedTitle+".":"",a=0;a<o.length;a++)if(o[a].question!=r){var V={name:d+fe.ItemVariableName+"."+o[a].name,text:v+fe.ItemVariableName+"."+o[a].text,question:o[a].question};V.context=this,e.push(V)}}},t.prototype.collectNestedQuestionsCore=function(e,r){var n=r?this.visiblePanelsCore:this.panelsCore;!Array.isArray(n)||n.forEach(function(o){o.questions.forEach(function(s){return s.collectNestedQuestions(e,r)})})},t.prototype.getConditionJson=function(e,r){if(e===void 0&&(e=null),r===void 0&&(r=null),!r)return i.prototype.getConditionJson.call(this,e);var n=r,o=r.indexOf(".");o>-1&&(n=r.substring(0,o),r=r.substring(o+1));var s=this.template.getQuestionByName(n);return s?s.getConditionJson(e,r):null},t.prototype.onReadOnlyChanged=function(){var e=this.isReadOnly;this.template.readOnly=e;for(var r=0;r<this.panelsCore.length;r++)this.panelsCore[r].readOnly=e;this.updateNoEntriesTextDefaultLoc(),this.updateFooterActions(),i.prototype.onReadOnlyChanged.call(this)},t.prototype.updateNoEntriesTextDefaultLoc=function(){var e=this.getLocalizableString("noEntriesText");!e||(e.localizationName=this.isReadOnly||!this.allowAddPanel?"noEntriesReadonlyText":"noEntriesText",e.strChanged())},t.prototype.onSurveyLoad=function(){this.template.readOnly=this.isReadOnly,this.template.onSurveyLoad(),this.buildPanelsFirstTime(),i.prototype.onSurveyLoad.call(this)},t.prototype.buildPanelsFirstTime=function(e){if(e===void 0&&(e=!1),!this.hasPanelBuildFirstTime&&!(!e&&this.wasNotRenderedInSurvey)){if(this.blockAnimations(),this.hasPanelBuildFirstTime=!0,this.isBuildingPanelsFirstTime=!0,this.getPropertyValue("panelCount")>0&&(this.panelCount=this.getPropertyValue("panelCount")),this.useTemplatePanel&&this.rebuildPanels(),this.setPanelsSurveyImpl(),this.setPanelsState(),this.assignOnPropertyChangedToTemplate(),this.survey)for(var r=0;r<this.panelCount;r++)this.survey.dynamicPanelAdded(this);this.updateIsReady(),(this.isReadOnly||!this.allowAddPanel)&&this.updateNoEntriesTextDefaultLoc(),this.updateFooterActions(),this.isBuildingPanelsFirstTime=!1,this.releaseAnimations()}},Object.defineProperty(t.prototype,"wasNotRenderedInSurvey",{get:function(){return!this.hasPanelBuildFirstTime&&!this.wasRendered&&!!this.survey},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canBuildPanels",{get:function(){return!this.isLoadingFromJson&&!this.useTemplatePanel},enumerable:!1,configurable:!0}),t.prototype.onFirstRendering=function(){i.prototype.onFirstRendering.call(this),this.buildPanelsFirstTime(),this.template.onFirstRendering();for(var e=0;e<this.panelsCore.length;e++)this.panelsCore[e].onFirstRendering()},t.prototype.localeChanged=function(){i.prototype.localeChanged.call(this);for(var e=0;e<this.panelsCore.length;e++)this.panelsCore[e].localeChanged()},t.prototype.runCondition=function(e,r){i.prototype.runCondition.call(this,e,r),this.runPanelsCondition(this.panelsCore,e,r)},t.prototype.runTriggers=function(e,r){i.prototype.runTriggers.call(this,e,r),this.visiblePanelsCore.forEach(function(n){n.questions.forEach(function(o){return o.runTriggers(e,r)})})},t.prototype.reRunCondition=function(){!this.data||this.runCondition(this.getDataFilteredValues(),this.getDataFilteredProperties())},t.prototype.runPanelsCondition=function(e,r,n){var o={};r&&r instanceof Object&&(o=JSON.parse(JSON.stringify(r))),!!this.parentQuestion&&!!this.parent&&(o[fe.ParentItemVariableName]=this.parent.getValue()),this.isValueChangingInternally=!0;for(var s=0;s<e.length;s++){var a=e[s],l=this.getPanelItemData(a.data),u=P.createCopy(o),d=fe.ItemVariableName;u[d]=l,u[fe.IndexVariableName.toLowerCase()]=s;var v=P.createCopy(n);v[d]=a,a.runCondition(u,v)}this.isValueChangingInternally=!1},t.prototype.onAnyValueChanged=function(e,r){i.prototype.onAnyValueChanged.call(this,e,r);for(var n=0;n<this.panelsCore.length;n++)this.panelsCore[n].onAnyValueChanged(e,r),this.panelsCore[n].onAnyValueChanged(fe.ItemVariableName,"")},t.prototype.hasKeysDuplicated=function(e,r){r===void 0&&(r=null);for(var n=[],o,s=0;s<this.panelsCore.length;s++)o=this.isValueDuplicated(this.panelsCore[s],n,r,e)||o;return o},t.prototype.updatePanelsContainsErrors=function(){for(var e=this.changingValueQuestion,r=e.parent;r;)r.updateContainsErrors(),r=r.parent;this.updateContainsErrors()},t.prototype.hasErrors=function(e,r){if(e===void 0&&(e=!0),r===void 0&&(r=null),this.isValueChangingInternally||this.isBuildingPanelsFirstTime)return!1;var n=!1;if(this.changingValueQuestion){var n=this.changingValueQuestion.hasErrors(e,r);n=this.hasKeysDuplicated(e,r)||n,this.updatePanelsContainsErrors()}else n=this.hasErrorInPanels(e,r);return i.prototype.hasErrors.call(this,e,r)||n},t.prototype.getContainsErrors=function(){var e=i.prototype.getContainsErrors.call(this);if(e)return e;for(var r=this.panelsCore,n=0;n<r.length;n++)if(r[n].containsErrors)return!0;return!1},t.prototype.getIsAnswered=function(){if(!i.prototype.getIsAnswered.call(this))return!1;for(var e=this.visiblePanelsCore,r=0;r<e.length;r++){var n=[];e[r].addQuestionsToList(n,!0);for(var o=0;o<n.length;o++)if(!n[o].isAnswered)return!1}return!0},t.prototype.clearValueOnHidding=function(e){if(!e){if(!!this.survey&&this.survey.getQuestionClearIfInvisible("onHidden")==="none")return;this.clearValueInPanelsIfInvisible("onHiddenContainer")}i.prototype.clearValueOnHidding.call(this,e)},t.prototype.clearValueIfInvisible=function(e){e===void 0&&(e="onHidden");var r=e==="onHidden"?"onHiddenContainer":e;this.clearValueInPanelsIfInvisible(r),i.prototype.clearValueIfInvisible.call(this,e)},t.prototype.clearValueInPanelsIfInvisible=function(e){for(var r=0;r<this.panelsCore.length;r++){var n=this.panelsCore[r],o=n.questions;this.isSetPanelItemData={};for(var s=0;s<o.length;s++){var a=o[s];a.visible&&!n.isVisible||(a.clearValueIfInvisible(e),this.isSetPanelItemData[a.getValueName()]=this.maxCheckCount+1)}}this.isSetPanelItemData={}},t.prototype.getIsRunningValidators=function(){if(i.prototype.getIsRunningValidators.call(this))return!0;for(var e=0;e<this.panelsCore.length;e++)for(var r=this.panelsCore[e].questions,n=0;n<r.length;n++)if(r[n].isRunningValidators)return!0;return!1},t.prototype.getAllErrors=function(){for(var e=i.prototype.getAllErrors.call(this),r=this.visiblePanelsCore,n=0;n<r.length;n++)for(var o=r[n].questions,s=0;s<o.length;s++){var a=o[s].getAllErrors();a&&a.length>0&&(e=e.concat(a))}return e},t.prototype.getDisplayValueCore=function(e,r){var n=this.getUnbindValue(r);if(!n||!Array.isArray(n))return n;for(var o=0;o<this.panelsCore.length&&o<n.length;o++){var s=n[o];!s||(n[o]=this.getPanelDisplayValue(o,s,e))}return n},t.prototype.getPanelDisplayValue=function(e,r,n){if(!r)return r;for(var o=this.panelsCore[e],s=Object.keys(r),a=0;a<s.length;a++){var l=s[a],u=o.getQuestionByValueName(l);if(u||(u=this.getSharedQuestionFromArray(l,e)),u){var d=u.getDisplayValue(n,r[l]);r[l]=d,n&&!!u.title&&u.title!==l&&(r[u.title]=d,delete r[l])}}return r},t.prototype.hasErrorInPanels=function(e,r){for(var n=!1,o=this.visiblePanelsCore,s=[],a=0;a<o.length;a++)this.setOnCompleteAsyncInPanel(o[a]);for(var a=0;a<o.length;a++){var l=o[a].hasErrors(e,!!r&&r.focusOnFirstError,r);l=this.isValueDuplicated(o[a],s,r,e)||l,!this.isRenderModeList&&l&&!n&&(this.currentIndex=a),n=l||n}return n},t.prototype.setOnCompleteAsyncInPanel=function(e){for(var r=this,n=e.questions,o=0;o<n.length;o++)n[o].onCompletedAsyncValidators=function(s){r.raiseOnCompletedAsyncValidators()}},t.prototype.isValueDuplicated=function(e,r,n,o){if(!this.keyName)return!1;var s=e.getQuestionByValueName(this.keyName);if(!s||s.isEmpty())return!1;var a=s.value;!!this.changingValueQuestion&&s!=this.changingValueQuestion&&s.hasErrors(o,n);for(var l=0;l<r.length;l++)if(a==r[l])return o&&s.addError(new Gi(this.keyDuplicationError,this)),!!n&&!n.firstErrorQuestion&&(n.firstErrorQuestion=s),!0;return r.push(a),!1},t.prototype.getPanelActions=function(e){var r=this,n=e.footerActions;return this.panelRemoveButtonLocation!=="right"&&n.push(new G({id:"remove-panel-"+e.id,component:"sv-paneldynamic-remove-btn",visible:new ne(function(){return[r.canRemovePanel,e.state!=="collapsed",r.panelRemoveButtonLocation!=="right"].every(function(o){return o===!0})}),data:{question:this,panel:e}})),this.survey&&(n=this.survey.getUpdatedPanelFooterActions(e,n,this)),n},t.prototype.createNewPanel=function(){var e=this,r=this.createAndSetupNewPanelObject(),n=this.template.toJSON();new ae().toObject(n,r),r.renderWidth="100%",r.updateCustomWidgets(),new fe(this,r),!this.isDesignMode&&!this.isReadOnly&&!this.isValueEmpty(r.getValue())&&this.runPanelsCondition([r],this.getDataFilteredValues(),this.getDataFilteredProperties()),r.onFirstRendering();for(var o=r.questions,s=0;s<o.length;s++)o[s].setParentQuestion(this);return r.locStrsChanged(),r.onGetFooterActionsCallback=function(){return e.getPanelActions(r)},r.onGetFooterToolbarCssCallback=function(){return e.cssClasses.panelFooter},r.registerPropertyChangedHandlers(["visible"],function(){r.visible?e.onPanelAdded(r):e.onPanelRemoved(r),e.updateFooterActions()}),r},t.prototype.createAndSetupNewPanelObject=function(){var e=this,r=this.createNewPanelObject();return r.isInteractiveDesignElement=!1,r.setParentQuestion(this),r.onGetQuestionTitleLocation=function(){return e.getTemplateQuestionTitleLocation()},r},t.prototype.getTemplateQuestionTitleLocation=function(){return this.templateTitleLocation!="default"?this.templateTitleLocation:this.getTitleLocationCore()},t.prototype.getChildErrorLocation=function(e){return this.templateErrorLocation!=="default"?this.templateErrorLocation:i.prototype.getChildErrorLocation.call(this,e)},t.prototype.createNewPanelObject=function(){return x.createClass("panel")},t.prototype.setPanelCountBasedOnValue=function(){if(!(this.isValueChangingInternally||this.useTemplatePanel)){var e=this.value,r=e&&Array.isArray(e)?e.length:0;r==0&&this.getPropertyValue("panelCount")>0&&(r=this.getPropertyValue("panelCount")),this.settingPanelCountBasedOnValue=!0,this.panelCount=r,this.settingPanelCountBasedOnValue=!1}},t.prototype.setQuestionValue=function(e){if(!this.settingPanelCountBasedOnValue){i.prototype.setQuestionValue.call(this,e,!1),this.setPanelCountBasedOnValue();for(var r=0;r<this.panelsCore.length;r++)this.panelUpdateValueFromSurvey(this.panelsCore[r]);this.updateIsAnswered()}},t.prototype.onSurveyValueChanged=function(e){if(!(e===void 0&&this.isAllPanelsEmpty())){i.prototype.onSurveyValueChanged.call(this,e);for(var r=0;r<this.panelsCore.length;r++)this.panelSurveyValueChanged(this.panelsCore[r]);e===void 0&&this.setValueBasedOnPanelCount(),this.updateIsReady()}},t.prototype.isAllPanelsEmpty=function(){for(var e=0;e<this.panelsCore.length;e++)if(!P.isValueEmpty(this.panelsCore[e].getValue()))return!1;return!0},t.prototype.panelUpdateValueFromSurvey=function(e){for(var r=e.questions,n=this.getPanelItemData(e.data),o=0;o<r.length;o++){var s=r[o];s.updateValueFromSurvey(n[s.getValueName()]),s.updateCommentFromSurvey(n[s.getValueName()+b.commentSuffix]),s.initDataUI()}},t.prototype.panelSurveyValueChanged=function(e){for(var r=e.questions,n=this.getPanelItemData(e.data),o=0;o<r.length;o++){var s=r[o];s.onSurveyValueChanged(n[s.getValueName()])}},t.prototype.onSetData=function(){i.prototype.onSetData.call(this),this.useTemplatePanel&&(this.setTemplatePanelSurveyImpl(),this.rebuildPanels())},t.prototype.isNewValueCorrect=function(e){return Array.isArray(e)},t.prototype.getItemIndex=function(e){var r=this.items.indexOf(e);return r>-1?r:this.items.length},t.prototype.getVisibleItemIndex=function(e){for(var r=this.visiblePanelsCore,n=0;n<r.length;n++)if(r[n].data===e)return n;return r.length},t.prototype.getPanelItemData=function(e){var r=this.items,n=r.indexOf(e),o=this.value;return n<0&&Array.isArray(o)&&o.length>r.length&&(n=r.length),n<0?{}:!o||!Array.isArray(o)||o.length<=n?{}:o[n]},t.prototype.setPanelItemData=function(e,r,n){if(!(this.isSetPanelItemData[r]>this.maxCheckCount)){this.isSetPanelItemData[r]||(this.isSetPanelItemData[r]=0),this.isSetPanelItemData[r]++;var o=this.items,s=o.indexOf(e);s<0&&(s=o.length);var a=this.getUnbindValue(this.value);if((!a||!Array.isArray(a))&&(a=[]),a.length<=s)for(var l=a.length;l<=s;l++)a.push({});if(a[s]||(a[s]={}),this.isValueEmpty(n)?delete a[s][r]:a[s][r]=n,s>=0&&s<this.panelsCore.length&&(this.changingValueQuestion=this.panelsCore[s].getQuestionByValueName(r)),this.value=a,this.changingValueQuestion=null,this.survey){var u={question:this,panel:e.panel,name:r,itemIndex:s,itemValue:a[s],value:n};this.survey.dynamicPanelItemValueChanged(this,u)}this.isSetPanelItemData[r]--,this.isSetPanelItemData[r]-1&&delete this.isSetPanelItemData[r]}},t.prototype.getRootData=function(){return this.data},t.prototype.getPlainData=function(e){e===void 0&&(e={includeEmpty:!0});var r=i.prototype.getPlainData.call(this,e);if(r){r.isNode=!0;var n=Array.isArray(r.data)?[].concat(r.data):[];r.data=this.panels.map(function(o,s){var a={name:o.name||s,title:o.title||"Panel",value:o.getValue(),displayValue:o.getValue(),getString:function(l){return typeof l=="object"?JSON.stringify(l):l},isNode:!0,data:o.questions.map(function(l){return l.getPlainData(e)}).filter(function(l){return!!l})};return(e.calculations||[]).forEach(function(l){a[l.propertyName]=o[l.propertyName]}),a}),r.data=r.data.concat(n)}return r},t.prototype.updateElementCss=function(e){i.prototype.updateElementCss.call(this,e);for(var r=0;r<this.panelsCore.length;r++){var n=this.panelsCore[r];n.updateElementCss(e)}},Object.defineProperty(t.prototype,"progressText",{get:function(){var e=this.visiblePanelCount;return this.getLocalizationFormatString("panelDynamicProgressText",this.currentIndex+1,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progress",{get:function(){return(this.currentIndex+1)/this.visiblePanelCount*100+"%"},enumerable:!1,configurable:!0}),t.prototype.getRootCss=function(){return new O().append(i.prototype.getRootCss.call(this)).append(this.cssClasses.empty,this.getShowNoEntriesPlaceholder()).toString()},Object.defineProperty(t.prototype,"cssHeader",{get:function(){var e=this.isRenderModeTab&&!!this.visiblePanelCount;return new O().append(this.cssClasses.header).append(this.cssClasses.headerTop,this.hasTitleOnTop||e).append(this.cssClasses.headerTab,e).toString()},enumerable:!1,configurable:!0}),t.prototype.getPanelWrapperCss=function(e){return new O().append(this.cssClasses.panelWrapper,!e||e.visible).append(this.cssClasses.panelWrapperList,this.isRenderModeList).append(this.cssClasses.panelWrapperInRow,this.panelRemoveButtonLocation==="right").toString()},t.prototype.getPanelRemoveButtonCss=function(){return new O().append(this.cssClasses.button).append(this.cssClasses.buttonRemove).append(this.cssClasses.buttonRemoveRight,this.panelRemoveButtonLocation==="right").toString()},t.prototype.getAddButtonCss=function(){return new O().append(this.cssClasses.button).append(this.cssClasses.buttonAdd).append(this.cssClasses.buttonAdd+"--list-mode",this.renderMode==="list").toString()},t.prototype.getPrevButtonCss=function(){return new O().append(this.cssClasses.buttonPrev).append(this.cssClasses.buttonPrevDisabled,!this.isPrevButtonVisible).toString()},t.prototype.getNextButtonCss=function(){return new O().append(this.cssClasses.buttonNext).append(this.cssClasses.buttonNextDisabled,!this.isNextButtonVisible).toString()},Object.defineProperty(t.prototype,"noEntriesText",{get:function(){return this.getLocalizableStringText("noEntriesText")},set:function(e){this.setLocalizableStringText("noEntriesText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locNoEntriesText",{get:function(){return this.getLocalizableString("noEntriesText")},enumerable:!1,configurable:!0}),t.prototype.getShowNoEntriesPlaceholder=function(){return!!this.cssClasses.noEntriesPlaceholder&&!this.isDesignMode&&this.visiblePanelCount===0},t.prototype.needResponsiveWidth=function(){var e=this.getPanel();return!!(!!e&&e.needResponsiveWidth())},Object.defineProperty(t.prototype,"hasAdditionalTitleToolbar",{get:function(){return this.isRenderModeTab&&this.visiblePanels.length>0},enumerable:!1,configurable:!0}),t.prototype.getAdditionalTitleToolbar=function(){return this.isRenderModeTab?(this.additionalTitleToolbarValue||(this.additionalTitleToolbarValue=new Ht,this.additionalTitleToolbarValue.dotsItem.popupModel.showPointer=!1,this.additionalTitleToolbarValue.dotsItem.popupModel.verticalPosition="bottom",this.additionalTitleToolbarValue.dotsItem.popupModel.horizontalPosition="center",this.updateElementCss(!1)),this.additionalTitleToolbarValue):null},Object.defineProperty(t.prototype,"footerToolbar",{get:function(){return this.footerToolbarValue||this.initFooterToolbar(),this.footerToolbarValue},enumerable:!1,configurable:!0}),t.prototype.updateFooterActions=function(){this.updateFooterActionsCallback&&this.updateFooterActionsCallback()},t.prototype.initFooterToolbar=function(){var e=this;this.footerToolbarValue=this.createActionContainer();var r=[],n=new G({id:"sv-pd-prev-btn",title:this.panelPrevText,action:function(){e.goToPrevPanel()}}),o=new G({id:"sv-pd-next-btn",title:this.panelNextText,action:function(){e.goToNextPanel()}}),s=new G({id:"sv-pd-add-btn",component:"sv-paneldynamic-add-btn",data:{question:this}}),a=new G({id:"sv-prev-btn-icon",component:"sv-paneldynamic-prev-btn",data:{question:this}}),l=new G({id:"sv-pd-progress-text",component:"sv-paneldynamic-progress-text",data:{question:this}}),u=new G({id:"sv-pd-next-btn-icon",component:"sv-paneldynamic-next-btn",data:{question:this}});r.push(n,o,s,a,l,u),this.updateFooterActionsCallback=function(){var d=e.legacyNavigation,v=e.isRenderModeList,V=e.isMobile,E=!d&&!v;n.visible=E&&e.currentIndex>0,o.visible=E&&e.currentIndex<e.visiblePanelCount-1,o.needSpace=V&&o.visible&&n.visible,s.visible=e.canAddPanel,s.needSpace=e.isMobile&&!o.visible&&n.visible,l.visible=!e.isRenderModeList&&!V,l.needSpace=!d&&!e.isMobile;var I=d&&!v;a.visible=I,u.visible=I,a.needSpace=I},this.updateFooterActionsCallback(),this.footerToolbarValue.setItems(r)},t.prototype.createTabByPanel=function(e,r){var n=this;if(!!this.isRenderModeTab){var o=new we(e,!0);o.onGetTextCallback=function(l){if(l||(l=n.locTabTitlePlaceholder.renderedHtml),!n.survey)return l;var u={title:l,panel:e,visiblePanelIndex:r};return n.survey.dynamicPanelGetTabTitle(n,u),u.title},o.sharedData=this.locTemplateTabTitle;var s=this.getPanelVisibleIndexById(e.id)===this.currentIndex,a=new G({id:e.id,pressed:s,locTitle:o,disableHide:s,action:function(){n.currentIndex=n.getPanelVisibleIndexById(a.id)}});return a}},t.prototype.getAdditionalTitleToolbarCss=function(e){var r=e!=null?e:this.cssClasses;return new O().append(r.tabsRoot).append(r.tabsLeft,this.tabAlign==="left").append(r.tabsRight,this.tabAlign==="right").append(r.tabsCenter,this.tabAlign==="center").toString()},t.prototype.updateTabToolbarItemsPressedState=function(){if(!!this.isRenderModeTab&&!(this.currentIndex<0||this.currentIndex>=this.visiblePanelCount)){var e=this.visiblePanelsCore[this.currentIndex];this.additionalTitleToolbar.renderedActions.forEach(function(r){var n=r.id===e.id;r.pressed=n,r.disableHide=n,r.mode==="popup"&&r.disableHide&&r.raiseUpdate()})}},t.prototype.updateTabToolbar=function(){var e=this;if(!!this.isRenderModeTab){for(var r=[],n=this.visiblePanelsCore,o=function(l){s.visiblePanelsCore.forEach(function(u){return r.push(e.createTabByPanel(n[l],l))})},s=this,a=0;a<n.length;a++)o(a);this.additionalTitleToolbar.setItems(r)}},t.prototype.addTabFromToolbar=function(e,r){if(!!this.isRenderModeTab){var n=this.createTabByPanel(e,r);this.additionalTitleToolbar.actions.splice(r,0,n),this.updateTabToolbarItemsPressedState()}},t.prototype.removeTabFromToolbar=function(e){if(!!this.isRenderModeTab){var r=this.additionalTitleToolbar.getActionById(e.id);!r||(this.additionalTitleToolbar.actions.splice(this.additionalTitleToolbar.actions.indexOf(r),1),this.updateTabToolbarItemsPressedState())}},Object.defineProperty(t.prototype,"showLegacyNavigation",{get:function(){return!this.isDefaultV2Theme},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showNavigation",{get:function(){return this.isReadOnly&&this.visiblePanelCount==1?!1:this.visiblePanelCount>0&&!this.showLegacyNavigation&&!!this.cssClasses.footer},enumerable:!1,configurable:!0}),t.prototype.showSeparator=function(e){return this.isRenderModeList&&e<this.renderedPanels.length-1},t.prototype.calcCssClasses=function(e){var r=i.prototype.calcCssClasses.call(this,e),n=this.additionalTitleToolbar;return n&&(n.containerCss=this.getAdditionalTitleToolbarCss(r),n.cssClasses=r.tabs,n.dotsItem.cssClasses=r.tabs,n.dotsItem.popupModel.contentComponentData.model.cssClasses=e.list),r},t.maxCheckCount=3,ds([ue({})],t.prototype,"_renderedPanels",void 0),ds([y({defaultValue:!1,onSet:function(e,r){r.updateFooterActions()}})],t.prototype,"legacyNavigation",void 0),t}(le);x.addClass("paneldynamic",[{name:"showCommentArea:switch",layout:"row",visible:!0,category:"general"},{name:"templateElements",alternativeName:"questions",baseClassName:"question",visible:!1,isLightSerializable:!1},{name:"templateTitle:text",serializationProperty:"locTemplateTitle"},{name:"templateTabTitle",serializationProperty:"locTemplateTabTitle",visibleIf:function(i){return i.renderMode==="tab"}},{name:"tabTitlePlaceholder",serializationProperty:"locTabTitlePlaceholder",visibleIf:function(i){return i.renderMode==="tab"}},{name:"templateDescription:text",serializationProperty:"locTemplateDescription"},{name:"minWidth",defaultFunc:function(){return"auto"}},{name:"noEntriesText:text",serializationProperty:"locNoEntriesText"},{name:"allowAddPanel:boolean",default:!0},{name:"allowRemovePanel:boolean",default:!0},{name:"newPanelPosition",choices:["next","last"],default:"last",category:"layout"},{name:"panelCount:number",isBindable:!0,default:0,choices:[0,1,2,3,4,5,6,7,8,9,10]},{name:"minPanelCount:number",default:0,minValue:0},{name:"maxPanelCount:number",default:b.panel.maxPanelCount},"defaultPanelValue:panelvalue","defaultValueFromLastPanel:boolean",{name:"panelsState",default:"default",choices:["default","collapsed","expanded","firstExpanded"],visibleIf:function(i){return i.renderMode==="list"}},{name:"keyName"},{name:"keyDuplicationError",serializationProperty:"locKeyDuplicationError"},{name:"confirmDelete:boolean"},{name:"confirmDeleteText",serializationProperty:"locConfirmDeleteText",visibleIf:function(i){return i.confirmDelete}},{name:"panelAddText",serializationProperty:"locPanelAddText",visibleIf:function(i){return i.allowAddPanel}},{name:"panelRemoveText",serializationProperty:"locPanelRemoveText",visibleIf:function(i){return i.allowRemovePanel}},{name:"panelPrevText",serializationProperty:"locPanelPrevText",visibleIf:function(i){return i.renderMode!=="list"}},{name:"panelNextText",serializationProperty:"locPanelNextText",visibleIf:function(i){return i.renderMode!=="list"}},{name:"showQuestionNumbers",default:"off",choices:["off","onPanel","onSurvey"]},{name:"showRangeInProgress:boolean",default:!0,visibleIf:function(i){return i.renderMode!=="list"}},{name:"renderMode",default:"list",choices:["list","progressTop","progressBottom","progressTopBottom","tab"]},{name:"tabAlign",default:"center",choices:["left","center","right"],visibleIf:function(i){return i.renderMode==="tab"}},{name:"templateTitleLocation",default:"default",choices:["default","top","bottom","left"]},{name:"templateErrorLocation",default:"default",choices:["default","top","bottom"]},{name:"templateVisibleIf:expression",category:"logic"},{name:"panelRemoveButtonLocation",default:"bottom",choices:["bottom","right"],visibleIf:function(i){return i.allowRemovePanel}}],function(){return new qn("")},"question"),Z.Instance.registerQuestion("paneldynamic",function(i){return new qn(i)});var Rc=function(){function i(){}return i.getProgressTextInBarCss=function(t){return new O().append(t.progressText).append(t.progressTextInBar).toString()},i.getProgressTextUnderBarCss=function(t){return new O().append(t.progressText).append(t.progressTextUnderBar).toString()},i}(),He=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),gs=function(i){He(t,i);function t(){var e=i.call(this)||this;return e.idValue=t.idCounter++,e.registerPropertyChangedHandlers(["operator","value","name"],function(){e.oldPropertiesChanged()}),e.registerPropertyChangedHandlers(["expression"],function(){e.onExpressionChanged()}),e}return Object.defineProperty(t,"operators",{get:function(){return t.operatorsValue!=null||(t.operatorsValue={empty:function(e,r){return!e},notempty:function(e,r){return!!e},equal:function(e,r){return e==r},notequal:function(e,r){return e!=r},contains:function(e,r){return e&&e.indexOf&&e.indexOf(r)>-1},notcontains:function(e,r){return!e||!e.indexOf||e.indexOf(r)==-1},greater:function(e,r){return e>r},less:function(e,r){return e<r},greaterorequal:function(e,r){return e>=r},lessorequal:function(e,r){return e<=r}}),t.operatorsValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.idValue},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"triggerbase"},t.prototype.toString=function(){var e=this.getType().replace("trigger",""),r=this.expression?this.expression:this.buildExpression();return r&&(e+=", "+r),e},Object.defineProperty(t.prototype,"isInternal",{get:function(){return this.isGhost===!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"operator",{get:function(){return this.getPropertyValue("operator","equal")},set:function(e){!e||(e=e.toLowerCase(),t.operators[e]&&this.setPropertyValue("operator",e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.getPropertyValue("value",null)},set:function(e){this.setPropertyValue("value",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.getPropertyValue("name","")},set:function(e){this.setPropertyValue("name",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"expression",{get:function(){return this.getPropertyValue("expression","")},set:function(e){this.setPropertyValue("expression",e)},enumerable:!1,configurable:!0}),t.prototype.canBeExecuted=function(e){return!0},t.prototype.canBeExecutedOnComplete=function(){return!1},t.prototype.checkExpression=function(e,r,n,o,s){s===void 0&&(s=null),this.isExecutingOnNextPage=e,this.canBeExecuted(e)&&(r&&!this.canBeExecutedOnComplete()||!this.isCheckRequired(n)||(this.conditionRunner?this.perform(o,s):this.canSuccessOnEmptyExpression()&&this.triggerResult(!0,o,s)))},t.prototype.canSuccessOnEmptyExpression=function(){return!1},t.prototype.check=function(e){var r=t.operators[this.operator](e,this.value);r?this.onSuccess({},null):this.onFailure()},Object.defineProperty(t.prototype,"requireValidQuestion",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.perform=function(e,r){var n=this;this.conditionRunner.onRunComplete=function(o){n.triggerResult(o,e,r)},this.conditionRunner.run(e,r)},t.prototype.triggerResult=function(e,r,n){e?(this.onSuccess(r,n),this.onSuccessExecuted()):this.onFailure()},t.prototype.onSuccess=function(e,r){},t.prototype.onFailure=function(){},t.prototype.onSuccessExecuted=function(){},t.prototype.endLoadingFromJson=function(){i.prototype.endLoadingFromJson.call(this),this.oldPropertiesChanged()},t.prototype.oldPropertiesChanged=function(){this.onExpressionChanged()},t.prototype.onExpressionChanged=function(){this.conditionRunner=null},t.prototype.buildExpression=function(){return!this.name||this.isValueEmpty(this.value)&&this.isRequireValue?"":"{"+this.name+"} "+this.operator+" "+Pe.toOperandString(this.value)},t.prototype.isCheckRequired=function(e){return e?(this.createConditionRunner(),this.conditionRunner&&this.conditionRunner.hasFunction()===!0?!0:new ce().isAnyKeyChanged(e,this.getUsedVariables())):!1},t.prototype.getUsedVariables=function(){if(!this.conditionRunner)return[];var e=this.conditionRunner.getVariables();if(Array.isArray(e))for(var r="-unwrapped",n=e.length-1;n>=0;n--){var o=e[n];o.endsWith(r)&&e.push(o.substring(0,o.length-r.length))}return e},t.prototype.createConditionRunner=function(){if(!this.conditionRunner){var e=this.expression;e||(e=this.buildExpression()),e&&(this.conditionRunner=new ve(e))}},Object.defineProperty(t.prototype,"isRequireValue",{get:function(){return this.operator!=="empty"&&this.operator!="notempty"},enumerable:!1,configurable:!0}),t.idCounter=1,t.operatorsValue=null,t}(W),ot=function(i){He(t,i);function t(){var e=i.call(this)||this;return e.ownerValue=null,e}return Object.defineProperty(t.prototype,"owner",{get:function(){return this.ownerValue},enumerable:!1,configurable:!0}),t.prototype.setOwner=function(e){this.ownerValue=e},t.prototype.getSurvey=function(e){return!!this.owner&&!!this.owner.getSurvey?this.owner.getSurvey():null},t.prototype.isRealExecution=function(){return!0},t.prototype.onSuccessExecuted=function(){!!this.owner&&this.isRealExecution()&&this.owner.triggerExecuted(this)},t}(gs),ys=function(i){He(t,i);function t(){var e=i.call(this)||this;return e.pages=[],e.questions=[],e}return t.prototype.getType=function(){return"visibletrigger"},t.prototype.onSuccess=function(e,r){this.onTrigger(this.onItemSuccess)},t.prototype.onFailure=function(){this.onTrigger(this.onItemFailure)},t.prototype.onTrigger=function(e){if(!!this.owner)for(var r=this.owner.getObjects(this.pages,this.questions),n=0;n<r.length;n++)e(r[n])},t.prototype.onItemSuccess=function(e){e.visible=!0},t.prototype.onItemFailure=function(e){e.visible=!1},t}(ot),ms=function(i){He(t,i);function t(){return i.call(this)||this}return t.prototype.getType=function(){return"completetrigger"},Object.defineProperty(t.prototype,"requireValidQuestion",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.isRealExecution=function(){return!b.triggers.executeCompleteOnValueChanged===this.isExecutingOnNextPage},t.prototype.onSuccess=function(e,r){!this.owner||(this.isRealExecution()?this.owner.setCompleted(this):this.owner.canBeCompleted(this,!0))},t.prototype.onFailure=function(){this.owner.canBeCompleted(this,!1)},t}(ot),vs=function(i){He(t,i);function t(){return i.call(this)||this}return t.prototype.getType=function(){return"setvaluetrigger"},t.prototype.canBeExecuted=function(e){return!e&&!!this.setToName},t.prototype.onPropertyValueChanged=function(e,r,n){if(i.prototype.onPropertyValueChanged.call(this,e,r,n),e==="setToName"){var o=this.getSurvey();o&&!o.isLoadingFromJson&&o.isDesignMode&&(this.setValue=void 0)}},Object.defineProperty(t.prototype,"setToName",{get:function(){return this.getPropertyValue("setToName","")},set:function(e){this.setPropertyValue("setToName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setValue",{get:function(){return this.getPropertyValue("setValue")},set:function(e){this.setPropertyValue("setValue",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isVariable",{get:function(){return this.getPropertyValue("isVariable")},set:function(e){this.setPropertyValue("isVariable",e)},enumerable:!1,configurable:!0}),t.prototype.onSuccess=function(e,r){!this.setToName||!this.owner||this.owner.setTriggerValue(this.setToName,this.setValue,this.isVariable)},t}(ot),bs=function(i){He(t,i);function t(){return i.call(this)||this}return t.prototype.getType=function(){return"skiptrigger"},Object.defineProperty(t.prototype,"requireValidQuestion",{get:function(){return this.canBeExecuted(!1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gotoName",{get:function(){return this.getPropertyValue("gotoName","")},set:function(e){this.setPropertyValue("gotoName",e)},enumerable:!1,configurable:!0}),t.prototype.canBeExecuted=function(e){return e===!b.triggers.executeSkipOnValueChanged},t.prototype.onSuccess=function(e,r){!this.gotoName||!this.owner||this.owner.focusQuestion(this.gotoName)},t}(ot),Cs=function(i){He(t,i);function t(){return i.call(this)||this}return t.prototype.getType=function(){return"runexpressiontrigger"},Object.defineProperty(t.prototype,"setToName",{get:function(){return this.getPropertyValue("setToName","")},set:function(e){this.setPropertyValue("setToName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"runExpression",{get:function(){return this.getPropertyValue("runExpression","")},set:function(e){this.setPropertyValue("runExpression",e)},enumerable:!1,configurable:!0}),t.prototype.canBeExecuted=function(e){return!e},t.prototype.onSuccess=function(e,r){var n=this;if(!(!this.owner||!this.runExpression)){var o=new $e(this.runExpression);o.canRun&&(o.onRunComplete=function(s){n.onCompleteRunExpression(s)},o.run(e,r))}},t.prototype.onCompleteRunExpression=function(e){!!this.setToName&&e!==void 0&&this.owner.setTriggerValue(this.setToName,P.convertValToQuestionVal(e),!1)},t}(ot),Ps=function(i){He(t,i);function t(){return i.call(this)||this}return t.prototype.canBeExecuted=function(e){return!e&&!!this.setToName&&!!this.fromName},Object.defineProperty(t.prototype,"setToName",{get:function(){return this.getPropertyValue("setToName","")},set:function(e){this.setPropertyValue("setToName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fromName",{get:function(){return this.getPropertyValue("fromName","")},set:function(e){this.setPropertyValue("fromName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"copyDisplayValue",{get:function(){return this.getPropertyValue("copyDisplayValue")},set:function(e){this.setPropertyValue("copyDisplayValue",e)},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"copyvaluetrigger"},t.prototype.onSuccess=function(e,r){!this.setToName||!this.owner||this.owner.copyTriggerValue(this.setToName,this.fromName,this.copyDisplayValue)},t.prototype.canSuccessOnEmptyExpression=function(){return!0},t.prototype.getUsedVariables=function(){var e=i.prototype.getUsedVariables.call(this);return e.length===0&&!!this.fromName&&e.push(this.fromName),e},t}(ot);x.addClass("trigger",[{name:"operator",default:"equal",visible:!1},{name:"value",visible:!1},"expression:condition"]),x.addClass("surveytrigger",[{name:"name",visible:!1}],null,"trigger"),x.addClass("visibletrigger",["pages:pages","questions:questions"],function(){return new ys},"surveytrigger"),x.addClass("completetrigger",[],function(){return new ms},"surveytrigger"),x.addClass("setvaluetrigger",[{name:"!setToName:questionvalue"},{name:"setValue:triggervalue",dependsOn:"setToName",visibleIf:function(i){return!!i&&!!i.setToName}},{name:"isVariable:boolean",visible:!1}],function(){return new vs},"surveytrigger"),x.addClass("copyvaluetrigger",[{name:"!fromName:questionvalue"},{name:"!setToName:questionvalue"},{name:"copyDisplayValue:boolean",visible:!1}],function(){return new Ps},"surveytrigger"),x.addClass("skiptrigger",[{name:"!gotoName:question"}],function(){return new bs},"surveytrigger"),x.addClass("runexpressiontrigger",[{name:"setToName:questionvalue"},"runExpression:expression"],function(){return new Cs},"surveytrigger");var ws=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ec=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Vs=function(i){ws(t,i);function t(e,r){r===void 0&&(r=null);var n=i.call(this)||this;return n.closeOnCompleteTimeout=0,r?n.surveyValue=r:n.surveyValue=n.createSurvey(e),n.surveyValue.fitToContainer=!0,n.windowElement=D.createElement("div"),n.survey.onComplete.add(function(o,s){n.onSurveyComplete()}),n.registerPropertyChangedHandlers(["isShowing"],function(){n.showingChangedCallback&&n.showingChangedCallback()}),n.registerPropertyChangedHandlers(["isExpanded"],function(){n.onExpandedChanged()}),n.width=new ne(function(){return n.survey.width}),n.width=n.survey.width,n.updateCss(),n.onCreating(),n}return t.prototype.onCreating=function(){},t.prototype.getType=function(){return"popupsurvey"},Object.defineProperty(t.prototype,"survey",{get:function(){return this.surveyValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowing",{get:function(){return this.getPropertyValue("isShowing",!1)},set:function(e){this.setPropertyValue("isShowing",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFullScreen",{get:function(){return this.getPropertyValue("isFullScreen",!1)},set:function(e){!this.isExpanded&&!!e&&(this.isExpanded=!0),this.setPropertyValue("isFullScreen",e),this.setCssRoot()},enumerable:!1,configurable:!0}),t.prototype.show=function(){this.isShowing=!0},t.prototype.hide=function(){this.isShowing=!1},t.prototype.toggleFullScreen=function(){this.isFullScreen=!this.isFullScreen},Object.defineProperty(t.prototype,"isExpanded",{get:function(){return this.getPropertyValue("isExpanded",!1)},set:function(e){!!this.isFullScreen&&!e&&(this.isFullScreen=!1),this.setPropertyValue("isExpanded",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCollapsed",{get:function(){return!this.isExpanded},enumerable:!1,configurable:!0}),t.prototype.onExpandedChanged=function(){this.expandedChangedCallback&&this.expandedChangedCallback(),this.updateCssButton()},Object.defineProperty(t.prototype,"title",{get:function(){return this.survey.title},set:function(e){this.survey.title=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTitle",{get:function(){return this.survey.locTitle.isEmpty?null:this.survey.locTitle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locDescription",{get:function(){return this.survey.locTitle.isEmpty?null:this.survey.locDescription},enumerable:!1,configurable:!0}),t.prototype.expand=function(){this.isExpanded=!0},t.prototype.collapse=function(){this.isExpanded=!1},t.prototype.changeExpandCollapse=function(){this.isExpanded=!this.isExpanded},Object.defineProperty(t.prototype,"allowClose",{get:function(){return this.getPropertyValue("allowClose",!1)},set:function(e){this.setPropertyValue("allowClose",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowFullScreen",{get:function(){return this.getPropertyValue("allowFullScreen",!1)},set:function(e){this.setPropertyValue("allowFullScreen",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"css",{get:function(){return this.survey.css},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssButton",{get:function(){return this.getPropertyValue("cssButton","")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssRoot",{get:function(){var e=this.getPropertyValue("cssRoot","");return this.isCollapsed&&(e+=" "+this.getPropertyValue("cssRootCollapsedMod","")),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssRootCollapsedMod",{get:function(){return this.getPropertyValue("cssRootCollapsedMod")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssRootContent",{get:function(){return this.getPropertyValue("cssRootContent")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssBody",{get:function(){return this.getPropertyValue("cssBody","")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssHeaderRoot",{get:function(){return this.getPropertyValue("cssHeaderRoot","")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssHeaderTitleCollapsed",{get:function(){return this.getPropertyValue("cssHeaderTitleCollapsed","")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssHeaderButtonsContainer",{get:function(){return this.getPropertyValue("cssHeaderButtonsContainer","")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssHeaderCollapseButton",{get:function(){return this.getPropertyValue("cssHeaderCollapseButton","")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssHeaderCloseButton",{get:function(){return this.getPropertyValue("cssHeaderCloseButton","")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssHeaderFullScreenButton",{get:function(){return this.getPropertyValue("cssHeaderFullScreenButton","")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedWidth",{get:function(){var e=this.getPropertyValue("width","60%");return e&&!isNaN(e)&&(e=e+"px"),e},enumerable:!1,configurable:!0}),t.prototype.updateCss=function(){if(!(!this.css||!this.css.window)){var e=this.css.window;this.setCssRoot(),this.setPropertyValue("cssRootCollapsedMod",e.rootCollapsedMod),this.setPropertyValue("cssRootContent",e.rootContent),this.setPropertyValue("cssBody",e.body);var r=e.header;!r||(this.setPropertyValue("cssHeaderRoot",r.root),this.setPropertyValue("cssHeaderTitleCollapsed",r.titleCollapsed),this.setPropertyValue("cssHeaderButtonsContainer",r.buttonsContainer),this.setPropertyValue("cssHeaderCollapseButton",r.collapseButton),this.setPropertyValue("cssHeaderCloseButton",r.closeButton),this.setPropertyValue("cssHeaderFullScreenButton",r.fullScreenButton),this.updateCssButton())}},t.prototype.setCssRoot=function(){var e=this.css.window;this.isFullScreen?this.setPropertyValue("cssRoot",e.root+" "+e.rootFullScreenMode):this.setPropertyValue("cssRoot",e.root)},t.prototype.updateCssButton=function(){var e=this.css.window?this.css.window.header:null;!e||this.setCssButton(this.isExpanded?e.buttonExpanded:e.buttonCollapsed)},t.prototype.setCssButton=function(e){!e||this.setPropertyValue("cssButton",e)},t.prototype.createSurvey=function(e){return new _e(e)},t.prototype.onSurveyComplete=function(){if(!(this.closeOnCompleteTimeout<0))if(this.closeOnCompleteTimeout==0)this.hide();else{var e=this,r=null,n=function(){e.hide(),clearInterval(r)};r=setInterval(n,this.closeOnCompleteTimeout*1e3)}},t.prototype.onScroll=function(){this.survey.onScroll()},Ec([y()],t.prototype,"width",void 0),t}(W),Dc=function(i){ws(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t}(Vs),Ac=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Qn=function(i){Ac(t,i);function t(e){var r=i.call(this,e)||this;return r.onScrollOutsideCallback=function(n){r.preventScrollOuside(n,n.deltaY)},r}return t.prototype.getStyleClass=function(){return i.prototype.getStyleClass.call(this).append("sv-popup--modal",!this.isOverlay)},t.prototype.getShowFooter=function(){return!0},t.prototype.createFooterActionBar=function(){var e=this;i.prototype.createFooterActionBar.call(this),this.footerToolbar.containerCss="sv-footer-action-bar",this.footerToolbarValue.addAction({id:"apply",visibleIndex:20,title:this.applyButtonText,innerCss:"sv-popup__body-footer-item sv-popup__button sv-popup__button--apply sd-btn sd-btn--action",action:function(){e.apply()}})},Object.defineProperty(t.prototype,"applyButtonText",{get:function(){return this.getLocalizationString("modalApplyButtonText")},enumerable:!1,configurable:!0}),t.prototype.apply=function(){!!this.model.onApply&&!this.model.onApply()||this.hidePopup()},t.prototype.clickOutside=function(){},t.prototype.onKeyDown=function(e){(e.key==="Escape"||e.keyCode===27)&&this.model.onCancel(),i.prototype.onKeyDown.call(this,e)},t.prototype.updateOnShowing=function(){this.container&&this.container.addEventListener("wheel",this.onScrollOutsideCallback,{passive:!1}),i.prototype.updateOnShowing.call(this)},t.prototype.updateOnHiding=function(){this.container&&this.container.removeEventListener("wheel",this.onScrollOutsideCallback),i.prototype.updateOnHiding.call(this)},t}(vn),Hn=function(){return Hn=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Hn.apply(this,arguments)};function Lc(i,t){var e,r=Hn({},i);r.verticalPosition="top",r.horizontalPosition="left",r.showPointer=!1,r.isModal=!0,r.displayMode=i.displayMode||"popup";var n=new wt(i.componentName,i.data,r);n.isFocusedContent=(e=i.isFocusedContent)!==null&&e!==void 0?e:!0;var o=new Qn(n);if(!!t&&!!t.appendChild){var s=D.createElement("div");t.appendChild(s),o.setComponentElement(s)}o.container||o.initializePopupContainer();var a=function(l,u){u.isVisible||s&&o.resetComponentElement(),o.onVisibilityChanged.remove(a)};return o.onVisibilityChanged.add(a),o}function Mc(i,t){return i.isModal?new Qn(i):new Cn(i,t)}var xs=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),zn=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Os=function(i){xs(t,i);function t(e,r,n){r===void 0&&(r=null),n===void 0&&(n="buttongroupitemvalue");var o=i.call(this,e,r,n)||this;return o.typeName=n,o}return t.prototype.getType=function(){return this.typeName?this.typeName:"buttongroupitemvalue"},zn([y()],t.prototype,"iconName",void 0),zn([y()],t.prototype,"iconSize",void 0),zn([y()],t.prototype,"showCaption",void 0),t}(q),Ss=function(i){xs(t,i);function t(e){return i.call(this,e)||this}return t.prototype.getType=function(){return"buttongroup"},t.prototype.getItemValueType=function(){return"buttongroupitemvalue"},t.prototype.supportOther=function(){return!1},t}(At);x.addClass("buttongroup",[{name:"choices:buttongroupitemvalue[]"}],function(){return new Ss("")},"checkboxbase"),x.addClass("buttongroupitemvalue",[{name:"showCaption:boolean",default:!0},{name:"iconName:text"},{name:"iconSize:number"}],function(i){return new Os(i)},"itemvalue");var jc=function(){function i(t,e,r){this.question=t,this.item=e,this.index=r}return Object.defineProperty(i.prototype,"value",{get:function(){return this.item.value},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconName",{get:function(){return this.item.iconName},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconSize",{get:function(){return this.item.iconSize||24},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"caption",{get:function(){return this.item.locText},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showCaption",{get:function(){return this.item.showCaption||this.item.showCaption===void 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isRequired",{get:function(){return this.question.isRequired},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selected",{get:function(){return this.question.isItemSelected(this.item)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"readOnly",{get:function(){return this.question.isInputReadOnly||!this.item.isEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"name",{get:function(){return this.question.name+"_"+this.question.id},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"id",{get:function(){return this.question.inputId+"_"+this.index},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasErrors",{get:function(){return this.question.errors.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"describedBy",{get:function(){return this.question.errors.length>0?this.question.id+"_errors":null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"labelClass",{get:function(){return new O().append(this.question.cssClasses.item).append(this.question.cssClasses.itemSelected,this.selected).append(this.question.cssClasses.itemHover,!this.readOnly&&!this.selected).append(this.question.cssClasses.itemDisabled,this.question.isReadOnly||!this.item.isEnabled).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"css",{get:function(){return{label:this.labelClass,icon:this.question.cssClasses.itemIcon,control:this.question.cssClasses.itemControl,caption:this.question.cssClasses.itemCaption,decorator:this.question.cssClasses.itemDecorator}},enumerable:!1,configurable:!0}),i.prototype.onChange=function(){this.question.renderedValue=this.item.value},i}(),Fc=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Nc=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},mr=function(i){Fc(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.getSurvey=function(e){return this.owner},t.prototype.getType=function(){return"masksettings"},t.prototype.setData=function(e){var r=this,n=x.getProperties(this.getType());n.forEach(function(o){var s=e[o.name];r[o.name]=s!==void 0?s:o.defaultValue})},t.prototype.getData=function(){var e=this,r={},n=x.getProperties(this.getType());return n.forEach(function(o){var s=e[o.name];o.isDefaultValue(s)||(r[o.name]=s)}),r},t.prototype.processInput=function(e){return{value:e.prevValue,caretPosition:e.selectionEnd,cancelPreventDefault:!1}},t.prototype.getUnmaskedValue=function(e){return e},t.prototype.getMaskedValue=function(e){return e},t.prototype.getTextAlignment=function(){return"auto"},Nc([y()],t.prototype,"saveMaskedValue",void 0),t}(W);x.addClass("masksettings",[{name:"saveMaskedValue:boolean",visibleIf:function(i){return i?i.getType()!=="masksettings":!1}}],function(){return new mr});var _c=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),kc=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};function Un(i){for(var t=[],e=!1,r=Object.keys(b.maskSettings.patternDefinitions),n=0;n<i.length;n++){var o=i[n];o===b.maskSettings.patternEscapeChar?e=!0:e?(e=!1,t.push({type:"fixed",value:o})):t.push({type:r.indexOf(o)!==-1?"regex":"const",value:o})}return t}function Bc(i,t,e){for(var r=b.maskSettings.patternDefinitions[e.value];t<i.length;){if(i[t].match(r))return t;t++}return t}function qc(i,t,e){for(var r=i==null?"":i,n="",o=0,s=typeof t=="string"?Un(t):t,a=0;a<s.length;a++)switch(s[a].type){case"regex":if(o<r.length&&(o=Bc(r,o,s[a])),o<r.length)n+=r[o];else if(e)n+=b.maskSettings.patternPlaceholderChar;else return n;o++;break;case"const":case"fixed":n+=s[a].value,s[a].value===r[o]&&o++;break}return n}function Wn(i,t,e,r){r===void 0&&(r=!1);var n="";if(!i)return n;for(var o=typeof t=="string"?Un(t):t,s=0;s<o.length;s++)if(o[s].type==="fixed"&&!r&&(n+=o[s].value),o[s].type==="regex"){var a=b.maskSettings.patternDefinitions[o[s].value];if(!!i[s]&&i[s].match(a))n+=i[s];else if(e){n="";break}else break}return n}var $n=function(i){_c(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.literals=[],e}return t.prototype.updateLiterals=function(){this.literals=Un(this.pattern||"")},t.prototype.onPropertyValueChanged=function(e,r,n){e==="pattern"&&this.updateLiterals()},t.prototype.getType=function(){return"patternmask"},t.prototype.fromJSON=function(e,r){i.prototype.fromJSON.call(this,e,r),this.updateLiterals()},t.prototype._getMaskedValue=function(e,r){r===void 0&&(r=!1);var n=e==null?"":e;return qc(n,this.literals,r)},t.prototype._getUnmaskedValue=function(e,r){r===void 0&&(r=!1);var n=e==null?"":e;return Wn(n,this.literals,r)},t.prototype.processInput=function(e){var r={value:e.prevValue,caretPosition:e.selectionEnd,cancelPreventDefault:!1};if(!e.insertedChars&&e.selectionStart===e.selectionEnd)return r;var n=e.prevValue.slice(0,e.selectionStart)+(e.insertedChars||""),o=Wn(e.prevValue.slice(0,e.selectionStart),this.literals.slice(0,e.selectionStart),!1),s=Wn(e.prevValue.slice(e.selectionEnd),this.literals.slice(e.selectionEnd),!1,!0);return r.value=this._getMaskedValue(o+(e.insertedChars||"")+s,!0),!e.insertedChars&&e.inputDirection==="backward"?r.caretPosition=e.selectionStart:r.caretPosition=this._getMaskedValue(n).length,r},t.prototype.getMaskedValue=function(e){return this._getMaskedValue(e,!0)},t.prototype.getUnmaskedValue=function(e){return this._getUnmaskedValue(e,!0)},kc([y()],t.prototype,"pattern",void 0),t}(mr);x.addClass("patternmask",[{name:"pattern"}],function(){return new $n},"masksettings");var Qc=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),mt=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};function Hc(i,t,e){t===void 0&&(t=!0),e===void 0&&(e=3);var r=[];if(t){for(var n=i.length-e;n>-e;n-=e)r.push(i.substring(n,n+e));r=r.reverse()}else for(var n=0;n<i.length;n+=e)r.push(i.substring(n,n+e));return r}var Jn=function(i){Qc(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.calccaretPosition=function(e,r,n){for(var o=e?this.displayNumber(this.parseNumber(e),!1).length:0,s=0,a=r.selectionStart,l=!r.insertedChars&&r.inputDirection==="forward",u=0;u<n.length;u++){var d=n[u];if(d!==this.thousandsSeparator&&s++,s===o+(l?1:0)){l?a=u:a=u+1;break}}return a},t.prototype.numericalCompositionIsEmpty=function(e){return!e.integralPart&&!e.fractionalPart},t.prototype.displayNumber=function(e,r,n){r===void 0&&(r=!0),n===void 0&&(n=!1);var o=e.integralPart;r&&!!o&&(o=Hc(o).join(this.thousandsSeparator));var s=e.fractionalPart,a=e.isNegative?"-":"";if(s===""){if(n)return!o||o==="0"?o:a+o;var l=e.hasDecimalSeparator&&!n?this.decimalSeparator:"",u=o+l;return u==="0"?u:a+u}else return o=o||"0",s=s.substring(0,this.precision),[a+o,s].join(this.decimalSeparator)},t.prototype.convertNumber=function(e){var r,n=e.isNegative?"-":"";return e.fractionalPart?r=parseFloat(n+(e.integralPart||"0")+"."+e.fractionalPart.substring(0,this.precision)):r=parseInt(n+e.integralPart||"0"),r},t.prototype.validateNumber=function(e,r){var n=this.min||Number.MIN_SAFE_INTEGER,o=this.max||Number.MAX_SAFE_INTEGER;if(this.numericalCompositionIsEmpty(e))return!0;if(this.min!==void 0||this.max!==void 0){var s=this.convertNumber(e);if(Number.isNaN(s)||s>=n&&s<=o)return!0;if(!r){if(!e.hasDecimalSeparator&&s!=0){var a=s,l=s;if(s>0){if(s+1>n&&s<=o)return!0;for(;a=a*10+9,l=l*10,!(l>o);)if(a>n)return!0;return!1}if(s<0){if(s>=n&&s-1<o)return!0;for(;a=a*10,l=l*10-9,!(a<n);)if(l<o)return!0;return!1}}else{var u=Math.pow(.1,(e.fractionalPart||"").length);if(s>=0)return s+u>n&&s<=o;if(s<0)return s>=n&&s-u<o}return s>=0&&s<=o||s<0&&s>=n}return!1}return!0},t.prototype.parseNumber=function(e){for(var r={integralPart:"",fractionalPart:"",hasDecimalSeparator:!1,isNegative:!1},n=e==null?"":e.toString(),o=0,s=0;s<n.length;s++){var a=n[s];switch(a){case"-":{this.allowNegativeValues&&(this.min===void 0||this.min<0)&&o++;break}case this.decimalSeparator:{this.precision>0&&(r.hasDecimalSeparator=!0);break}case this.thousandsSeparator:break;default:a.match(wn)&&(r.hasDecimalSeparator?r.fractionalPart+=a:r.integralPart+=a)}}return r.isNegative=o%2!==0,r.integralPart.length>1&&r.integralPart[0]==="0"&&(r.integralPart=r.integralPart.slice(1)),r},t.prototype.getNumberMaskedValue=function(e,r){r===void 0&&(r=!1);var n=this.parseNumber(e);if(!this.validateNumber(n,r))return null;var o=this.displayNumber(n,!0,r);return o},t.prototype.getNumberUnmaskedValue=function(e){var r=this.parseNumber(e);if(!this.numericalCompositionIsEmpty(r))return this.convertNumber(r)},t.prototype.getTextAlignment=function(){return"right"},t.prototype.getMaskedValue=function(e){var r=e==null?"":e.toString();return r=r.replace(".",this.decimalSeparator),this.getNumberMaskedValue(r,!0)},t.prototype.getUnmaskedValue=function(e){return this.getNumberUnmaskedValue(e)},t.prototype.processInput=function(e){var r={value:e.prevValue,caretPosition:e.selectionEnd,cancelPreventDefault:!1},n=e.prevValue.slice(0,e.selectionStart)+(e.insertedChars||""),o=e.prevValue.slice(e.selectionEnd),s=n+o,a=this.parseNumber(s);if(!this.validateNumber(a,!1))return r;var l=this.getNumberMaskedValue(s),u=this.calccaretPosition(n,e,l);return r.value=l,r.caretPosition=u,r},t.prototype.getType=function(){return"numericmask"},t.prototype.isPropertyEmpty=function(e){return e===""||e===void 0||e===null},mt([y()],t.prototype,"allowNegativeValues",void 0),mt([y()],t.prototype,"decimalSeparator",void 0),mt([y()],t.prototype,"precision",void 0),mt([y()],t.prototype,"thousandsSeparator",void 0),mt([y()],t.prototype,"min",void 0),mt([y()],t.prototype,"max",void 0),t}(mr);x.addClass("numericmask",[{name:"allowNegativeValues:boolean",default:!0},{name:"decimalSeparator",default:".",maxLength:1},{name:"thousandsSeparator",default:",",maxLength:1},{name:"precision:number",default:2,minValue:0},{name:"min:number"},{name:"max:number"}],function(){return new Jn},"masksettings");var zc=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),vr=function(){return vr=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},vr.apply(this,arguments)},Ts=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};function Is(i,t){switch(i){case"hour":case"minute":case"second":case"day":case"month":return 2;case"timeMarker":case"year":return t;default:return 1}}function Uc(i,t){var e=t;return i.count<i.maxCount&&(i.type==="day"&&parseInt(t[0])===0||i.type==="month"&&parseInt(t[0])===0)&&(e=t.slice(1,t.length)),e}function Rs(i,t){var e=2e3;if(e>t&&(e=parseInt(t.toString().slice(0,t.toString().length-2))*100),e<i){var r=(t-i)/2+i;e=parseInt(r.toString().slice(0,r.toString().length-1))*10}return e>=i&&e<=t?e:i}function Wc(i){for(var t=[],e,r=function(s,a,l){if(l===void 0&&(l=!1),!!e&&e===s){t[t.length-1].count++;var u=Is(s,t[t.length-1].count);t[t.length-1].maxCount=u}else{var u=Is(s,1);t.push({type:s,value:a,count:1,maxCount:u,upperCase:l})}},n=0;n<i.length;n++){var o=i[n];switch(o){case"m":r("month",o);break;case"d":r("day",o);break;case"y":r("year",o);break;case"h":r("hour",o,!1);break;case"H":r("hour",o,!0);break;case"M":r("minute",o);break;case"s":r("second",o);break;case"t":r("timeMarker",o);break;case"T":r("timeMarker",o,!0);break;default:t.push({type:"separator",value:o,count:1,maxCount:1,upperCase:!1});break}e=t[t.length-1].type}return t}var Es=function(i){zc(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.defaultDate="1970-01-01T",e.turnOfTheCentury=68,e.twelve=12,e.lexems=[],e.inputDateTimeData=[],e.validBeginningOfNumbers={hour:1,hourU:2,minute:5,second:5,day:3,month:1},e}return Object.defineProperty(t.prototype,"hasDatePart",{get:function(){return this.lexems.some(function(e){return e.type==="day"||e.type==="month"||e.type==="year"})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTimePart",{get:function(){return this.lexems.some(function(e){return e.type==="hour"||e.type==="minute"||e.type==="second"})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"is12Hours",{get:function(){return this.lexems.filter(function(e){return e.type==="hour"&&!e.upperCase}).length>0},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"datetimemask"},t.prototype.updateLiterals=function(){this.lexems=Wc(this.pattern||"")},t.prototype.leaveOnlyNumbers=function(e){for(var r="",n=0;n<e.length;n++)e[n].match(wn)&&(r+=e[n]);return r},t.prototype.getMaskedStrFromISO=function(e){var r=this,n=new Date(e);return this.initInputDateTimeData(),this.hasDatePart||(n=new Date(this.defaultDate+e)),isNaN(n)||this.lexems.forEach(function(o,s){var a=r.inputDateTimeData[s];switch(a.isCompleted=!0,o.type){case"hour":{r.is12Hours?a.value=((n.getHours()-1)%r.twelve+1).toString():a.value=n.getHours().toString();break}case"minute":{a.value=n.getMinutes().toString();break}case"second":{a.value=n.getSeconds().toString();break}case"timeMarker":{var l=n.getHours()>=r.twelve?"pm":"am";a.value=o.upperCase?l.toUpperCase():l;break}case"day":{a.value=n.getDate().toString();break}case"month":{a.value=(n.getMonth()+1).toString();break}case"year":{var u=n.getFullYear();o.count==2&&(u=u%100),a.value=u.toString();break}}}),this.getFormatedString(!0)},t.prototype.initInputDateTimeData=function(){var e=this;this.inputDateTimeData=[],this.lexems.forEach(function(r){e.inputDateTimeData.push({lexem:r,isCompleted:!1,value:void 0})})},t.prototype.getISO_8601Format=function(e){var r=[],n=[];if(e.year!==void 0){var o=this.getPlaceholder(4,e.year.toString(),"0")+e.year;r.push(o)}if(e.month!==void 0&&e.year!==void 0){var s=this.getPlaceholder(2,e.month.toString(),"0")+e.month;r.push(s)}if(e.day!==void 0&&e.month!==void 0&&e.year!==void 0){var a=this.getPlaceholder(2,e.day.toString(),"0")+e.day;r.push(a)}if(e.hour!==void 0){var l=this.getPlaceholder(2,e.hour.toString(),"0")+e.hour;n.push(l)}if(e.minute!==void 0&&e.hour!==void 0){var u=this.getPlaceholder(2,e.minute.toString(),"0")+e.minute;n.push(u)}if(e.second!==void 0&&e.minute!==void 0&&e.hour!==void 0){var d=this.getPlaceholder(2,e.second.toString(),"0")+e.second;n.push(d)}var v=[];return r.length>0&&v.push(r.join("-")),n.length>1&&v.push(n.join(":")),v.join("T")},t.prototype.isYearValid=function(e){if(e.min===void 0&&e.max===void 0)return!1;var r=e.year.toString(),n=e.min.toISOString().slice(0,r.length),o=e.max.toISOString().slice(0,r.length);return e.year>=parseInt(n)&&e.year<=parseInt(o)},t.prototype.createIDateTimeCompositionWithDefaults=function(e,r){var n=e.min,o=e.max,s=e.year!==void 0?e.year:Rs(n.getFullYear(),o.getFullYear()),a=e.month!==void 0?e.month:r&&this.hasDatePart?12:1,l=e.day!==void 0?e.day:r&&this.hasDatePart?this.getMaxDateForMonth(s,a):1,u=e.hour!==void 0?e.hour:r?23:0,d=e.minute!==void 0?e.minute:r?59:0,v=e.second!==void 0?e.second:r?59:0;return{year:s,month:a,day:l,hour:u,minute:d,second:v}},t.prototype.getMaxDateForMonth=function(e,r){return r==2?e%4==0&&e%100!=0||e%400?29:28:[31,28,31,30,31,30,31,31,30,31,30,31][r-1]},t.prototype.isDateValid=function(e){var r=e.min,n=e.max,o=e.year!==void 0?e.year:Rs(r.getFullYear(),n.getFullYear()),s=e.month!==void 0?e.month:1,a=e.day!==void 0?e.day:1,l=s-1,u=new Date(this.getISO_8601Format(this.createIDateTimeCompositionWithDefaults(e,!1))),d=new Date(this.getISO_8601Format(this.createIDateTimeCompositionWithDefaults(e,!0)));return!isNaN(u)&&u.getDate()===a&&u.getMonth()===l&&u.getFullYear()===o&&d>=e.min&&u<=e.max},t.prototype.getPlaceholder=function(e,r,n){var o=e-(r||"").length,s=o>0?n.repeat(o):"";return s},t.prototype.isDateValid12=function(e){return this.is12Hours?this.is12Hours&&e.hour>this.twelve?!1:e.timeMarker?e.timeMarker[0].toLowerCase()==="p"?(e.hour!==this.twelve&&(e.hour+=this.twelve),this.isDateValid(e)):(e.hour===this.twelve&&(e.hour=0),this.isDateValid(e)):this.isDateValid(e)?!0:(e.hour+=this.twelve,this.isDateValid(e)):this.isDateValid(e)},t.prototype.updateTimeMarkerInputDateTimeData=function(e,r){var n=e.value;if(!!n){var o="timeMarker",s=vr({},r);s[o]=n,this.isDateValid12(s)?e.isCompleted=!0:n=n.slice(0,n.length-1),e.value=n||void 0,r[o]=n||void 0}},t.prototype.updateInputDateTimeData=function(e,r){var n=e.value;if(!!n){var o=e.lexem.type,s=vr({},r);if(s[o]=parseInt(n),n.length===e.lexem.maxCount)if(this.isDateValid12(s)){e.isCompleted=!0,e.value=n||void 0,r[o]=parseInt(n)>0?parseInt(n):void 0;return}else n=n.slice(0,n.length-1);s[o]=parseInt(n);var a=parseInt(n[0]),l=this.validBeginningOfNumbers[o+(e.lexem.upperCase?"U":"")];o==="year"&&!this.isYearValid(s)?(n=n.slice(0,n.length-1),e.isCompleted=!1):l!==void 0&&a>l?this.isDateValid12(s)?e.isCompleted=!0:n=n.slice(0,n.length-1):l!==void 0&&a!==0&&a<=l&&(this.checkValidationDateTimePart(s,o,e),e.isCompleted&&!this.isDateValid12(s)&&(n=n.slice(0,n.length-1))),e.value=n||void 0,r[o]=parseInt(n)>0?parseInt(n):void 0}},t.prototype.checkValidationDateTimePart=function(e,r,n){var o=e[r],s=o*10,a=10;r==="month"&&(a=3),r==="hour"&&(a=this.is12Hours?3:5),n.isCompleted=!0;for(var l=0;l<a;l++)if(e[r]=s+l,this.isDateValid12(e)){n.isCompleted=!1;break}e[r]=o},t.prototype.getCorrectDatePartFormat=function(e,r){var n=e.lexem,o=e.value||"";if(!!o&&n.type==="timeMarker")return r&&(o=o+this.getPlaceholder(n.count,o,n.value)),o;if(!!o&&e.isCompleted&&(o=parseInt(o).toString()),!!o&&e.isCompleted){var s=this.getPlaceholder(n.count,o,"0");o=s+o}else o=Uc(n,o),r&&(o+=this.getPlaceholder(n.count,o,n.value));return o},t.prototype.createIDateTimeComposition=function(){var e,r;this.hasDatePart?(e=this.min||"0001-01-01",r=this.max||"9999-12-31"):(e=this.defaultDate+(this.min||"00:00:00"),r=this.defaultDate+(this.max||"23:59:59"));var n={hour:void 0,minute:void 0,second:void 0,day:void 0,month:void 0,year:void 0,min:new Date(e),max:new Date(r)};return n},t.prototype.parseTwoDigitYear=function(e){var r=e.value;if(e.lexem.type!=="year"||e.lexem.count>2)return r;!!this.max&&this.max.length>=4&&(this.turnOfTheCentury=parseInt(this.max.slice(2,4)));var n=parseInt(r),o=(n>this.turnOfTheCentury?"19":"20")+r;return o},t.prototype.getFormatedString=function(e){var r="",n="",o=!1,s=this.inputDateTimeData.length-1;if(!e){var a=this.inputDateTimeData.filter(function(V){return!!V.value});s=this.inputDateTimeData.indexOf(a[a.length-1])}for(var l=0;l<this.inputDateTimeData.length;l++){var u=this.inputDateTimeData[l];switch(u.lexem.type){case"timeMarker":case"hour":case"minute":case"second":case"day":case"month":case"year":if(u.value===void 0&&!e)return r+=o?n:"",r;var d=e||s>l,v=this.getCorrectDatePartFormat(u,d);r+=n+v,o=u.isCompleted;break;case"separator":n=u.lexem.value;break}}return r},t.prototype.cleanTimeMarker=function(e,r){var n="";e=e.toUpperCase();for(var o=0;o<e.length;o++)(!n&&(e[o]=="P"||e[o]=="A")||n&&e[o]=="M")&&(n+=e[o]);return r?n=n.toUpperCase():n=n.toLowerCase(),n},t.prototype.setInputDateTimeData=function(e){var r=this,n=0;this.initInputDateTimeData(),this.lexems.forEach(function(o,s){if(e.length>0&&n<e.length){if(o.type==="separator")return;var a=r.inputDateTimeData[s],l=e[n],u=void 0;o.type==="timeMarker"?u=r.cleanTimeMarker(l,o.upperCase):u=r.leaveOnlyNumbers(l),a.value=u.slice(0,o.maxCount),n++}})},t.prototype._getMaskedValue=function(e,r){var n=this;r===void 0&&(r=!0);var o=e==null?"":e.toString(),s=this.getParts(o);this.setInputDateTimeData(s);var a=this.createIDateTimeComposition();this.inputDateTimeData.forEach(function(u){u.lexem.type==="timeMarker"?n.updateTimeMarkerInputDateTimeData(u,a):n.updateInputDateTimeData(u,a)});var l=this.getFormatedString(r);return l},t.prototype.getParts=function(e){for(var r=[],n=this.lexems.filter(function(v){return v.type!=="separator"}),o=this.lexems.filter(function(v){return v.type==="separator"}).map(function(v){return v.value}),s="",a=!1,l=!1,u=0;u<e.length;u++){var d=e[u];if(d.match(wn)||d===n[r.length].value||n[r.length].type==="timeMarker"?(a=!1,l=!1,s+=d):o.indexOf(d)!==-1?l||(a=!0,r.push(s),s=""):a||(l=!0,r.push(s),s=""),r.length>=n.length){a=!1;break}}return(s!=""||a)&&r.push(s),r},t.prototype.getUnmaskedValue=function(e){var r=this,n,o=e==null?"":e.toString(),s=this.getParts(o);this.setInputDateTimeData(s);var a=(n=this.inputDateTimeData.filter(function(d){return d.lexem.type==="timeMarker"})[0])===null||n===void 0?void 0:n.value.toLowerCase()[0],l=this.createIDateTimeComposition(),u=!1;return this.inputDateTimeData.forEach(function(d){var v=d.value;if(!(d.lexem.type=="timeMarker"||d.lexem.type=="separator")){if(!v||v.length<d.lexem.count){u=!0;return}var V=parseInt(r.parseTwoDigitYear(d));d.lexem.type=="hour"&&a==="p"&&V!=r.twelve&&(V+=r.twelve),l[d.lexem.type]=V}}),u?"":this.getISO_8601Format(l)},t.prototype.getMaskedValue=function(e){return this.getMaskedStrFromISO(e)},t.prototype.processInput=function(e){var r={value:e.prevValue,caretPosition:e.selectionEnd,cancelPreventDefault:!1},n=e.prevValue.slice(0,e.selectionStart),o=e.prevValue.slice(e.selectionEnd);return r.value=this._getMaskedValue(n+(e.insertedChars||"")+o),!e.insertedChars&&e.inputDirection==="backward"?r.caretPosition=e.selectionStart:r.caretPosition=this._getMaskedValue(n+(e.insertedChars||""),!1).length,r},Ts([y()],t.prototype,"min",void 0),Ts([y()],t.prototype,"max",void 0),t}($n);x.addClass("datetimemask",[{name:"min",type:"datetime",enableIf:function(i){return!!i.pattern}},{name:"max",type:"datetime",enableIf:function(i){return!!i.pattern}}],function(){return new Es},"patternmask");var $c=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ds=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},As=function(i){$c(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.getType=function(){return"currencymask"},t.prototype.wrapText=function(e){var r=this.prefix||"",n=this.suffix||"",o=e;return o&&(o.indexOf(r)===-1&&(o=r+o),o.indexOf(n)===-1&&(o+=n),o)},t.prototype.unwrapInputArgs=function(e){var r=e.prevValue;if(!!r){if(this.prefix&&r.indexOf(this.prefix)!==-1){r=r.slice(r.indexOf(this.prefix)+this.prefix.length);var n=(this.prefix||"").length;e.selectionStart=Math.max(e.selectionStart-n,0),e.selectionEnd-=n}this.suffix&&r.indexOf(this.suffix)!==-1&&(r=r.slice(0,r.indexOf(this.suffix))),e.prevValue=r}},t.prototype.processInput=function(e){this.unwrapInputArgs(e);var r=i.prototype.processInput.call(this,e),n=(this.prefix||"").length;return r.value&&(r.caretPosition+=n),r.value=this.wrapText(r.value),r},t.prototype.getMaskedValue=function(e){var r=i.prototype.getMaskedValue.call(this,e);return this.wrapText(r)},Ds([y()],t.prototype,"prefix",void 0),Ds([y()],t.prototype,"suffix",void 0),t}(Jn);x.addClass("currencymask",[{name:"prefix"},{name:"suffix"}],function(){return new As},"numericmask");var br,Gn;br="1.11.12",Gn="2024-08-20";function Jc(i,t){if(br!=i){var e="survey-core has version '"+br+"' and "+t+" has version '"+i+"'. SurveyJS libraries should have the same versions to work correctly.";console.error(e)}}function Gc(i){Ls(i)}function Ls(i){Kc(i,Ms,Gn)}function Zc(i){return Ms[i.toString()]===!0}var Ms={};function Kc(i,t,e){if(!!i){var r=function(s){var a={},l,u=0,d,v=0,V,E="",I=String.fromCharCode,k=s.length,N="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(l=0;l<64;l++)a[N.charAt(l)]=l;for(d=0;d<k;d++){var j=a[s.charAt(d)];for(u=(u<<6)+j,v+=6;v>=8;)((V=u>>>(v-=8)&255)||d<k-2)&&(E+=I(V))}return E},n=r(i);if(!!n){var o=n.indexOf(";");o<0||!Yc(n.substring(0,o))||(n=n.substring(o+1),n.split(",").forEach(function(s){var a=s.indexOf("=");a>0&&(t[s.substring(0,a)]=new Date(e)<=new Date(s.substring(a+1)))}))}}}function Yc(i){if(!i)return!0;var t="domains:",e=i.indexOf(t);if(e<0)return!0;var r=i.substring(e+t.length).toLowerCase().split(",");if(!Array.isArray(r)||r.length===0)return!0;var n=R.getLocation();if(!!n&&!!n.hostname){var o=n.hostname.toLowerCase();r.push("localhost");for(var s=0;s<r.length;s++)if(o.indexOf(r[s])>-1)return!0;return!1}return!0}var Xc={"$main-color":"#1ab394","$add-button-color":"#1948b3","$remove-button-color":"#ff1800","$disable-color":"#dbdbdb","$progress-text-color":"#9d9d9d","$disabled-label-color":"rgba(64, 64, 64, 0.5)","$slider-color":"white","$disabled-slider-color":"#cfcfcf","$error-color":"#d52901","$text-color":"#404040","$light-text-color":"#fff","$checkmark-color":"#fff","$progress-buttons-color":"#8dd9ca","$inputs-background-color":"transparent","$main-hover-color":"#9f9f9f","$body-container-background-color":"#f4f4f4","$text-border-color":"#d4d4d4","$disabled-text-color":"rgba(64, 64, 64, 0.5)","$border-color":"rgb(64, 64, 64, 0.5)","$header-background-color":"#e7e7e7","$answer-background-color":"rgba(26, 179, 148, 0.2)","$error-background-color":"rgba(213, 41, 1, 0.2)","$radio-checked-color":"#404040","$clean-button-color":"#1948b3","$body-background-color":"#ffffff","$foreground-light":"#909090","$font-family":"Raleway"},ep={"$header-background-color":"#e7e7e7","$body-container-background-color":"#f4f4f4","$main-color":"#1ab394","$main-hover-color":"#0aa384","$body-background-color":"white","$inputs-background-color":"white","$text-color":"#6d7072","$text-input-color":"#6d7072","$header-color":"#6d7072","$border-color":"#e7e7e7","$error-color":"#ed5565","$error-background-color":"#fcdfe2","$progress-text-color":"#9d9d9d","$disable-color":"#dbdbdb","$disabled-label-color":"rgba(64, 64, 64, 0.5)","$slider-color":"white","$disabled-switch-color":"#9f9f9f","$disabled-slider-color":"#cfcfcf","$foreground-light":"#909090","$foreground-disabled":"#161616","$background-dim":"#f3f3f3","$progress-buttons-color":"#8dd9ca","$progress-buttons-line-color":"#d4d4d4"},tp={"$header-background-color":"#4a4a4a","$body-container-background-color":"#f8f8f8","$main-color":"#f78119","$main-hover-color":"#e77109","$body-background-color":"white","$inputs-background-color":"white","$text-color":"#4a4a4a","$text-input-color":"#4a4a4a","$header-color":"#f78119","$border-color":"#e7e7e7","$error-color":"#ed5565","$error-background-color":"#fcdfe2","$progress-text-color":"#9d9d9d","$disable-color":"#dbdbdb","$disabled-label-color":"rgba(64, 64, 64, 0.5)","$slider-color":"white","$disabled-switch-color":"#9f9f9f","$disabled-slider-color":"#cfcfcf","$foreground-light":"#909090","$foreground-disabled":"#161616","$background-dim":"#f3f3f3","$progress-buttons-color":"#f7b781","$progress-buttons-line-color":"#d4d4d4"},rp={"$header-background-color":"#d9d8dd","$body-container-background-color":"#f6f7f2","$main-color":"#3c4f6d","$main-hover-color":"#2c3f5d","$body-background-color":"white","$inputs-background-color":"white","$text-color":"#4a4a4a","$text-input-color":"#4a4a4a","$header-color":"#6d7072","$border-color":"#e7e7e7","$error-color":"#ed5565","$error-background-color":"#fcdfe2","$progress-text-color":"#9d9d9d","$disable-color":"#dbdbdb","$disabled-label-color":"rgba(64, 64, 64, 0.5)","$slider-color":"white","$disabled-switch-color":"#9f9f9f","$disabled-slider-color":"#cfcfcf","$foreground-light":"#909090","$foreground-disabled":"#161616","$background-dim":"#f3f3f3","$progress-buttons-color":"#839ec9","$progress-buttons-line-color":"#d4d4d4"},np={"$header-background-color":"#ddd2ce","$body-container-background-color":"#f7efed","$main-color":"#68656e","$main-hover-color":"#58555e","$body-background-color":"white","$inputs-background-color":"white","$text-color":"#4a4a4a","$text-input-color":"#4a4a4a","$header-color":"#6d7072","$border-color":"#e7e7e7","$error-color":"#ed5565","$error-background-color":"#fcdfe2","$progress-text-color":"#9d9d9d","$disable-color":"#dbdbdb","$disabled-label-color":"rgba(64, 64, 64, 0.5)","$slider-color":"white","$disabled-switch-color":"#9f9f9f","$disabled-slider-color":"#cfcfcf","$foreground-light":"#909090","$foreground-disabled":"#161616","$background-dim":"#f3f3f3","$progress-buttons-color":"#c6bed4","$progress-buttons-line-color":"#d4d4d4"},ip={"$header-background-color":"#cdccd2","$body-container-background-color":"#efedf4","$main-color":"#0f0f33","$main-hover-color":"#191955","$body-background-color":"white","$inputs-background-color":"white","$text-color":"#0f0f33","$text-input-color":"#0f0f33","$header-color":"#0f0f33","$border-color":"#e7e7e7","$error-color":"#ed5565","$error-background-color":"#fcdfe2","$progress-text-color":"#9d9d9d","$disable-color":"#dbdbdb","$disabled-label-color":"rgba(64, 64, 64, 0.5)","$slider-color":"white","$disabled-switch-color":"#9f9f9f","$disabled-slider-color":"#cfcfcf","$foreground-light":"#909090","$foreground-disabled":"#161616","$background-dim":"#f3f3f3","$progress-buttons-color":"#747491","$progress-buttons-line-color":"#d4d4d4"},op={"$header-background-color":"#82b8da","$body-container-background-color":"#dae1e7","$main-color":"#3c3b40","$main-hover-color":"#1e1d20","$body-background-color":"white","$inputs-background-color":"white","$text-color":"#000","$text-input-color":"#000","$header-color":"#000","$border-color":"#e7e7e7","$error-color":"#ed5565","$error-background-color":"#fcdfe2","$disable-color":"#dbdbdb","$progress-text-color":"#9d9d9d","$disabled-label-color":"rgba(64, 64, 64, 0.5)","$slider-color":"white","$disabled-switch-color":"#9f9f9f","$disabled-slider-color":"#cfcfcf","$foreground-light":"#909090","$foreground-disabled":"#161616","$background-dim":"#f3f3f3","$progress-buttons-color":"#d1c9f5","$progress-buttons-line-color":"#d4d4d4"},sp={"$header-background-color":"#323232","$body-container-background-color":"#f8f8f8","$main-color":"#5ac8fa","$main-hover-color":"#06a1e7","$body-background-color":"white","$inputs-background-color":"white","$text-color":"#000","$text-input-color":"#000","$header-color":"#000","$border-color":"#e7e7e7","$error-color":"#ed5565","$error-background-color":"#fcdfe2","$disable-color":"#dbdbdb","$progress-text-color":"#9d9d9d","$disabled-label-color":"rgba(64, 64, 64, 0.5)","$slider-color":"white","$disabled-switch-color":"#9f9f9f","$disabled-slider-color":"#cfcfcf","$foreground-light":"#909090","$foreground-disabled":"#161616","$background-dim":"#f3f3f3","$progress-buttons-color":"#acdcf2","$progress-buttons-line-color":"#d4d4d4"};function ap(i,t){Object.keys(i||{}).forEach(function(e){var r=e.substring(1);t.style.setProperty("--"+r,i[e])})}var js=function(){function i(){i.autoApplyTheme()}return i.autoApplyTheme=function(){if(!(oe.currentType==="bootstrap"||oe.currentType==="bootstrapmaterial")){var t=i.getIncludedThemeCss();t.length===1&&i.applyTheme(t[0].name)}},i.getAvailableThemes=function(){var t=oe.getAvailableThemes().filter(function(e){return["defaultV2","default","modern"].indexOf(e)!==-1}).map(function(e){return{name:e,theme:oe[e]}});return t},i.getIncludedThemeCss=function(){if(typeof b.environment=="undefined")return[];var t=b.environment.rootElement,e=i.getAvailableThemes(),r=St(t)?t.host:t;if(r){var n=getComputedStyle(r);if(n.length)return e.filter(function(o){return o.theme.variables&&n.getPropertyValue(o.theme.variables.themeMark)})}return[]},i.findSheet=function(t){if(typeof b.environment=="undefined")return null;for(var e=b.environment.root.styleSheets,r=0;r<e.length;r++)if(!!e[r].ownerNode&&e[r].ownerNode.id===t)return e[r];return null},i.createSheet=function(t){var e=b.environment.stylesSheetsMountContainer,r=D.createElement("style");return r.id=t,r.appendChild(new Text("")),Nr(e).appendChild(r),i.Logger&&i.Logger.log("style sheet "+t+" created"),r.sheet},i.applyTheme=function(t,e){if(t===void 0&&(t="default"),typeof b.environment!="undefined"){var r=b.environment.rootElement,n=St(r)?r.host:r;if(oe.currentType=t,i.Enabled){if(t!=="bootstrap"&&t!=="bootstrapmaterial"){ap(i.ThemeColors[t],n),i.Logger&&i.Logger.log("apply theme "+t+" completed");return}var o=i.ThemeCss[t];if(!o){oe.currentType="defaultV2";return}i.insertStylesRulesIntoDocument();var s=e||i.ThemeSelector[t]||i.ThemeSelector.default,a=(t+s).trim(),l=i.findSheet(a);if(!l){l=i.createSheet(a);var u=i.ThemeColors[t]||i.ThemeColors.default;Object.keys(o).forEach(function(d){var v=o[d];Object.keys(u||{}).forEach(function(V){return v=v.replace(new RegExp("\\"+V,"g"),u[V])});try{d.indexOf("body")===0?l.insertRule(d+" { "+v+" }",0):l.insertRule(s+d+" { "+v+" }",0)}catch{}})}}i.Logger&&i.Logger.log("apply theme "+t+" completed")}},i.insertStylesRulesIntoDocument=function(){if(i.Enabled){var t=i.findSheet(i.SurveyJSStylesSheetId);t||(t=i.createSheet(i.SurveyJSStylesSheetId)),Object.keys(i.Styles).length&&Object.keys(i.Styles).forEach(function(e){try{t.insertRule(e+" { "+i.Styles[e]+" }",0)}catch{}}),Object.keys(i.Media).length&&Object.keys(i.Media).forEach(function(e){try{t.insertRule(i.Media[e].media+" { "+e+" { "+i.Media[e].style+" } }",0)}catch{}})}},i.SurveyJSStylesSheetId="surveyjs-styles",i.Styles={},i.Media={},i.ThemeColors={modern:Xc,default:ep,orange:tp,darkblue:rp,darkrose:np,stone:ip,winter:op,winterstone:sp},i.ThemeCss={},i.ThemeSelector={default:".sv_main ",modern:".sv-root-modern "},i.Enabled=!0,i}();_e.prototype.onBeforeRunConstructor=function(){R.isAvailable()&&js.autoApplyTheme()};var ze={root:"sv_main sv_default_css",rootProgress:"sv_progress",container:"sv_container",header:"sv_header",bodyContainer:"sv-components-row",body:"sv_body",bodyEmpty:"sv_body sv_body_empty",footer:"sv_nav",title:"",description:"",logo:"sv_logo",logoImage:"sv_logo__image",headerText:"sv_header__text",navigationButton:"sv_nav_btn",completedPage:"sv_completed_page",navigation:{complete:"sv_complete_btn",prev:"sv_prev_btn",next:"sv_next_btn",start:"sv_start_btn",preview:"sv_preview_btn",edit:"sv_edit_btn"},progress:"sv_progress",progressBar:"sv_progress_bar",progressTextInBar:"sv-hidden",progressButtonsContainerCenter:"sv_progress-buttons__container-center",progressButtonsContainer:"sv_progress-buttons__container",progressButtonsImageButtonLeft:"sv_progress-buttons__image-button-left",progressButtonsImageButtonRight:"sv_progress-buttons__image-button-right",progressButtonsImageButtonHidden:"sv_progress-buttons__image-button--hidden",progressButtonsListContainer:"sv_progress-buttons__list-container",progressButtonsList:"sv_progress-buttons__list",progressButtonsListElementPassed:"sv_progress-buttons__list-element--passed",progressButtonsListElementCurrent:"sv_progress-buttons__list-element--current",progressButtonsListElementNonClickable:"sv_progress-buttons__list-element--nonclickable",progressButtonsPageTitle:"sv_progress-buttons__page-title",progressButtonsPageDescription:"sv_progress-buttons__page-description",page:{root:"sv_p_root",title:"sv_page_title",description:""},pageTitle:"sv_page_title",pageDescription:"",row:"sv_row",question:{mainRoot:"sv_q sv_qstn",flowRoot:"sv_q_flow sv_qstn",header:"",headerLeft:"title-left",content:"",contentLeft:"content-left",titleLeftRoot:"sv_qstn_left",requiredText:"sv_q_required_text",title:"sv_q_title",titleExpandable:"sv_q_title_expandable",titleExpanded:"sv_q_title_expanded",titleCollapsed:"sv_q_title_collapsed",number:"sv_q_num",description:"sv_q_description",comment:"",required:"",titleRequired:"",hasError:"",indent:20,footer:"sv_q_footer",formGroup:"form-group",asCell:"sv_matrix_cell",icon:"sv_question_icon",iconExpanded:"sv_expanded",disabled:"sv_q--disabled"},panel:{title:"sv_p_title",titleExpandable:"sv_p_title_expandable",titleExpanded:"sv_p_title_expanded",titleCollapsed:"sv_p_title_collapsed",titleOnError:"",icon:"sv_panel_icon",iconExpanded:"sv_expanded",description:"sv_p_description",container:"sv_p_container",footer:"sv_p_footer",number:"sv_q_num",requiredText:"sv_q_required_text"},error:{root:"sv_q_erbox",icon:"",item:"",locationTop:"sv_qstn_error_top",locationBottom:"sv_qstn_error_bottom"},boolean:{root:"sv_qcbc sv_qbln",rootRadio:"sv_qcbc sv_qbln",item:"sv-boolean",control:"sv-visuallyhidden",itemChecked:"sv-boolean--checked checked",itemIndeterminate:"sv-boolean--indeterminate",itemDisabled:"sv-boolean--disabled",switch:"sv-boolean__switch",slider:"sv-boolean__slider",label:"sv-boolean__label ",disabledLabel:"sv-boolean__label--disabled",sliderGhost:"sv-boolean__thumb-ghost",rootCheckbox:"sv_qcbc sv_qbln",checkboxItem:"sv-boolean",checkboxItemChecked:"sv-boolean--checked",controlCheckbox:"sv-visuallyvisible",checkboxControlLabel:"sv-boolean__label",checkboxItemIndeterminate:"sv-boolean--indeterminate",checkboxItemDisabled:"sv-item--disabled sv-boolean--disabled",checkboxMaterialDecorator:"sv-item__decorator sv-boolean__decorator",checkboxItemDecorator:"sv-item__svg sv-boolean__svg"},checkbox:{root:"sv_qcbc sv_qcbx",item:"sv_q_checkbox",itemSelectAll:"sv_q_checkbox_selectall",itemNone:"sv_q_checkbox_none",itemChecked:"checked",itemInline:"sv_q_checkbox_inline",label:"sv_q_checkbox_label",labelChecked:"",itemControl:"sv_q_checkbox_control_item",itemDecorator:"sv-hidden",controlLabel:"sv_q_checkbox_control_label",other:"sv_q_other sv_q_checkbox_other",column:"sv_q_select_column"},ranking:{root:"sv-ranking",rootMobileMod:"sv-ranking--mobile",rootDragMod:"sv-ranking--drag",rootDisabled:"sv-ranking--disabled",rootDragHandleAreaIcon:"sv-ranking--drag-handle-area-icon",rootSelectToRankMod:"sv-ranking--select-to-rank",rootSelectToRankAlignVertical:"sv-ranking--select-to-rank-vertical",rootSelectToRankAlignHorizontal:"sv-ranking--select-to-rank-horizontal",item:"sv-ranking-item",itemContent:"sv-ranking-item__content",itemIndex:"sv-ranking-item__index",itemIndexEmptyMode:"sv-ranking-item__index--empty",controlLabel:"sv-ranking-item__text",itemGhostNode:"sv-ranking-item__ghost",itemIconContainer:"sv-ranking-item__icon-container",itemIcon:"sv-ranking-item__icon",itemIconHoverMod:"sv-ranking-item__icon--hover",itemIconFocusMod:"sv-ranking-item__icon--focus",itemGhostMod:"sv-ranking-item--ghost",itemDragMod:"sv-ranking-item--drag",container:"sv-ranking__container",containerEmptyMode:"sv-ranking__container--empty",containerFromMode:"sv-ranking__container--from",containerToMode:"sv-ranking__container--to",containerPlaceholder:"sv-ranking__container-placeholder",containersDivider:"sv-ranking__containers-divider"},comment:{remainingCharacterCounter:"sv-remaining-character-counter"},dropdown:{root:"",popup:"sv-dropdown-popup",control:"sv_q_dropdown_control",controlInputFieldComponent:"sv_q_dropdown_control__input-field-component",selectWrapper:"sv_select_wrapper",other:"sv_q_dd_other",cleanButton:"sv_q_dropdown_clean-button",cleanButtonSvg:"sv_q_dropdown_clean-button-svg",cleanButtonIconId:"icon-clear_16x16",controlValue:"sv_q_dropdown__value",filterStringInput:"sv_q_dropdown__filter-string-input",hintPrefix:"sv_q_dropdown__hint-prefix",hintSuffix:"sv_q_dropdown__hint-suffix"},html:{root:""},image:{root:"sv_q_image",image:"sv_image_image",noImage:"sv-image__no-image",noImageSvgIconId:"icon-no-image"},matrix:{root:"sv_q_matrix",label:"sv_q_m_label",itemChecked:"checked",itemDecorator:"sv-hidden",cell:"sv_q_m_cell",cellText:"sv_q_m_cell_text",cellTextSelected:"sv_q_m_cell_selected",cellLabel:"sv_q_m_cell_label",cellResponsiveTitle:"sv_q_m_cell_responsive_title"},matrixdropdown:{root:"sv_q_matrix_dropdown",cell:"sv_matrix_cell",cellResponsiveTitle:"sv_matrix_cell_responsive_title",headerCell:"sv_matrix_cell_header",row:"sv_matrix_row",rowAdditional:"sv-matrix__row--additional",rowTextCell:"sv-table__cell--row-text",detailRow:"sv_matrix_detail_row",detailRowText:"sv_matrix_cell_detail_rowtext",detailCell:"sv_matrix_cell_detail",choiceCell:"sv-table__cell--choice",detailButton:"sv_matrix_cell_detail_button",detailButtonExpanded:"sv_matrix_cell_detail_button_expanded",detailIcon:"sv_detail_panel_icon",detailIconExpanded:"sv_detail_expanded",detailPanelCell:"sv_matrix_cell_detail_panel",actionsCell:"sv_matrix_cell sv_matrix_cell_actions"},matrixdynamic:{root:"sv_q_matrix_dynamic",button:"sv_matrix_dynamic_button",buttonAdd:"",buttonRemove:"",iconAdd:"",iconRemove:"",iconDrag:"sv-matrixdynamic__drag-icon",cell:"sv_matrix_cell",cellResponsiveTitle:"sv_matrix_cell_responsive_title",headerCell:"sv_matrix_cell_header",row:"sv_matrix_row",detailRow:"sv_matrix_detail_row",detailCell:"sv_matrix_cell_detail",choiceCell:"sv-table__cell--choice",detailButton:"sv_matrix_cell_detail_button",detailButtonExpanded:"sv_matrix_cell_detail_button_expanded",detailIcon:"sv_detail_panel_icon",detailIconExpanded:"sv_detail_expanded",detailPanelCell:"sv_matrix_cell_detail_panel",actionsCell:"sv_matrix_cell sv_matrix_cell_actions",emptyRowsSection:"sv_matrix_empty_rows_section",emptyRowsText:"sv_matrix_empty_rows_text",emptyRowsButton:"",ghostRow:"sv-matrix-row--drag-drop-ghost-mod"},paneldynamic:{root:"sv_panel_dynamic",title:"sv_p_title",header:"sv-paneldynamic__header sv_header",headerTab:"sv-paneldynamic__header-tab",button:"",buttonAdd:"sv-paneldynamic__add-btn",buttonRemove:"sv_p_remove_btn",buttonRemoveRight:"sv_p_remove_btn_right",buttonPrev:"sv-paneldynamic__prev-btn",buttonPrevDisabled:"sv-paneldynamic__prev-btn--disabled",buttonNextDisabled:"sv-paneldynamic__next-btn--disabled",buttonNext:"sv-paneldynamic__next-btn",progressContainer:"sv-paneldynamic__progress-container",progress:"sv-progress",progressBar:"sv-progress__bar",progressText:"sv-paneldynamic__progress-text",panelWrapper:"sv_p_wrapper",panelWrapperInRow:"sv_p_wrapper_in_row",footer:"",progressBtnIcon:"icon-progressbutton"},multipletext:{root:"sv_q_mt",itemTitle:"sv_q_mt_title",item:"sv_q_mt_item",row:"sv_q_mt_row",itemLabel:"sv_q_mt_label",itemValue:"sv_q_mt_item_value sv_q_text_root"},radiogroup:{root:"sv_qcbc",item:"sv_q_radiogroup",itemChecked:"checked",itemInline:"sv_q_radiogroup_inline",itemDecorator:"sv-hidden",label:"sv_q_radiogroup_label",labelChecked:"",itemControl:"sv_q_radiogroup_control_item",controlLabel:"",other:"sv_q_other sv_q_radiogroup_other",clearButton:"sv_q_radiogroup_clear",column:"sv_q_select_column"},buttongroup:{root:"sv-button-group",item:"sv-button-group__item",itemIcon:"sv-button-group__item-icon",itemDecorator:"sv-button-group__item-decorator",itemCaption:"sv-button-group__item-caption",itemHover:"sv-button-group__item--hover",itemSelected:"sv-button-group__item--selected",itemDisabled:"sv-button-group__item--disabled",itemControl:"sv-visuallyhidden"},imagepicker:{root:"sv_imgsel",item:"sv_q_imgsel",itemChecked:"checked",label:"sv_q_imgsel_label",itemControl:"sv_q_imgsel_control_item",image:"sv_q_imgsel_image",itemInline:"sv_q_imagepicker_inline",itemText:"sv_q_imgsel_text",clearButton:"sv_q_radiogroup_clear",column:"sv_q_select_column",itemNoImage:"sv_q_imgsel__no-image",itemNoImageSvgIcon:"sv_q_imgsel__no-image-svg",itemNoImageSvgIconId:"icon-no-image"},rating:{root:"sv_q_rating",item:"sv_q_rating_item",itemFixedSize:"sv_q_rating_item_fixed",selected:"active",minText:"sv_q_rating_min_text",itemText:"sv_q_rating_item_text",maxText:"sv_q_rating_max_text",itemStar:"sv_q_rating__item-star",itemStarSelected:"sv_q_rating__item-star--selected",itemSmiley:"sv_q_rating__item-smiley",itemSmileySelected:"sv_q_rating__item-smiley--selected"},text:{root:"sv_q_text_root",remainingCharacterCounter:"sv-remaining-character-counter"},expression:"",file:{root:"sv_q_file",placeholderInput:"sv-visuallyhidden",previewItem:"sv_q_file_preview",removeButton:"sv_q_file_remove_button",fileInput:"sv-visuallyhidden",removeFile:"sv_q_file_remove",fileDecorator:"sv-file__decorator",fileSign:"sv_q_file_sign",chooseFile:"sv_q_file_choose_button",noFileChosen:"sv_q_file_placeholder",dragAreaPlaceholder:"sv-hidden",fileList:""},signaturepad:{root:"sv_q_signaturepad sjs_sp_container",controls:"sjs_sp_controls",placeholder:"sjs_sp_placeholder",canvas:"sjs_sp_canvas",backgroundImage:"sjs_sp__background-image",clearButton:"sjs_sp_clear"},saveData:{root:"sv-save-data_root",rootWithButtons:"sv-save-data_root--with-buttons",info:"sv-save-data_info",error:"sv-save-data_error",success:"sv-save-data_success",button:"sv-save-data_button",shown:"sv-save-data_root--shown"},window:{root:"sv_window",rootCollapsedMod:"sv_window--collapsed",rootFullScreenMode:"sv_window--full-screen",rootContent:"sv_window_root-content",body:"sv_window_content",header:{root:"sv_window_header",titleCollapsed:"sv_window_header_title_collapsed",buttonsContainer:"sv_window_buttons_container",button:"sv_window_button",buttonExpanded:"",buttonCollapsed:"",collapseButton:"sv_window_button sv_window_button_collapse",closeButton:"sv_window_button sv_window_button_close",fullScreenButton:"sv_window_button sv_window_button_full_screen"}},variables:{mobileWidth:"--sv-mobile-width",themeMark:"--sv-default-mark"},tagbox:{root:"",popup:"sv-dropdown-popup",small:"sv_q_row__question--small",selectWrapper:"sv_select_wrapper sv_q_tagbox_wrapper",other:"sv_q_input sv_q_comment sv_q_selectbase__other",cleanButton:"sv_q_tagbox_clean-button sv_q_dropdown_clean-button",cleanButtonSvg:"sv_q_tagbox_clean-button-svg sv_q_dropdown_clean-button-svg",cleanButtonIconId:"icon-clear_16x16",cleanItemButton:"sv_q_tagbox-item_clean-button",cleanItemButtonSvg:"sv_q_tagbox-item_clean-button-svg",cleanItemButtonIconId:"icon-clear_16x16",control:"sv_q_input sv_q_tagbox sv_q_dropdown_control",controlValue:"sv_q_tagbox__value sv_q_dropdown__value",controlEmpty:"sv_q_dropdown--empty sv_q_tagbox--empty",placeholderInput:"sv_q_tagbox__placeholder",filterStringInput:"sv_q_tagbox__filter-string-input sv_q_dropdown__filter-string-input",hint:"sv_q_tagbox__hint",hintPrefix:"sv_q_dropdown__hint-prefix sv_q_tagbox__hint-prefix",hintSuffix:"sv_q_dropdown__hint-suffix sv_q_tagbox__hint-suffix",hintSuffixWrapper:"sv_q_tagbox__hint-suffix-wrapper"}};oe.default=ze,oe.orange=ze,oe.darkblue=ze,oe.darkrose=ze,oe.stone=ze,oe.winter=ze,oe.winterstone=ze;var Fs={root:"sv-root-modern",rootProgress:"sv-progress",timerRoot:"sv-body__timer",container:"sv-container-modern",header:"sv-title sv-container-modern__title",headerClose:"sv-container-modern__close",bodyContainer:"sv-components-row",body:"sv-body",bodyEmpty:"sv-body sv-body--empty",footer:"sv-footer sv-body__footer sv-clearfix",title:"",description:"",logo:"sv-logo",logoImage:"sv-logo__image",headerText:"sv-header__text",navigationButton:"sv-btn sv-btn--navigation",completedPage:"sv-completedpage",navigation:{complete:"sv-footer__complete-btn",prev:"sv-footer__prev-btn",next:"sv-footer__next-btn",start:"sv-footer__start-btn",preview:"sv-footer__preview-btn",edit:"sv-footer__edit-btn"},panel:{title:"sv-title sv-panel__title",titleExpandable:"sv-panel__title--expandable",titleExpanded:"sv-panel__title--expanded",titleCollapsed:"sv-panel__title--collapsed",titleOnError:"sv-panel__title--error",description:"sv-description sv-panel__description",container:"sv-panel sv-row__panel",content:"sv-panel__content",icon:"sv-panel__icon",iconExpanded:"sv-panel__icon--expanded",footer:"sv-panel__footer",requiredText:"sv-panel__required-text",number:"sv-question__num"},paneldynamic:{root:"sv-paneldynamic",navigation:"sv-paneldynamic__navigation",title:"sv-title sv-question__title",button:"sv-btn",buttonRemove:"sv-paneldynamic__remove-btn",buttonRemoveRight:"sv-paneldynamic__remove-btn--right",buttonAdd:"sv-paneldynamic__add-btn",progressTop:"sv-paneldynamic__progress sv-paneldynamic__progress--top",progressBottom:"sv-paneldynamic__progress sv-paneldynamic__progress--bottom",buttonPrev:"sv-paneldynamic__prev-btn",buttonNext:"sv-paneldynamic__next-btn",buttonPrevDisabled:"sv-paneldynamic__prev-btn--disabled",buttonNextDisabled:"sv-paneldynamic__next-btn--disabled",progressContainer:"sv-paneldynamic__progress-container",progress:"sv-progress",progressBar:"sv-progress__bar",progressText:"sv-paneldynamic__progress-text",separator:"sv-paneldynamic__separator",panelWrapper:"sv-paneldynamic__panel-wrapper",panelWrapperInRow:"sv-paneldynamic__panel-wrapper--in-row",progressBtnIcon:"icon-progressbutton",footer:""},progress:"sv-progress sv-body__progress",progressBar:"sv-progress__bar",progressText:"sv-progress__text",progressTextInBar:"sv-hidden",progressButtonsContainerCenter:"sv_progress-buttons__container-center",progressButtonsContainer:"sv_progress-buttons__container",progressButtonsImageButtonLeft:"sv_progress-buttons__image-button-left",progressButtonsImageButtonRight:"sv_progress-buttons__image-button-right",progressButtonsImageButtonHidden:"sv_progress-buttons__image-button--hidden",progressButtonsListContainer:"sv_progress-buttons__list-container",progressButtonsList:"sv_progress-buttons__list",progressButtonsListElementPassed:"sv_progress-buttons__list-element--passed",progressButtonsListElementCurrent:"sv_progress-buttons__list-element--current",progressButtonsListElementNonClickable:"sv_progress-buttons__list-element--nonclickable",progressButtonsPageTitle:"sv_progress-buttons__page-title",progressButtonsPageDescription:"sv_progress-buttons__page-description",page:{root:"sv-page sv-body__page",title:"sv-title sv-page__title",description:"sv-description sv-page__description"},pageTitle:"sv-title sv-page__title",pageDescription:"sv-description sv-page__description",row:"sv-row sv-clearfix",question:{mainRoot:"sv-question sv-row__question",flowRoot:"sv-question sv-row__question sv-row__question--flow",asCell:"sv-table__cell",header:"sv-question__header",headerLeft:"sv-question__header--location--left",headerTop:"sv-question__header--location--top",headerBottom:"sv-question__header--location--bottom",content:"sv-question__content",contentLeft:"sv-question__content--left",titleLeftRoot:"",answered:"sv-question--answered",titleOnAnswer:"sv-question__title--answer",titleOnError:"sv-question__title--error",title:"sv-title sv-question__title",titleExpandable:"sv-question__title--expandable",titleExpanded:"sv-question__title--expanded",titleCollapsed:"sv-question__title--collapsed",icon:"sv-question__icon",iconExpanded:"sv-question__icon--expanded",requiredText:"sv-question__required-text",number:"sv-question__num",description:"sv-description sv-question__description",descriptionUnderInput:"sv-description sv-question__description",comment:"sv-comment",required:"sv-question--required",titleRequired:"sv-question__title--required",indent:20,footer:"sv-question__footer",formGroup:"sv-question__form-group",hasError:"",disabled:"sv-question--disabled"},image:{root:"sv-image",image:"sv_image_image"},error:{root:"sv-question__erbox",icon:"",item:"",locationTop:"sv-question__erbox--location--top",locationBottom:"sv-question__erbox--location--bottom"},checkbox:{root:"sv-selectbase",item:"sv-item sv-checkbox sv-selectbase__item",itemSelectAll:"sv-checkbox--selectall",itemNone:"sv-checkbox--none",itemDisabled:"sv-item--disabled sv-checkbox--disabled",itemChecked:"sv-checkbox--checked",itemHover:"sv-checkbox--allowhover",itemInline:"sv-selectbase__item--inline",label:"sv-selectbase__label",labelChecked:"",itemControl:"sv-visuallyhidden sv-item__control",itemDecorator:"sv-item__svg sv-checkbox__svg",itemSvgIconId:"#icon-moderncheck",controlLabel:"sv-item__control-label",materialDecorator:"sv-item__decorator sv-selectbase__decorator sv-checkbox__decorator",other:"sv-comment sv-question__other",column:"sv-selectbase__column"},ranking:{root:"sv-ranking",rootMobileMod:"sv-ranking--mobile",rootDragMod:"sv-ranking--drag",rootDisabled:"sv-ranking--disabled",rootDragHandleAreaIcon:"sv-ranking--drag-handle-area-icon",rootSelectToRankMod:"sv-ranking--select-to-rank",rootSelectToRankAlignVertical:"sv-ranking--select-to-rank-vertical",rootSelectToRankAlignHorizontal:"sv-ranking--select-to-rank-horizontal",item:"sv-ranking-item",itemContent:"sv-ranking-item__content",itemIndex:"sv-ranking-item__index",itemIndexEmptyMode:"sv-ranking-item__index--empty",controlLabel:"sv-ranking-item__text",itemGhostNode:"sv-ranking-item__ghost",itemIconContainer:"sv-ranking-item__icon-container",itemIcon:"sv-ranking-item__icon",itemIconHoverMod:"sv-ranking-item__icon--hover",itemIconFocusMod:"sv-ranking-item__icon--focus",itemGhostMod:"sv-ranking-item--ghost",itemDragMod:"sv-ranking-item--drag",container:"sv-ranking__container",containerEmptyMode:"sv-ranking__container--empty",containerFromMode:"sv-ranking__container--from",containerToMode:"sv-ranking__container--to",containerPlaceholder:"sv-ranking__container-placeholder",containersDivider:"sv-ranking__containers-divider"},radiogroup:{root:"sv-selectbase",item:"sv-item sv-radio sv-selectbase__item",itemInline:"sv-selectbase__item--inline",label:"sv-selectbase__label",labelChecked:"",itemDisabled:"sv-item--disabled sv-radio--disabled",itemChecked:"sv-radio--checked",itemHover:"sv-radio--allowhover",itemControl:"sv-visuallyhidden sv-item__control",itemDecorator:"sv-item__svg sv-radio__svg",itemSvgIconId:"#icon-modernradio",controlLabel:"sv-item__control-label",materialDecorator:"sv-item__decorator sv-selectbase__decorator sv-radio__decorator",other:"sv-comment sv-question__other",clearButton:"sv-btn sv-selectbase__clear-btn",column:"sv-selectbase__column"},buttongroup:{root:"sv-button-group",item:"sv-button-group__item",itemIcon:"sv-button-group__item-icon",itemDecorator:"sv-button-group__item-decorator",itemCaption:"sv-button-group__item-caption",itemSelected:"sv-button-group__item--selected",itemHover:"sv-button-group__item--hover",itemDisabled:"sv-button-group__item--disabled",itemControl:"sv-visuallyhidden"},boolean:{root:"sv_qbln",rootRadio:"sv_qbln",small:"sv-row__question--small",item:"sv-boolean sv-item",control:"sv-visuallyhidden",itemChecked:"sv-boolean--checked",itemIndeterminate:"sv-boolean--indeterminate",itemDisabled:"sv-item--disabled sv-boolean--disabled",switch:"sv-boolean__switch",slider:"sv-boolean__slider",label:"sv-boolean__label",disabledLabel:"sv-boolean__label--disabled",sliderGhost:"sv-boolean__thumb-ghost",rootCheckbox:"sv_qbln",checkboxItem:"sv-boolean sv-item",checkboxItemChecked:"sv-boolean--checked",controlCheckbox:"sv-visuallyhidden",checkboxControlLabel:"sv-boolean__label",checkboxItemIndeterminate:"sv-boolean--indeterminate",checkboxItemDisabled:"sv-item--disabled sv-boolean--disabled",checkboxMaterialDecorator:"sv-item__decorator sv-boolean__decorator ",checkboxItemDecorator:"sv-item__svg  sv-boolean__svg",indeterminatePath:"sv-boolean__indeterminate-path",svgIconCheckedId:"#icon-modernbooleancheckchecked",svgIconUncheckedId:"#icon-modernbooleancheckunchecked",svgIconIndId:"#icon-modernbooleancheckind"},text:{root:"sv-text",small:"sv-row__question--small",remainingCharacterCounter:"sv-remaining-character-counter",onError:"sv-text--error"},multipletext:{root:"sv-multipletext",item:"sv-multipletext__item",itemLabel:"sv-multipletext__item-label",itemTitle:"sv-multipletext__item-title",row:"sv-multipletext__row",cell:"sv-multipletext__cell"},dropdown:{root:"",popup:"sv-dropdown-popup",small:"sv-row__question--small",control:"sv-dropdown",selectWrapper:"",other:"sv-comment sv-question__other",onError:"sv-dropdown--error",cleanButton:"sv-dropdown_clean-button",cleanButtonSvg:"sv-dropdown_clean-button-svg",cleanButtonIconId:"icon-clear_16x16",filterStringInput:"sv-dropdown__filter-string-input",controlValue:"sv-dropdown__value",controlInputFieldComponent:"sv_dropdown_control__input-field-component",hintPrefix:"sv-dropdown__hint-prefix",hintSuffix:"sv-dropdown__hint-suffix"},tagbox:{root:"",popup:"sv-dropdown-popup",small:"sv-row__question--small",selectWrapper:"sv_select_wrapper sv-tagbox_wrapper",other:"sv-input sv-comment sv-selectbase__other",cleanButton:"sv-tagbox_clean-button sv-dropdown_clean-button",cleanButtonSvg:"sv-tagbox_clean-button-svg sv-dropdown_clean-button-svg",cleanButtonIconId:"icon-clear_16x16",cleanItemButton:"sv-tagbox__item_clean-button",cleanItemButtonSvg:"sv-tagbox__item_clean-button-svg",cleanItemButtonIconId:"icon-clear_16x16",control:"sv-input sv-tagbox sv-dropdown",controlValue:"sv-tagbox__value sv-dropdown__value",controlEmpty:"sv-dropdown--empty sv-tagbox--empty",placeholderInput:"sv-tagbox__placeholder",filterStringInput:"sv-tagbox__filter-string-input sv-dropdown__filter-string-input"},imagepicker:{root:"sv-selectbase sv-imagepicker",column:"sv-selectbase__column",item:"sv-imagepicker__item",itemInline:"sv-imagepicker__item--inline",itemChecked:"sv-imagepicker__item--checked",itemDisabled:"sv-imagepicker__item--disabled",itemHover:"sv-imagepicker__item--allowhover",label:"sv-imagepicker__label",itemControl:"sv-imagepicker__control sv-visuallyhidden",image:"sv-imagepicker__image",itemText:"sv-imagepicker__text",clearButton:"sv-btn",other:"sv-comment sv-question__other"},matrix:{tableWrapper:"sv-matrix",root:"sv-table sv-matrix-root",rowError:"sv-matrix__row--error",cell:"sv-table__cell sv-matrix__cell",headerCell:"sv-table__cell sv-table__cell--header",label:"sv-item sv-radio sv-matrix__label",itemValue:"sv-visuallyhidden sv-item__control sv-radio__control",itemChecked:"sv-radio--checked",itemDisabled:"sv-item--disabled sv-radio--disabled",itemHover:"sv-radio--allowhover",materialDecorator:"sv-item__decorator sv-radio__decorator",itemDecorator:"sv-item__svg sv-radio__svg",cellText:"sv-matrix__text",cellTextSelected:"sv-matrix__text--checked",cellTextDisabled:"sv-matrix__text--disabled",cellResponsiveTitle:"sv-matrix__cell-responsive-title",itemSvgIconId:"#icon-modernradio"},matrixdropdown:{root:"sv-table sv-matrixdropdown",cell:"sv-table__cell",cellResponsiveTitle:"sv-table__responsive-title",headerCell:"sv-table__cell sv-table__cell--header",row:"sv-table__row",rowTextCell:"sv-table__cell--row-text",rowAdditional:"sv-table__row--additional",detailRow:"sv-table__row--detail",detailRowText:"sv-table__cell--detail-rowtext",detailCell:"sv-table__cell--detail",choiceCell:"sv-table__cell--choice",detailButton:"sv-table__cell--detail-button",detailButtonExpanded:"sv-table__cell--detail-button--expanded",detailIcon:"sv-detail-panel__icon",detailIconExpanded:"sv-detail-panel__icon--expanded",detailPanelCell:"sv-table__cell--detail-panel",actionsCell:"sv-table__cell sv-table__cell--actions"},matrixdynamic:{root:"sv-table sv-matrixdynamic",cell:"sv-table__cell",cellResponsiveTitle:"sv-table__responsive-title",headerCell:"sv-table__cell sv-table__cell--header",button:"sv-btn",buttonAdd:"sv-matrixdynamic__add-btn",buttonRemove:"sv-matrixdynamic__remove-btn",iconAdd:"",iconRemove:"",iconDrag:"sv-matrixdynamic__drag-icon",row:"sv-table__row",detailRow:"sv-table__row--detail",detailCell:"sv-table__cell--detail",choiceCell:"sv-table__cell--choice",detailButton:"sv-table__cell--detail-button",detailButtonExpanded:"sv-table__cell--detail-button--expanded",detailIcon:"sv-detail-panel__icon",detailIconExpanded:"sv-detail-panel__icon--expanded",detailPanelCell:"sv-table__cell--detail-panel",actionsCell:"sv-table__cell sv-table__cell--actions",emptyRowsSection:"sv-table__empty--rows--section",emptyRowsText:"sv-table__empty--rows--text",emptyRowsButton:"",ghostRow:"sv-matrix-row--drag-drop-ghost-mod"},rating:{root:"sv-rating",item:"sv-rating__item",selected:"sv-rating__item--selected",minText:"sv-rating__min-text",itemText:"sv-rating__item-text",maxText:"sv-rating__max-text",itemDisabled:"sv-rating--disabled",filterStringInput:"sv-dropdown__filter-string-input",control:"sv-dropdown",cleanButton:"sv-dropdown_clean-button",cleanButtonSvg:"sv-dropdown_clean-button-svg",cleanButtonIconId:"icon-clear_16x16",controlValue:"sv-dropdown__value",controlInputFieldComponent:"sv_dropdown_control__input-field-component",itemSmiley:"sv-rating__item-smiley",itemStar:"sv-rating__item-star",itemSmileySelected:"sv-rating__item-smiley--selected",itemStarSelected:"sv-rating__item-star--selected"},comment:{root:"sv-comment",small:"sv-row__question--small",remainingCharacterCounter:"sv-remaining-character-counter"},expression:"",file:{root:"sv-file",other:"sv-comment sv-question__other",placeholderInput:"sv-visuallyhidden",previewItem:"sd-file__preview-item",fileSignBottom:"sv-file__sign",fileDecorator:"sv-file__decorator",fileInput:"sv-visuallyhidden",noFileChosen:"sv-description sv-file__no-file-chosen",chooseFile:"sv-btn sv-file__choose-btn",controlDisabled:"sv-file__choose-btn--disabled",removeButton:"sv-hidden",removeButtonBottom:"sv-btn sv-file__clean-btn",removeFile:"sv-hidden",removeFileSvg:"sv-file__remove-svg",removeFileSvgIconId:"icon-removefile",wrapper:"sv-file__wrapper",dragAreaPlaceholder:"sv-hidden",fileList:""},signaturepad:{root:"sv-signaturepad sjs_sp_container",small:"sv-row__question--small",controls:"sjs_sp_controls",placeholder:"sjs_sp_placeholder",canvas:"sjs_sp_canvas",backgroundImage:"sjs_sp__background-image",clearButton:"sjs_sp_clear"},saveData:{root:"sv-save-data_root",rootWithButtons:"sv-save-data_root--with-buttons",info:"sv-save-data_info",error:"sv-save-data_error",success:"sv-save-data_success",button:"sv-save-data_button",shown:"sv-save-data_root--shown"},window:{root:"sv_window",rootCollapsedMod:"sv_window--collapsed",rootFullScreenMode:"sv_window--full-screen",rootContent:"sv_window_root-content",body:"sv_window_content",header:{root:"sv_window_header",titleCollapsed:"sv_window_header_title_collapsed",buttonsContainer:"sv_window_buttons_container",button:"sv_window_button",buttonExpanded:"",buttonCollapsed:"",collapseButton:"sv_window_button sv_window_button_collapse",closeButton:"sv_window_button sv_window_button_close",fullScreenButton:"sv_window_button sv_window_button_full_screen"}},variables:{mobileWidth:"--sv-mobile-width",themeMark:"--sv-modern-mark"}};oe.modern=Fs;var Ns=function(){function i(){this.icons={},this.iconPrefix="icon-"}return i.prototype.processId=function(t,e){return t.indexOf(e)==0&&(t=t.substring(e.length)),t},i.prototype.registerIconFromSymbol=function(t,e){this.icons[t]=e},i.prototype.registerIconFromSvgViaElement=function(t,e,r){if(r===void 0&&(r=this.iconPrefix),!!D.isAvailable()){t=this.processId(t,r);var n=D.createElement("div");n.innerHTML=e;var o=D.createElement("symbol"),s=n.querySelector("svg");o.innerHTML=s.innerHTML;for(var a=0;a<s.attributes.length;a++)o.setAttributeNS("http://www.w3.org/2000/svg",s.attributes[a].name,s.attributes[a].value);o.id=r+t,this.registerIconFromSymbol(t,o.outerHTML)}},i.prototype.registerIconFromSvg=function(t,e,r){r===void 0&&(r=this.iconPrefix),t=this.processId(t,r);var n="<svg ",o="</svg>";e=e.trim();var s=e.toLowerCase();return s.substring(0,n.length)===n&&s.substring(s.length-o.length,s.length)===o?(this.registerIconFromSymbol(t,'<symbol id="'+r+t+'" '+e.substring(n.length,s.length-o.length)+"</symbol>"),!0):!1},i.prototype.registerIconsFromFolder=function(t){var e=this;t.keys().forEach(function(r){e.registerIconFromSvg(r.substring(2,r.length-4).toLowerCase(),t(r))})},i.prototype.iconsRenderedHtml=function(){var t=this;return Object.keys(this.icons).map(function(e){return t.icons[e]}).join("")},i}(),Zn=new Ns,lp,up=m("./packages/survey-core/src/images sync \\.svg$"),cp=m("./packages/survey-core/src/images/smiley sync \\.svg$");Zn.registerIconsFromFolder(up),Zn.registerIconsFromFolder(cp)}})})})(Lh);export{Lh as s};
