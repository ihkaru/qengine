import{r as l,t as I,d as S,S as b,N as B,u as h,c as z,e as O,f as E,p as T,o as M,U as v}from"./index.04e22568.js";const w=Symbol(),u=l(!1),c=l(!1),y=l(!1),d=l(0);let r=null;const P=()=>{const t=document.createElement("script");return t.src="https://accounts.google.com/gsi/client",t.async=!0,t.defer=!0,t},U=()=>{c.value=!0,r=P(),document.head.appendChild(r),r.onload=()=>{c.value=!1,u.value=!0},r.onerror=()=>{c.value=!1,y.value=!0}};I(()=>d.value,(t,n)=>{t>0&&!u.value&&!c.value&&U()});function N(){return M(()=>{d.value++}),h(()=>{d.value--}),{scriptLoaded:v(u),scriptLoadError:v(y)}}const j=S({__name:"GoogleSignInButton",props:{oneTap:{type:Boolean},autoSelect:{type:Boolean},loginUri:{},cancelOnTapOutside:{type:Boolean},promptParentId:{},nonce:{},context:{},stateCookieDomain:{},uxMode:{},allowedParentOrigin:{},itpSupport:{type:Boolean},type:{},theme:{},size:{},text:{},shape:{},logoAlignment:{},width:{},locale:{}},emits:["success","error","intermediateIframeCloseCallback","nativeCallback","promptMomentNotification"],setup(t,{emit:n}){const s={large:40,medium:32,small:20},e=t,o=n,k=b(w),m=l(null),{scriptLoaded:x}=N();B(()=>{var a,p,g,_;x.value&&((a=window.google)==null||a.accounts.id.initialize({client_id:k,callback:i=>{if(!i.credential){o("error");return}o("success",i)},allowed_parent_origin:e.allowedParentOrigin,auto_select:e.autoSelect,cancel_on_tap_outside:e.cancelOnTapOutside,context:e.context,intermediate_iframe_close_callback:()=>{o("intermediateIframeCloseCallback")},itp_support:e.itpSupport,login_uri:e.loginUri,native_callback:i=>{o("nativeCallback",i)},nonce:e.nonce,prompt_parent_id:e.promptParentId,state_cookie_domain:e.stateCookieDomain,ux_mode:e.uxMode}),(g=window.google)==null||g.accounts.id.renderButton(m.value,{type:e.type,theme:e.theme,size:e.size,text:e.text,shape:e.shape,logo_alignment:e.logoAlignment,width:(p=e.width)==null?void 0:p.toString(),locale:e.locale}),e.oneTap&&((_=window.google)==null||_.accounts.id.prompt(i=>{o("promptMomentNotification",i)})))}),h(()=>{var a;e.oneTap&&((a=window.google)==null||a.accounts.id.cancel())});const C=z(()=>s[e.size||"large"]);return(a,p)=>(O(),E("div",{ref_key:"targetElement",ref:m,style:T({display:"inline-flex",height:C.value})},null,4))}});function L(t){const n=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(window.atob(n).split("").map(o=>`%${("00"+o.charCodeAt(0).toString(16)).slice(-2)}`).join("")),e=JSON.parse(s);return{email:e.email,email_verified:e.email_verified,hd:e.hd,family_name:e.family_name,given_name:e.given_name,name:e.name,picture:e.picture,id:e.sub,iat:e.iat,exp:e.exp}}const A="GoogleSignInPlugin",f=t=>`[${A}]: ${t}`,$={install(t,n){if(!n)throw new Error(f("initialize plugin by passing an options object"));if(!n.clientId||n.clientId&&n.clientId.trim().length===0)throw new Error(f("clientId is required to initialize"));t.provide(w,n.clientId),t.component("GoogleSignInButton",j)}};export{L as _,$ as m,j as o};
