import{c as i,Z as q,af as j,a0 as M,bx as Q,a9 as b,ap as T,b6 as N,a8 as F,O as A,aL as J,aN as z,r as C,by as E,aR as H,ak as D,a7 as W,ai as x,aa as X,b0 as B}from"./index.6100804f.js";import{u as Y,a as Z}from"./useUtils.9eec867d.js";import{u as G}from"./useSyncService.2b6924ae.js";const K=["top","right","bottom","left"],$={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>K.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function R(e,t){return{formClass:i(()=>`q-fab--form-${e.square===!0?"square":"rounded"}`),stacked:i(()=>e.externalLabel===!1&&["top","bottom"].includes(e.labelPosition)),labelProps:i(()=>{if(e.externalLabel===!0){const l=e.hideLabel===null?t.value===!1:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${e.labelPosition}`+(l===!0?" q-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${e.labelPosition}`+(e.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:e.labelStyle}}})}}const V={start:"self-end",center:"self-center",end:"self-start"},ee=Object.keys(V);var be=q({name:"QFabAction",props:{...$,icon:{type:String,default:""},anchor:{type:String,validator:e=>ee.includes(e)},to:[String,Object],replace:Boolean},emits:["click"],setup(e,{slots:t,emit:l}){const n=j(Q,()=>({showing:{value:!0},onChildClick:M})),{formClass:r,labelProps:f}=R(e,n.showing),v=i(()=>{const a=V[e.anchor];return r.value+(a!==void 0?` ${a}`:"")}),h=i(()=>e.disable===!0||n.showing.value!==!0);function m(a){n.onChildClick(a),l("click",a)}function y(){const a=[];return t.icon!==void 0?a.push(t.icon()):e.icon!==""&&a.push(b(N,{name:e.icon})),(e.label!==""||t.label!==void 0)&&a[f.value.action](b("div",f.value.data,t.label!==void 0?t.label():[e.label])),F(t.default,a)}const o=A();return Object.assign(o.proxy,{click:m}),()=>b(T,{class:v.value,...e,noWrap:!0,stack:e.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:h.value,onClick:m},y)}});const te=["up","right","down","left"],ae=["left","center","right"];var ge=q({name:"QFab",props:{...$,...J,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{...$.hideLabel,default:null},direction:{type:String,default:"right",validator:e=>te.includes(e)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>ae.includes(e)}},emits:z,setup(e,{slots:t}){const l=C(null),n=C(e.modelValue===!0),r=E(),{proxy:{$q:f}}=A(),{formClass:v,labelProps:h}=R(e,n),m=i(()=>e.persistent!==!0),{hide:y,toggle:o}=H({showing:n,hideOnRouteChange:m}),a=i(()=>({opened:n.value})),c=i(()=>`q-fab z-fab row inline justify-center q-fab--align-${e.verticalActionsAlign} ${v.value}`+(n.value===!0?" q-fab--opened":" q-fab--closed")),d=i(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${e.direction} q-fab__actions--${n.value===!0?"opened":"closed"}`),p=i(()=>{const g={id:r.value,role:"menu"};return n.value!==!0&&(g["aria-hidden"]="true"),g}),u=i(()=>`q-fab__icon-holder  q-fab__icon-holder--${n.value===!0?"opened":"closed"}`);function _(g,O){const U=t[g],w=`q-fab__${g} absolute-full`;return U===void 0?b(N,{class:w,name:e[O]||f.iconSet.fab[O]}):b("div",{class:w},U(a.value))}function P(){const g=[];return e.hideIcon!==!0&&g.push(b("div",{class:u.value},[_("icon","icon"),_("active-icon","activeIcon")])),(e.label!==""||t.label!==void 0)&&g[h.value.action](b("div",h.value.data,t.label!==void 0?t.label(a.value):[e.label])),F(t.tooltip,g)}return W(Q,{showing:n,onChildClick(g){y(g),l.value!==null&&l.value.$el.focus()}}),()=>b("div",{class:c.value},[b(T,{ref:l,class:v.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":n.value===!0?"true":"false","aria-haspopup":"true","aria-controls":r.value,onClick:o},P),b("div",{class:d.value,...p.value},D(t.default))])}});const ne={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},expand:Boolean};function le(){const{props:e,proxy:{$q:t}}=A(),l=j(X,x);if(l===x)return console.error("QPageSticky needs to be child of QLayout"),x;const n=i(()=>{const a=e.position;return{top:a.indexOf("top")!==-1,right:a.indexOf("right")!==-1,bottom:a.indexOf("bottom")!==-1,left:a.indexOf("left")!==-1,vertical:a==="top"||a==="bottom",horizontal:a==="left"||a==="right"}}),r=i(()=>l.header.offset),f=i(()=>l.right.offset),v=i(()=>l.footer.offset),h=i(()=>l.left.offset),m=i(()=>{let a=0,c=0;const d=n.value,p=t.lang.rtl===!0?-1:1;d.top===!0&&r.value!==0?c=`${r.value}px`:d.bottom===!0&&v.value!==0&&(c=`${-v.value}px`),d.left===!0&&h.value!==0?a=`${p*h.value}px`:d.right===!0&&f.value!==0&&(a=`${-p*f.value}px`);const u={transform:`translate(${a}, ${c})`};return e.offset&&(u.margin=`${e.offset[1]}px ${e.offset[0]}px`),d.vertical===!0?(h.value!==0&&(u[t.lang.rtl===!0?"right":"left"]=`${h.value}px`),f.value!==0&&(u[t.lang.rtl===!0?"left":"right"]=`${f.value}px`)):d.horizontal===!0&&(r.value!==0&&(u.top=`${r.value}px`),v.value!==0&&(u.bottom=`${v.value}px`)),u}),y=i(()=>`q-page-sticky row flex-center fixed-${e.position} q-page-sticky--${e.expand===!0?"expand":"shrink"}`);function o(a){const c=D(a.default);return b("div",{class:y.value,style:m.value},e.expand===!0?c:[b("div",c)])}return{$layout:l,getStickyContent:o}}var fe=q({name:"QPageSticky",props:ne,setup(e,{slots:t}){const{getStickyContent:l}=le();return()=>l(t)}}),s=[];for(var k=0;k<256;++k)s.push((k+256).toString(16).slice(1));function ie(e,t=0){return(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase()}var S,oe=new Uint8Array(16);function se(){if(!S&&(S=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!S))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return S(oe)}var re=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),I={randomUUID:re};function L(e,t,l){if(I.randomUUID&&!t&&!e)return I.randomUUID();e=e||{};var n=e.random||(e.rng||se)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){l=l||0;for(var r=0;r<16;++r)t[l+r]=n[r];return t}return ie(n)}function ve(){const e=Y(),t=Z(),l=G(),n=C(null);return{canTambahAssignment:async o=>o.user.id==o.organisasi.pencacah_id,saveAssignmentToLocal:async o=>{console.log("assignment",o),await l.addAssignment(o)},addNewAssignment:async(o,a,c,d)=>{console.log("surveyData",d);const p=L(),u=t.dayjs(),_={id:p,kegiatan_id:a.kegiatan.id,template_id:a.template.id,provinsi_id:c.prov_id,kabkot_id:c.kabkot_id,kecamatan_id:c.kec_id,desa_id:c.desa_kel_id,sls_id:c.sls_id,bs_id:c.bs_id,last_riwayat_status:e.STATUS_OPEN,terakhir_diisi:u,data:JSON.stringify(d==null?void 0:d.data),latitude:null,longitude:null,jumlah_blank:null,jumlah_error:null,jumlah_warning:null,jumlah_terisi:null,created_at:u,updated_at:u};return{id:L(),pencacah_id:a.organisasi.pencacah_id,responden_id:p,kegiatan_id:a.kegiatan.id,created_at:u,updated_at:u,respondens:_}},editAssignment:async(o,a)=>(a.respondens.data=JSON.stringify(o.data),a),getSelectedSurveyData:async()=>(Boolean(n.value)||(n.value=JSON.parse(await B.getItem("selectedSurveyData"))),n.value),setSelectedSurveyData:async o=>{await B.setItem("selectedSurveyData",JSON.stringify(o)),n.value=o}}}export{ge as Q,be as a,fe as b,ve as u};
